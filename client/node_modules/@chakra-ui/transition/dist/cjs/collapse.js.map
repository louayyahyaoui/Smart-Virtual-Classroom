{"version":3,"sources":["../../src/collapse.tsx"],"names":["hasHeightValue","value","parseInt","toString","variants","exit","props","animateOpacity","opacity","startingHeight","height","transition","duration","ease","EASINGS","enter","endingHeight","Collapse","React","forwardRef","ref","isOpen","unmountOnExit","style","className","onAnimationComplete","rest","fromZeroHeight","useState","open","setOpen","getInitialHidden","hidden","display","setDisplay","custom","ownProps","definition","overflow","__DEV__","displayName"],"mappings":";;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;AAIA,IAAMA,cAAc,GAAG,SAAjBA,cAAiB,CAACC,KAAD;AAAA,SACrBA,KAAK,IAAI,IAAT,IAAiBC,QAAQ,CAACD,KAAK,CAACE,QAAN,EAAD,EAAmB,EAAnB,CAAR,GAAiC,CAD7B;AAAA,CAAvB;;AAGA,IAAMC,QAA0B,GAAG;AACjCC,EAAAA,IAAI,EAAE,cAACC,KAAD;AAAA,wBACAA,KAAK,CAACC,cAAN,IAAwB;AAC1BC,MAAAA,OAAO,EAAER,cAAc,CAACM,KAAK,CAACG,cAAP,CAAd,GAAuC,CAAvC,GAA2C;AAD1B,KADxB;AAIJC,MAAAA,MAAM,EAAEJ,KAAK,CAACG,cAJV;AAKJE,MAAAA,UAAU,EAAE;AACVD,QAAAA,MAAM,EAAE;AAAEE,UAAAA,QAAQ,EAAE,GAAZ;AAAiBC,UAAAA,IAAI,EAAEC,gBAAQD;AAA/B,SADE;AAEVL,QAAAA,OAAO,EAAE;AAAEI,UAAAA,QAAQ,EAAE,GAAZ;AAAiBC,UAAAA,IAAI,EAAEC,gBAAQD;AAA/B;AAFC;AALR;AAAA,GAD2B;AAWjCE,EAAAA,KAAK,EAAE,eAACT,KAAD;AAAA,wBACDA,KAAK,CAACC,cAAN,IAAwB;AAC1BC,MAAAA,OAAO,EAAE;AADiB,KADvB;AAILE,MAAAA,MAAM,EAAEJ,KAAK,CAACU,YAJT;AAKLL,MAAAA,UAAU,EAAE;AACVD,QAAAA,MAAM,EAAE;AACNE,UAAAA,QAAQ,EAAE,GADJ;AAENC,UAAAA,IAAI,EAAEC,gBAAQD;AAFR,SADE;AAKVL,QAAAA,OAAO,EAAE;AACPI,UAAAA,QAAQ,EAAE,GADH;AAEPC,UAAAA,IAAI,EAAEC,gBAAQD;AAFP;AALC;AALP;AAAA;AAX0B,CAAnC;AA+DO,IAAMI,QAAQ,gBAAGC,KAAK,CAACC,UAAN,CACtB,UAACb,KAAD,EAAQc,GAAR,EAAgB;AAAA,MAERC,MAFQ,GAWVf,KAXU;AAAA,MAGZgB,aAHY,GAWVhB,KAXU,CAGZgB,aAHY;AAAA,8BAWVhB,KAXU,CAIZC,cAJY;AAAA,MAIZA,cAJY,sCAIK,IAJL;AAAA,8BAWVD,KAXU,CAKZG,cALY;AAAA,MAKZA,cALY,sCAKK,CALL;AAAA,4BAWVH,KAXU,CAMZU,YANY;AAAA,MAMZA,YANY,oCAMG,MANH;AAAA,MAOZO,KAPY,GAWVjB,KAXU,CAOZiB,KAPY;AAAA,MAQZC,SARY,GAWVlB,KAXU,CAQZkB,SARY;AAAA,MASZC,oBATY,GAWVnB,KAXU,CASZmB,mBATY;AAAA,MAUTC,IAVS,iCAWVpB,KAXU;;AAad,MAAMqB,cAAc,GAAGlB,cAAc,KAAK,CAA1C;;AAbc,wBAeUS,KAAK,CAACU,QAAN,CAAe,CAAC,CAACP,MAAjB,CAfV;AAAA,MAePQ,IAfO;AAAA,MAeDC,OAfC;;AAiBd,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B;AACA,QAAIV,MAAJ,EAAY,OAAO,KAAP,CAFiB,CAG7B;;AACA,QAAIrB,cAAc,CAACS,cAAD,CAAlB,EAAoC,OAAO,KAAP,CAJP,CAK7B;;AACA,WAAO,IAAP;AACD,GAPD;;AAjBc,yBA0BgBS,KAAK,CAACU,QAAN,CAAwB,YAAM;AAC1D,QAAI,CAACD,cAAL,EAAqB,OAAO,OAAP;AACrB,QAAMK,MAAM,GAAGD,gBAAgB,EAA/B;AACA,WAAOC,MAAM,GAAG,MAAH,GAAY,OAAzB;AACD,GAJ6B,CA1BhB;AAAA,MA0BPC,OA1BO;AAAA,MA0BEC,UA1BF;;AAgCd,8BAAgB,YAAM;AACpBA,IAAAA,UAAU,CAAC,OAAD,CAAV;AACAJ,IAAAA,OAAO,CAAC,CAAC,CAACT,MAAH,CAAP;AACD,GAHD,EAGG,CAACA,MAAD,CAHH;AAKA;AACJ;AACA;AACA;AACA;AACA;;AACI,MAAIZ,cAAc,GAAG,CAAjB,IAAsBa,aAA1B,EAAyC;AACvC;AAGD;;AAED,MAAMa,MAAM,GAAG;AAAE1B,IAAAA,cAAc,EAAdA,cAAF;AAAkBO,IAAAA,YAAY,EAAZA,YAAlB;AAAgCT,IAAAA,cAAc,EAAdA;AAAhC,GAAf;;AAEA,MAAM6B,QAA2D;AAC/DhB,IAAAA,GAAG,EAAHA,GAD+D;AAE/D;AACA;AACAK,IAAAA,mBAAmB,EAAE,6BAACY,UAAD,EAAsB;AACzC,UAAI,CAACR,IAAD,IAASF,cAAb,EAA6B;AAC3BO,QAAAA,UAAU,CAAC,MAAD,CAAV;AACD,OAHwC,CAIzC;;;AACA;AAAET,MAAAA,oBAAD,oBAACA,oBAAD,CAA+BY,UAA/B;AACF,KAV8D;AAW/Db,IAAAA,SAAS,EAAE,eAAG,iBAAH,EAAsBA,SAAtB;AAXoD,KAY5DE,IAZ4D;AAa/DtB,IAAAA,QAAQ,EAARA,QAb+D;AAc/DmB,IAAAA,KAAK;AAAIe,MAAAA,QAAQ,EAAE;AAAd,OAA2Bf,KAA3B,CAd0D;AAe/DY,IAAAA,MAAM,EAANA;AAf+D,IAAjE;;AAkBA,MAAIb,aAAJ,EAAmB;AACjB,wBACE,oBAAC,6BAAD;AAAiB,MAAA,OAAO,EAAE,KAA1B;AAAiC,MAAA,MAAM,EAAEa;AAAzC,OACGd,MAAM,iBACL,oBAAC,oBAAD,CAAQ,GAAR,eACMe,QADN;AAEE,MAAA,OAAO,EAAC,MAFV;AAGE,MAAA,OAAO,EAAC,OAHV;AAIE,MAAA,IAAI,EAAC;AAJP,OAFJ,CADF;AAYD;;AAED,sBACE,oBAAC,oBAAD,CAAQ,GAAR,eACMA,QADN;AAEE,IAAA,KAAK,eAAOA,QAAQ,CAACb,KAAhB;AAAuBU,MAAAA,OAAO,EAAPA;AAAvB,MAFP;AAGE,IAAA,OAAO,EAAE,KAHX;AAIE,IAAA,OAAO,EAAEJ,IAAI,GAAG,OAAH,GAAa;AAJ5B,KADF;AAQD,CA7FqB,CAAjB;;;AAgGP,IAAIU,cAAJ,EAAa;AACXtB,EAAAA,QAAQ,CAACuB,WAAT,GAAuB,UAAvB;AACD","sourcesContent":["import { useUpdateEffect } from \"@chakra-ui/hooks\"\nimport { cx, warn, __DEV__ } from \"@chakra-ui/utils\"\nimport { AnimatePresence, HTMLMotionProps, motion } from \"framer-motion\"\nimport * as React from \"react\"\nimport { EASINGS, MotionVariants } from \"./__utils\"\n\ntype CollapseVariants = MotionVariants<\"enter\" | \"exit\">\n\nconst hasHeightValue = (value?: string | number) =>\n  value != null && parseInt(value.toString(), 10) > 0\n\nconst variants: CollapseVariants = {\n  exit: (props: CollapseOptions) => ({\n    ...(props.animateOpacity && {\n      opacity: hasHeightValue(props.startingHeight) ? 1 : 0,\n    }),\n    height: props.startingHeight,\n    transition: {\n      height: { duration: 0.2, ease: EASINGS.ease },\n      opacity: { duration: 0.3, ease: EASINGS.ease },\n    },\n  }),\n  enter: (props: CollapseOptions) => ({\n    ...(props.animateOpacity && {\n      opacity: 1,\n    }),\n    height: props.endingHeight,\n    transition: {\n      height: {\n        duration: 0.3,\n        ease: EASINGS.ease,\n      },\n      opacity: {\n        duration: 0.4,\n        ease: EASINGS.ease,\n      },\n    },\n  }),\n}\n\nexport interface CollapseOptions {\n  /**\n   * If `true`, the opacity of the content will be animated\n   * @default true\n   */\n  animateOpacity?: boolean\n  /**\n   * If `true`, the element will unmount when `in={false}` and animation is done\n   */\n  unmountOnExit?: boolean\n  /**\n   * If `true`, the content will be expanded\n   */\n  in?: boolean\n  /**\n   * The height you want the content in its collapsed state.\n   * @default 0\n   */\n  startingHeight?: number | string\n  /**\n   * The height you want the content in its expanded state.\n   * @default \"auto\"\n   */\n  endingHeight?: number | string\n}\n\nexport type ICollapse = CollapseProps\n\ntype Display = React.CSSProperties[\"display\"]\n\nexport interface CollapseProps\n  extends HTMLMotionProps<\"div\">,\n    CollapseOptions {}\n\nexport const Collapse = React.forwardRef<HTMLDivElement, CollapseProps>(\n  (props, ref) => {\n    const {\n      in: isOpen,\n      unmountOnExit,\n      animateOpacity = true,\n      startingHeight = 0,\n      endingHeight = \"auto\",\n      style,\n      className,\n      onAnimationComplete,\n      ...rest\n    } = props\n\n    const fromZeroHeight = startingHeight === 0\n\n    const [open, setOpen] = React.useState(!!isOpen)\n\n    const getInitialHidden = () => {\n      // If it is open by default, no need to apply `aria-hidden`\n      if (isOpen) return false\n      // If startingHeight > 0, then content is partially visible\n      if (hasHeightValue(startingHeight)) return false\n      // Else, the content is hidden\n      return true\n    }\n\n    const [display, setDisplay] = React.useState<Display>(() => {\n      if (!fromZeroHeight) return \"block\"\n      const hidden = getInitialHidden()\n      return hidden ? \"none\" : \"block\"\n    })\n\n    useUpdateEffect(() => {\n      setDisplay(\"block\")\n      setOpen(!!isOpen)\n    }, [isOpen])\n\n    /**\n     * Warn ðŸš¨: `startingHeight` and `unmountOnExit` are mutually exclusive\n     *\n     * If you specify a starting height, the collapsed needs to be mounted\n     * for the height to take effect.\n     */\n    if (startingHeight > 0 && unmountOnExit) {\n      warn(\n        `startingHeight and unmountOnExit are mutually exclusive. You can't use them together`,\n      )\n    }\n\n    const custom = { startingHeight, endingHeight, animateOpacity }\n\n    const ownProps: HTMLMotionProps<\"div\"> & React.RefAttributes<any> = {\n      ref,\n      // @future: set parameter as `definition` when we remove `framer-motion`\n      // v3 support\n      onAnimationComplete: (definition?: any) => {\n        if (!open && fromZeroHeight) {\n          setDisplay(\"none\")\n        }\n        // @future: remove `any` cast when we remove `framer-motion` v3 support\n        ;(onAnimationComplete as any)?.(definition)\n      },\n      className: cx(\"chakra-collapse\", className),\n      ...rest,\n      variants,\n      style: { overflow: \"hidden\", ...style },\n      custom,\n    }\n\n    if (unmountOnExit) {\n      return (\n        <AnimatePresence initial={false} custom={custom}>\n          {isOpen && (\n            <motion.div\n              {...ownProps}\n              initial=\"exit\"\n              animate=\"enter\"\n              exit=\"exit\"\n            />\n          )}\n        </AnimatePresence>\n      )\n    }\n\n    return (\n      <motion.div\n        {...ownProps}\n        style={{ ...ownProps.style, display }}\n        initial={false}\n        animate={open ? \"enter\" : \"exit\"}\n      />\n    )\n  },\n)\n\nif (__DEV__) {\n  Collapse.displayName = \"Collapse\"\n}\n"],"file":"collapse.js"}