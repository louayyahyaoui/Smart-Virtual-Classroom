{"version":3,"sources":["../../src/use-menu.ts"],"names":["strict","name","MenuProvider","useMenuContext","useMenu","props","id","closeOnSelect","closeOnBlur","autoSelect","isLazy","placement","isOpen","onOpen","onClose","onToggle","menuRef","React","useRef","buttonRef","ref","handler","event","current","contains","target","popper","useState","focusedIndex","setFocusedIndex","domContext","focusRef","visible","shouldFocus","buttonId","menuId","openAndFocusMenu","useCallback","nextTick","openAndFocusFirstItem","openAndFocusLastItem","descendants","length","refocus","hasFocusWithin","document","activeElement","shouldRefocus","el","element","focus","preventScroll","onTransitionEnd","forceUpdate","orientation","useMenuButton","externalRef","menu","onClick","action","onKeyDown","eventKey","keyMap","Enter","ArrowDown","ArrowUp","preventDefault","stopPropagation","buttonProps","referenceRef","useMenuList","Error","onCharacterPress","key","Tab","Escape","nextIndex","prevIndex","fn","characterHandler","character","nextItem","node","textContent","index","indexOf","children","tabIndex","role","style","transformOrigin","useMenuPositioner","popperRef","visibility","useMenuItem","onMouseEnterProp","onMouseEnter","onMouseMoveProp","onMouseMove","onMouseLeaveProp","onMouseLeave","onClickProp","isDisabled","isFocusable","htmlProps","context","disabled","focusable","isFocused","trulyDisabled","tabbable","useMenuOption","type","isChecked","rest","hookProps","optionsProps","useMenuOptionGroup","valueProp","value","defaultValue","onChangeProp","onChange","isRadio","fallback","setValue","selectedValue","nextValue","includes","validChildren","clones","map","child","cloneElement","useMenuState"],"mappings":"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","sourcesContent":["import { useClickable } from \"@chakra-ui/clickable\"\nimport { useDescendant, useDescendants } from \"@chakra-ui/descendant\"\nimport {\n  useControllableState,\n  useDisclosure,\n  UseDisclosureProps,\n  useFocusOnHide,\n  useId,\n  useIds,\n  useOutsideClick,\n  useShortcut,\n  useUpdateEffect,\n} from \"@chakra-ui/hooks\"\nimport { usePopper, UsePopperProps } from \"@chakra-ui/popper\"\nimport {\n  addItem,\n  callAllHandlers,\n  createContext,\n  dataAttr,\n  EventKeyMap,\n  focus,\n  getNextIndex,\n  getNextItemFromSearch,\n  getPrevIndex,\n  getValidChildren,\n  isArray,\n  isString,\n  mergeRefs,\n  normalizeEventKey,\n  removeItem,\n} from \"@chakra-ui/utils\"\nimport * as React from \"react\"\n\nconst [MenuProvider, useMenuContext] = createContext<UseMenuReturn>({\n  strict: false,\n  name: \"MenuContext\",\n})\n\nexport { MenuProvider, useMenuContext }\n\nexport interface UseMenuProps extends UsePopperProps, UseDisclosureProps {\n  /**\n   * If `true`, the menu will close when a menu item is\n   * clicked\n   *\n   * @default true\n   */\n  closeOnSelect?: boolean\n  /**\n   * If `true`, the menu will close when you click outside\n   * the menu list\n   *\n   * @default true\n   */\n  closeOnBlur?: boolean\n  /**\n   * If `true`, the first enabled menu item will receive focus and be selected\n   * when the menu opens.\n   *\n   * @default true\n   */\n  autoSelect?: boolean\n  /**\n   * Performance ðŸš€:\n   * If `true`, the MenuItem rendering will be deferred\n   * until the menu is open.\n   */\n  isLazy?: boolean\n}\n\n/**\n * React Hook to manage a menu\n *\n * It provides the logic and will be used with react context\n * to propagate its return value to all children\n */\nexport function useMenu(props: UseMenuProps) {\n  const {\n    id,\n    closeOnSelect = true,\n    closeOnBlur = true,\n    autoSelect = true,\n    isLazy,\n    placement = \"bottom-start\",\n  } = props\n\n  const { isOpen, onOpen, onClose, onToggle } = useDisclosure(props)\n\n  /**\n   * Prepare the reference to the menu and disclosure\n   */\n  const menuRef = React.useRef<HTMLDivElement>(null)\n  const buttonRef = React.useRef<HTMLButtonElement>(null)\n\n  useOutsideClick({\n    ref: menuRef,\n    handler: (event) => {\n      if (\n        isOpen &&\n        closeOnBlur &&\n        !buttonRef.current?.contains(event.target as HTMLElement)\n      ) {\n        onClose()\n      }\n    },\n  })\n\n  /**\n   * Add some popper.js for dynamic positioning\n   */\n  const popper = usePopper({\n    placement,\n    ...props,\n  })\n\n  const [focusedIndex, setFocusedIndex] = React.useState(-1)\n\n  /**\n   * Context to register all menu item nodes\n   */\n  const domContext = useDescendants<HTMLDivElement, {}>()\n\n  /**\n   * Focus the button when we close the menu\n   */\n  useUpdateEffect(() => {\n    if (!isOpen) {\n      setFocusedIndex(-1)\n    }\n  }, [isOpen])\n\n  useFocusOnHide(menuRef, {\n    focusRef: buttonRef,\n    visible: isOpen,\n    shouldFocus: true,\n  })\n\n  /**\n   * Generate unique ids for menu's list and button\n   */\n  const [buttonId, menuId] = useIds(id, `menu-button`, `menu-list`)\n\n  const openAndFocusMenu = React.useCallback(() => {\n    onOpen()\n    focus(menuRef.current, { nextTick: true })\n  }, [onOpen, menuRef])\n\n  const openAndFocusFirstItem = React.useCallback(() => {\n    onOpen()\n    setFocusedIndex(0)\n  }, [onOpen, setFocusedIndex])\n\n  const openAndFocusLastItem = React.useCallback(() => {\n    onOpen()\n    setFocusedIndex(domContext.descendants.length - 1)\n  }, [onOpen, setFocusedIndex, domContext.descendants])\n\n  const refocus = React.useCallback(() => {\n    const hasFocusWithin = menuRef.current?.contains(document.activeElement)\n    const shouldRefocus = isOpen && !hasFocusWithin\n\n    if (!shouldRefocus) return\n\n    const el = domContext.descendants[focusedIndex]?.element\n    el?.focus({ preventScroll: true })\n  }, [isOpen, focusedIndex, domContext.descendants])\n\n  return {\n    openAndFocusMenu,\n    openAndFocusFirstItem,\n    openAndFocusLastItem,\n    onTransitionEnd: refocus,\n    domContext,\n    popper,\n    buttonId,\n    menuId,\n    forceUpdate: popper.forceUpdate,\n    orientation: \"vertical\",\n    isOpen,\n    onToggle,\n    onOpen,\n    onClose,\n    menuRef,\n    buttonRef,\n    focusedIndex,\n    closeOnSelect,\n    closeOnBlur,\n    autoSelect,\n    setFocusedIndex,\n    isLazy,\n  }\n}\n\nexport interface UseMenuReturn extends ReturnType<typeof useMenu> {}\n\n/**\n * React Hook to manage a menu button.\n *\n * The assumption here is that the `useMenu` hook is used\n * in a component higher up the tree, and its return value\n * is passed as `context` to this hook.\n */\n\nexport interface UseMenuButtonProps\n  extends Omit<React.HTMLAttributes<Element>, \"color\"> {}\n\nexport function useMenuButton(\n  props: UseMenuButtonProps,\n  externalRef: React.Ref<any> = null,\n) {\n  const menu = useMenuContext()\n\n  const {\n    isOpen,\n    onClose,\n    autoSelect,\n    popper,\n    openAndFocusFirstItem,\n    openAndFocusLastItem,\n    openAndFocusMenu,\n  } = menu\n\n  const onClick = React.useCallback(() => {\n    if (isOpen) {\n      onClose()\n    } else {\n      const action = autoSelect ? openAndFocusFirstItem : openAndFocusMenu\n      action()\n    }\n  }, [autoSelect, isOpen, onClose, openAndFocusFirstItem, openAndFocusMenu])\n\n  const onKeyDown = React.useCallback(\n    (event: React.KeyboardEvent) => {\n      const eventKey = normalizeEventKey(event)\n      const keyMap: EventKeyMap = {\n        Enter: openAndFocusFirstItem,\n        ArrowDown: openAndFocusFirstItem,\n        ArrowUp: openAndFocusLastItem,\n      }\n\n      const action = keyMap[eventKey]\n\n      if (action) {\n        event.preventDefault()\n        event.stopPropagation()\n        action(event)\n      }\n    },\n    [openAndFocusFirstItem, openAndFocusLastItem],\n  )\n\n  const buttonProps = {\n    ...props,\n    ref: mergeRefs(menu.buttonRef, externalRef, popper.referenceRef),\n    id: menu.buttonId,\n    \"data-active\": dataAttr(menu.isOpen),\n    \"aria-expanded\": menu.isOpen,\n    \"aria-haspopup\": \"menu\" as React.AriaAttributes[\"aria-haspopup\"],\n    \"aria-controls\": menu.menuId,\n    onClick: callAllHandlers(props.onClick, onClick),\n    onKeyDown: callAllHandlers(props.onKeyDown, onKeyDown),\n  }\n\n  return buttonProps\n}\n\n/**\n * React Hook to manage a menu list.\n *\n * The assumption here is that the `useMenu` hook is used\n * in a component higher up the tree, and its return value\n * is passed as `context` to this hook.\n */\n\nexport interface UseMenuListProps\n  extends Omit<React.HTMLAttributes<Element>, \"color\"> {}\n\nexport function useMenuList(\n  props: UseMenuListProps,\n  ref: React.Ref<any> = null,\n) {\n  const menu = useMenuContext()\n\n  if (!menu) {\n    throw new Error(\n      `useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>`,\n    )\n  }\n\n  const {\n    focusedIndex,\n    setFocusedIndex,\n    menuRef,\n    isOpen,\n    onClose,\n    menuId,\n    domContext: { descendants },\n    isLazy,\n  } = menu\n\n  /**\n   * Hook that creates a keydown event handler that listens\n   * to printable keyboard character press\n   */\n  const onCharacterPress = useShortcut({\n    preventDefault: (event) => event.key !== \" \",\n  })\n\n  const onKeyDown = React.useCallback(\n    (event: React.KeyboardEvent) => {\n      const eventKey = normalizeEventKey(event)\n\n      const keyMap: EventKeyMap = {\n        Tab: (event) => {\n          event.preventDefault()\n        },\n        Escape: onClose,\n        ArrowDown: () => {\n          const nextIndex = getNextIndex(focusedIndex, descendants.length)\n          setFocusedIndex(nextIndex)\n        },\n        ArrowUp: () => {\n          const prevIndex = getPrevIndex(focusedIndex, descendants.length)\n          setFocusedIndex(prevIndex)\n        },\n      }\n\n      const fn = keyMap[eventKey]\n\n      if (fn) {\n        event.preventDefault()\n        fn(event)\n        return\n      }\n\n      const characterHandler = onCharacterPress((character) => {\n        /**\n         * Typeahead: Based on current character pressed,\n         * find the next item to be selected\n         */\n        const nextItem = getNextItemFromSearch(\n          descendants,\n          character,\n          (node) => node.element?.textContent || \"\",\n          descendants[focusedIndex],\n        )\n\n        if (nextItem) {\n          const index = descendants.indexOf(nextItem)\n          setFocusedIndex(index)\n        }\n      })\n\n      characterHandler(event)\n    },\n    [descendants, focusedIndex, onCharacterPress, onClose, setFocusedIndex],\n  )\n\n  return {\n    ...props,\n    ref: mergeRefs(menuRef, ref),\n    children: !isLazy || isOpen ? props.children : null,\n    tabIndex: -1,\n    role: \"menu\",\n    id: menuId,\n    style: {\n      ...props.style,\n      transformOrigin: \"var(--popper-transform-origin)\",\n    },\n    \"aria-orientation\": \"vertical\" as React.AriaAttributes[\"aria-orientation\"],\n    onKeyDown: callAllHandlers(props.onKeyDown, onKeyDown),\n  }\n}\n\nexport function useMenuPositioner(props: any = {}) {\n  const { popper, isOpen } = useMenuContext()\n  return {\n    ...props,\n    ref: popper.popperRef,\n    style: { visibility: isOpen ? \"visible\" : \"hidden\" },\n  }\n}\n\nexport interface UseMenuItemProps\n  extends Omit<React.HTMLAttributes<Element>, \"color\"> {\n  isDisabled?: boolean\n  isFocusable?: boolean\n}\n\nexport function useMenuItem(\n  props: UseMenuItemProps,\n  externalRef: React.Ref<any> = null,\n) {\n  const {\n    onMouseEnter: onMouseEnterProp,\n    onMouseMove: onMouseMoveProp,\n    onMouseLeave: onMouseLeaveProp,\n    onClick: onClickProp,\n    isDisabled,\n    isFocusable,\n    ...htmlProps\n  } = props\n\n  const menu = useMenuContext()\n\n  const {\n    domContext,\n    setFocusedIndex,\n    focusedIndex,\n    closeOnSelect,\n    onClose,\n    menuRef,\n    isOpen,\n  } = menu\n\n  const ref = React.useRef<HTMLDivElement>(null)\n  const id = `menuitem-${useId()}`\n\n  /**\n   * Register the menuitem's node into the domContext\n   */\n  const index = useDescendant({\n    element: ref.current,\n    context: domContext,\n    disabled: isDisabled,\n    focusable: isFocusable,\n  })\n\n  const onMouseEnter = React.useCallback(\n    (event) => {\n      onMouseEnterProp?.(event)\n      if (isDisabled) return\n\n      setFocusedIndex(index)\n    },\n    [setFocusedIndex, index, isDisabled, onMouseEnterProp],\n  )\n\n  const onMouseMove = React.useCallback(\n    (event) => {\n      onMouseMoveProp?.(event)\n      if (document.activeElement !== ref.current) {\n        onMouseEnter(event)\n      }\n    },\n    [onMouseEnter, onMouseMoveProp],\n  )\n\n  const onMouseLeave = React.useCallback(\n    (event) => {\n      onMouseLeaveProp?.(event)\n      if (isDisabled) return\n\n      setFocusedIndex(-1)\n    },\n    [setFocusedIndex, isDisabled, onMouseLeaveProp],\n  )\n\n  const onClick = React.useCallback(\n    (event: React.MouseEvent) => {\n      onClickProp?.(event)\n      /**\n       * Close menu and parent menu's if `closeOnSelect` is set to `true`\n       */\n      if (closeOnSelect) {\n        onClose()\n      }\n    },\n    [onClose, onClickProp, closeOnSelect],\n  )\n\n  const isFocused = index === focusedIndex\n\n  const trulyDisabled = isDisabled && !isFocusable\n\n  useUpdateEffect(() => {\n    if (!isOpen) return\n    if (isFocused && !trulyDisabled && ref.current) {\n      focus(ref.current, { nextTick: true })\n    } else if (document.activeElement !== menuRef.current) {\n      menuRef.current?.focus()\n    }\n  }, [isFocused, trulyDisabled, menuRef, isOpen])\n\n  const tabbable = useClickable({\n    onClick,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    ref: mergeRefs(ref, externalRef),\n    isDisabled,\n    isFocusable,\n  })\n\n  return {\n    ...htmlProps,\n    ...tabbable,\n    id,\n    role: \"menuitem\",\n    tabIndex: isFocused ? 0 : -1,\n  }\n}\n\nexport interface UseMenuOptionOptions {\n  value?: string\n  isChecked?: boolean\n  type?: \"radio\" | \"checkbox\"\n  children?: React.ReactNode\n}\n\nexport interface UseMenuOptionProps\n  extends UseMenuItemProps,\n    UseMenuOptionOptions {}\n\nexport function useMenuOption(\n  props: UseMenuOptionProps,\n  externalRef: React.Ref<any> = null,\n) {\n  const {\n    onClick,\n    isDisabled,\n    isFocusable,\n    type = \"radio\",\n    isChecked,\n    ...rest\n  } = props\n\n  const hookProps = { isDisabled, isFocusable, onClick }\n  const optionsProps = useMenuItem(hookProps, externalRef)\n\n  return {\n    ...rest,\n    ...optionsProps,\n    role: `menuitem${type}`,\n    \"aria-checked\": isChecked as React.AriaAttributes[\"aria-checked\"],\n  }\n}\n\nexport interface UseMenuOptionGroupProps {\n  value?: string | string[]\n  defaultValue?: string | string[]\n  type?: \"radio\" | \"checkbox\"\n  onChange?: (value: string | string[]) => void\n  children?: React.ReactNode\n}\n\nexport function useMenuOptionGroup(props: UseMenuOptionGroupProps) {\n  const {\n    children,\n    type = \"radio\",\n    value: valueProp,\n    defaultValue,\n    onChange: onChangeProp,\n    ...htmlProps\n  } = props\n\n  const isRadio = type === \"radio\"\n\n  const fallback = isRadio ? \"\" : []\n\n  const [value, setValue] = useControllableState({\n    defaultValue: defaultValue ?? fallback,\n    value: valueProp,\n    onChange: onChangeProp,\n  })\n\n  const onChange = React.useCallback(\n    (selectedValue: string) => {\n      if (type === \"radio\" && isString(value)) {\n        setValue(selectedValue)\n      }\n\n      if (type === \"checkbox\" && isArray(value)) {\n        const nextValue = value.includes(selectedValue)\n          ? removeItem(value, selectedValue)\n          : addItem(value, selectedValue)\n\n        setValue(nextValue)\n      }\n    },\n    [value, setValue, type],\n  )\n\n  const validChildren = getValidChildren(children)\n\n  const clones = validChildren.map((child) => {\n    /**\n     * We've added an internal `id` to each `MenuItemOption`,\n     * let's use that for type-checking.\n     *\n     * We can't rely on displayName or the element's type since\n     * they can be changed by the user.\n     */\n    if ((child.type as any).id !== \"MenuItemOption\") return child\n\n    const onClick = (event: MouseEvent) => {\n      onChange(child.props.value)\n      child.props.onClick?.(event)\n    }\n\n    const isChecked =\n      type === \"radio\"\n        ? child.props.value === value\n        : value.includes(child.props.value)\n\n    return React.cloneElement(child, {\n      type,\n      onClick,\n      isChecked,\n    })\n  })\n\n  return {\n    ...htmlProps,\n    children: clones,\n  }\n}\n\nexport function useMenuState() {\n  const { isOpen, onClose } = useMenuContext()\n  return { isOpen, onClose }\n}\n"],"file":"use-menu.js"}