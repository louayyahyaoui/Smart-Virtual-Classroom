{"ast":null,"code":"/**\r\n * DevExtreme (ui/scroll_view/ui.events.emitter.gesture.scroll.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _class = _interopRequireDefault(require(\"../../core/class\"));\n\nvar _index = require(\"../../events/utils/index\");\n\nvar _emitter = _interopRequireDefault(require(\"../../events/gesture/emitter.gesture\"));\n\nvar _emitter_registrator = _interopRequireDefault(require(\"../../events/core/emitter_registrator\"));\n\nvar _frame = require(\"../../animation/frame\");\n\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\n\nvar _version = require(\"../../core/utils/version\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar abstract = _class.default.abstract;\n\nvar realDevice = _devices.default.real();\n\nvar SCROLL_INIT_EVENT = \"dxscrollinit\";\nvar SCROLL_START_EVENT = \"dxscrollstart\";\nvar SCROLL_MOVE_EVENT = \"dxscroll\";\nvar SCROLL_END_EVENT = \"dxscrollend\";\nvar SCROLL_STOP_EVENT = \"dxscrollstop\";\nvar SCROLL_CANCEL_EVENT = \"dxscrollcancel\";\n\nvar Locker = _class.default.inherit(function () {\n  var NAMESPACED_SCROLL_EVENT = (0, _index.addNamespace)(\"scroll\", \"dxScrollEmitter\");\n  return {\n    ctor: function (element) {\n      this._element = element;\n      this._locked = false;\n      var that = this;\n\n      this._proxiedScroll = function (e) {\n        that._scroll(e);\n      };\n\n      _events_engine.default.on(this._element, NAMESPACED_SCROLL_EVENT, this._proxiedScroll);\n    },\n    _scroll: abstract,\n    check: function (e, callback) {\n      if (this._locked) {\n        callback();\n      }\n    },\n    dispose: function () {\n      _events_engine.default.off(this._element, NAMESPACED_SCROLL_EVENT, this._proxiedScroll);\n    }\n  };\n}());\n\nvar TimeoutLocker = Locker.inherit(function () {\n  return {\n    ctor: function (element, timeout) {\n      this.callBase(element);\n      this._timeout = timeout;\n    },\n    _scroll: function () {\n      this._prepare();\n\n      this._forget();\n    },\n    _prepare: function () {\n      if (this._timer) {\n        this._clearTimer();\n      }\n\n      this._locked = true;\n    },\n    _clearTimer: function () {\n      clearTimeout(this._timer);\n      this._locked = false;\n      this._timer = null;\n    },\n    _forget: function () {\n      var that = this;\n      this._timer = setTimeout(function () {\n        that._clearTimer();\n      }, this._timeout);\n    },\n    dispose: function () {\n      this.callBase();\n\n      this._clearTimer();\n    }\n  };\n}());\nvar WheelLocker = TimeoutLocker.inherit(function () {\n  var WHEEL_UNLOCK_TIMEOUT = 400;\n  return {\n    ctor: function (element) {\n      this.callBase(element, WHEEL_UNLOCK_TIMEOUT);\n      this._lastWheelDirection = null;\n    },\n    check: function (e, callback) {\n      this._checkDirectionChanged(e);\n\n      this.callBase(e, callback);\n    },\n    _checkDirectionChanged: function (e) {\n      if (!(0, _index.isDxMouseWheelEvent)(e)) {\n        this._lastWheelDirection = null;\n        return;\n      }\n\n      var direction = e.shiftKey || false;\n      var directionChange = null !== this._lastWheelDirection && direction !== this._lastWheelDirection;\n      this._lastWheelDirection = direction;\n      this._locked = this._locked && !directionChange;\n    }\n  };\n}());\nvar PointerLocker = TimeoutLocker.inherit(function () {\n  var POINTER_UNLOCK_TIMEOUT = 400;\n  return {\n    ctor: function (element) {\n      this.callBase(element, POINTER_UNLOCK_TIMEOUT);\n    }\n  };\n}());\n!function () {\n  var ios8_greater = realDevice.ios && (0, _version.compare)(realDevice.version, [8]) >= 0;\n  var android5_greater = realDevice.android && (0, _version.compare)(realDevice.version, [5]) >= 0;\n\n  if (!(ios8_greater || android5_greater)) {\n    return;\n  }\n\n  PointerLocker = Locker.inherit(function () {\n    return {\n      _scroll: function () {\n        this._locked = true;\n        var that = this;\n        (0, _frame.cancelAnimationFrame)(this._scrollFrame);\n        this._scrollFrame = (0, _frame.requestAnimationFrame)(function () {\n          that._locked = false;\n        });\n      },\n      check: function (e, callback) {\n        (0, _frame.cancelAnimationFrame)(this._scrollFrame);\n        (0, _frame.cancelAnimationFrame)(this._checkFrame);\n        var that = this;\n        var callBase = this.callBase;\n        this._checkFrame = (0, _frame.requestAnimationFrame)(function () {\n          callBase.call(that, e, callback);\n          that._locked = false;\n        });\n      },\n      dispose: function () {\n        this.callBase();\n        (0, _frame.cancelAnimationFrame)(this._scrollFrame);\n        (0, _frame.cancelAnimationFrame)(this._checkFrame);\n      }\n    };\n  }());\n}();\n\nvar ScrollEmitter = _emitter.default.inherit(function () {\n  var INERTIA_TIMEOUT = 100;\n  var VELOCITY_CALC_TIMEOUT = 200;\n  var FRAME_DURATION = Math.round(1e3 / 60);\n  return {\n    ctor: function (element) {\n      this.callBase.apply(this, arguments);\n      this.direction = \"both\";\n      this._pointerLocker = new PointerLocker(element);\n      this._wheelLocker = new WheelLocker(element);\n    },\n    validate: function () {\n      return true;\n    },\n    configure: function (data) {\n      if (data.scrollTarget) {\n        this._pointerLocker.dispose();\n\n        this._wheelLocker.dispose();\n\n        this._pointerLocker = new PointerLocker(data.scrollTarget);\n        this._wheelLocker = new WheelLocker(data.scrollTarget);\n      }\n\n      this.callBase(data);\n    },\n    _init: function (e) {\n      this._wheelLocker.check(e, function () {\n        if ((0, _index.isDxMouseWheelEvent)(e)) {\n          this._accept(e);\n        }\n      }.bind(this));\n\n      this._pointerLocker.check(e, function () {\n        var skipCheck = this.isNative && (0, _index.isMouseEvent)(e);\n\n        if (!(0, _index.isDxMouseWheelEvent)(e) && !skipCheck) {\n          this._accept(e);\n        }\n      }.bind(this));\n\n      this._fireEvent(SCROLL_INIT_EVENT, e);\n\n      this._prevEventData = (0, _index.eventData)(e);\n    },\n    move: function (e) {\n      this.callBase.apply(this, arguments);\n      e.isScrollingEvent = this.isNative || e.isScrollingEvent;\n    },\n    _start: function (e) {\n      this._savedEventData = (0, _index.eventData)(e);\n\n      this._fireEvent(SCROLL_START_EVENT, e);\n\n      this._prevEventData = (0, _index.eventData)(e);\n    },\n    _move: function (e) {\n      var currentEventData = (0, _index.eventData)(e);\n\n      this._fireEvent(SCROLL_MOVE_EVENT, e, {\n        delta: (0, _index.eventDelta)(this._prevEventData, currentEventData)\n      });\n\n      var delta = (0, _index.eventDelta)(this._savedEventData, currentEventData);\n\n      if (delta.time > VELOCITY_CALC_TIMEOUT) {\n        this._savedEventData = this._prevEventData;\n      }\n\n      this._prevEventData = (0, _index.eventData)(e);\n    },\n    _end: function (e) {\n      var endEventDelta = (0, _index.eventDelta)(this._prevEventData, (0, _index.eventData)(e));\n      var velocity = {\n        x: 0,\n        y: 0\n      };\n\n      if (!(0, _index.isDxMouseWheelEvent)(e) && endEventDelta.time < INERTIA_TIMEOUT) {\n        var delta = (0, _index.eventDelta)(this._savedEventData, this._prevEventData);\n        var velocityMultiplier = FRAME_DURATION / delta.time;\n        velocity = {\n          x: delta.x * velocityMultiplier,\n          y: delta.y * velocityMultiplier\n        };\n      }\n\n      this._fireEvent(SCROLL_END_EVENT, e, {\n        velocity: velocity\n      });\n    },\n    _stop: function (e) {\n      this._fireEvent(SCROLL_STOP_EVENT, e);\n    },\n    cancel: function (e) {\n      this.callBase.apply(this, arguments);\n\n      this._fireEvent(SCROLL_CANCEL_EVENT, e);\n    },\n    dispose: function () {\n      this.callBase.apply(this, arguments);\n\n      this._pointerLocker.dispose();\n\n      this._wheelLocker.dispose();\n    },\n    _clearSelection: function () {\n      if (this.isNative) {\n        return;\n      }\n\n      return this.callBase.apply(this, arguments);\n    },\n    _toggleGestureCover: function () {\n      if (this.isNative) {\n        return;\n      }\n\n      return this.callBase.apply(this, arguments);\n    }\n  };\n}());\n\n(0, _emitter_registrator.default)({\n  emitter: ScrollEmitter,\n  events: [SCROLL_INIT_EVENT, SCROLL_START_EVENT, SCROLL_MOVE_EVENT, SCROLL_END_EVENT, SCROLL_STOP_EVENT, SCROLL_CANCEL_EVENT]\n});\nvar _default = {\n  init: SCROLL_INIT_EVENT,\n  start: SCROLL_START_EVENT,\n  move: SCROLL_MOVE_EVENT,\n  end: SCROLL_END_EVENT,\n  stop: SCROLL_STOP_EVENT,\n  cancel: SCROLL_CANCEL_EVENT\n};\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/ui/scroll_view/ui.events.emitter.gesture.scroll.js"],"names":["exports","default","_events_engine","_interopRequireDefault","require","_class","_index","_emitter","_emitter_registrator","_frame","_devices","_version","obj","__esModule","abstract","realDevice","real","SCROLL_INIT_EVENT","SCROLL_START_EVENT","SCROLL_MOVE_EVENT","SCROLL_END_EVENT","SCROLL_STOP_EVENT","SCROLL_CANCEL_EVENT","Locker","inherit","NAMESPACED_SCROLL_EVENT","addNamespace","ctor","element","_element","_locked","that","_proxiedScroll","e","_scroll","on","check","callback","dispose","off","TimeoutLocker","timeout","callBase","_timeout","_prepare","_forget","_timer","_clearTimer","clearTimeout","setTimeout","WheelLocker","WHEEL_UNLOCK_TIMEOUT","_lastWheelDirection","_checkDirectionChanged","isDxMouseWheelEvent","direction","shiftKey","directionChange","PointerLocker","POINTER_UNLOCK_TIMEOUT","ios8_greater","ios","compare","version","android5_greater","android","cancelAnimationFrame","_scrollFrame","requestAnimationFrame","_checkFrame","call","ScrollEmitter","INERTIA_TIMEOUT","VELOCITY_CALC_TIMEOUT","FRAME_DURATION","Math","round","apply","arguments","_pointerLocker","_wheelLocker","validate","configure","data","scrollTarget","_init","_accept","bind","skipCheck","isNative","isMouseEvent","_fireEvent","_prevEventData","eventData","move","isScrollingEvent","_start","_savedEventData","_move","currentEventData","delta","eventDelta","time","_end","endEventDelta","velocity","x","y","velocityMultiplier","_stop","cancel","_clearSelection","_toggleGestureCover","emitter","events","_default","init","start","end","stop","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scroll_view/ui.events.emitter.gesture.scroll.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _class = _interopRequireDefault(require(\"../../core/class\"));\r\nvar _index = require(\"../../events/utils/index\");\r\nvar _emitter = _interopRequireDefault(require(\"../../events/gesture/emitter.gesture\"));\r\nvar _emitter_registrator = _interopRequireDefault(require(\"../../events/core/emitter_registrator\"));\r\nvar _frame = require(\"../../animation/frame\");\r\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\r\nvar _version = require(\"../../core/utils/version\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar abstract = _class.default.abstract;\r\nvar realDevice = _devices.default.real();\r\nvar SCROLL_INIT_EVENT = \"dxscrollinit\";\r\nvar SCROLL_START_EVENT = \"dxscrollstart\";\r\nvar SCROLL_MOVE_EVENT = \"dxscroll\";\r\nvar SCROLL_END_EVENT = \"dxscrollend\";\r\nvar SCROLL_STOP_EVENT = \"dxscrollstop\";\r\nvar SCROLL_CANCEL_EVENT = \"dxscrollcancel\";\r\nvar Locker = _class.default.inherit(function() {\r\n    var NAMESPACED_SCROLL_EVENT = (0, _index.addNamespace)(\"scroll\", \"dxScrollEmitter\");\r\n    return {\r\n        ctor: function(element) {\r\n            this._element = element;\r\n            this._locked = false;\r\n            var that = this;\r\n            this._proxiedScroll = function(e) {\r\n                that._scroll(e)\r\n            };\r\n            _events_engine.default.on(this._element, NAMESPACED_SCROLL_EVENT, this._proxiedScroll)\r\n        },\r\n        _scroll: abstract,\r\n        check: function(e, callback) {\r\n            if (this._locked) {\r\n                callback()\r\n            }\r\n        },\r\n        dispose: function() {\r\n            _events_engine.default.off(this._element, NAMESPACED_SCROLL_EVENT, this._proxiedScroll)\r\n        }\r\n    }\r\n}());\r\nvar TimeoutLocker = Locker.inherit(function() {\r\n    return {\r\n        ctor: function(element, timeout) {\r\n            this.callBase(element);\r\n            this._timeout = timeout\r\n        },\r\n        _scroll: function() {\r\n            this._prepare();\r\n            this._forget()\r\n        },\r\n        _prepare: function() {\r\n            if (this._timer) {\r\n                this._clearTimer()\r\n            }\r\n            this._locked = true\r\n        },\r\n        _clearTimer: function() {\r\n            clearTimeout(this._timer);\r\n            this._locked = false;\r\n            this._timer = null\r\n        },\r\n        _forget: function() {\r\n            var that = this;\r\n            this._timer = setTimeout(function() {\r\n                that._clearTimer()\r\n            }, this._timeout)\r\n        },\r\n        dispose: function() {\r\n            this.callBase();\r\n            this._clearTimer()\r\n        }\r\n    }\r\n}());\r\nvar WheelLocker = TimeoutLocker.inherit(function() {\r\n    var WHEEL_UNLOCK_TIMEOUT = 400;\r\n    return {\r\n        ctor: function(element) {\r\n            this.callBase(element, WHEEL_UNLOCK_TIMEOUT);\r\n            this._lastWheelDirection = null\r\n        },\r\n        check: function(e, callback) {\r\n            this._checkDirectionChanged(e);\r\n            this.callBase(e, callback)\r\n        },\r\n        _checkDirectionChanged: function(e) {\r\n            if (!(0, _index.isDxMouseWheelEvent)(e)) {\r\n                this._lastWheelDirection = null;\r\n                return\r\n            }\r\n            var direction = e.shiftKey || false;\r\n            var directionChange = null !== this._lastWheelDirection && direction !== this._lastWheelDirection;\r\n            this._lastWheelDirection = direction;\r\n            this._locked = this._locked && !directionChange\r\n        }\r\n    }\r\n}());\r\nvar PointerLocker = TimeoutLocker.inherit(function() {\r\n    var POINTER_UNLOCK_TIMEOUT = 400;\r\n    return {\r\n        ctor: function(element) {\r\n            this.callBase(element, POINTER_UNLOCK_TIMEOUT)\r\n        }\r\n    }\r\n}());\r\n! function() {\r\n    var ios8_greater = realDevice.ios && (0, _version.compare)(realDevice.version, [8]) >= 0;\r\n    var android5_greater = realDevice.android && (0, _version.compare)(realDevice.version, [5]) >= 0;\r\n    if (!(ios8_greater || android5_greater)) {\r\n        return\r\n    }\r\n    PointerLocker = Locker.inherit(function() {\r\n        return {\r\n            _scroll: function() {\r\n                this._locked = true;\r\n                var that = this;\r\n                (0, _frame.cancelAnimationFrame)(this._scrollFrame);\r\n                this._scrollFrame = (0, _frame.requestAnimationFrame)(function() {\r\n                    that._locked = false\r\n                })\r\n            },\r\n            check: function(e, callback) {\r\n                (0, _frame.cancelAnimationFrame)(this._scrollFrame);\r\n                (0, _frame.cancelAnimationFrame)(this._checkFrame);\r\n                var that = this;\r\n                var callBase = this.callBase;\r\n                this._checkFrame = (0, _frame.requestAnimationFrame)(function() {\r\n                    callBase.call(that, e, callback);\r\n                    that._locked = false\r\n                })\r\n            },\r\n            dispose: function() {\r\n                this.callBase();\r\n                (0, _frame.cancelAnimationFrame)(this._scrollFrame);\r\n                (0, _frame.cancelAnimationFrame)(this._checkFrame)\r\n            }\r\n        }\r\n    }())\r\n}();\r\nvar ScrollEmitter = _emitter.default.inherit(function() {\r\n    var INERTIA_TIMEOUT = 100;\r\n    var VELOCITY_CALC_TIMEOUT = 200;\r\n    var FRAME_DURATION = Math.round(1e3 / 60);\r\n    return {\r\n        ctor: function(element) {\r\n            this.callBase.apply(this, arguments);\r\n            this.direction = \"both\";\r\n            this._pointerLocker = new PointerLocker(element);\r\n            this._wheelLocker = new WheelLocker(element)\r\n        },\r\n        validate: function() {\r\n            return true\r\n        },\r\n        configure: function(data) {\r\n            if (data.scrollTarget) {\r\n                this._pointerLocker.dispose();\r\n                this._wheelLocker.dispose();\r\n                this._pointerLocker = new PointerLocker(data.scrollTarget);\r\n                this._wheelLocker = new WheelLocker(data.scrollTarget)\r\n            }\r\n            this.callBase(data)\r\n        },\r\n        _init: function(e) {\r\n            this._wheelLocker.check(e, function() {\r\n                if ((0, _index.isDxMouseWheelEvent)(e)) {\r\n                    this._accept(e)\r\n                }\r\n            }.bind(this));\r\n            this._pointerLocker.check(e, function() {\r\n                var skipCheck = this.isNative && (0, _index.isMouseEvent)(e);\r\n                if (!(0, _index.isDxMouseWheelEvent)(e) && !skipCheck) {\r\n                    this._accept(e)\r\n                }\r\n            }.bind(this));\r\n            this._fireEvent(SCROLL_INIT_EVENT, e);\r\n            this._prevEventData = (0, _index.eventData)(e)\r\n        },\r\n        move: function(e) {\r\n            this.callBase.apply(this, arguments);\r\n            e.isScrollingEvent = this.isNative || e.isScrollingEvent\r\n        },\r\n        _start: function(e) {\r\n            this._savedEventData = (0, _index.eventData)(e);\r\n            this._fireEvent(SCROLL_START_EVENT, e);\r\n            this._prevEventData = (0, _index.eventData)(e)\r\n        },\r\n        _move: function(e) {\r\n            var currentEventData = (0, _index.eventData)(e);\r\n            this._fireEvent(SCROLL_MOVE_EVENT, e, {\r\n                delta: (0, _index.eventDelta)(this._prevEventData, currentEventData)\r\n            });\r\n            var delta = (0, _index.eventDelta)(this._savedEventData, currentEventData);\r\n            if (delta.time > VELOCITY_CALC_TIMEOUT) {\r\n                this._savedEventData = this._prevEventData\r\n            }\r\n            this._prevEventData = (0, _index.eventData)(e)\r\n        },\r\n        _end: function(e) {\r\n            var endEventDelta = (0, _index.eventDelta)(this._prevEventData, (0, _index.eventData)(e));\r\n            var velocity = {\r\n                x: 0,\r\n                y: 0\r\n            };\r\n            if (!(0, _index.isDxMouseWheelEvent)(e) && endEventDelta.time < INERTIA_TIMEOUT) {\r\n                var delta = (0, _index.eventDelta)(this._savedEventData, this._prevEventData);\r\n                var velocityMultiplier = FRAME_DURATION / delta.time;\r\n                velocity = {\r\n                    x: delta.x * velocityMultiplier,\r\n                    y: delta.y * velocityMultiplier\r\n                }\r\n            }\r\n            this._fireEvent(SCROLL_END_EVENT, e, {\r\n                velocity: velocity\r\n            })\r\n        },\r\n        _stop: function(e) {\r\n            this._fireEvent(SCROLL_STOP_EVENT, e)\r\n        },\r\n        cancel: function(e) {\r\n            this.callBase.apply(this, arguments);\r\n            this._fireEvent(SCROLL_CANCEL_EVENT, e)\r\n        },\r\n        dispose: function() {\r\n            this.callBase.apply(this, arguments);\r\n            this._pointerLocker.dispose();\r\n            this._wheelLocker.dispose()\r\n        },\r\n        _clearSelection: function() {\r\n            if (this.isNative) {\r\n                return\r\n            }\r\n            return this.callBase.apply(this, arguments)\r\n        },\r\n        _toggleGestureCover: function() {\r\n            if (this.isNative) {\r\n                return\r\n            }\r\n            return this.callBase.apply(this, arguments)\r\n        }\r\n    }\r\n}());\r\n(0, _emitter_registrator.default)({\r\n    emitter: ScrollEmitter,\r\n    events: [SCROLL_INIT_EVENT, SCROLL_START_EVENT, SCROLL_MOVE_EVENT, SCROLL_END_EVENT, SCROLL_STOP_EVENT, SCROLL_CANCEL_EVENT]\r\n});\r\nvar _default = {\r\n    init: SCROLL_INIT_EVENT,\r\n    start: SCROLL_START_EVENT,\r\n    move: SCROLL_MOVE_EVENT,\r\n    end: SCROLL_END_EVENT,\r\n    stop: SCROLL_STOP_EVENT,\r\n    cancel: SCROLL_CANCEL_EVENT\r\n};\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}