{"ast":null,"code":"/**\r\n * DevExtreme (events/core/emitter_registrator.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _ready_callbacks = _interopRequireDefault(require(\"../../core/utils/ready_callbacks\"));\n\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _element_data = require(\"../../core/element_data\");\n\nvar _class = _interopRequireDefault(require(\"../../core/class\"));\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _event_registrator = _interopRequireDefault(require(\"./event_registrator\"));\n\nvar _index = require(\"../utils/index\");\n\nvar _pointer = _interopRequireDefault(require(\"../pointer\"));\n\nvar _wheel = require(\"./wheel\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar MANAGER_EVENT = \"dxEventManager\";\nvar EMITTER_DATA = \"dxEmitter\";\n\nvar EventManager = _class.default.inherit({\n  ctor: function () {\n    this._attachHandlers();\n\n    this.reset();\n    this._proxiedCancelHandler = this._cancelHandler.bind(this);\n    this._proxiedAcceptHandler = this._acceptHandler.bind(this);\n  },\n  _attachHandlers: function () {\n    _ready_callbacks.default.add(function () {\n      var document = _dom_adapter.default.getDocument();\n\n      _events_engine.default.subscribeGlobal(document, (0, _index.addNamespace)(_pointer.default.down, MANAGER_EVENT), this._pointerDownHandler.bind(this));\n\n      _events_engine.default.subscribeGlobal(document, (0, _index.addNamespace)(_pointer.default.move, MANAGER_EVENT), this._pointerMoveHandler.bind(this));\n\n      _events_engine.default.subscribeGlobal(document, (0, _index.addNamespace)([_pointer.default.up, _pointer.default.cancel].join(\" \"), MANAGER_EVENT), this._pointerUpHandler.bind(this));\n\n      _events_engine.default.subscribeGlobal(document, (0, _index.addNamespace)(_wheel.name, MANAGER_EVENT), this._mouseWheelHandler.bind(this));\n    }.bind(this));\n  },\n  _eachEmitter: function (callback) {\n    var activeEmitters = this._activeEmitters || [];\n    var i = 0;\n\n    while (activeEmitters.length > i) {\n      var emitter = activeEmitters[i];\n\n      if (false === callback(emitter)) {\n        break;\n      }\n\n      if (activeEmitters[i] === emitter) {\n        i++;\n      }\n    }\n  },\n  _applyToEmitters: function (method, arg) {\n    this._eachEmitter(function (emitter) {\n      emitter[method].call(emitter, arg);\n    });\n  },\n  reset: function () {\n    this._eachEmitter(this._proxiedCancelHandler);\n\n    this._activeEmitters = [];\n  },\n  resetEmitter: function (emitter) {\n    this._proxiedCancelHandler(emitter);\n  },\n  _pointerDownHandler: function (e) {\n    if ((0, _index.isMouseEvent)(e) && e.which > 1) {\n      return;\n    }\n\n    this._updateEmitters(e);\n  },\n  _updateEmitters: function (e) {\n    if (!this._isSetChanged(e)) {\n      return;\n    }\n\n    this._cleanEmitters(e);\n\n    this._fetchEmitters(e);\n  },\n  _isSetChanged: function (e) {\n    var currentSet = this._closestEmitter(e);\n\n    var previousSet = this._emittersSet || [];\n    var setChanged = currentSet.length !== previousSet.length;\n    (0, _iterator.each)(currentSet, function (index, emitter) {\n      setChanged = setChanged || previousSet[index] !== emitter;\n      return !setChanged;\n    });\n    this._emittersSet = currentSet;\n    return setChanged;\n  },\n  _closestEmitter: function (e) {\n    var that = this;\n    var result = [];\n    var $element = (0, _renderer.default)(e.target);\n\n    function handleEmitter(_, emitter) {\n      if (!!emitter && emitter.validatePointers(e) && emitter.validate(e)) {\n        emitter.addCancelCallback(that._proxiedCancelHandler);\n        emitter.addAcceptCallback(that._proxiedAcceptHandler);\n        result.push(emitter);\n      }\n    }\n\n    while ($element.length) {\n      var emitters = (0, _element_data.data)($element.get(0), EMITTER_DATA) || [];\n      (0, _iterator.each)(emitters, handleEmitter);\n      $element = $element.parent();\n    }\n\n    return result;\n  },\n  _acceptHandler: function (acceptedEmitter, e) {\n    var that = this;\n\n    this._eachEmitter(function (emitter) {\n      if (emitter !== acceptedEmitter) {\n        that._cancelEmitter(emitter, e);\n      }\n    });\n  },\n  _cancelHandler: function (canceledEmitter, e) {\n    this._cancelEmitter(canceledEmitter, e);\n  },\n  _cancelEmitter: function (emitter, e) {\n    var activeEmitters = this._activeEmitters;\n\n    if (e) {\n      emitter.cancel(e);\n    } else {\n      emitter.reset();\n    }\n\n    emitter.removeCancelCallback();\n    emitter.removeAcceptCallback();\n    var emitterIndex = (0, _array.inArray)(emitter, activeEmitters);\n\n    if (emitterIndex > -1) {\n      activeEmitters.splice(emitterIndex, 1);\n    }\n  },\n  _cleanEmitters: function (e) {\n    this._applyToEmitters(\"end\", e);\n\n    this.reset(e);\n  },\n  _fetchEmitters: function (e) {\n    this._activeEmitters = this._emittersSet.slice();\n\n    this._applyToEmitters(\"start\", e);\n  },\n  _pointerMoveHandler: function (e) {\n    this._applyToEmitters(\"move\", e);\n  },\n  _pointerUpHandler: function (e) {\n    this._updateEmitters(e);\n  },\n  _mouseWheelHandler: function (e) {\n    if (!this._allowInterruptionByMouseWheel()) {\n      return;\n    }\n\n    e.pointers = [null];\n\n    this._pointerDownHandler(e);\n\n    this._adjustWheelEvent(e);\n\n    this._pointerMoveHandler(e);\n\n    e.pointers = [];\n\n    this._pointerUpHandler(e);\n  },\n  _allowInterruptionByMouseWheel: function () {\n    var allowInterruption = true;\n\n    this._eachEmitter(function (emitter) {\n      allowInterruption = emitter.allowInterruptionByMouseWheel() && allowInterruption;\n      return allowInterruption;\n    });\n\n    return allowInterruption;\n  },\n  _adjustWheelEvent: function (e) {\n    var closestGestureEmitter = null;\n\n    this._eachEmitter(function (emitter) {\n      if (!emitter.gesture) {\n        return;\n      }\n\n      var direction = emitter.getDirection(e);\n\n      if (\"horizontal\" !== direction && !e.shiftKey || \"vertical\" !== direction && e.shiftKey) {\n        closestGestureEmitter = emitter;\n        return false;\n      }\n    });\n\n    if (!closestGestureEmitter) {\n      return;\n    }\n\n    var direction = closestGestureEmitter.getDirection(e);\n    var verticalGestureDirection = \"both\" === direction && !e.shiftKey || \"vertical\" === direction;\n    var prop = verticalGestureDirection ? \"pageY\" : \"pageX\";\n    e[prop] += e.delta;\n  },\n  isActive: function (element) {\n    var result = false;\n\n    this._eachEmitter(function (emitter) {\n      result = result || emitter.getElement().is(element);\n    });\n\n    return result;\n  }\n});\n\nvar eventManager = new EventManager();\nvar EMITTER_SUBSCRIPTION_DATA = \"dxEmitterSubscription\";\n\nvar registerEmitter = function (emitterConfig) {\n  var emitterClass = emitterConfig.emitter;\n  var emitterName = emitterConfig.events[0];\n  var emitterEvents = emitterConfig.events;\n  (0, _iterator.each)(emitterEvents, function (_, eventName) {\n    (0, _event_registrator.default)(eventName, {\n      noBubble: !emitterConfig.bubble,\n      setup: function (element) {\n        var subscriptions = (0, _element_data.data)(element, EMITTER_SUBSCRIPTION_DATA) || {};\n        var emitters = (0, _element_data.data)(element, EMITTER_DATA) || {};\n        var emitter = emitters[emitterName] || new emitterClass(element);\n        subscriptions[eventName] = true;\n        emitters[emitterName] = emitter;\n        (0, _element_data.data)(element, EMITTER_DATA, emitters);\n        (0, _element_data.data)(element, EMITTER_SUBSCRIPTION_DATA, subscriptions);\n      },\n      add: function (element, handleObj) {\n        var emitters = (0, _element_data.data)(element, EMITTER_DATA);\n        var emitter = emitters[emitterName];\n        emitter.configure((0, _extend.extend)({\n          delegateSelector: handleObj.selector\n        }, handleObj.data), handleObj.type);\n      },\n      teardown: function (element) {\n        var subscriptions = (0, _element_data.data)(element, EMITTER_SUBSCRIPTION_DATA);\n        var emitters = (0, _element_data.data)(element, EMITTER_DATA);\n        var emitter = emitters[emitterName];\n        delete subscriptions[eventName];\n        var disposeEmitter = true;\n        (0, _iterator.each)(emitterEvents, function (_, eventName) {\n          disposeEmitter = disposeEmitter && !subscriptions[eventName];\n          return disposeEmitter;\n        });\n\n        if (disposeEmitter) {\n          if (eventManager.isActive(element)) {\n            eventManager.resetEmitter(emitter);\n          }\n\n          emitter && emitter.dispose();\n          delete emitters[emitterName];\n        }\n      }\n    });\n  });\n};\n\nvar _default = registerEmitter;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/events/core/emitter_registrator.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_ready_callbacks","_dom_adapter","_events_engine","_element_data","_class","_extend","_array","_iterator","_event_registrator","_index","_pointer","_wheel","obj","__esModule","MANAGER_EVENT","EMITTER_DATA","EventManager","inherit","ctor","_attachHandlers","reset","_proxiedCancelHandler","_cancelHandler","bind","_proxiedAcceptHandler","_acceptHandler","add","document","getDocument","subscribeGlobal","addNamespace","down","_pointerDownHandler","move","_pointerMoveHandler","up","cancel","join","_pointerUpHandler","name","_mouseWheelHandler","_eachEmitter","callback","activeEmitters","_activeEmitters","i","length","emitter","_applyToEmitters","method","arg","call","resetEmitter","e","isMouseEvent","which","_updateEmitters","_isSetChanged","_cleanEmitters","_fetchEmitters","currentSet","_closestEmitter","previousSet","_emittersSet","setChanged","each","index","that","result","$element","target","handleEmitter","_","validatePointers","validate","addCancelCallback","addAcceptCallback","push","emitters","data","get","parent","acceptedEmitter","_cancelEmitter","canceledEmitter","removeCancelCallback","removeAcceptCallback","emitterIndex","inArray","splice","slice","_allowInterruptionByMouseWheel","pointers","_adjustWheelEvent","allowInterruption","allowInterruptionByMouseWheel","closestGestureEmitter","gesture","direction","getDirection","shiftKey","verticalGestureDirection","prop","delta","isActive","element","getElement","is","eventManager","EMITTER_SUBSCRIPTION_DATA","registerEmitter","emitterConfig","emitterClass","emitterName","events","emitterEvents","eventName","noBubble","bubble","setup","subscriptions","handleObj","configure","extend","delegateSelector","selector","type","teardown","disposeEmitter","dispose","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (events/core/emitter_registrator.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _ready_callbacks = _interopRequireDefault(require(\"../../core/utils/ready_callbacks\"));\r\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _element_data = require(\"../../core/element_data\");\r\nvar _class = _interopRequireDefault(require(\"../../core/class\"));\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _event_registrator = _interopRequireDefault(require(\"./event_registrator\"));\r\nvar _index = require(\"../utils/index\");\r\nvar _pointer = _interopRequireDefault(require(\"../pointer\"));\r\nvar _wheel = require(\"./wheel\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar MANAGER_EVENT = \"dxEventManager\";\r\nvar EMITTER_DATA = \"dxEmitter\";\r\nvar EventManager = _class.default.inherit({\r\n    ctor: function() {\r\n        this._attachHandlers();\r\n        this.reset();\r\n        this._proxiedCancelHandler = this._cancelHandler.bind(this);\r\n        this._proxiedAcceptHandler = this._acceptHandler.bind(this)\r\n    },\r\n    _attachHandlers: function() {\r\n        _ready_callbacks.default.add(function() {\r\n            var document = _dom_adapter.default.getDocument();\r\n            _events_engine.default.subscribeGlobal(document, (0, _index.addNamespace)(_pointer.default.down, MANAGER_EVENT), this._pointerDownHandler.bind(this));\r\n            _events_engine.default.subscribeGlobal(document, (0, _index.addNamespace)(_pointer.default.move, MANAGER_EVENT), this._pointerMoveHandler.bind(this));\r\n            _events_engine.default.subscribeGlobal(document, (0, _index.addNamespace)([_pointer.default.up, _pointer.default.cancel].join(\" \"), MANAGER_EVENT), this._pointerUpHandler.bind(this));\r\n            _events_engine.default.subscribeGlobal(document, (0, _index.addNamespace)(_wheel.name, MANAGER_EVENT), this._mouseWheelHandler.bind(this))\r\n        }.bind(this))\r\n    },\r\n    _eachEmitter: function(callback) {\r\n        var activeEmitters = this._activeEmitters || [];\r\n        var i = 0;\r\n        while (activeEmitters.length > i) {\r\n            var emitter = activeEmitters[i];\r\n            if (false === callback(emitter)) {\r\n                break\r\n            }\r\n            if (activeEmitters[i] === emitter) {\r\n                i++\r\n            }\r\n        }\r\n    },\r\n    _applyToEmitters: function(method, arg) {\r\n        this._eachEmitter(function(emitter) {\r\n            emitter[method].call(emitter, arg)\r\n        })\r\n    },\r\n    reset: function() {\r\n        this._eachEmitter(this._proxiedCancelHandler);\r\n        this._activeEmitters = []\r\n    },\r\n    resetEmitter: function(emitter) {\r\n        this._proxiedCancelHandler(emitter)\r\n    },\r\n    _pointerDownHandler: function(e) {\r\n        if ((0, _index.isMouseEvent)(e) && e.which > 1) {\r\n            return\r\n        }\r\n        this._updateEmitters(e)\r\n    },\r\n    _updateEmitters: function(e) {\r\n        if (!this._isSetChanged(e)) {\r\n            return\r\n        }\r\n        this._cleanEmitters(e);\r\n        this._fetchEmitters(e)\r\n    },\r\n    _isSetChanged: function(e) {\r\n        var currentSet = this._closestEmitter(e);\r\n        var previousSet = this._emittersSet || [];\r\n        var setChanged = currentSet.length !== previousSet.length;\r\n        (0, _iterator.each)(currentSet, function(index, emitter) {\r\n            setChanged = setChanged || previousSet[index] !== emitter;\r\n            return !setChanged\r\n        });\r\n        this._emittersSet = currentSet;\r\n        return setChanged\r\n    },\r\n    _closestEmitter: function(e) {\r\n        var that = this;\r\n        var result = [];\r\n        var $element = (0, _renderer.default)(e.target);\r\n\r\n        function handleEmitter(_, emitter) {\r\n            if (!!emitter && emitter.validatePointers(e) && emitter.validate(e)) {\r\n                emitter.addCancelCallback(that._proxiedCancelHandler);\r\n                emitter.addAcceptCallback(that._proxiedAcceptHandler);\r\n                result.push(emitter)\r\n            }\r\n        }\r\n        while ($element.length) {\r\n            var emitters = (0, _element_data.data)($element.get(0), EMITTER_DATA) || [];\r\n            (0, _iterator.each)(emitters, handleEmitter);\r\n            $element = $element.parent()\r\n        }\r\n        return result\r\n    },\r\n    _acceptHandler: function(acceptedEmitter, e) {\r\n        var that = this;\r\n        this._eachEmitter(function(emitter) {\r\n            if (emitter !== acceptedEmitter) {\r\n                that._cancelEmitter(emitter, e)\r\n            }\r\n        })\r\n    },\r\n    _cancelHandler: function(canceledEmitter, e) {\r\n        this._cancelEmitter(canceledEmitter, e)\r\n    },\r\n    _cancelEmitter: function(emitter, e) {\r\n        var activeEmitters = this._activeEmitters;\r\n        if (e) {\r\n            emitter.cancel(e)\r\n        } else {\r\n            emitter.reset()\r\n        }\r\n        emitter.removeCancelCallback();\r\n        emitter.removeAcceptCallback();\r\n        var emitterIndex = (0, _array.inArray)(emitter, activeEmitters);\r\n        if (emitterIndex > -1) {\r\n            activeEmitters.splice(emitterIndex, 1)\r\n        }\r\n    },\r\n    _cleanEmitters: function(e) {\r\n        this._applyToEmitters(\"end\", e);\r\n        this.reset(e)\r\n    },\r\n    _fetchEmitters: function(e) {\r\n        this._activeEmitters = this._emittersSet.slice();\r\n        this._applyToEmitters(\"start\", e)\r\n    },\r\n    _pointerMoveHandler: function(e) {\r\n        this._applyToEmitters(\"move\", e)\r\n    },\r\n    _pointerUpHandler: function(e) {\r\n        this._updateEmitters(e)\r\n    },\r\n    _mouseWheelHandler: function(e) {\r\n        if (!this._allowInterruptionByMouseWheel()) {\r\n            return\r\n        }\r\n        e.pointers = [null];\r\n        this._pointerDownHandler(e);\r\n        this._adjustWheelEvent(e);\r\n        this._pointerMoveHandler(e);\r\n        e.pointers = [];\r\n        this._pointerUpHandler(e)\r\n    },\r\n    _allowInterruptionByMouseWheel: function() {\r\n        var allowInterruption = true;\r\n        this._eachEmitter(function(emitter) {\r\n            allowInterruption = emitter.allowInterruptionByMouseWheel() && allowInterruption;\r\n            return allowInterruption\r\n        });\r\n        return allowInterruption\r\n    },\r\n    _adjustWheelEvent: function(e) {\r\n        var closestGestureEmitter = null;\r\n        this._eachEmitter(function(emitter) {\r\n            if (!emitter.gesture) {\r\n                return\r\n            }\r\n            var direction = emitter.getDirection(e);\r\n            if (\"horizontal\" !== direction && !e.shiftKey || \"vertical\" !== direction && e.shiftKey) {\r\n                closestGestureEmitter = emitter;\r\n                return false\r\n            }\r\n        });\r\n        if (!closestGestureEmitter) {\r\n            return\r\n        }\r\n        var direction = closestGestureEmitter.getDirection(e);\r\n        var verticalGestureDirection = \"both\" === direction && !e.shiftKey || \"vertical\" === direction;\r\n        var prop = verticalGestureDirection ? \"pageY\" : \"pageX\";\r\n        e[prop] += e.delta\r\n    },\r\n    isActive: function(element) {\r\n        var result = false;\r\n        this._eachEmitter(function(emitter) {\r\n            result = result || emitter.getElement().is(element)\r\n        });\r\n        return result\r\n    }\r\n});\r\nvar eventManager = new EventManager;\r\nvar EMITTER_SUBSCRIPTION_DATA = \"dxEmitterSubscription\";\r\nvar registerEmitter = function(emitterConfig) {\r\n    var emitterClass = emitterConfig.emitter;\r\n    var emitterName = emitterConfig.events[0];\r\n    var emitterEvents = emitterConfig.events;\r\n    (0, _iterator.each)(emitterEvents, function(_, eventName) {\r\n        (0, _event_registrator.default)(eventName, {\r\n            noBubble: !emitterConfig.bubble,\r\n            setup: function(element) {\r\n                var subscriptions = (0, _element_data.data)(element, EMITTER_SUBSCRIPTION_DATA) || {};\r\n                var emitters = (0, _element_data.data)(element, EMITTER_DATA) || {};\r\n                var emitter = emitters[emitterName] || new emitterClass(element);\r\n                subscriptions[eventName] = true;\r\n                emitters[emitterName] = emitter;\r\n                (0, _element_data.data)(element, EMITTER_DATA, emitters);\r\n                (0, _element_data.data)(element, EMITTER_SUBSCRIPTION_DATA, subscriptions)\r\n            },\r\n            add: function(element, handleObj) {\r\n                var emitters = (0, _element_data.data)(element, EMITTER_DATA);\r\n                var emitter = emitters[emitterName];\r\n                emitter.configure((0, _extend.extend)({\r\n                    delegateSelector: handleObj.selector\r\n                }, handleObj.data), handleObj.type)\r\n            },\r\n            teardown: function(element) {\r\n                var subscriptions = (0, _element_data.data)(element, EMITTER_SUBSCRIPTION_DATA);\r\n                var emitters = (0, _element_data.data)(element, EMITTER_DATA);\r\n                var emitter = emitters[emitterName];\r\n                delete subscriptions[eventName];\r\n                var disposeEmitter = true;\r\n                (0, _iterator.each)(emitterEvents, function(_, eventName) {\r\n                    disposeEmitter = disposeEmitter && !subscriptions[eventName];\r\n                    return disposeEmitter\r\n                });\r\n                if (disposeEmitter) {\r\n                    if (eventManager.isActive(element)) {\r\n                        eventManager.resetEmitter(emitter)\r\n                    }\r\n                    emitter && emitter.dispose();\r\n                    delete emitters[emitterName]\r\n                }\r\n            }\r\n        })\r\n    })\r\n};\r\nvar _default = registerEmitter;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}