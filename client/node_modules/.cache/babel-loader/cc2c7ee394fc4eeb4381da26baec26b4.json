{"ast":null,"code":"/**\r\n * DevExtreme (ui/text_box/ui.text_editor.mask.strategy.default.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _uiText_editorMaskStrategy = _interopRequireDefault(require(\"./ui.text_editor.mask.strategy.base\"));\n\nvar _index = require(\"../../events/utils/index\");\n\nvar _promise = _interopRequireDefault(require(\"../../core/polyfills/promise\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) {\n    return;\n  }\n\n  if (\"string\" === typeof o) {\n    return _arrayLikeToArray(o, minLen);\n  }\n\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n\n  if (\"Object\" === n && o.constructor) {\n    n = o.constructor.name;\n  }\n\n  if (\"Map\" === n || \"Set\" === n) {\n    return Array.from(o);\n  }\n\n  if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) {\n    return _arrayLikeToArray(o, minLen);\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (\"undefined\" !== typeof Symbol && null != iter[Symbol.iterator] || null != iter[\"@@iterator\"]) {\n    return Array.from(iter);\n  }\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    return _arrayLikeToArray(arr);\n  }\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (null == len || len > arr.length) {\n    len = arr.length;\n  }\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar BACKSPACE_INPUT_TYPE = \"deleteContentBackward\";\nvar EMPTY_CHAR = \" \";\n\nvar DefaultMaskStrategy = function (_BaseMaskStrategy) {\n  _inheritsLoose(DefaultMaskStrategy, _BaseMaskStrategy);\n\n  function DefaultMaskStrategy() {\n    return _BaseMaskStrategy.apply(this, arguments) || this;\n  }\n\n  var _proto = DefaultMaskStrategy.prototype;\n\n  _proto._getStrategyName = function () {\n    return \"default\";\n  };\n\n  _proto.getHandleEventNames = function () {\n    return [].concat(_toConsumableArray(_BaseMaskStrategy.prototype.getHandleEventNames.call(this)), [\"keyPress\"]);\n  };\n\n  _proto._keyPressHandler = function (event) {\n    if (this._keyPressHandled) {\n      return;\n    }\n\n    this._keyPressHandled = true;\n\n    if (this.editor._isControlKeyFired(event)) {\n      return;\n    }\n\n    var editor = this.editor;\n\n    editor._maskKeyHandler(event, function () {\n      return editor._handleKey((0, _index.getChar)(event));\n    });\n  };\n\n  _proto._inputHandler = function (event) {\n    if (this._backspaceInputHandled(event.originalEvent && event.originalEvent.inputType)) {\n      this._handleBackspaceInput(event);\n    }\n\n    if (event.originalEvent) {\n      this._autoFillHandler(event);\n    }\n\n    if (this._keyPressHandled) {\n      return;\n    }\n\n    this._keyPressHandled = true;\n    var inputValue = this.editorInput().val();\n    var caret = this.editorCaret();\n\n    if (!caret.end) {\n      return;\n    }\n\n    caret.start = caret.end - 1;\n    var oldValue = inputValue.substring(0, caret.start) + inputValue.substring(caret.end);\n    var char = inputValue[caret.start];\n    var editor = this.editor;\n    this.editorInput().val(oldValue);\n\n    editor._caret({\n      start: caret.start,\n      end: caret.start\n    });\n\n    editor._maskKeyHandler(event, function () {\n      return editor._handleKey(char);\n    });\n  };\n\n  _proto._backspaceHandler = function (event) {\n    var _this = this;\n\n    var editor = this.editor;\n    this._keyPressHandled = true;\n\n    var afterBackspaceHandler = function (needAdjustCaret, callBack) {\n      if (needAdjustCaret) {\n        editor._direction(_this.DIRECTION.FORWARD);\n\n        editor._adjustCaret();\n      }\n\n      var currentCaret = _this.editorCaret();\n\n      return new _promise.default(function (resolve) {\n        clearTimeout(_this._backspaceHandlerTimeout);\n        _this._backspaceHandlerTimeout = setTimeout(function () {\n          callBack(currentCaret);\n          resolve();\n        });\n      });\n    };\n\n    editor._maskKeyHandler(event, function () {\n      if (editor._hasSelection()) {\n        return afterBackspaceHandler(true, function (currentCaret) {\n          editor._displayMask(currentCaret);\n\n          editor._maskRulesChain.reset();\n        });\n      }\n\n      if (editor._tryMoveCaretBackward()) {\n        return afterBackspaceHandler(false, function (currentCaret) {\n          _this.editorCaret(currentCaret);\n        });\n      }\n\n      editor._handleKey(EMPTY_CHAR, _this.DIRECTION.BACKWARD);\n\n      return afterBackspaceHandler(true, function (currentCaret) {\n        editor._displayMask(currentCaret);\n\n        editor._maskRulesChain.reset();\n      });\n    });\n  };\n\n  _proto._backspaceInputHandled = function (inputType) {\n    return inputType === BACKSPACE_INPUT_TYPE && !this._keyPressHandled;\n  };\n\n  _proto._handleBackspaceInput = function (event) {\n    var _this$editorCaret = this.editorCaret(),\n        start = _this$editorCaret.start,\n        end = _this$editorCaret.end;\n\n    this.editorCaret({\n      start: start + 1,\n      end: end + 1\n    });\n\n    this._backspaceHandler(event);\n  };\n\n  return DefaultMaskStrategy;\n}(_uiText_editorMaskStrategy.default);\n\nvar _default = DefaultMaskStrategy;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/ui/text_box/ui.text_editor.mask.strategy.default.js"],"names":["exports","default","_uiText_editorMaskStrategy","_interopRequireDefault","require","_index","_promise","obj","__esModule","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","_inheritsLoose","subClass","superClass","create","_setPrototypeOf","p","setPrototypeOf","__proto__","BACKSPACE_INPUT_TYPE","EMPTY_CHAR","DefaultMaskStrategy","_BaseMaskStrategy","apply","arguments","_proto","_getStrategyName","getHandleEventNames","concat","_keyPressHandler","event","_keyPressHandled","editor","_isControlKeyFired","_maskKeyHandler","_handleKey","getChar","_inputHandler","_backspaceInputHandled","originalEvent","inputType","_handleBackspaceInput","_autoFillHandler","inputValue","editorInput","val","caret","editorCaret","end","start","oldValue","substring","char","_caret","_backspaceHandler","_this","afterBackspaceHandler","needAdjustCaret","callBack","_direction","DIRECTION","FORWARD","_adjustCaret","currentCaret","resolve","clearTimeout","_backspaceHandlerTimeout","setTimeout","_hasSelection","_displayMask","_maskRulesChain","reset","_tryMoveCaretBackward","BACKWARD","_this$editorCaret","_default","module"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAA,OAAO,CAACC,OAAR,GAAkB,KAAK,CAAvB;;AACA,IAAIC,0BAA0B,GAAGC,sBAAsB,CAACC,OAAO,CAAC,qCAAD,CAAR,CAAvD;;AACA,IAAIC,MAAM,GAAGD,OAAO,CAAC,0BAAD,CAApB;;AACA,IAAIE,QAAQ,GAAGH,sBAAsB,CAACC,OAAO,CAAC,8BAAD,CAAR,CAArC;;AAEA,SAASD,sBAAT,CAAgCI,GAAhC,EAAqC;AACjC,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AACjC,eAAWA;AADsB,GAArC;AAGH;;AAED,SAASE,kBAAT,CAA4BC,GAA5B,EAAiC;AAC7B,SAAOC,kBAAkB,CAACD,GAAD,CAAlB,IAA2BE,gBAAgB,CAACF,GAAD,CAA3C,IAAoDG,2BAA2B,CAACH,GAAD,CAA/E,IAAwFI,kBAAkB,EAAjH;AACH;;AAED,SAASA,kBAAT,GAA8B;AAC1B,QAAM,IAAIC,SAAJ,CAAc,sIAAd,CAAN;AACH;;AAED,SAASF,2BAAT,CAAqCG,CAArC,EAAwCC,MAAxC,EAAgD;AAC5C,MAAI,CAACD,CAAL,EAAQ;AACJ;AACH;;AACD,MAAI,aAAa,OAAOA,CAAxB,EAA2B;AACvB,WAAOE,iBAAiB,CAACF,CAAD,EAAIC,MAAJ,CAAxB;AACH;;AACD,MAAIE,CAAC,GAAGC,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BP,CAA/B,EAAkCQ,KAAlC,CAAwC,CAAxC,EAA2C,CAAC,CAA5C,CAAR;;AACA,MAAI,aAAaL,CAAb,IAAkBH,CAAC,CAACS,WAAxB,EAAqC;AACjCN,IAAAA,CAAC,GAAGH,CAAC,CAACS,WAAF,CAAcC,IAAlB;AACH;;AACD,MAAI,UAAUP,CAAV,IAAe,UAAUA,CAA7B,EAAgC;AAC5B,WAAOQ,KAAK,CAACC,IAAN,CAAWZ,CAAX,CAAP;AACH;;AACD,MAAI,gBAAgBG,CAAhB,IAAqB,2CAA2CU,IAA3C,CAAgDV,CAAhD,CAAzB,EAA6E;AACzE,WAAOD,iBAAiB,CAACF,CAAD,EAAIC,MAAJ,CAAxB;AACH;AACJ;;AAED,SAASL,gBAAT,CAA0BkB,IAA1B,EAAgC;AAC5B,MAAI,gBAAgB,OAAOC,MAAvB,IAAiC,QAAQD,IAAI,CAACC,MAAM,CAACC,QAAR,CAA7C,IAAkE,QAAQF,IAAI,CAAC,YAAD,CAAlF,EAAkG;AAC9F,WAAOH,KAAK,CAACC,IAAN,CAAWE,IAAX,CAAP;AACH;AACJ;;AAED,SAASnB,kBAAT,CAA4BD,GAA5B,EAAiC;AAC7B,MAAIiB,KAAK,CAACM,OAAN,CAAcvB,GAAd,CAAJ,EAAwB;AACpB,WAAOQ,iBAAiB,CAACR,GAAD,CAAxB;AACH;AACJ;;AAED,SAASQ,iBAAT,CAA2BR,GAA3B,EAAgCwB,GAAhC,EAAqC;AACjC,MAAI,QAAQA,GAAR,IAAeA,GAAG,GAAGxB,GAAG,CAACyB,MAA7B,EAAqC;AACjCD,IAAAA,GAAG,GAAGxB,GAAG,CAACyB,MAAV;AACH;;AACD,OAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,IAAI,GAAG,IAAIV,KAAJ,CAAUO,GAAV,CAAvB,EAAuCE,CAAC,GAAGF,GAA3C,EAAgDE,CAAC,EAAjD,EAAqD;AACjDC,IAAAA,IAAI,CAACD,CAAD,CAAJ,GAAU1B,GAAG,CAAC0B,CAAD,CAAb;AACH;;AACD,SAAOC,IAAP;AACH;;AAED,SAASC,cAAT,CAAwBC,QAAxB,EAAkCC,UAAlC,EAA8C;AAC1CD,EAAAA,QAAQ,CAAClB,SAAT,GAAqBD,MAAM,CAACqB,MAAP,CAAcD,UAAU,CAACnB,SAAzB,CAArB;AACAkB,EAAAA,QAAQ,CAAClB,SAAT,CAAmBI,WAAnB,GAAiCc,QAAjC;;AACAG,EAAAA,eAAe,CAACH,QAAD,EAAWC,UAAX,CAAf;AACH;;AAED,SAASE,eAAT,CAAyB1B,CAAzB,EAA4B2B,CAA5B,EAA+B;AAC3BD,EAAAA,eAAe,GAAGtB,MAAM,CAACwB,cAAP,IAAyB,UAAS5B,CAAT,EAAY2B,CAAZ,EAAe;AACtD3B,IAAAA,CAAC,CAAC6B,SAAF,GAAcF,CAAd;AACA,WAAO3B,CAAP;AACH,GAHD;;AAIA,SAAO0B,eAAe,CAAC1B,CAAD,EAAI2B,CAAJ,CAAtB;AACH;;AACD,IAAIG,oBAAoB,GAAG,uBAA3B;AACA,IAAIC,UAAU,GAAG,GAAjB;;AACA,IAAIC,mBAAmB,GAAG,UAASC,iBAAT,EAA4B;AAClDX,EAAAA,cAAc,CAACU,mBAAD,EAAsBC,iBAAtB,CAAd;;AAEA,WAASD,mBAAT,GAA+B;AAC3B,WAAOC,iBAAiB,CAACC,KAAlB,CAAwB,IAAxB,EAA8BC,SAA9B,KAA4C,IAAnD;AACH;;AACD,MAAIC,MAAM,GAAGJ,mBAAmB,CAAC3B,SAAjC;;AACA+B,EAAAA,MAAM,CAACC,gBAAP,GAA0B,YAAW;AACjC,WAAO,SAAP;AACH,GAFD;;AAGAD,EAAAA,MAAM,CAACE,mBAAP,GAA6B,YAAW;AACpC,WAAO,GAAGC,MAAH,CAAU9C,kBAAkB,CAACwC,iBAAiB,CAAC5B,SAAlB,CAA4BiC,mBAA5B,CAAgD/B,IAAhD,CAAqD,IAArD,CAAD,CAA5B,EAA0F,CAAC,UAAD,CAA1F,CAAP;AACH,GAFD;;AAGA6B,EAAAA,MAAM,CAACI,gBAAP,GAA0B,UAASC,KAAT,EAAgB;AACtC,QAAI,KAAKC,gBAAT,EAA2B;AACvB;AACH;;AACD,SAAKA,gBAAL,GAAwB,IAAxB;;AACA,QAAI,KAAKC,MAAL,CAAYC,kBAAZ,CAA+BH,KAA/B,CAAJ,EAA2C;AACvC;AACH;;AACD,QAAIE,MAAM,GAAG,KAAKA,MAAlB;;AACAA,IAAAA,MAAM,CAACE,eAAP,CAAuBJ,KAAvB,EAA8B,YAAW;AACrC,aAAOE,MAAM,CAACG,UAAP,CAAkB,CAAC,GAAGzD,MAAM,CAAC0D,OAAX,EAAoBN,KAApB,CAAlB,CAAP;AACH,KAFD;AAGH,GAZD;;AAaAL,EAAAA,MAAM,CAACY,aAAP,GAAuB,UAASP,KAAT,EAAgB;AACnC,QAAI,KAAKQ,sBAAL,CAA4BR,KAAK,CAACS,aAAN,IAAuBT,KAAK,CAACS,aAAN,CAAoBC,SAAvE,CAAJ,EAAuF;AACnF,WAAKC,qBAAL,CAA2BX,KAA3B;AACH;;AACD,QAAIA,KAAK,CAACS,aAAV,EAAyB;AACrB,WAAKG,gBAAL,CAAsBZ,KAAtB;AACH;;AACD,QAAI,KAAKC,gBAAT,EAA2B;AACvB;AACH;;AACD,SAAKA,gBAAL,GAAwB,IAAxB;AACA,QAAIY,UAAU,GAAG,KAAKC,WAAL,GAAmBC,GAAnB,EAAjB;AACA,QAAIC,KAAK,GAAG,KAAKC,WAAL,EAAZ;;AACA,QAAI,CAACD,KAAK,CAACE,GAAX,EAAgB;AACZ;AACH;;AACDF,IAAAA,KAAK,CAACG,KAAN,GAAcH,KAAK,CAACE,GAAN,GAAY,CAA1B;AACA,QAAIE,QAAQ,GAAGP,UAAU,CAACQ,SAAX,CAAqB,CAArB,EAAwBL,KAAK,CAACG,KAA9B,IAAuCN,UAAU,CAACQ,SAAX,CAAqBL,KAAK,CAACE,GAA3B,CAAtD;AACA,QAAII,IAAI,GAAGT,UAAU,CAACG,KAAK,CAACG,KAAP,CAArB;AACA,QAAIjB,MAAM,GAAG,KAAKA,MAAlB;AACA,SAAKY,WAAL,GAAmBC,GAAnB,CAAuBK,QAAvB;;AACAlB,IAAAA,MAAM,CAACqB,MAAP,CAAc;AACVJ,MAAAA,KAAK,EAAEH,KAAK,CAACG,KADH;AAEVD,MAAAA,GAAG,EAAEF,KAAK,CAACG;AAFD,KAAd;;AAIAjB,IAAAA,MAAM,CAACE,eAAP,CAAuBJ,KAAvB,EAA8B,YAAW;AACrC,aAAOE,MAAM,CAACG,UAAP,CAAkBiB,IAAlB,CAAP;AACH,KAFD;AAGH,GA5BD;;AA6BA3B,EAAAA,MAAM,CAAC6B,iBAAP,GAA2B,UAASxB,KAAT,EAAgB;AACvC,QAAIyB,KAAK,GAAG,IAAZ;;AACA,QAAIvB,MAAM,GAAG,KAAKA,MAAlB;AACA,SAAKD,gBAAL,GAAwB,IAAxB;;AACA,QAAIyB,qBAAqB,GAAG,UAASC,eAAT,EAA0BC,QAA1B,EAAoC;AAC5D,UAAID,eAAJ,EAAqB;AACjBzB,QAAAA,MAAM,CAAC2B,UAAP,CAAkBJ,KAAK,CAACK,SAAN,CAAgBC,OAAlC;;AACA7B,QAAAA,MAAM,CAAC8B,YAAP;AACH;;AACD,UAAIC,YAAY,GAAGR,KAAK,CAACR,WAAN,EAAnB;;AACA,aAAO,IAAIpE,QAAQ,CAACL,OAAb,CAAqB,UAAS0F,OAAT,EAAkB;AAC1CC,QAAAA,YAAY,CAACV,KAAK,CAACW,wBAAP,CAAZ;AACAX,QAAAA,KAAK,CAACW,wBAAN,GAAiCC,UAAU,CAAC,YAAW;AACnDT,UAAAA,QAAQ,CAACK,YAAD,CAAR;AACAC,UAAAA,OAAO;AACV,SAH0C,CAA3C;AAIH,OANM,CAAP;AAOH,KAbD;;AAcAhC,IAAAA,MAAM,CAACE,eAAP,CAAuBJ,KAAvB,EAA8B,YAAW;AACrC,UAAIE,MAAM,CAACoC,aAAP,EAAJ,EAA4B;AACxB,eAAOZ,qBAAqB,CAAC,IAAD,EAAO,UAASO,YAAT,EAAuB;AACtD/B,UAAAA,MAAM,CAACqC,YAAP,CAAoBN,YAApB;;AACA/B,UAAAA,MAAM,CAACsC,eAAP,CAAuBC,KAAvB;AACH,SAH2B,CAA5B;AAIH;;AACD,UAAIvC,MAAM,CAACwC,qBAAP,EAAJ,EAAoC;AAChC,eAAOhB,qBAAqB,CAAC,KAAD,EAAQ,UAASO,YAAT,EAAuB;AACvDR,UAAAA,KAAK,CAACR,WAAN,CAAkBgB,YAAlB;AACH,SAF2B,CAA5B;AAGH;;AACD/B,MAAAA,MAAM,CAACG,UAAP,CAAkBf,UAAlB,EAA8BmC,KAAK,CAACK,SAAN,CAAgBa,QAA9C;;AACA,aAAOjB,qBAAqB,CAAC,IAAD,EAAO,UAASO,YAAT,EAAuB;AACtD/B,QAAAA,MAAM,CAACqC,YAAP,CAAoBN,YAApB;;AACA/B,QAAAA,MAAM,CAACsC,eAAP,CAAuBC,KAAvB;AACH,OAH2B,CAA5B;AAIH,KAjBD;AAkBH,GApCD;;AAqCA9C,EAAAA,MAAM,CAACa,sBAAP,GAAgC,UAASE,SAAT,EAAoB;AAChD,WAAOA,SAAS,KAAKrB,oBAAd,IAAsC,CAAC,KAAKY,gBAAnD;AACH,GAFD;;AAGAN,EAAAA,MAAM,CAACgB,qBAAP,GAA+B,UAASX,KAAT,EAAgB;AAC3C,QAAI4C,iBAAiB,GAAG,KAAK3B,WAAL,EAAxB;AAAA,QACIE,KAAK,GAAGyB,iBAAiB,CAACzB,KAD9B;AAAA,QAEID,GAAG,GAAG0B,iBAAiB,CAAC1B,GAF5B;;AAGA,SAAKD,WAAL,CAAiB;AACbE,MAAAA,KAAK,EAAEA,KAAK,GAAG,CADF;AAEbD,MAAAA,GAAG,EAAEA,GAAG,GAAG;AAFE,KAAjB;;AAIA,SAAKM,iBAAL,CAAuBxB,KAAvB;AACH,GATD;;AAUA,SAAOT,mBAAP;AACH,CA1GyB,CA0GxB9C,0BAA0B,CAACD,OA1GH,CAA1B;;AA2GA,IAAIqG,QAAQ,GAAGtD,mBAAf;AACAhD,OAAO,CAACC,OAAR,GAAkBqG,QAAlB;AACAC,MAAM,CAACvG,OAAP,GAAiBA,OAAO,CAACC,OAAzB","sourcesContent":["/**\r\n * DevExtreme (ui/text_box/ui.text_editor.mask.strategy.default.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _uiText_editorMaskStrategy = _interopRequireDefault(require(\"./ui.text_editor.mask.strategy.base\"));\r\nvar _index = require(\"../../events/utils/index\");\r\nvar _promise = _interopRequireDefault(require(\"../../core/polyfills/promise\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _toConsumableArray(arr) {\r\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread()\r\n}\r\n\r\nfunction _nonIterableSpread() {\r\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")\r\n}\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) {\r\n    if (!o) {\r\n        return\r\n    }\r\n    if (\"string\" === typeof o) {\r\n        return _arrayLikeToArray(o, minLen)\r\n    }\r\n    var n = Object.prototype.toString.call(o).slice(8, -1);\r\n    if (\"Object\" === n && o.constructor) {\r\n        n = o.constructor.name\r\n    }\r\n    if (\"Map\" === n || \"Set\" === n) {\r\n        return Array.from(o)\r\n    }\r\n    if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) {\r\n        return _arrayLikeToArray(o, minLen)\r\n    }\r\n}\r\n\r\nfunction _iterableToArray(iter) {\r\n    if (\"undefined\" !== typeof Symbol && null != iter[Symbol.iterator] || null != iter[\"@@iterator\"]) {\r\n        return Array.from(iter)\r\n    }\r\n}\r\n\r\nfunction _arrayWithoutHoles(arr) {\r\n    if (Array.isArray(arr)) {\r\n        return _arrayLikeToArray(arr)\r\n    }\r\n}\r\n\r\nfunction _arrayLikeToArray(arr, len) {\r\n    if (null == len || len > arr.length) {\r\n        len = arr.length\r\n    }\r\n    for (var i = 0, arr2 = new Array(len); i < len; i++) {\r\n        arr2[i] = arr[i]\r\n    }\r\n    return arr2\r\n}\r\n\r\nfunction _inheritsLoose(subClass, superClass) {\r\n    subClass.prototype = Object.create(superClass.prototype);\r\n    subClass.prototype.constructor = subClass;\r\n    _setPrototypeOf(subClass, superClass)\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar BACKSPACE_INPUT_TYPE = \"deleteContentBackward\";\r\nvar EMPTY_CHAR = \" \";\r\nvar DefaultMaskStrategy = function(_BaseMaskStrategy) {\r\n    _inheritsLoose(DefaultMaskStrategy, _BaseMaskStrategy);\r\n\r\n    function DefaultMaskStrategy() {\r\n        return _BaseMaskStrategy.apply(this, arguments) || this\r\n    }\r\n    var _proto = DefaultMaskStrategy.prototype;\r\n    _proto._getStrategyName = function() {\r\n        return \"default\"\r\n    };\r\n    _proto.getHandleEventNames = function() {\r\n        return [].concat(_toConsumableArray(_BaseMaskStrategy.prototype.getHandleEventNames.call(this)), [\"keyPress\"])\r\n    };\r\n    _proto._keyPressHandler = function(event) {\r\n        if (this._keyPressHandled) {\r\n            return\r\n        }\r\n        this._keyPressHandled = true;\r\n        if (this.editor._isControlKeyFired(event)) {\r\n            return\r\n        }\r\n        var editor = this.editor;\r\n        editor._maskKeyHandler(event, function() {\r\n            return editor._handleKey((0, _index.getChar)(event))\r\n        })\r\n    };\r\n    _proto._inputHandler = function(event) {\r\n        if (this._backspaceInputHandled(event.originalEvent && event.originalEvent.inputType)) {\r\n            this._handleBackspaceInput(event)\r\n        }\r\n        if (event.originalEvent) {\r\n            this._autoFillHandler(event)\r\n        }\r\n        if (this._keyPressHandled) {\r\n            return\r\n        }\r\n        this._keyPressHandled = true;\r\n        var inputValue = this.editorInput().val();\r\n        var caret = this.editorCaret();\r\n        if (!caret.end) {\r\n            return\r\n        }\r\n        caret.start = caret.end - 1;\r\n        var oldValue = inputValue.substring(0, caret.start) + inputValue.substring(caret.end);\r\n        var char = inputValue[caret.start];\r\n        var editor = this.editor;\r\n        this.editorInput().val(oldValue);\r\n        editor._caret({\r\n            start: caret.start,\r\n            end: caret.start\r\n        });\r\n        editor._maskKeyHandler(event, function() {\r\n            return editor._handleKey(char)\r\n        })\r\n    };\r\n    _proto._backspaceHandler = function(event) {\r\n        var _this = this;\r\n        var editor = this.editor;\r\n        this._keyPressHandled = true;\r\n        var afterBackspaceHandler = function(needAdjustCaret, callBack) {\r\n            if (needAdjustCaret) {\r\n                editor._direction(_this.DIRECTION.FORWARD);\r\n                editor._adjustCaret()\r\n            }\r\n            var currentCaret = _this.editorCaret();\r\n            return new _promise.default(function(resolve) {\r\n                clearTimeout(_this._backspaceHandlerTimeout);\r\n                _this._backspaceHandlerTimeout = setTimeout(function() {\r\n                    callBack(currentCaret);\r\n                    resolve()\r\n                })\r\n            })\r\n        };\r\n        editor._maskKeyHandler(event, function() {\r\n            if (editor._hasSelection()) {\r\n                return afterBackspaceHandler(true, function(currentCaret) {\r\n                    editor._displayMask(currentCaret);\r\n                    editor._maskRulesChain.reset()\r\n                })\r\n            }\r\n            if (editor._tryMoveCaretBackward()) {\r\n                return afterBackspaceHandler(false, function(currentCaret) {\r\n                    _this.editorCaret(currentCaret)\r\n                })\r\n            }\r\n            editor._handleKey(EMPTY_CHAR, _this.DIRECTION.BACKWARD);\r\n            return afterBackspaceHandler(true, function(currentCaret) {\r\n                editor._displayMask(currentCaret);\r\n                editor._maskRulesChain.reset()\r\n            })\r\n        })\r\n    };\r\n    _proto._backspaceInputHandled = function(inputType) {\r\n        return inputType === BACKSPACE_INPUT_TYPE && !this._keyPressHandled\r\n    };\r\n    _proto._handleBackspaceInput = function(event) {\r\n        var _this$editorCaret = this.editorCaret(),\r\n            start = _this$editorCaret.start,\r\n            end = _this$editorCaret.end;\r\n        this.editorCaret({\r\n            start: start + 1,\r\n            end: end + 1\r\n        });\r\n        this._backspaceHandler(event)\r\n    };\r\n    return DefaultMaskStrategy\r\n}(_uiText_editorMaskStrategy.default);\r\nvar _default = DefaultMaskStrategy;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}