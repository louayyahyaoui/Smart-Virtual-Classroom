{"ast":null,"code":"/**\r\n * DevExtreme (core/template_manager.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.TemplateManager = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"./renderer\"));\n\nvar _type = require(\"./utils/type\");\n\nvar _common = require(\"./utils/common\");\n\nvar _extend = require(\"./utils/extend\");\n\nvar _function_template = require(\"./templates/function_template\");\n\nvar _empty_template = require(\"./templates/empty_template\");\n\nvar _template_manager = require(\"./utils/template_manager\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nvar TEXT_NODE = 3;\nvar ANONYMOUS_TEMPLATE_NAME = \"template\";\nvar TEMPLATE_OPTIONS_NAME = \"dxTemplate\";\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\nvar DX_POLYMORPH_WIDGET_TEMPLATE = new _function_template.FunctionTemplate(function (_ref) {\n  var model = _ref.model,\n      parent = _ref.parent;\n  var widgetName = model.widget;\n\n  if (!widgetName) {\n    return (0, _renderer.default)();\n  }\n\n  var widgetElement = (0, _renderer.default)(\"<div>\");\n  var widgetOptions = model.options || {};\n\n  if (parent) {\n    parent._createComponent(widgetElement, widgetName, widgetOptions);\n  } else {\n    widgetElement[widgetName](widgetOptions);\n  }\n\n  return widgetElement;\n});\n\nvar TemplateManager = function () {\n  function TemplateManager(createElement, anonymousTemplateName) {\n    this._tempTemplates = [];\n    this._defaultTemplates = {};\n    this._anonymousTemplateName = anonymousTemplateName || ANONYMOUS_TEMPLATE_NAME;\n    this._createElement = createElement || _template_manager.defaultCreateElement;\n    this._createTemplateIfNeeded = this._createTemplateIfNeeded.bind(this);\n  }\n\n  TemplateManager.createDefaultOptions = function () {\n    return {\n      integrationOptions: {\n        watchMethod: function (fn, callback) {\n          var options = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\n\n          if (!options.skipImmediate) {\n            callback(fn());\n          }\n\n          return _common.noop;\n        },\n        templates: {\n          \"dx-polymorph-widget\": DX_POLYMORPH_WIDGET_TEMPLATE\n        },\n        useDeferUpdateForTemplates: true\n      }\n    };\n  };\n\n  var _proto = TemplateManager.prototype;\n\n  _proto.addDefaultTemplates = function (templates) {\n    this._defaultTemplates = (0, _extend.extend)({}, this._defaultTemplates, templates);\n  };\n\n  _proto.dispose = function () {\n    this._tempTemplates.forEach(function (tempTemplate) {\n      tempTemplate.template.dispose && tempTemplate.template.dispose();\n    });\n\n    this._tempTemplates = [];\n  };\n\n  _proto.extractTemplates = function ($el) {\n    var templates = this._extractTemplates($el);\n\n    var anonymousTemplateMeta = this._extractAnonymousTemplate($el);\n\n    return {\n      templates: templates,\n      anonymousTemplateMeta: anonymousTemplateMeta\n    };\n  };\n\n  _proto._extractTemplates = function ($el) {\n    var _this = this;\n\n    var templates = (0, _template_manager.findTemplates)($el, TEMPLATE_OPTIONS_NAME);\n    var suitableTemplates = (0, _template_manager.suitableTemplatesByName)(templates);\n    templates.forEach(function (_ref2) {\n      var element = _ref2.element,\n          name = _ref2.options.name;\n\n      if (element === suitableTemplates[name]) {\n        (0, _renderer.default)(element).addClass(TEMPLATE_WRAPPER_CLASS).detach();\n      } else {\n        (0, _renderer.default)(element).remove();\n      }\n    });\n    return Object.keys(suitableTemplates).map(function (name) {\n      return {\n        name: name,\n        template: _this._createTemplate(suitableTemplates[name])\n      };\n    });\n  };\n\n  _proto._extractAnonymousTemplate = function ($el) {\n    var $anonymousTemplate = $el.contents().detach();\n    var $notJunkTemplateContent = $anonymousTemplate.filter(function (_, element) {\n      var isTextNode = element.nodeType === TEXT_NODE;\n      var isEmptyText = (0, _renderer.default)(element).text().trim().length < 1;\n      return !(isTextNode && isEmptyText);\n    });\n    return $notJunkTemplateContent.length > 0 ? {\n      template: this._createTemplate($anonymousTemplate),\n      name: this._anonymousTemplateName\n    } : {};\n  };\n\n  _proto._createTemplateIfNeeded = function (templateSource) {\n    var cachedTemplate = this._tempTemplates.filter(function (tempTemplate) {\n      return tempTemplate.source === (0, _template_manager.templateKey)(templateSource);\n    })[0];\n\n    if (cachedTemplate) {\n      return cachedTemplate.template;\n    }\n\n    var template = this._createTemplate(templateSource);\n\n    this._tempTemplates.push({\n      template: template,\n      source: (0, _template_manager.templateKey)(templateSource)\n    });\n\n    return template;\n  };\n\n  _proto._createTemplate = function (templateSource) {\n    return this._createElement((0, _template_manager.validateTemplateSource)(templateSource));\n  };\n\n  _proto.getTemplate = function (templateSource, templates, _ref3, context) {\n    var _this2 = this;\n\n    var isAsyncTemplate = _ref3.isAsyncTemplate,\n        skipTemplates = _ref3.skipTemplates;\n\n    if (!(0, _type.isFunction)(templateSource)) {\n      return (0, _template_manager.acquireTemplate)(templateSource, this._createTemplateIfNeeded, templates, isAsyncTemplate, skipTemplates, this._defaultTemplates);\n    }\n\n    return new _function_template.FunctionTemplate(function (options) {\n      var templateSourceResult = templateSource.apply(context, (0, _template_manager.getNormalizedTemplateArgs)(options));\n\n      if (!(0, _type.isDefined)(templateSourceResult)) {\n        return new _empty_template.EmptyTemplate();\n      }\n\n      var dispose = false;\n      var template = (0, _template_manager.acquireTemplate)(templateSourceResult, function (templateSource) {\n        if (templateSource.nodeType || (0, _type.isRenderer)(templateSource) && !(0, _renderer.default)(templateSource).is(\"script\")) {\n          return new _function_template.FunctionTemplate(function () {\n            return templateSource;\n          });\n        }\n\n        dispose = true;\n        return _this2._createTemplate(templateSource);\n      }, templates, isAsyncTemplate, skipTemplates, _this2._defaultTemplates);\n      var result = template.render(options);\n      dispose && template.dispose && template.dispose();\n      return result;\n    });\n  };\n\n  _createClass(TemplateManager, [{\n    key: \"anonymousTemplateName\",\n    get: function () {\n      return this._anonymousTemplateName;\n    }\n  }]);\n\n  return TemplateManager;\n}();\n\nexports.TemplateManager = TemplateManager;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/core/template_manager.js"],"names":["exports","TemplateManager","_renderer","_interopRequireDefault","require","_type","_common","_extend","_function_template","_empty_template","_template_manager","obj","__esModule","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","TEXT_NODE","ANONYMOUS_TEMPLATE_NAME","TEMPLATE_OPTIONS_NAME","TEMPLATE_WRAPPER_CLASS","DX_POLYMORPH_WIDGET_TEMPLATE","FunctionTemplate","_ref","model","parent","widgetName","widget","default","widgetElement","widgetOptions","options","_createComponent","createElement","anonymousTemplateName","_tempTemplates","_defaultTemplates","_anonymousTemplateName","_createElement","defaultCreateElement","_createTemplateIfNeeded","bind","createDefaultOptions","integrationOptions","watchMethod","fn","callback","arguments","skipImmediate","noop","templates","useDeferUpdateForTemplates","_proto","addDefaultTemplates","extend","dispose","forEach","tempTemplate","template","extractTemplates","$el","_extractTemplates","anonymousTemplateMeta","_extractAnonymousTemplate","_this","findTemplates","suitableTemplates","suitableTemplatesByName","_ref2","element","name","addClass","detach","remove","keys","map","_createTemplate","$anonymousTemplate","contents","$notJunkTemplateContent","filter","_","isTextNode","nodeType","isEmptyText","text","trim","templateSource","cachedTemplate","source","templateKey","push","validateTemplateSource","getTemplate","_ref3","context","_this2","isAsyncTemplate","skipTemplates","isFunction","acquireTemplate","templateSourceResult","apply","getNormalizedTemplateArgs","isDefined","EmptyTemplate","isRenderer","is","result","render","get"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (core/template_manager.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.TemplateManager = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"./renderer\"));\r\nvar _type = require(\"./utils/type\");\r\nvar _common = require(\"./utils/common\");\r\nvar _extend = require(\"./utils/extend\");\r\nvar _function_template = require(\"./templates/function_template\");\r\nvar _empty_template = require(\"./templates/empty_template\");\r\nvar _template_manager = require(\"./utils/template_manager\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\nvar TEXT_NODE = 3;\r\nvar ANONYMOUS_TEMPLATE_NAME = \"template\";\r\nvar TEMPLATE_OPTIONS_NAME = \"dxTemplate\";\r\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\r\nvar DX_POLYMORPH_WIDGET_TEMPLATE = new _function_template.FunctionTemplate(function(_ref) {\r\n    var model = _ref.model,\r\n        parent = _ref.parent;\r\n    var widgetName = model.widget;\r\n    if (!widgetName) {\r\n        return (0, _renderer.default)()\r\n    }\r\n    var widgetElement = (0, _renderer.default)(\"<div>\");\r\n    var widgetOptions = model.options || {};\r\n    if (parent) {\r\n        parent._createComponent(widgetElement, widgetName, widgetOptions)\r\n    } else {\r\n        widgetElement[widgetName](widgetOptions)\r\n    }\r\n    return widgetElement\r\n});\r\nvar TemplateManager = function() {\r\n    function TemplateManager(createElement, anonymousTemplateName) {\r\n        this._tempTemplates = [];\r\n        this._defaultTemplates = {};\r\n        this._anonymousTemplateName = anonymousTemplateName || ANONYMOUS_TEMPLATE_NAME;\r\n        this._createElement = createElement || _template_manager.defaultCreateElement;\r\n        this._createTemplateIfNeeded = this._createTemplateIfNeeded.bind(this)\r\n    }\r\n    TemplateManager.createDefaultOptions = function() {\r\n        return {\r\n            integrationOptions: {\r\n                watchMethod: function(fn, callback) {\r\n                    var options = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\r\n                    if (!options.skipImmediate) {\r\n                        callback(fn())\r\n                    }\r\n                    return _common.noop\r\n                },\r\n                templates: {\r\n                    \"dx-polymorph-widget\": DX_POLYMORPH_WIDGET_TEMPLATE\r\n                },\r\n                useDeferUpdateForTemplates: true\r\n            }\r\n        }\r\n    };\r\n    var _proto = TemplateManager.prototype;\r\n    _proto.addDefaultTemplates = function(templates) {\r\n        this._defaultTemplates = (0, _extend.extend)({}, this._defaultTemplates, templates)\r\n    };\r\n    _proto.dispose = function() {\r\n        this._tempTemplates.forEach(function(tempTemplate) {\r\n            tempTemplate.template.dispose && tempTemplate.template.dispose()\r\n        });\r\n        this._tempTemplates = []\r\n    };\r\n    _proto.extractTemplates = function($el) {\r\n        var templates = this._extractTemplates($el);\r\n        var anonymousTemplateMeta = this._extractAnonymousTemplate($el);\r\n        return {\r\n            templates: templates,\r\n            anonymousTemplateMeta: anonymousTemplateMeta\r\n        }\r\n    };\r\n    _proto._extractTemplates = function($el) {\r\n        var _this = this;\r\n        var templates = (0, _template_manager.findTemplates)($el, TEMPLATE_OPTIONS_NAME);\r\n        var suitableTemplates = (0, _template_manager.suitableTemplatesByName)(templates);\r\n        templates.forEach(function(_ref2) {\r\n            var element = _ref2.element,\r\n                name = _ref2.options.name;\r\n            if (element === suitableTemplates[name]) {\r\n                (0, _renderer.default)(element).addClass(TEMPLATE_WRAPPER_CLASS).detach()\r\n            } else {\r\n                (0, _renderer.default)(element).remove()\r\n            }\r\n        });\r\n        return Object.keys(suitableTemplates).map(function(name) {\r\n            return {\r\n                name: name,\r\n                template: _this._createTemplate(suitableTemplates[name])\r\n            }\r\n        })\r\n    };\r\n    _proto._extractAnonymousTemplate = function($el) {\r\n        var $anonymousTemplate = $el.contents().detach();\r\n        var $notJunkTemplateContent = $anonymousTemplate.filter(function(_, element) {\r\n            var isTextNode = element.nodeType === TEXT_NODE;\r\n            var isEmptyText = (0, _renderer.default)(element).text().trim().length < 1;\r\n            return !(isTextNode && isEmptyText)\r\n        });\r\n        return $notJunkTemplateContent.length > 0 ? {\r\n            template: this._createTemplate($anonymousTemplate),\r\n            name: this._anonymousTemplateName\r\n        } : {}\r\n    };\r\n    _proto._createTemplateIfNeeded = function(templateSource) {\r\n        var cachedTemplate = this._tempTemplates.filter(function(tempTemplate) {\r\n            return tempTemplate.source === (0, _template_manager.templateKey)(templateSource)\r\n        })[0];\r\n        if (cachedTemplate) {\r\n            return cachedTemplate.template\r\n        }\r\n        var template = this._createTemplate(templateSource);\r\n        this._tempTemplates.push({\r\n            template: template,\r\n            source: (0, _template_manager.templateKey)(templateSource)\r\n        });\r\n        return template\r\n    };\r\n    _proto._createTemplate = function(templateSource) {\r\n        return this._createElement((0, _template_manager.validateTemplateSource)(templateSource))\r\n    };\r\n    _proto.getTemplate = function(templateSource, templates, _ref3, context) {\r\n        var _this2 = this;\r\n        var isAsyncTemplate = _ref3.isAsyncTemplate,\r\n            skipTemplates = _ref3.skipTemplates;\r\n        if (!(0, _type.isFunction)(templateSource)) {\r\n            return (0, _template_manager.acquireTemplate)(templateSource, this._createTemplateIfNeeded, templates, isAsyncTemplate, skipTemplates, this._defaultTemplates)\r\n        }\r\n        return new _function_template.FunctionTemplate(function(options) {\r\n            var templateSourceResult = templateSource.apply(context, (0, _template_manager.getNormalizedTemplateArgs)(options));\r\n            if (!(0, _type.isDefined)(templateSourceResult)) {\r\n                return new _empty_template.EmptyTemplate\r\n            }\r\n            var dispose = false;\r\n            var template = (0, _template_manager.acquireTemplate)(templateSourceResult, function(templateSource) {\r\n                if (templateSource.nodeType || (0, _type.isRenderer)(templateSource) && !(0, _renderer.default)(templateSource).is(\"script\")) {\r\n                    return new _function_template.FunctionTemplate(function() {\r\n                        return templateSource\r\n                    })\r\n                }\r\n                dispose = true;\r\n                return _this2._createTemplate(templateSource)\r\n            }, templates, isAsyncTemplate, skipTemplates, _this2._defaultTemplates);\r\n            var result = template.render(options);\r\n            dispose && template.dispose && template.dispose();\r\n            return result\r\n        })\r\n    };\r\n    _createClass(TemplateManager, [{\r\n        key: \"anonymousTemplateName\",\r\n        get: function() {\r\n            return this._anonymousTemplateName\r\n        }\r\n    }]);\r\n    return TemplateManager\r\n}();\r\nexports.TemplateManager = TemplateManager;\r\n"]},"metadata":{},"sourceType":"script"}