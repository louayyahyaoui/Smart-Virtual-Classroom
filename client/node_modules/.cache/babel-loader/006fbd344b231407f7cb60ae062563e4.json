{"ast":null,"code":"/**\r\n * DevExtreme (ui/scroll_view/ui.scroll_view.native.swipe_down.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _callbacks = _interopRequireDefault(require(\"../../core/utils/callbacks\"));\n\nvar _translator = require(\"../../animation/translator\");\n\nvar _index = require(\"../../events/utils/index\");\n\nvar _uiScrollable = _interopRequireDefault(require(\"./ui.scrollable.native\"));\n\nvar _load_indicator = _interopRequireDefault(require(\"../load_indicator\"));\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar SCROLLVIEW_PULLDOWN_DOWN_LOADING_CLASS = \"dx-scrollview-pull-down-loading\";\nvar SCROLLVIEW_PULLDOWN_INDICATOR_CLASS = \"dx-scrollview-pull-down-indicator\";\nvar SCROLLVIEW_PULLDOWN_REFRESHING_CLASS = \"dx-scrollview-pull-down-refreshing\";\nvar PULLDOWN_ICON_CLASS = \"dx-icon-pulldown\";\nvar STATE_RELEASED = 0;\nvar STATE_READY = 1;\nvar STATE_REFRESHING = 2;\nvar STATE_TOUCHED = 4;\nvar STATE_PULLED = 5;\n\nvar SwipeDownNativeScrollViewStrategy = _uiScrollable.default.inherit({\n  _init: function (scrollView) {\n    this.callBase(scrollView);\n    this._$topPocket = scrollView._$topPocket;\n    this._$bottomPocket = scrollView._$bottomPocket;\n    this._$pullDown = scrollView._$pullDown;\n    this._$scrollViewContent = scrollView.content();\n\n    this._initCallbacks();\n\n    this._location = 0;\n  },\n  _initCallbacks: function () {\n    this.pullDownCallbacks = (0, _callbacks.default)();\n    this.releaseCallbacks = (0, _callbacks.default)();\n    this.reachBottomCallbacks = (0, _callbacks.default)();\n  },\n  render: function () {\n    this.callBase();\n\n    this._renderPullDown();\n\n    this._releaseState();\n  },\n  _renderPullDown: function () {\n    var $loadContainer = (0, _renderer.default)(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_INDICATOR_CLASS);\n    var $loadIndicator = new _load_indicator.default((0, _renderer.default)(\"<div>\")).$element();\n    this._$icon = (0, _renderer.default)(\"<div>\").addClass(PULLDOWN_ICON_CLASS);\n\n    this._$pullDown.empty().append(this._$icon).append($loadContainer.append($loadIndicator));\n  },\n  _releaseState: function () {\n    this._state = STATE_RELEASED;\n\n    this._releasePullDown();\n\n    this._updateDimensions();\n  },\n  _releasePullDown: function () {\n    this._$pullDown.css({\n      opacity: 0\n    });\n  },\n  _updateDimensions: function () {\n    this.callBase();\n    this._topPocketSize = this._$topPocket.height();\n    this._bottomPocketSize = this._$bottomPocket.height();\n    this._scrollOffset = this._$container.height() - this._$content.height();\n  },\n  _allowedDirections: function () {\n    var allowedDirections = this.callBase();\n    allowedDirections.vertical = allowedDirections.vertical || this._pullDownEnabled;\n    return allowedDirections;\n  },\n  handleInit: function (e) {\n    this.callBase(e);\n\n    if (this._state === STATE_RELEASED && 0 === this._location) {\n      this._startClientY = (0, _index.eventData)(e.originalEvent).y;\n      this._state = STATE_TOUCHED;\n    }\n  },\n  handleMove: function (e) {\n    this.callBase(e);\n    this._deltaY = (0, _index.eventData)(e.originalEvent).y - this._startClientY;\n\n    if (this._state === STATE_TOUCHED) {\n      if (this._pullDownEnabled && this._deltaY > 0) {\n        this._state = STATE_PULLED;\n      } else {\n        this._complete();\n      }\n    }\n\n    if (this._state === STATE_PULLED) {\n      e.preventDefault();\n\n      this._movePullDown();\n    }\n  },\n  _movePullDown: function () {\n    var pullDownHeight = this._getPullDownHeight();\n\n    var top = Math.min(3 * pullDownHeight, this._deltaY + this._getPullDownStartPosition());\n    var angle = 180 * top / pullDownHeight / 3;\n\n    this._$pullDown.css({\n      opacity: 1\n    }).toggleClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS, top < pullDownHeight);\n\n    (0, _translator.move)(this._$pullDown, {\n      top: top\n    });\n\n    this._$icon.css({\n      transform: \"rotate(\" + angle + \"deg)\"\n    });\n  },\n  _isPullDown: function () {\n    return this._pullDownEnabled && this._state === STATE_PULLED && this._deltaY >= this._getPullDownHeight() - this._getPullDownStartPosition();\n  },\n  _getPullDownHeight: function () {\n    return Math.round(.05 * this._$element.outerHeight());\n  },\n  _getPullDownStartPosition: function () {\n    return -Math.round(1.5 * this._$pullDown.outerHeight());\n  },\n  handleEnd: function () {\n    if (this._isPullDown()) {\n      this._pullDownRefreshing();\n    }\n\n    this._complete();\n  },\n  handleStop: function () {\n    this._complete();\n  },\n  _complete: function () {\n    if (this._state === STATE_TOUCHED || this._state === STATE_PULLED) {\n      this._releaseState();\n    }\n  },\n  handleScroll: function (e) {\n    this.callBase(e);\n\n    if (this._state === STATE_REFRESHING) {\n      return;\n    }\n\n    var currentLocation = this.location().top;\n    var scrollDelta = this._location - currentLocation;\n    this._location = currentLocation;\n\n    if (scrollDelta > 0 && this._isReachBottom()) {\n      this._reachBottom();\n    } else {\n      this._stateReleased();\n    }\n  },\n  _isReachBottom: function () {\n    return this._reachBottomEnabled && this._location <= this._scrollOffset + this._bottomPocketSize;\n  },\n  _reachBottom: function () {\n    this.reachBottomCallbacks.fire();\n  },\n  _stateReleased: function () {\n    if (this._state === STATE_RELEASED) {\n      return;\n    }\n\n    this._$pullDown.removeClass(SCROLLVIEW_PULLDOWN_DOWN_LOADING_CLASS);\n\n    this._releaseState();\n  },\n  _pullDownRefreshing: function () {\n    this._state = STATE_REFRESHING;\n\n    this._pullDownRefreshHandler();\n  },\n  _pullDownRefreshHandler: function () {\n    this._refreshPullDown();\n\n    this.pullDownCallbacks.fire();\n  },\n  _refreshPullDown: function () {\n    this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_DOWN_LOADING_CLASS);\n\n    (0, _translator.move)(this._$pullDown, {\n      top: this._getPullDownHeight()\n    });\n  },\n  pullDownEnable: function (enabled) {\n    this._$topPocket.toggle(enabled);\n\n    this._pullDownEnabled = enabled;\n  },\n  reachBottomEnable: function (enabled) {\n    this._reachBottomEnabled = enabled;\n  },\n  pendingRelease: function () {\n    this._state = STATE_READY;\n  },\n  release: function () {\n    var deferred = new _deferred.Deferred();\n\n    this._updateDimensions();\n\n    clearTimeout(this._releaseTimeout);\n    this._releaseTimeout = setTimeout(function () {\n      this._stateReleased();\n\n      this.releaseCallbacks.fire();\n\n      this._updateAction();\n\n      deferred.resolve();\n    }.bind(this), 800);\n    return deferred.promise();\n  },\n  dispose: function () {\n    clearTimeout(this._pullDownRefreshTimeout);\n    clearTimeout(this._releaseTimeout);\n    this.callBase();\n  }\n});\n\nvar _default = SwipeDownNativeScrollViewStrategy;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/ui/scroll_view/ui.scroll_view.native.swipe_down.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_callbacks","_translator","_index","_uiScrollable","_load_indicator","_deferred","obj","__esModule","SCROLLVIEW_PULLDOWN_DOWN_LOADING_CLASS","SCROLLVIEW_PULLDOWN_INDICATOR_CLASS","SCROLLVIEW_PULLDOWN_REFRESHING_CLASS","PULLDOWN_ICON_CLASS","STATE_RELEASED","STATE_READY","STATE_REFRESHING","STATE_TOUCHED","STATE_PULLED","SwipeDownNativeScrollViewStrategy","inherit","_init","scrollView","callBase","_$topPocket","_$bottomPocket","_$pullDown","_$scrollViewContent","content","_initCallbacks","_location","pullDownCallbacks","releaseCallbacks","reachBottomCallbacks","render","_renderPullDown","_releaseState","$loadContainer","addClass","$loadIndicator","$element","_$icon","empty","append","_state","_releasePullDown","_updateDimensions","css","opacity","_topPocketSize","height","_bottomPocketSize","_scrollOffset","_$container","_$content","_allowedDirections","allowedDirections","vertical","_pullDownEnabled","handleInit","e","_startClientY","eventData","originalEvent","y","handleMove","_deltaY","_complete","preventDefault","_movePullDown","pullDownHeight","_getPullDownHeight","top","Math","min","_getPullDownStartPosition","angle","toggleClass","move","transform","_isPullDown","round","_$element","outerHeight","handleEnd","_pullDownRefreshing","handleStop","handleScroll","currentLocation","location","scrollDelta","_isReachBottom","_reachBottom","_stateReleased","_reachBottomEnabled","fire","removeClass","_pullDownRefreshHandler","_refreshPullDown","pullDownEnable","enabled","toggle","reachBottomEnable","pendingRelease","release","deferred","Deferred","clearTimeout","_releaseTimeout","setTimeout","_updateAction","resolve","bind","promise","dispose","_pullDownRefreshTimeout","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scroll_view/ui.scroll_view.native.swipe_down.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _callbacks = _interopRequireDefault(require(\"../../core/utils/callbacks\"));\r\nvar _translator = require(\"../../animation/translator\");\r\nvar _index = require(\"../../events/utils/index\");\r\nvar _uiScrollable = _interopRequireDefault(require(\"./ui.scrollable.native\"));\r\nvar _load_indicator = _interopRequireDefault(require(\"../load_indicator\"));\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar SCROLLVIEW_PULLDOWN_DOWN_LOADING_CLASS = \"dx-scrollview-pull-down-loading\";\r\nvar SCROLLVIEW_PULLDOWN_INDICATOR_CLASS = \"dx-scrollview-pull-down-indicator\";\r\nvar SCROLLVIEW_PULLDOWN_REFRESHING_CLASS = \"dx-scrollview-pull-down-refreshing\";\r\nvar PULLDOWN_ICON_CLASS = \"dx-icon-pulldown\";\r\nvar STATE_RELEASED = 0;\r\nvar STATE_READY = 1;\r\nvar STATE_REFRESHING = 2;\r\nvar STATE_TOUCHED = 4;\r\nvar STATE_PULLED = 5;\r\nvar SwipeDownNativeScrollViewStrategy = _uiScrollable.default.inherit({\r\n    _init: function(scrollView) {\r\n        this.callBase(scrollView);\r\n        this._$topPocket = scrollView._$topPocket;\r\n        this._$bottomPocket = scrollView._$bottomPocket;\r\n        this._$pullDown = scrollView._$pullDown;\r\n        this._$scrollViewContent = scrollView.content();\r\n        this._initCallbacks();\r\n        this._location = 0\r\n    },\r\n    _initCallbacks: function() {\r\n        this.pullDownCallbacks = (0, _callbacks.default)();\r\n        this.releaseCallbacks = (0, _callbacks.default)();\r\n        this.reachBottomCallbacks = (0, _callbacks.default)()\r\n    },\r\n    render: function() {\r\n        this.callBase();\r\n        this._renderPullDown();\r\n        this._releaseState()\r\n    },\r\n    _renderPullDown: function() {\r\n        var $loadContainer = (0, _renderer.default)(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_INDICATOR_CLASS);\r\n        var $loadIndicator = new _load_indicator.default((0, _renderer.default)(\"<div>\")).$element();\r\n        this._$icon = (0, _renderer.default)(\"<div>\").addClass(PULLDOWN_ICON_CLASS);\r\n        this._$pullDown.empty().append(this._$icon).append($loadContainer.append($loadIndicator))\r\n    },\r\n    _releaseState: function() {\r\n        this._state = STATE_RELEASED;\r\n        this._releasePullDown();\r\n        this._updateDimensions()\r\n    },\r\n    _releasePullDown: function() {\r\n        this._$pullDown.css({\r\n            opacity: 0\r\n        })\r\n    },\r\n    _updateDimensions: function() {\r\n        this.callBase();\r\n        this._topPocketSize = this._$topPocket.height();\r\n        this._bottomPocketSize = this._$bottomPocket.height();\r\n        this._scrollOffset = this._$container.height() - this._$content.height()\r\n    },\r\n    _allowedDirections: function() {\r\n        var allowedDirections = this.callBase();\r\n        allowedDirections.vertical = allowedDirections.vertical || this._pullDownEnabled;\r\n        return allowedDirections\r\n    },\r\n    handleInit: function(e) {\r\n        this.callBase(e);\r\n        if (this._state === STATE_RELEASED && 0 === this._location) {\r\n            this._startClientY = (0, _index.eventData)(e.originalEvent).y;\r\n            this._state = STATE_TOUCHED\r\n        }\r\n    },\r\n    handleMove: function(e) {\r\n        this.callBase(e);\r\n        this._deltaY = (0, _index.eventData)(e.originalEvent).y - this._startClientY;\r\n        if (this._state === STATE_TOUCHED) {\r\n            if (this._pullDownEnabled && this._deltaY > 0) {\r\n                this._state = STATE_PULLED\r\n            } else {\r\n                this._complete()\r\n            }\r\n        }\r\n        if (this._state === STATE_PULLED) {\r\n            e.preventDefault();\r\n            this._movePullDown()\r\n        }\r\n    },\r\n    _movePullDown: function() {\r\n        var pullDownHeight = this._getPullDownHeight();\r\n        var top = Math.min(3 * pullDownHeight, this._deltaY + this._getPullDownStartPosition());\r\n        var angle = 180 * top / pullDownHeight / 3;\r\n        this._$pullDown.css({\r\n            opacity: 1\r\n        }).toggleClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS, top < pullDownHeight);\r\n        (0, _translator.move)(this._$pullDown, {\r\n            top: top\r\n        });\r\n        this._$icon.css({\r\n            transform: \"rotate(\" + angle + \"deg)\"\r\n        })\r\n    },\r\n    _isPullDown: function() {\r\n        return this._pullDownEnabled && this._state === STATE_PULLED && this._deltaY >= this._getPullDownHeight() - this._getPullDownStartPosition()\r\n    },\r\n    _getPullDownHeight: function() {\r\n        return Math.round(.05 * this._$element.outerHeight())\r\n    },\r\n    _getPullDownStartPosition: function() {\r\n        return -Math.round(1.5 * this._$pullDown.outerHeight())\r\n    },\r\n    handleEnd: function() {\r\n        if (this._isPullDown()) {\r\n            this._pullDownRefreshing()\r\n        }\r\n        this._complete()\r\n    },\r\n    handleStop: function() {\r\n        this._complete()\r\n    },\r\n    _complete: function() {\r\n        if (this._state === STATE_TOUCHED || this._state === STATE_PULLED) {\r\n            this._releaseState()\r\n        }\r\n    },\r\n    handleScroll: function(e) {\r\n        this.callBase(e);\r\n        if (this._state === STATE_REFRESHING) {\r\n            return\r\n        }\r\n        var currentLocation = this.location().top;\r\n        var scrollDelta = this._location - currentLocation;\r\n        this._location = currentLocation;\r\n        if (scrollDelta > 0 && this._isReachBottom()) {\r\n            this._reachBottom()\r\n        } else {\r\n            this._stateReleased()\r\n        }\r\n    },\r\n    _isReachBottom: function() {\r\n        return this._reachBottomEnabled && this._location <= this._scrollOffset + this._bottomPocketSize\r\n    },\r\n    _reachBottom: function() {\r\n        this.reachBottomCallbacks.fire()\r\n    },\r\n    _stateReleased: function() {\r\n        if (this._state === STATE_RELEASED) {\r\n            return\r\n        }\r\n        this._$pullDown.removeClass(SCROLLVIEW_PULLDOWN_DOWN_LOADING_CLASS);\r\n        this._releaseState()\r\n    },\r\n    _pullDownRefreshing: function() {\r\n        this._state = STATE_REFRESHING;\r\n        this._pullDownRefreshHandler()\r\n    },\r\n    _pullDownRefreshHandler: function() {\r\n        this._refreshPullDown();\r\n        this.pullDownCallbacks.fire()\r\n    },\r\n    _refreshPullDown: function() {\r\n        this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_DOWN_LOADING_CLASS);\r\n        (0, _translator.move)(this._$pullDown, {\r\n            top: this._getPullDownHeight()\r\n        })\r\n    },\r\n    pullDownEnable: function(enabled) {\r\n        this._$topPocket.toggle(enabled);\r\n        this._pullDownEnabled = enabled\r\n    },\r\n    reachBottomEnable: function(enabled) {\r\n        this._reachBottomEnabled = enabled\r\n    },\r\n    pendingRelease: function() {\r\n        this._state = STATE_READY\r\n    },\r\n    release: function() {\r\n        var deferred = new _deferred.Deferred;\r\n        this._updateDimensions();\r\n        clearTimeout(this._releaseTimeout);\r\n        this._releaseTimeout = setTimeout(function() {\r\n            this._stateReleased();\r\n            this.releaseCallbacks.fire();\r\n            this._updateAction();\r\n            deferred.resolve()\r\n        }.bind(this), 800);\r\n        return deferred.promise()\r\n    },\r\n    dispose: function() {\r\n        clearTimeout(this._pullDownRefreshTimeout);\r\n        clearTimeout(this._releaseTimeout);\r\n        this.callBase()\r\n    }\r\n});\r\nvar _default = SwipeDownNativeScrollViewStrategy;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}