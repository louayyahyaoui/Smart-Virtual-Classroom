{"ast":null,"code":"/**\r\n * DevExtreme (ui/scroll_view/ui.scroll_view.simulated.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _callbacks = _interopRequireDefault(require(\"../../core/utils/callbacks\"));\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _uiScrollable = require(\"./ui.scrollable.simulated\");\n\nvar _load_indicator = _interopRequireDefault(require(\"../load_indicator\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar math = Math;\nvar SCROLLVIEW_PULLDOWN_REFRESHING_CLASS = \"dx-scrollview-pull-down-loading\";\nvar SCROLLVIEW_PULLDOWN_READY_CLASS = \"dx-scrollview-pull-down-ready\";\nvar SCROLLVIEW_PULLDOWN_IMAGE_CLASS = \"dx-scrollview-pull-down-image\";\nvar SCROLLVIEW_PULLDOWN_INDICATOR_CLASS = \"dx-scrollview-pull-down-indicator\";\nvar SCROLLVIEW_PULLDOWN_TEXT_CLASS = \"dx-scrollview-pull-down-text\";\nvar SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS = \"dx-scrollview-pull-down-text-visible\";\nvar STATE_RELEASED = 0;\nvar STATE_READY = 1;\nvar STATE_REFRESHING = 2;\nvar STATE_LOADING = 3;\n\nvar ScrollViewScroller = _uiScrollable.Scroller.inherit({\n  ctor: function () {\n    this._topPocketSize = 0;\n    this.callBase.apply(this, arguments);\n\n    this._initCallbacks();\n\n    this._releaseState();\n  },\n  _releaseState: function () {\n    this._state = STATE_RELEASED;\n\n    this._refreshPullDownText();\n  },\n  _refreshPullDownText: function () {\n    var that = this;\n    var pullDownTextItems = [{\n      element: this._$pullingDownText,\n      visibleState: STATE_RELEASED\n    }, {\n      element: this._$pulledDownText,\n      visibleState: STATE_READY\n    }, {\n      element: this._$refreshingText,\n      visibleState: STATE_REFRESHING\n    }];\n    (0, _iterator.each)(pullDownTextItems, function (_, item) {\n      var action = that._state === item.visibleState ? \"addClass\" : \"removeClass\";\n      item.element[action](SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS);\n    });\n  },\n  _initCallbacks: function () {\n    this.pullDownCallbacks = (0, _callbacks.default)();\n    this.releaseCallbacks = (0, _callbacks.default)();\n    this.reachBottomCallbacks = (0, _callbacks.default)();\n  },\n  _updateBounds: function () {\n    var considerPockets = \"horizontal\" !== this._direction;\n    this._topPocketSize = considerPockets ? Math.round(this._$topPocket[this._dimension]()) : 0;\n    this._bottomPocketSize = considerPockets ? Math.round(this._$bottomPocket[this._dimension]()) : 0;\n    this.callBase();\n    this._bottomBound = this._minOffset + this._bottomPocketSize;\n  },\n  _updateScrollbar: function () {\n    this._scrollbar.option({\n      containerSize: this._containerSize(),\n      contentSize: this._contentSize() - this._topPocketSize - this._bottomPocketSize,\n      scaleRatio: this._getScaleRatio()\n    });\n  },\n  _moveContent: function () {\n    this.callBase();\n\n    if (this._isPullDown()) {\n      this._pullDownReady();\n    } else {\n      if (this._isReachBottom()) {\n        this._reachBottomReady();\n      } else {\n        if (this._state !== STATE_RELEASED) {\n          this._stateReleased();\n        }\n      }\n    }\n  },\n  _moveScrollbar: function () {\n    this._scrollbar.moveTo(this._topPocketSize + this._location);\n  },\n  _isPullDown: function () {\n    return this._pullDownEnabled && this._location >= 0;\n  },\n  _isReachBottom: function () {\n    return this._reachBottomEnabled && this._location - this._bottomBound <= .5;\n  },\n  _scrollComplete: function () {\n    if (this._inBounds() && this._state === STATE_READY) {\n      this._pullDownRefreshing();\n    } else {\n      if (this._inBounds() && this._state === STATE_LOADING) {\n        this._reachBottomLoading();\n      } else {\n        this.callBase();\n      }\n    }\n  },\n  _reachBottomReady: function () {\n    if (this._state === STATE_LOADING) {\n      return;\n    }\n\n    this._state = STATE_LOADING;\n    this._minOffset = this._getMinOffset();\n  },\n  _getMaxOffset: function () {\n    return -this._topPocketSize;\n  },\n  _getMinOffset: function () {\n    return math.min(this.callBase(), -this._topPocketSize);\n  },\n  _reachBottomLoading: function () {\n    this.reachBottomCallbacks.fire();\n  },\n  _pullDownReady: function () {\n    if (this._state === STATE_READY) {\n      return;\n    }\n\n    this._state = STATE_READY;\n    this._maxOffset = 0;\n\n    this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_READY_CLASS);\n\n    this._refreshPullDownText();\n  },\n  _stateReleased: function () {\n    if (this._state === STATE_RELEASED) {\n      return;\n    }\n\n    this._releaseState();\n\n    this._updateBounds();\n\n    this._$pullDown.removeClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS).removeClass(SCROLLVIEW_PULLDOWN_READY_CLASS);\n\n    this.releaseCallbacks.fire();\n  },\n  _pullDownRefreshing: function () {\n    if (this._state === STATE_REFRESHING) {\n      return;\n    }\n\n    this._state = STATE_REFRESHING;\n\n    this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS).removeClass(SCROLLVIEW_PULLDOWN_READY_CLASS);\n\n    this._refreshPullDownText();\n\n    this.pullDownCallbacks.fire();\n  },\n  _releaseHandler: function () {\n    if (this._state === STATE_RELEASED) {\n      this._moveToBounds();\n    }\n\n    this._update();\n\n    if (this._releaseTask) {\n      this._releaseTask.abort();\n    }\n\n    this._releaseTask = (0, _common.executeAsync)(this._release.bind(this));\n    return this._releaseTask.promise;\n  },\n  _release: function () {\n    this._stateReleased();\n\n    this._scrollComplete();\n  },\n  _reachBottomEnablingHandler: function (enabled) {\n    if (this._reachBottomEnabled === enabled) {\n      return;\n    }\n\n    this._reachBottomEnabled = enabled;\n\n    this._updateBounds();\n  },\n  _pullDownEnablingHandler: function (enabled) {\n    if (this._pullDownEnabled === enabled) {\n      return;\n    }\n\n    this._pullDownEnabled = enabled;\n\n    this._considerTopPocketChange();\n\n    this._updateHandler();\n  },\n  _considerTopPocketChange: function () {\n    this._location -= this._$topPocket.height() || -this._topPocketSize;\n    this._maxOffset = 0;\n\n    this._move();\n  },\n  _pendingReleaseHandler: function () {\n    this._state = STATE_READY;\n  },\n  dispose: function () {\n    if (this._releaseTask) {\n      this._releaseTask.abort();\n    }\n\n    this.callBase();\n  }\n});\n\nvar SimulatedScrollViewStrategy = _uiScrollable.SimulatedStrategy.inherit({\n  _init: function (scrollView) {\n    this.callBase(scrollView);\n    this._$pullDown = scrollView._$pullDown;\n    this._$topPocket = scrollView._$topPocket;\n    this._$bottomPocket = scrollView._$bottomPocket;\n\n    this._initCallbacks();\n  },\n  _initCallbacks: function () {\n    this.pullDownCallbacks = (0, _callbacks.default)();\n    this.releaseCallbacks = (0, _callbacks.default)();\n    this.reachBottomCallbacks = (0, _callbacks.default)();\n  },\n  render: function () {\n    this._renderPullDown();\n\n    this.callBase();\n  },\n  _renderPullDown: function () {\n    var $image = (0, _renderer.default)(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_IMAGE_CLASS);\n    var $loadContainer = (0, _renderer.default)(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_INDICATOR_CLASS);\n    var $loadIndicator = new _load_indicator.default((0, _renderer.default)(\"<div>\")).$element();\n    var $text = this._$pullDownText = (0, _renderer.default)(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_TEXT_CLASS);\n    this._$pullingDownText = (0, _renderer.default)(\"<div>\").text(this.option(\"pullingDownText\")).appendTo($text);\n    this._$pulledDownText = (0, _renderer.default)(\"<div>\").text(this.option(\"pulledDownText\")).appendTo($text);\n    this._$refreshingText = (0, _renderer.default)(\"<div>\").text(this.option(\"refreshingText\")).appendTo($text);\n\n    this._$pullDown.empty().append($image).append($loadContainer.append($loadIndicator)).append($text);\n  },\n  pullDownEnable: function (enabled) {\n    this._eventHandler(\"pullDownEnabling\", enabled);\n  },\n  reachBottomEnable: function (enabled) {\n    this._eventHandler(\"reachBottomEnabling\", enabled);\n  },\n  _createScroller: function (direction) {\n    var that = this;\n    var scroller = that._scrollers[direction] = new ScrollViewScroller(that._scrollerOptions(direction));\n    scroller.pullDownCallbacks.add(function () {\n      that.pullDownCallbacks.fire();\n    });\n    scroller.releaseCallbacks.add(function () {\n      that.releaseCallbacks.fire();\n    });\n    scroller.reachBottomCallbacks.add(function () {\n      that.reachBottomCallbacks.fire();\n    });\n  },\n  _scrollerOptions: function (direction) {\n    return (0, _extend.extend)(this.callBase(direction), {\n      $topPocket: this._$topPocket,\n      $bottomPocket: this._$bottomPocket,\n      $pullDown: this._$pullDown,\n      $pullDownText: this._$pullDownText,\n      $pullingDownText: this._$pullingDownText,\n      $pulledDownText: this._$pulledDownText,\n      $refreshingText: this._$refreshingText\n    });\n  },\n  pendingRelease: function () {\n    this._eventHandler(\"pendingRelease\");\n  },\n  release: function () {\n    return this._eventHandler(\"release\").done(this._updateAction);\n  },\n  location: function location() {\n    var location = this.callBase();\n    location.top += this._$topPocket.height();\n    return location;\n  },\n  dispose: function () {\n    (0, _iterator.each)(this._scrollers, function () {\n      this.dispose();\n    });\n    this.callBase();\n  }\n});\n\nvar _default = SimulatedScrollViewStrategy;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/ui/scroll_view/ui.scroll_view.simulated.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_callbacks","_iterator","_common","_extend","_uiScrollable","_load_indicator","obj","__esModule","math","Math","SCROLLVIEW_PULLDOWN_REFRESHING_CLASS","SCROLLVIEW_PULLDOWN_READY_CLASS","SCROLLVIEW_PULLDOWN_IMAGE_CLASS","SCROLLVIEW_PULLDOWN_INDICATOR_CLASS","SCROLLVIEW_PULLDOWN_TEXT_CLASS","SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS","STATE_RELEASED","STATE_READY","STATE_REFRESHING","STATE_LOADING","ScrollViewScroller","Scroller","inherit","ctor","_topPocketSize","callBase","apply","arguments","_initCallbacks","_releaseState","_state","_refreshPullDownText","that","pullDownTextItems","element","_$pullingDownText","visibleState","_$pulledDownText","_$refreshingText","each","_","item","action","pullDownCallbacks","releaseCallbacks","reachBottomCallbacks","_updateBounds","considerPockets","_direction","round","_$topPocket","_dimension","_bottomPocketSize","_$bottomPocket","_bottomBound","_minOffset","_updateScrollbar","_scrollbar","option","containerSize","_containerSize","contentSize","_contentSize","scaleRatio","_getScaleRatio","_moveContent","_isPullDown","_pullDownReady","_isReachBottom","_reachBottomReady","_stateReleased","_moveScrollbar","moveTo","_location","_pullDownEnabled","_reachBottomEnabled","_scrollComplete","_inBounds","_pullDownRefreshing","_reachBottomLoading","_getMinOffset","_getMaxOffset","min","fire","_maxOffset","_$pullDown","addClass","removeClass","_releaseHandler","_moveToBounds","_update","_releaseTask","abort","executeAsync","_release","bind","promise","_reachBottomEnablingHandler","enabled","_pullDownEnablingHandler","_considerTopPocketChange","_updateHandler","height","_move","_pendingReleaseHandler","dispose","SimulatedScrollViewStrategy","SimulatedStrategy","_init","scrollView","render","_renderPullDown","$image","$loadContainer","$loadIndicator","$element","$text","_$pullDownText","text","appendTo","empty","append","pullDownEnable","_eventHandler","reachBottomEnable","_createScroller","direction","scroller","_scrollers","_scrollerOptions","add","extend","$topPocket","$bottomPocket","$pullDown","$pullDownText","$pullingDownText","$pulledDownText","$refreshingText","pendingRelease","release","done","_updateAction","location","top","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scroll_view/ui.scroll_view.simulated.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _callbacks = _interopRequireDefault(require(\"../../core/utils/callbacks\"));\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _uiScrollable = require(\"./ui.scrollable.simulated\");\r\nvar _load_indicator = _interopRequireDefault(require(\"../load_indicator\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar math = Math;\r\nvar SCROLLVIEW_PULLDOWN_REFRESHING_CLASS = \"dx-scrollview-pull-down-loading\";\r\nvar SCROLLVIEW_PULLDOWN_READY_CLASS = \"dx-scrollview-pull-down-ready\";\r\nvar SCROLLVIEW_PULLDOWN_IMAGE_CLASS = \"dx-scrollview-pull-down-image\";\r\nvar SCROLLVIEW_PULLDOWN_INDICATOR_CLASS = \"dx-scrollview-pull-down-indicator\";\r\nvar SCROLLVIEW_PULLDOWN_TEXT_CLASS = \"dx-scrollview-pull-down-text\";\r\nvar SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS = \"dx-scrollview-pull-down-text-visible\";\r\nvar STATE_RELEASED = 0;\r\nvar STATE_READY = 1;\r\nvar STATE_REFRESHING = 2;\r\nvar STATE_LOADING = 3;\r\nvar ScrollViewScroller = _uiScrollable.Scroller.inherit({\r\n    ctor: function() {\r\n        this._topPocketSize = 0;\r\n        this.callBase.apply(this, arguments);\r\n        this._initCallbacks();\r\n        this._releaseState()\r\n    },\r\n    _releaseState: function() {\r\n        this._state = STATE_RELEASED;\r\n        this._refreshPullDownText()\r\n    },\r\n    _refreshPullDownText: function() {\r\n        var that = this;\r\n        var pullDownTextItems = [{\r\n            element: this._$pullingDownText,\r\n            visibleState: STATE_RELEASED\r\n        }, {\r\n            element: this._$pulledDownText,\r\n            visibleState: STATE_READY\r\n        }, {\r\n            element: this._$refreshingText,\r\n            visibleState: STATE_REFRESHING\r\n        }];\r\n        (0, _iterator.each)(pullDownTextItems, function(_, item) {\r\n            var action = that._state === item.visibleState ? \"addClass\" : \"removeClass\";\r\n            item.element[action](SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS)\r\n        })\r\n    },\r\n    _initCallbacks: function() {\r\n        this.pullDownCallbacks = (0, _callbacks.default)();\r\n        this.releaseCallbacks = (0, _callbacks.default)();\r\n        this.reachBottomCallbacks = (0, _callbacks.default)()\r\n    },\r\n    _updateBounds: function() {\r\n        var considerPockets = \"horizontal\" !== this._direction;\r\n        this._topPocketSize = considerPockets ? Math.round(this._$topPocket[this._dimension]()) : 0;\r\n        this._bottomPocketSize = considerPockets ? Math.round(this._$bottomPocket[this._dimension]()) : 0;\r\n        this.callBase();\r\n        this._bottomBound = this._minOffset + this._bottomPocketSize\r\n    },\r\n    _updateScrollbar: function() {\r\n        this._scrollbar.option({\r\n            containerSize: this._containerSize(),\r\n            contentSize: this._contentSize() - this._topPocketSize - this._bottomPocketSize,\r\n            scaleRatio: this._getScaleRatio()\r\n        })\r\n    },\r\n    _moveContent: function() {\r\n        this.callBase();\r\n        if (this._isPullDown()) {\r\n            this._pullDownReady()\r\n        } else {\r\n            if (this._isReachBottom()) {\r\n                this._reachBottomReady()\r\n            } else {\r\n                if (this._state !== STATE_RELEASED) {\r\n                    this._stateReleased()\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _moveScrollbar: function() {\r\n        this._scrollbar.moveTo(this._topPocketSize + this._location)\r\n    },\r\n    _isPullDown: function() {\r\n        return this._pullDownEnabled && this._location >= 0\r\n    },\r\n    _isReachBottom: function() {\r\n        return this._reachBottomEnabled && this._location - this._bottomBound <= .5\r\n    },\r\n    _scrollComplete: function() {\r\n        if (this._inBounds() && this._state === STATE_READY) {\r\n            this._pullDownRefreshing()\r\n        } else {\r\n            if (this._inBounds() && this._state === STATE_LOADING) {\r\n                this._reachBottomLoading()\r\n            } else {\r\n                this.callBase()\r\n            }\r\n        }\r\n    },\r\n    _reachBottomReady: function() {\r\n        if (this._state === STATE_LOADING) {\r\n            return\r\n        }\r\n        this._state = STATE_LOADING;\r\n        this._minOffset = this._getMinOffset()\r\n    },\r\n    _getMaxOffset: function() {\r\n        return -this._topPocketSize\r\n    },\r\n    _getMinOffset: function() {\r\n        return math.min(this.callBase(), -this._topPocketSize)\r\n    },\r\n    _reachBottomLoading: function() {\r\n        this.reachBottomCallbacks.fire()\r\n    },\r\n    _pullDownReady: function() {\r\n        if (this._state === STATE_READY) {\r\n            return\r\n        }\r\n        this._state = STATE_READY;\r\n        this._maxOffset = 0;\r\n        this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_READY_CLASS);\r\n        this._refreshPullDownText()\r\n    },\r\n    _stateReleased: function() {\r\n        if (this._state === STATE_RELEASED) {\r\n            return\r\n        }\r\n        this._releaseState();\r\n        this._updateBounds();\r\n        this._$pullDown.removeClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS).removeClass(SCROLLVIEW_PULLDOWN_READY_CLASS);\r\n        this.releaseCallbacks.fire()\r\n    },\r\n    _pullDownRefreshing: function() {\r\n        if (this._state === STATE_REFRESHING) {\r\n            return\r\n        }\r\n        this._state = STATE_REFRESHING;\r\n        this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS).removeClass(SCROLLVIEW_PULLDOWN_READY_CLASS);\r\n        this._refreshPullDownText();\r\n        this.pullDownCallbacks.fire()\r\n    },\r\n    _releaseHandler: function() {\r\n        if (this._state === STATE_RELEASED) {\r\n            this._moveToBounds()\r\n        }\r\n        this._update();\r\n        if (this._releaseTask) {\r\n            this._releaseTask.abort()\r\n        }\r\n        this._releaseTask = (0, _common.executeAsync)(this._release.bind(this));\r\n        return this._releaseTask.promise\r\n    },\r\n    _release: function() {\r\n        this._stateReleased();\r\n        this._scrollComplete()\r\n    },\r\n    _reachBottomEnablingHandler: function(enabled) {\r\n        if (this._reachBottomEnabled === enabled) {\r\n            return\r\n        }\r\n        this._reachBottomEnabled = enabled;\r\n        this._updateBounds()\r\n    },\r\n    _pullDownEnablingHandler: function(enabled) {\r\n        if (this._pullDownEnabled === enabled) {\r\n            return\r\n        }\r\n        this._pullDownEnabled = enabled;\r\n        this._considerTopPocketChange();\r\n        this._updateHandler()\r\n    },\r\n    _considerTopPocketChange: function() {\r\n        this._location -= this._$topPocket.height() || -this._topPocketSize;\r\n        this._maxOffset = 0;\r\n        this._move()\r\n    },\r\n    _pendingReleaseHandler: function() {\r\n        this._state = STATE_READY\r\n    },\r\n    dispose: function() {\r\n        if (this._releaseTask) {\r\n            this._releaseTask.abort()\r\n        }\r\n        this.callBase()\r\n    }\r\n});\r\nvar SimulatedScrollViewStrategy = _uiScrollable.SimulatedStrategy.inherit({\r\n    _init: function(scrollView) {\r\n        this.callBase(scrollView);\r\n        this._$pullDown = scrollView._$pullDown;\r\n        this._$topPocket = scrollView._$topPocket;\r\n        this._$bottomPocket = scrollView._$bottomPocket;\r\n        this._initCallbacks()\r\n    },\r\n    _initCallbacks: function() {\r\n        this.pullDownCallbacks = (0, _callbacks.default)();\r\n        this.releaseCallbacks = (0, _callbacks.default)();\r\n        this.reachBottomCallbacks = (0, _callbacks.default)()\r\n    },\r\n    render: function() {\r\n        this._renderPullDown();\r\n        this.callBase()\r\n    },\r\n    _renderPullDown: function() {\r\n        var $image = (0, _renderer.default)(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_IMAGE_CLASS);\r\n        var $loadContainer = (0, _renderer.default)(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_INDICATOR_CLASS);\r\n        var $loadIndicator = new _load_indicator.default((0, _renderer.default)(\"<div>\")).$element();\r\n        var $text = this._$pullDownText = (0, _renderer.default)(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_TEXT_CLASS);\r\n        this._$pullingDownText = (0, _renderer.default)(\"<div>\").text(this.option(\"pullingDownText\")).appendTo($text);\r\n        this._$pulledDownText = (0, _renderer.default)(\"<div>\").text(this.option(\"pulledDownText\")).appendTo($text);\r\n        this._$refreshingText = (0, _renderer.default)(\"<div>\").text(this.option(\"refreshingText\")).appendTo($text);\r\n        this._$pullDown.empty().append($image).append($loadContainer.append($loadIndicator)).append($text)\r\n    },\r\n    pullDownEnable: function(enabled) {\r\n        this._eventHandler(\"pullDownEnabling\", enabled)\r\n    },\r\n    reachBottomEnable: function(enabled) {\r\n        this._eventHandler(\"reachBottomEnabling\", enabled)\r\n    },\r\n    _createScroller: function(direction) {\r\n        var that = this;\r\n        var scroller = that._scrollers[direction] = new ScrollViewScroller(that._scrollerOptions(direction));\r\n        scroller.pullDownCallbacks.add(function() {\r\n            that.pullDownCallbacks.fire()\r\n        });\r\n        scroller.releaseCallbacks.add(function() {\r\n            that.releaseCallbacks.fire()\r\n        });\r\n        scroller.reachBottomCallbacks.add(function() {\r\n            that.reachBottomCallbacks.fire()\r\n        })\r\n    },\r\n    _scrollerOptions: function(direction) {\r\n        return (0, _extend.extend)(this.callBase(direction), {\r\n            $topPocket: this._$topPocket,\r\n            $bottomPocket: this._$bottomPocket,\r\n            $pullDown: this._$pullDown,\r\n            $pullDownText: this._$pullDownText,\r\n            $pullingDownText: this._$pullingDownText,\r\n            $pulledDownText: this._$pulledDownText,\r\n            $refreshingText: this._$refreshingText\r\n        })\r\n    },\r\n    pendingRelease: function() {\r\n        this._eventHandler(\"pendingRelease\")\r\n    },\r\n    release: function() {\r\n        return this._eventHandler(\"release\").done(this._updateAction)\r\n    },\r\n    location: function location() {\r\n        var location = this.callBase();\r\n        location.top += this._$topPocket.height();\r\n        return location\r\n    },\r\n    dispose: function() {\r\n        (0, _iterator.each)(this._scrollers, function() {\r\n            this.dispose()\r\n        });\r\n        this.callBase()\r\n    }\r\n});\r\nvar _default = SimulatedScrollViewStrategy;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}