{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/workspaces/ui.scheduler.agenda.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../../core/renderer\"));\n\nvar _dom_adapter = _interopRequireDefault(require(\"../../../core/dom_adapter\"));\n\nvar _common = require(\"../../../core/utils/common\");\n\nvar _iterator = require(\"../../../core/utils/iterator\");\n\nvar _element = require(\"../../../core/element\");\n\nvar _component_registrator = _interopRequireDefault(require(\"../../../core/component_registrator\"));\n\nvar _uiScheduler = _interopRequireDefault(require(\"./ui.scheduler.work_space\"));\n\nvar _extend = require(\"../../../core/utils/extend\");\n\nvar _date = _interopRequireDefault(require(\"../../../localization/date\"));\n\nvar _uiScheduler2 = _interopRequireDefault(require(\"../ui.scheduler.table_creator\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar tableCreator = _uiScheduler2.default.tableCreator;\nvar AGENDA_CLASS = \"dx-scheduler-agenda\";\nvar AGENDA_DATE_CLASS = \"dx-scheduler-agenda-date\";\nvar GROUP_TABLE_CLASS = \"dx-scheduler-group-table\";\nvar AGENDA_GROUPED_ATTR = \"dx-group-column-count\";\nvar TIME_PANEL_ROW_CLASS = \"dx-scheduler-time-panel-row\";\nvar TIME_PANEL_CELL_CLASS = \"dx-scheduler-time-panel-cell\";\nvar NODATA_CONTAINER_CLASS = \"dx-scheduler-agenda-nodata\";\nvar LAST_ROW_CLASS = \"dx-scheduler-date-table-last-row\";\nvar INNER_CELL_MARGIN = 5;\nvar OUTER_CELL_MARGIN = 20;\n\nvar SchedulerAgenda = function (_SchedulerWorkSpace) {\n  _inheritsLoose(SchedulerAgenda, _SchedulerWorkSpace);\n\n  function SchedulerAgenda() {\n    return _SchedulerWorkSpace.apply(this, arguments) || this;\n  }\n\n  var _proto = SchedulerAgenda.prototype;\n\n  _proto._init = function () {\n    _SchedulerWorkSpace.prototype._init.call(this);\n\n    this._activeStateUnit = void 0;\n  };\n\n  _proto._getDefaultOptions = function () {\n    return (0, _extend.extend)(_SchedulerWorkSpace.prototype._getDefaultOptions.call(this), {\n      agendaDuration: 7,\n      rowHeight: 60,\n      noDataText: \"\"\n    });\n  };\n\n  _proto._optionChanged = function (args) {\n    var name = args.name;\n    var value = args.value;\n\n    switch (name) {\n      case \"agendaDuration\":\n        break;\n\n      case \"noDataText\":\n      case \"rowHeight\":\n        this._recalculateAgenda(this._rows);\n\n        break;\n\n      case \"groups\":\n        if (!value || !value.length) {\n          if (this._$groupTable) {\n            this._$groupTable.remove();\n\n            this._$groupTable = null;\n\n            this._detachGroupCountAttr();\n          }\n        } else {\n          if (!this._$groupTable) {\n            this._initGroupTable();\n\n            this._dateTableScrollable.$content().prepend(this._$groupTable);\n          }\n        }\n\n        _SchedulerWorkSpace.prototype._optionChanged.call(this, args);\n\n        break;\n\n      default:\n        _SchedulerWorkSpace.prototype._optionChanged.call(this, args);\n\n    }\n  };\n\n  _proto._renderFocusState = function () {\n    return (0, _common.noop)();\n  };\n\n  _proto._renderFocusTarget = function () {\n    return (0, _common.noop)();\n  };\n\n  _proto._cleanFocusState = function () {\n    return (0, _common.noop)();\n  };\n\n  _proto.supportAllDayRow = function () {\n    return false;\n  };\n\n  _proto._isVerticalGroupedWorkSpace = function () {\n    return false;\n  };\n\n  _proto._getElementClass = function () {\n    return AGENDA_CLASS;\n  };\n\n  _proto._setFirstViewDate = function () {\n    this._firstViewDate = new Date(this.option(\"currentDate\"));\n\n    this._setStartDayHour(this._firstViewDate);\n  };\n\n  _proto._getRowCount = function () {\n    return this.option(\"agendaDuration\");\n  };\n\n  _proto._getCellCount = function () {\n    return 1;\n  };\n\n  _proto._getTimePanelRowCount = function () {\n    return this.option(\"agendaDuration\");\n  };\n\n  _proto._getDateByIndex = function () {\n    return (0, _common.noop)();\n  };\n\n  _proto._getFormat = function () {\n    return \"d ddd\";\n  };\n\n  _proto._renderAllDayPanel = function () {\n    return (0, _common.noop)();\n  };\n\n  _proto._toggleAllDayVisibility = function () {\n    return (0, _common.noop)();\n  };\n\n  _proto._initWorkSpaceUnits = function () {\n    this._initGroupTable();\n\n    this._$timePanel = (0, _renderer.default)(\"<table>\").addClass(this._getTimePanelClass());\n    this._$dateTable = (0, _renderer.default)(\"<table>\").addClass(this._getDateTableClass());\n  };\n\n  _proto._initGroupTable = function () {\n    var groups = this.option(\"groups\");\n\n    if (groups && groups.length) {\n      this._$groupTable = (0, _renderer.default)(\"<table>\").addClass(GROUP_TABLE_CLASS);\n    }\n  };\n\n  _proto._renderView = function () {\n    this._setFirstViewDate();\n\n    this._rows = [];\n    this.invoke(\"getAgendaRows\", {\n      agendaDuration: this.option(\"agendaDuration\"),\n      currentDate: new Date(this.option(\"currentDate\"))\n    }).done(function (rows) {\n      this._recalculateAgenda(rows);\n    }.bind(this));\n  };\n\n  _proto._recalculateAgenda = function (rows) {\n    var cellTemplates = [];\n\n    this._cleanView();\n\n    if (this._rowsIsEmpty(rows)) {\n      this._renderNoData();\n\n      return;\n    }\n\n    this._rows = rows;\n\n    if (this._$groupTable) {\n      cellTemplates = this._renderGroupHeader();\n\n      this._setGroupHeaderCellsHeight();\n    }\n\n    this._renderTimePanel();\n\n    this._renderDateTable();\n\n    this.invoke(\"onAgendaReady\", rows);\n\n    this._applyCellTemplates(cellTemplates);\n\n    this._dateTableScrollable.update();\n  };\n\n  _proto._renderNoData = function () {\n    this._$noDataContainer = (0, _renderer.default)(\"<div>\").addClass(NODATA_CONTAINER_CLASS).html(this.option(\"noDataText\"));\n\n    this._dateTableScrollable.$content().append(this._$noDataContainer);\n  };\n\n  _proto._setTableSizes = function () {\n    return (0, _common.noop)();\n  };\n\n  _proto._toggleHorizontalScrollClass = function () {\n    return (0, _common.noop)();\n  };\n\n  _proto._createCrossScrollingConfig = function () {\n    return (0, _common.noop)();\n  };\n\n  _proto._setGroupHeaderCellsHeight = function () {\n    var $cells = this._getGroupHeaderCells().filter(function (_, element) {\n      return !element.getAttribute(\"rowSpan\");\n    });\n\n    var rows = this._removeEmptyRows(this._rows);\n\n    if (!rows.length) {\n      return;\n    }\n\n    for (var i = 0; i < $cells.length; i++) {\n      var $cellContent = $cells.eq(i).find(\".dx-scheduler-group-header-content\");\n      $cellContent.outerHeight(this._getGroupRowHeight(rows[i]));\n    }\n  };\n\n  _proto._rowsIsEmpty = function (rows) {\n    var result = true;\n\n    for (var i = 0; i < rows.length; i++) {\n      var groupRow = rows[i];\n\n      for (var j = 0; j < groupRow.length; j++) {\n        if (groupRow[j]) {\n          result = false;\n          break;\n        }\n      }\n    }\n\n    return result;\n  };\n\n  _proto._detachGroupCountAttr = function () {\n    this.$element().removeAttr(AGENDA_GROUPED_ATTR);\n  };\n\n  _proto._attachGroupCountAttr = function () {\n    this.$element().attr(AGENDA_GROUPED_ATTR, this.option(\"groups\").length);\n  };\n\n  _proto._removeEmptyRows = function (rows) {\n    var result = [];\n\n    var isEmpty = function (data) {\n      return !data.some(function (value) {\n        return value > 0;\n      });\n    };\n\n    for (var i = 0; i < rows.length; i++) {\n      if (rows[i].length && !isEmpty(rows[i])) {\n        result.push(rows[i]);\n      }\n    }\n\n    return result;\n  };\n\n  _proto._getGroupHeaderContainer = function () {\n    return this._$groupTable;\n  };\n\n  _proto._makeGroupRows = function () {\n    var tree = this.invoke(\"createReducedResourcesTree\");\n    var cellTemplate = this.option(\"resourceCellTemplate\");\n\n    var getGroupHeaderContentClass = this._getGroupHeaderContentClass();\n\n    var cellTemplates = [];\n    var table = tableCreator.makeGroupedTableFromJSON(tableCreator.VERTICAL, tree, {\n      cellTag: \"th\",\n      groupTableClass: GROUP_TABLE_CLASS,\n      groupRowClass: this._getGroupRowClass(),\n      groupCellClass: this._getGroupHeaderClass(),\n      groupCellCustomContent: function (cell, cellText, index, data) {\n        var container = _dom_adapter.default.createElement(\"div\");\n\n        var contentWrapper = _dom_adapter.default.createElement(\"div\");\n\n        container.className = getGroupHeaderContentClass;\n        contentWrapper.appendChild(cellText);\n        container.appendChild(contentWrapper);\n        container.className = getGroupHeaderContentClass;\n\n        if (cellTemplate && cellTemplate.render) {\n          cellTemplates.push(cellTemplate.render.bind(cellTemplate, {\n            model: {\n              data: data.data,\n              id: data.value,\n              color: data.color,\n              text: cellText.textContent\n            },\n            container: (0, _element.getPublicElement)((0, _renderer.default)(container)),\n            index: index\n          }));\n        } else {\n          contentWrapper.appendChild(cellText);\n          container.appendChild(contentWrapper);\n        }\n\n        cell.appendChild(container);\n      },\n      cellTemplate: cellTemplate\n    });\n    return {\n      elements: (0, _renderer.default)(table).find(\".\" + this._getGroupRowClass()),\n      cellTemplates: cellTemplates\n    };\n  };\n\n  _proto._cleanView = function () {\n    this._$dateTable.empty();\n\n    this._$timePanel.empty();\n\n    if (this._$groupTable) {\n      this._$groupTable.empty();\n    }\n\n    if (this._$noDataContainer) {\n      this._$noDataContainer.empty();\n\n      this._$noDataContainer.remove();\n\n      delete this._$noDataContainer;\n    }\n  };\n\n  _proto._createWorkSpaceElements = function () {\n    this._createWorkSpaceStaticElements();\n  };\n\n  _proto._createWorkSpaceStaticElements = function () {\n    if (this._$groupTable) {\n      this._dateTableScrollable.$content().prepend(this._$groupTable);\n    }\n\n    this._dateTableScrollable.$content().append(this._$timePanel, this._$dateTable);\n\n    this.$element().append(this._dateTableScrollable.$element());\n  };\n\n  _proto._renderDateTable = function () {\n    this._renderTableBody({\n      container: (0, _element.getPublicElement)(this._$dateTable),\n      rowClass: this._getDateTableRowClass(),\n      cellClass: this._getDateTableCellClass()\n    });\n  };\n\n  _proto._attachTablesEvents = function () {\n    return (0, _common.noop)();\n  };\n\n  _proto._attachEvents = function () {\n    return (0, _common.noop)();\n  };\n\n  _proto._cleanCellDataCache = function () {\n    return (0, _common.noop)();\n  };\n\n  _proto.isIndicationAvailable = function () {\n    return false;\n  };\n\n  _proto._prepareCellTemplateOptions = function (text, date, rowIndex, $cell) {\n    var groupsOpt = this.option(\"groups\");\n    var groups = {};\n    var path = groupsOpt.length && this._getPathToLeaf(rowIndex) || [];\n    path.forEach(function (resourceValue, resourceIndex) {\n      var resourceName = groupsOpt[resourceIndex].name;\n      groups[resourceName] = resourceValue;\n    });\n    return {\n      model: {\n        text: text,\n        date: date,\n        groups: groups\n      },\n      container: (0, _element.getPublicElement)($cell),\n      index: rowIndex\n    };\n  };\n\n  _proto._renderTableBody = function (options) {\n    var cellTemplates = [];\n    var cellTemplateOpt = options.cellTemplate;\n    this._$rows = [];\n    var i;\n\n    var fillTableBody = function (rowIndex, rowSize) {\n      if (rowSize) {\n        var date;\n        var cellDateNumber;\n        var cellDayName;\n        var $row = (0, _renderer.default)(\"<tr>\");\n        var $td = (0, _renderer.default)(\"<td>\").height(this._getRowHeight(rowSize));\n\n        if (options.getStartDate) {\n          date = options.getStartDate && options.getStartDate(rowIndex);\n          cellDateNumber = _date.default.format(date, \"d\");\n          cellDayName = _date.default.format(date, this._formatWeekday);\n        }\n\n        if (cellTemplateOpt && cellTemplateOpt.render) {\n          var templateOptions = this._prepareCellTemplateOptions(cellDateNumber + \" \" + cellDayName, date, i, $td);\n\n          cellTemplates.push(cellTemplateOpt.render.bind(cellTemplateOpt, templateOptions));\n        } else {\n          if (cellDateNumber && cellDayName) {\n            $td.addClass(AGENDA_DATE_CLASS).text(cellDateNumber + \" \" + cellDayName);\n          }\n        }\n\n        if (options.rowClass) {\n          $row.addClass(options.rowClass);\n        }\n\n        if (options.cellClass) {\n          $td.addClass(options.cellClass);\n        }\n\n        $row.append($td);\n\n        this._$rows.push($row);\n      }\n    }.bind(this);\n\n    for (i = 0; i < this._rows.length; i++) {\n      (0, _iterator.each)(this._rows[i], fillTableBody);\n\n      this._setLastRowClass();\n    }\n\n    (0, _renderer.default)(options.container).append((0, _renderer.default)(\"<tbody>\").append(this._$rows));\n\n    this._applyCellTemplates(cellTemplates);\n  };\n\n  _proto._setLastRowClass = function () {\n    if (this._rows.length > 1 && this._$rows.length) {\n      var $lastRow = this._$rows[this._$rows.length - 1];\n      $lastRow.addClass(LAST_ROW_CLASS);\n    }\n  };\n\n  _proto._renderTimePanel = function () {\n    this._renderTableBody({\n      container: (0, _element.getPublicElement)(this._$timePanel),\n      rowCount: this._getTimePanelRowCount(),\n      cellCount: 1,\n      rowClass: TIME_PANEL_ROW_CLASS,\n      cellClass: TIME_PANEL_CELL_CLASS,\n      cellTemplate: this.option(\"dateCellTemplate\"),\n      getStartDate: this._getTimePanelStartDate.bind(this)\n    });\n  };\n\n  _proto._getTimePanelStartDate = function (rowIndex) {\n    var current = new Date(this.option(\"currentDate\"));\n    var cellDate = new Date(current.setDate(current.getDate() + rowIndex));\n    return cellDate;\n  };\n\n  _proto._getRowHeight = function (rowSize) {\n    var baseHeight = this.option(\"rowHeight\");\n    var innerOffset = (rowSize - 1) * INNER_CELL_MARGIN;\n    return rowSize ? baseHeight * rowSize + innerOffset + OUTER_CELL_MARGIN : 0;\n  };\n\n  _proto._getGroupRowHeight = function (groupRows) {\n    if (!groupRows) {\n      return;\n    }\n\n    var result = 0;\n\n    for (var i = 0; i < groupRows.length; i++) {\n      result += this._getRowHeight(groupRows[i]);\n    }\n\n    return result;\n  };\n\n  _proto.getAgendaVerticalStepHeight = function () {\n    return this.option(\"rowHeight\");\n  };\n\n  _proto.getEndViewDate = function () {\n    var currentDate = new Date(this.option(\"currentDate\"));\n    var agendaDuration = this.option(\"agendaDuration\");\n    currentDate.setHours(this.option(\"endDayHour\"));\n    var result = currentDate.setDate(currentDate.getDate() + agendaDuration - 1) - 6e4;\n    return new Date(result);\n  };\n\n  _proto.getEndViewDateByEndDayHour = function () {\n    return this.getEndViewDate();\n  };\n\n  _proto.getCoordinatesByDate = function () {\n    return {\n      top: 0,\n      left: 0,\n      max: 0,\n      groupIndex: 0\n    };\n  };\n\n  _proto.getCellDataByCoordinates = function () {\n    return {\n      startDate: null,\n      endDate: null\n    };\n  };\n\n  _proto.updateScrollPosition = function (date) {\n    var scheduler = this.option(\"observer\");\n    var newDate = scheduler.timeZoneCalculator.createDate(date, {\n      path: \"toGrid\"\n    });\n    var bounds = this.getVisibleBounds();\n    var startDateHour = newDate.getHours();\n    var startDateMinutes = newDate.getMinutes();\n\n    if (this.needUpdateScrollPosition(startDateHour, startDateMinutes, bounds, newDate)) {\n      this.scrollToTime(startDateHour, startDateMinutes, newDate);\n    }\n  };\n\n  _proto.needUpdateScrollPosition = function (hours, minutes, bounds) {\n    var isUpdateNeeded = false;\n\n    if (hours < bounds.top.hours || hours > bounds.bottom.hours) {\n      isUpdateNeeded = true;\n    }\n\n    if (hours === bounds.top.hours && minutes < bounds.top.minutes) {\n      isUpdateNeeded = true;\n    }\n\n    if (hours === bounds.bottom.hours && minutes > bounds.top.minutes) {\n      isUpdateNeeded = true;\n    }\n\n    return isUpdateNeeded;\n  };\n\n  return SchedulerAgenda;\n}(_uiScheduler.default);\n\n(0, _component_registrator.default)(\"dxSchedulerAgenda\", SchedulerAgenda);\nvar _default = SchedulerAgenda;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/ui/scheduler/workspaces/ui.scheduler.agenda.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_dom_adapter","_common","_iterator","_element","_component_registrator","_uiScheduler","_extend","_date","_uiScheduler2","obj","__esModule","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","tableCreator","AGENDA_CLASS","AGENDA_DATE_CLASS","GROUP_TABLE_CLASS","AGENDA_GROUPED_ATTR","TIME_PANEL_ROW_CLASS","TIME_PANEL_CELL_CLASS","NODATA_CONTAINER_CLASS","LAST_ROW_CLASS","INNER_CELL_MARGIN","OUTER_CELL_MARGIN","SchedulerAgenda","_SchedulerWorkSpace","apply","arguments","_proto","_init","call","_activeStateUnit","_getDefaultOptions","extend","agendaDuration","rowHeight","noDataText","_optionChanged","args","name","value","_recalculateAgenda","_rows","length","_$groupTable","remove","_detachGroupCountAttr","_initGroupTable","_dateTableScrollable","$content","prepend","_renderFocusState","noop","_renderFocusTarget","_cleanFocusState","supportAllDayRow","_isVerticalGroupedWorkSpace","_getElementClass","_setFirstViewDate","_firstViewDate","Date","option","_setStartDayHour","_getRowCount","_getCellCount","_getTimePanelRowCount","_getDateByIndex","_getFormat","_renderAllDayPanel","_toggleAllDayVisibility","_initWorkSpaceUnits","_$timePanel","addClass","_getTimePanelClass","_$dateTable","_getDateTableClass","groups","_renderView","invoke","currentDate","done","rows","bind","cellTemplates","_cleanView","_rowsIsEmpty","_renderNoData","_renderGroupHeader","_setGroupHeaderCellsHeight","_renderTimePanel","_renderDateTable","_applyCellTemplates","update","_$noDataContainer","html","append","_setTableSizes","_toggleHorizontalScrollClass","_createCrossScrollingConfig","$cells","_getGroupHeaderCells","filter","_","element","getAttribute","_removeEmptyRows","i","$cellContent","eq","find","outerHeight","_getGroupRowHeight","result","groupRow","j","$element","removeAttr","_attachGroupCountAttr","attr","isEmpty","data","some","push","_getGroupHeaderContainer","_makeGroupRows","tree","cellTemplate","getGroupHeaderContentClass","_getGroupHeaderContentClass","table","makeGroupedTableFromJSON","VERTICAL","cellTag","groupTableClass","groupRowClass","_getGroupRowClass","groupCellClass","_getGroupHeaderClass","groupCellCustomContent","cell","cellText","index","container","createElement","contentWrapper","className","appendChild","render","model","id","color","text","textContent","getPublicElement","elements","empty","_createWorkSpaceElements","_createWorkSpaceStaticElements","_renderTableBody","rowClass","_getDateTableRowClass","cellClass","_getDateTableCellClass","_attachTablesEvents","_attachEvents","_cleanCellDataCache","isIndicationAvailable","_prepareCellTemplateOptions","date","rowIndex","$cell","groupsOpt","path","_getPathToLeaf","forEach","resourceValue","resourceIndex","resourceName","options","cellTemplateOpt","_$rows","fillTableBody","rowSize","cellDateNumber","cellDayName","$row","$td","height","_getRowHeight","getStartDate","format","_formatWeekday","templateOptions","each","_setLastRowClass","$lastRow","rowCount","cellCount","_getTimePanelStartDate","current","cellDate","setDate","getDate","baseHeight","innerOffset","groupRows","getAgendaVerticalStepHeight","getEndViewDate","setHours","getEndViewDateByEndDayHour","getCoordinatesByDate","top","left","max","groupIndex","getCellDataByCoordinates","startDate","endDate","updateScrollPosition","scheduler","newDate","timeZoneCalculator","createDate","bounds","getVisibleBounds","startDateHour","getHours","startDateMinutes","getMinutes","needUpdateScrollPosition","scrollToTime","hours","minutes","isUpdateNeeded","bottom","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/workspaces/ui.scheduler.agenda.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../../core/renderer\"));\r\nvar _dom_adapter = _interopRequireDefault(require(\"../../../core/dom_adapter\"));\r\nvar _common = require(\"../../../core/utils/common\");\r\nvar _iterator = require(\"../../../core/utils/iterator\");\r\nvar _element = require(\"../../../core/element\");\r\nvar _component_registrator = _interopRequireDefault(require(\"../../../core/component_registrator\"));\r\nvar _uiScheduler = _interopRequireDefault(require(\"./ui.scheduler.work_space\"));\r\nvar _extend = require(\"../../../core/utils/extend\");\r\nvar _date = _interopRequireDefault(require(\"../../../localization/date\"));\r\nvar _uiScheduler2 = _interopRequireDefault(require(\"../ui.scheduler.table_creator\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _inheritsLoose(subClass, superClass) {\r\n    subClass.prototype = Object.create(superClass.prototype);\r\n    subClass.prototype.constructor = subClass;\r\n    _setPrototypeOf(subClass, superClass)\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar tableCreator = _uiScheduler2.default.tableCreator;\r\nvar AGENDA_CLASS = \"dx-scheduler-agenda\";\r\nvar AGENDA_DATE_CLASS = \"dx-scheduler-agenda-date\";\r\nvar GROUP_TABLE_CLASS = \"dx-scheduler-group-table\";\r\nvar AGENDA_GROUPED_ATTR = \"dx-group-column-count\";\r\nvar TIME_PANEL_ROW_CLASS = \"dx-scheduler-time-panel-row\";\r\nvar TIME_PANEL_CELL_CLASS = \"dx-scheduler-time-panel-cell\";\r\nvar NODATA_CONTAINER_CLASS = \"dx-scheduler-agenda-nodata\";\r\nvar LAST_ROW_CLASS = \"dx-scheduler-date-table-last-row\";\r\nvar INNER_CELL_MARGIN = 5;\r\nvar OUTER_CELL_MARGIN = 20;\r\nvar SchedulerAgenda = function(_SchedulerWorkSpace) {\r\n    _inheritsLoose(SchedulerAgenda, _SchedulerWorkSpace);\r\n\r\n    function SchedulerAgenda() {\r\n        return _SchedulerWorkSpace.apply(this, arguments) || this\r\n    }\r\n    var _proto = SchedulerAgenda.prototype;\r\n    _proto._init = function() {\r\n        _SchedulerWorkSpace.prototype._init.call(this);\r\n        this._activeStateUnit = void 0\r\n    };\r\n    _proto._getDefaultOptions = function() {\r\n        return (0, _extend.extend)(_SchedulerWorkSpace.prototype._getDefaultOptions.call(this), {\r\n            agendaDuration: 7,\r\n            rowHeight: 60,\r\n            noDataText: \"\"\r\n        })\r\n    };\r\n    _proto._optionChanged = function(args) {\r\n        var name = args.name;\r\n        var value = args.value;\r\n        switch (name) {\r\n            case \"agendaDuration\":\r\n                break;\r\n            case \"noDataText\":\r\n            case \"rowHeight\":\r\n                this._recalculateAgenda(this._rows);\r\n                break;\r\n            case \"groups\":\r\n                if (!value || !value.length) {\r\n                    if (this._$groupTable) {\r\n                        this._$groupTable.remove();\r\n                        this._$groupTable = null;\r\n                        this._detachGroupCountAttr()\r\n                    }\r\n                } else {\r\n                    if (!this._$groupTable) {\r\n                        this._initGroupTable();\r\n                        this._dateTableScrollable.$content().prepend(this._$groupTable)\r\n                    }\r\n                }\r\n                _SchedulerWorkSpace.prototype._optionChanged.call(this, args);\r\n                break;\r\n            default:\r\n                _SchedulerWorkSpace.prototype._optionChanged.call(this, args)\r\n        }\r\n    };\r\n    _proto._renderFocusState = function() {\r\n        return (0, _common.noop)()\r\n    };\r\n    _proto._renderFocusTarget = function() {\r\n        return (0, _common.noop)()\r\n    };\r\n    _proto._cleanFocusState = function() {\r\n        return (0, _common.noop)()\r\n    };\r\n    _proto.supportAllDayRow = function() {\r\n        return false\r\n    };\r\n    _proto._isVerticalGroupedWorkSpace = function() {\r\n        return false\r\n    };\r\n    _proto._getElementClass = function() {\r\n        return AGENDA_CLASS\r\n    };\r\n    _proto._setFirstViewDate = function() {\r\n        this._firstViewDate = new Date(this.option(\"currentDate\"));\r\n        this._setStartDayHour(this._firstViewDate)\r\n    };\r\n    _proto._getRowCount = function() {\r\n        return this.option(\"agendaDuration\")\r\n    };\r\n    _proto._getCellCount = function() {\r\n        return 1\r\n    };\r\n    _proto._getTimePanelRowCount = function() {\r\n        return this.option(\"agendaDuration\")\r\n    };\r\n    _proto._getDateByIndex = function() {\r\n        return (0, _common.noop)()\r\n    };\r\n    _proto._getFormat = function() {\r\n        return \"d ddd\"\r\n    };\r\n    _proto._renderAllDayPanel = function() {\r\n        return (0, _common.noop)()\r\n    };\r\n    _proto._toggleAllDayVisibility = function() {\r\n        return (0, _common.noop)()\r\n    };\r\n    _proto._initWorkSpaceUnits = function() {\r\n        this._initGroupTable();\r\n        this._$timePanel = (0, _renderer.default)(\"<table>\").addClass(this._getTimePanelClass());\r\n        this._$dateTable = (0, _renderer.default)(\"<table>\").addClass(this._getDateTableClass())\r\n    };\r\n    _proto._initGroupTable = function() {\r\n        var groups = this.option(\"groups\");\r\n        if (groups && groups.length) {\r\n            this._$groupTable = (0, _renderer.default)(\"<table>\").addClass(GROUP_TABLE_CLASS)\r\n        }\r\n    };\r\n    _proto._renderView = function() {\r\n        this._setFirstViewDate();\r\n        this._rows = [];\r\n        this.invoke(\"getAgendaRows\", {\r\n            agendaDuration: this.option(\"agendaDuration\"),\r\n            currentDate: new Date(this.option(\"currentDate\"))\r\n        }).done(function(rows) {\r\n            this._recalculateAgenda(rows)\r\n        }.bind(this))\r\n    };\r\n    _proto._recalculateAgenda = function(rows) {\r\n        var cellTemplates = [];\r\n        this._cleanView();\r\n        if (this._rowsIsEmpty(rows)) {\r\n            this._renderNoData();\r\n            return\r\n        }\r\n        this._rows = rows;\r\n        if (this._$groupTable) {\r\n            cellTemplates = this._renderGroupHeader();\r\n            this._setGroupHeaderCellsHeight()\r\n        }\r\n        this._renderTimePanel();\r\n        this._renderDateTable();\r\n        this.invoke(\"onAgendaReady\", rows);\r\n        this._applyCellTemplates(cellTemplates);\r\n        this._dateTableScrollable.update()\r\n    };\r\n    _proto._renderNoData = function() {\r\n        this._$noDataContainer = (0, _renderer.default)(\"<div>\").addClass(NODATA_CONTAINER_CLASS).html(this.option(\"noDataText\"));\r\n        this._dateTableScrollable.$content().append(this._$noDataContainer)\r\n    };\r\n    _proto._setTableSizes = function() {\r\n        return (0, _common.noop)()\r\n    };\r\n    _proto._toggleHorizontalScrollClass = function() {\r\n        return (0, _common.noop)()\r\n    };\r\n    _proto._createCrossScrollingConfig = function() {\r\n        return (0, _common.noop)()\r\n    };\r\n    _proto._setGroupHeaderCellsHeight = function() {\r\n        var $cells = this._getGroupHeaderCells().filter(function(_, element) {\r\n            return !element.getAttribute(\"rowSpan\")\r\n        });\r\n        var rows = this._removeEmptyRows(this._rows);\r\n        if (!rows.length) {\r\n            return\r\n        }\r\n        for (var i = 0; i < $cells.length; i++) {\r\n            var $cellContent = $cells.eq(i).find(\".dx-scheduler-group-header-content\");\r\n            $cellContent.outerHeight(this._getGroupRowHeight(rows[i]))\r\n        }\r\n    };\r\n    _proto._rowsIsEmpty = function(rows) {\r\n        var result = true;\r\n        for (var i = 0; i < rows.length; i++) {\r\n            var groupRow = rows[i];\r\n            for (var j = 0; j < groupRow.length; j++) {\r\n                if (groupRow[j]) {\r\n                    result = false;\r\n                    break\r\n                }\r\n            }\r\n        }\r\n        return result\r\n    };\r\n    _proto._detachGroupCountAttr = function() {\r\n        this.$element().removeAttr(AGENDA_GROUPED_ATTR)\r\n    };\r\n    _proto._attachGroupCountAttr = function() {\r\n        this.$element().attr(AGENDA_GROUPED_ATTR, this.option(\"groups\").length)\r\n    };\r\n    _proto._removeEmptyRows = function(rows) {\r\n        var result = [];\r\n        var isEmpty = function(data) {\r\n            return !data.some(function(value) {\r\n                return value > 0\r\n            })\r\n        };\r\n        for (var i = 0; i < rows.length; i++) {\r\n            if (rows[i].length && !isEmpty(rows[i])) {\r\n                result.push(rows[i])\r\n            }\r\n        }\r\n        return result\r\n    };\r\n    _proto._getGroupHeaderContainer = function() {\r\n        return this._$groupTable\r\n    };\r\n    _proto._makeGroupRows = function() {\r\n        var tree = this.invoke(\"createReducedResourcesTree\");\r\n        var cellTemplate = this.option(\"resourceCellTemplate\");\r\n        var getGroupHeaderContentClass = this._getGroupHeaderContentClass();\r\n        var cellTemplates = [];\r\n        var table = tableCreator.makeGroupedTableFromJSON(tableCreator.VERTICAL, tree, {\r\n            cellTag: \"th\",\r\n            groupTableClass: GROUP_TABLE_CLASS,\r\n            groupRowClass: this._getGroupRowClass(),\r\n            groupCellClass: this._getGroupHeaderClass(),\r\n            groupCellCustomContent: function(cell, cellText, index, data) {\r\n                var container = _dom_adapter.default.createElement(\"div\");\r\n                var contentWrapper = _dom_adapter.default.createElement(\"div\");\r\n                container.className = getGroupHeaderContentClass;\r\n                contentWrapper.appendChild(cellText);\r\n                container.appendChild(contentWrapper);\r\n                container.className = getGroupHeaderContentClass;\r\n                if (cellTemplate && cellTemplate.render) {\r\n                    cellTemplates.push(cellTemplate.render.bind(cellTemplate, {\r\n                        model: {\r\n                            data: data.data,\r\n                            id: data.value,\r\n                            color: data.color,\r\n                            text: cellText.textContent\r\n                        },\r\n                        container: (0, _element.getPublicElement)((0, _renderer.default)(container)),\r\n                        index: index\r\n                    }))\r\n                } else {\r\n                    contentWrapper.appendChild(cellText);\r\n                    container.appendChild(contentWrapper)\r\n                }\r\n                cell.appendChild(container)\r\n            },\r\n            cellTemplate: cellTemplate\r\n        });\r\n        return {\r\n            elements: (0, _renderer.default)(table).find(\".\" + this._getGroupRowClass()),\r\n            cellTemplates: cellTemplates\r\n        }\r\n    };\r\n    _proto._cleanView = function() {\r\n        this._$dateTable.empty();\r\n        this._$timePanel.empty();\r\n        if (this._$groupTable) {\r\n            this._$groupTable.empty()\r\n        }\r\n        if (this._$noDataContainer) {\r\n            this._$noDataContainer.empty();\r\n            this._$noDataContainer.remove();\r\n            delete this._$noDataContainer\r\n        }\r\n    };\r\n    _proto._createWorkSpaceElements = function() {\r\n        this._createWorkSpaceStaticElements()\r\n    };\r\n    _proto._createWorkSpaceStaticElements = function() {\r\n        if (this._$groupTable) {\r\n            this._dateTableScrollable.$content().prepend(this._$groupTable)\r\n        }\r\n        this._dateTableScrollable.$content().append(this._$timePanel, this._$dateTable);\r\n        this.$element().append(this._dateTableScrollable.$element())\r\n    };\r\n    _proto._renderDateTable = function() {\r\n        this._renderTableBody({\r\n            container: (0, _element.getPublicElement)(this._$dateTable),\r\n            rowClass: this._getDateTableRowClass(),\r\n            cellClass: this._getDateTableCellClass()\r\n        })\r\n    };\r\n    _proto._attachTablesEvents = function() {\r\n        return (0, _common.noop)()\r\n    };\r\n    _proto._attachEvents = function() {\r\n        return (0, _common.noop)()\r\n    };\r\n    _proto._cleanCellDataCache = function() {\r\n        return (0, _common.noop)()\r\n    };\r\n    _proto.isIndicationAvailable = function() {\r\n        return false\r\n    };\r\n    _proto._prepareCellTemplateOptions = function(text, date, rowIndex, $cell) {\r\n        var groupsOpt = this.option(\"groups\");\r\n        var groups = {};\r\n        var path = groupsOpt.length && this._getPathToLeaf(rowIndex) || [];\r\n        path.forEach(function(resourceValue, resourceIndex) {\r\n            var resourceName = groupsOpt[resourceIndex].name;\r\n            groups[resourceName] = resourceValue\r\n        });\r\n        return {\r\n            model: {\r\n                text: text,\r\n                date: date,\r\n                groups: groups\r\n            },\r\n            container: (0, _element.getPublicElement)($cell),\r\n            index: rowIndex\r\n        }\r\n    };\r\n    _proto._renderTableBody = function(options) {\r\n        var cellTemplates = [];\r\n        var cellTemplateOpt = options.cellTemplate;\r\n        this._$rows = [];\r\n        var i;\r\n        var fillTableBody = function(rowIndex, rowSize) {\r\n            if (rowSize) {\r\n                var date;\r\n                var cellDateNumber;\r\n                var cellDayName;\r\n                var $row = (0, _renderer.default)(\"<tr>\");\r\n                var $td = (0, _renderer.default)(\"<td>\").height(this._getRowHeight(rowSize));\r\n                if (options.getStartDate) {\r\n                    date = options.getStartDate && options.getStartDate(rowIndex);\r\n                    cellDateNumber = _date.default.format(date, \"d\");\r\n                    cellDayName = _date.default.format(date, this._formatWeekday)\r\n                }\r\n                if (cellTemplateOpt && cellTemplateOpt.render) {\r\n                    var templateOptions = this._prepareCellTemplateOptions(cellDateNumber + \" \" + cellDayName, date, i, $td);\r\n                    cellTemplates.push(cellTemplateOpt.render.bind(cellTemplateOpt, templateOptions))\r\n                } else {\r\n                    if (cellDateNumber && cellDayName) {\r\n                        $td.addClass(AGENDA_DATE_CLASS).text(cellDateNumber + \" \" + cellDayName)\r\n                    }\r\n                }\r\n                if (options.rowClass) {\r\n                    $row.addClass(options.rowClass)\r\n                }\r\n                if (options.cellClass) {\r\n                    $td.addClass(options.cellClass)\r\n                }\r\n                $row.append($td);\r\n                this._$rows.push($row)\r\n            }\r\n        }.bind(this);\r\n        for (i = 0; i < this._rows.length; i++) {\r\n            (0, _iterator.each)(this._rows[i], fillTableBody);\r\n            this._setLastRowClass()\r\n        }(0, _renderer.default)(options.container).append((0, _renderer.default)(\"<tbody>\").append(this._$rows));\r\n        this._applyCellTemplates(cellTemplates)\r\n    };\r\n    _proto._setLastRowClass = function() {\r\n        if (this._rows.length > 1 && this._$rows.length) {\r\n            var $lastRow = this._$rows[this._$rows.length - 1];\r\n            $lastRow.addClass(LAST_ROW_CLASS)\r\n        }\r\n    };\r\n    _proto._renderTimePanel = function() {\r\n        this._renderTableBody({\r\n            container: (0, _element.getPublicElement)(this._$timePanel),\r\n            rowCount: this._getTimePanelRowCount(),\r\n            cellCount: 1,\r\n            rowClass: TIME_PANEL_ROW_CLASS,\r\n            cellClass: TIME_PANEL_CELL_CLASS,\r\n            cellTemplate: this.option(\"dateCellTemplate\"),\r\n            getStartDate: this._getTimePanelStartDate.bind(this)\r\n        })\r\n    };\r\n    _proto._getTimePanelStartDate = function(rowIndex) {\r\n        var current = new Date(this.option(\"currentDate\"));\r\n        var cellDate = new Date(current.setDate(current.getDate() + rowIndex));\r\n        return cellDate\r\n    };\r\n    _proto._getRowHeight = function(rowSize) {\r\n        var baseHeight = this.option(\"rowHeight\");\r\n        var innerOffset = (rowSize - 1) * INNER_CELL_MARGIN;\r\n        return rowSize ? baseHeight * rowSize + innerOffset + OUTER_CELL_MARGIN : 0\r\n    };\r\n    _proto._getGroupRowHeight = function(groupRows) {\r\n        if (!groupRows) {\r\n            return\r\n        }\r\n        var result = 0;\r\n        for (var i = 0; i < groupRows.length; i++) {\r\n            result += this._getRowHeight(groupRows[i])\r\n        }\r\n        return result\r\n    };\r\n    _proto.getAgendaVerticalStepHeight = function() {\r\n        return this.option(\"rowHeight\")\r\n    };\r\n    _proto.getEndViewDate = function() {\r\n        var currentDate = new Date(this.option(\"currentDate\"));\r\n        var agendaDuration = this.option(\"agendaDuration\");\r\n        currentDate.setHours(this.option(\"endDayHour\"));\r\n        var result = currentDate.setDate(currentDate.getDate() + agendaDuration - 1) - 6e4;\r\n        return new Date(result)\r\n    };\r\n    _proto.getEndViewDateByEndDayHour = function() {\r\n        return this.getEndViewDate()\r\n    };\r\n    _proto.getCoordinatesByDate = function() {\r\n        return {\r\n            top: 0,\r\n            left: 0,\r\n            max: 0,\r\n            groupIndex: 0\r\n        }\r\n    };\r\n    _proto.getCellDataByCoordinates = function() {\r\n        return {\r\n            startDate: null,\r\n            endDate: null\r\n        }\r\n    };\r\n    _proto.updateScrollPosition = function(date) {\r\n        var scheduler = this.option(\"observer\");\r\n        var newDate = scheduler.timeZoneCalculator.createDate(date, {\r\n            path: \"toGrid\"\r\n        });\r\n        var bounds = this.getVisibleBounds();\r\n        var startDateHour = newDate.getHours();\r\n        var startDateMinutes = newDate.getMinutes();\r\n        if (this.needUpdateScrollPosition(startDateHour, startDateMinutes, bounds, newDate)) {\r\n            this.scrollToTime(startDateHour, startDateMinutes, newDate)\r\n        }\r\n    };\r\n    _proto.needUpdateScrollPosition = function(hours, minutes, bounds) {\r\n        var isUpdateNeeded = false;\r\n        if (hours < bounds.top.hours || hours > bounds.bottom.hours) {\r\n            isUpdateNeeded = true\r\n        }\r\n        if (hours === bounds.top.hours && minutes < bounds.top.minutes) {\r\n            isUpdateNeeded = true\r\n        }\r\n        if (hours === bounds.bottom.hours && minutes > bounds.top.minutes) {\r\n            isUpdateNeeded = true\r\n        }\r\n        return isUpdateNeeded\r\n    };\r\n    return SchedulerAgenda\r\n}(_uiScheduler.default);\r\n(0, _component_registrator.default)(\"dxSchedulerAgenda\", SchedulerAgenda);\r\nvar _default = SchedulerAgenda;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}