{"ast":null,"code":"/**\r\n * DevExtreme (data/store_helper.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _common = require(\"../core/utils/common\");\n\nvar _extend = require(\"../core/utils/extend\");\n\nvar _iterator = require(\"../core/utils/iterator\");\n\nvar _array_query = _interopRequireDefault(require(\"./array_query\"));\n\nvar _utils = _interopRequireDefault(require(\"./utils\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction multiLevelGroup(query, groupInfo) {\n  query = query.groupBy(groupInfo[0].selector);\n\n  if (groupInfo.length > 1) {\n    query = query.select(function (g) {\n      return (0, _extend.extend)({}, g, {\n        items: multiLevelGroup((0, _array_query.default)(g.items), groupInfo.slice(1)).toArray()\n      });\n    });\n  }\n\n  return query;\n}\n\nfunction arrangeSortingInfo(groupInfo, sortInfo) {\n  var filteredGroup = [];\n  (0, _iterator.each)(groupInfo, function (_, group) {\n    var collision = (0, _common.grep)(sortInfo, function (sort) {\n      return group.selector === sort.selector;\n    });\n\n    if (collision.length < 1) {\n      filteredGroup.push(group);\n    }\n  });\n  return filteredGroup.concat(sortInfo);\n}\n\nfunction queryByOptions(query, options, isCountQuery) {\n  options = options || {};\n  var filter = options.filter;\n\n  if (filter) {\n    query = query.filter(filter);\n  }\n\n  if (isCountQuery) {\n    return query;\n  }\n\n  var sort = options.sort;\n  var select = options.select;\n  var group = options.group;\n  var skip = options.skip;\n  var take = options.take;\n\n  if (group) {\n    group = _utils.default.normalizeSortingInfo(group);\n    group.keepInitialKeyOrder = !!options.group.keepInitialKeyOrder;\n  }\n\n  if (sort || group) {\n    sort = _utils.default.normalizeSortingInfo(sort || []);\n\n    if (group && !group.keepInitialKeyOrder) {\n      sort = arrangeSortingInfo(group, sort);\n    }\n\n    (0, _iterator.each)(sort, function (index) {\n      query = query[index ? \"thenBy\" : \"sortBy\"](this.selector, this.desc, this.compare);\n    });\n  }\n\n  if (select) {\n    query = query.select(select);\n  }\n\n  if (group) {\n    query = multiLevelGroup(query, group);\n  }\n\n  if (take || skip) {\n    query = query.slice(skip || 0, take);\n  }\n\n  return query;\n}\n\nvar _default = {\n  multiLevelGroup: multiLevelGroup,\n  arrangeSortingInfo: arrangeSortingInfo,\n  queryByOptions: queryByOptions\n};\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/data/store_helper.js"],"names":["exports","default","_common","require","_extend","_iterator","_array_query","_interopRequireDefault","_utils","obj","__esModule","multiLevelGroup","query","groupInfo","groupBy","selector","length","select","g","extend","items","slice","toArray","arrangeSortingInfo","sortInfo","filteredGroup","each","_","group","collision","grep","sort","push","concat","queryByOptions","options","isCountQuery","filter","skip","take","normalizeSortingInfo","keepInitialKeyOrder","index","desc","compare","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (data/store_helper.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _common = require(\"../core/utils/common\");\r\nvar _extend = require(\"../core/utils/extend\");\r\nvar _iterator = require(\"../core/utils/iterator\");\r\nvar _array_query = _interopRequireDefault(require(\"./array_query\"));\r\nvar _utils = _interopRequireDefault(require(\"./utils\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction multiLevelGroup(query, groupInfo) {\r\n    query = query.groupBy(groupInfo[0].selector);\r\n    if (groupInfo.length > 1) {\r\n        query = query.select(function(g) {\r\n            return (0, _extend.extend)({}, g, {\r\n                items: multiLevelGroup((0, _array_query.default)(g.items), groupInfo.slice(1)).toArray()\r\n            })\r\n        })\r\n    }\r\n    return query\r\n}\r\n\r\nfunction arrangeSortingInfo(groupInfo, sortInfo) {\r\n    var filteredGroup = [];\r\n    (0, _iterator.each)(groupInfo, function(_, group) {\r\n        var collision = (0, _common.grep)(sortInfo, function(sort) {\r\n            return group.selector === sort.selector\r\n        });\r\n        if (collision.length < 1) {\r\n            filteredGroup.push(group)\r\n        }\r\n    });\r\n    return filteredGroup.concat(sortInfo)\r\n}\r\n\r\nfunction queryByOptions(query, options, isCountQuery) {\r\n    options = options || {};\r\n    var filter = options.filter;\r\n    if (filter) {\r\n        query = query.filter(filter)\r\n    }\r\n    if (isCountQuery) {\r\n        return query\r\n    }\r\n    var sort = options.sort;\r\n    var select = options.select;\r\n    var group = options.group;\r\n    var skip = options.skip;\r\n    var take = options.take;\r\n    if (group) {\r\n        group = _utils.default.normalizeSortingInfo(group);\r\n        group.keepInitialKeyOrder = !!options.group.keepInitialKeyOrder\r\n    }\r\n    if (sort || group) {\r\n        sort = _utils.default.normalizeSortingInfo(sort || []);\r\n        if (group && !group.keepInitialKeyOrder) {\r\n            sort = arrangeSortingInfo(group, sort)\r\n        }(0, _iterator.each)(sort, function(index) {\r\n            query = query[index ? \"thenBy\" : \"sortBy\"](this.selector, this.desc, this.compare)\r\n        })\r\n    }\r\n    if (select) {\r\n        query = query.select(select)\r\n    }\r\n    if (group) {\r\n        query = multiLevelGroup(query, group)\r\n    }\r\n    if (take || skip) {\r\n        query = query.slice(skip || 0, take)\r\n    }\r\n    return query\r\n}\r\nvar _default = {\r\n    multiLevelGroup: multiLevelGroup,\r\n    arrangeSortingInfo: arrangeSortingInfo,\r\n    queryByOptions: queryByOptions\r\n};\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}