{"ast":null,"code":"/**\r\n * DevExtreme (ui/collection/ui.collection_widget.base.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _template_manager = require(\"../../core/utils/template_manager\");\n\nvar _element = require(\"../../core/element\");\n\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _action = _interopRequireDefault(require(\"../../core/action\"));\n\nvar _guid = _interopRequireDefault(require(\"../../core/guid\"));\n\nvar _ui = _interopRequireDefault(require(\"../widget/ui.widget\"));\n\nvar _index = require(\"../../events/utils/index\");\n\nvar _pointer = _interopRequireDefault(require(\"../../events/pointer\"));\n\nvar _data_helper = _interopRequireDefault(require(\"../../data_helper\"));\n\nvar _item = _interopRequireDefault(require(\"./item\"));\n\nvar _selectors = require(\"../widget/selectors\");\n\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\n\nvar _hold = _interopRequireDefault(require(\"../../events/hold\"));\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _click = require(\"../../events/click\");\n\nvar _contextmenu = require(\"../../events/contextmenu\");\n\nvar _bindable_template = require(\"../../core/templates/bindable_template\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar COLLECTION_CLASS = \"dx-collection\";\nvar ITEM_CLASS = \"dx-item\";\nvar CONTENT_CLASS_POSTFIX = \"-content\";\nvar ITEM_CONTENT_PLACEHOLDER_CLASS = \"dx-item-content-placeholder\";\nvar ITEM_DATA_KEY = \"dxItemData\";\nvar ITEM_INDEX_KEY = \"dxItemIndex\";\nvar ITEM_TEMPLATE_ID_PREFIX = \"tmpl-\";\nvar ITEMS_OPTIONS_NAME = \"dxItem\";\nvar SELECTED_ITEM_CLASS = \"dx-item-selected\";\nvar ITEM_RESPONSE_WAIT_CLASS = \"dx-item-response-wait\";\nvar EMPTY_COLLECTION = \"dx-empty-collection\";\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\nvar ITEM_PATH_REGEX = /^([^.]+\\[\\d+\\]\\.)+([\\w.]+)$/;\nvar ANONYMOUS_TEMPLATE_NAME = \"item\";\nvar FOCUS_UP = \"up\";\nvar FOCUS_DOWN = \"down\";\nvar FOCUS_LEFT = \"left\";\nvar FOCUS_RIGHT = \"right\";\nvar FOCUS_PAGE_UP = \"pageup\";\nvar FOCUS_PAGE_DOWN = \"pagedown\";\nvar FOCUS_LAST = \"last\";\nvar FOCUS_FIRST = \"first\";\n\nvar CollectionWidget = _ui.default.inherit({\n  _activeStateUnit: \".\" + ITEM_CLASS,\n  _supportedKeys: function () {\n    var enter = function (e) {\n      var $itemElement = (0, _renderer.default)(this.option(\"focusedElement\"));\n\n      if (!$itemElement.length) {\n        return;\n      }\n\n      this._itemClickHandler((0, _extend.extend)({}, e, {\n        target: $itemElement.get(0),\n        currentTarget: $itemElement.get(0)\n      }));\n    };\n\n    var space = function (e) {\n      e.preventDefault();\n      enter.call(this, e);\n    };\n\n    var move = function (location, e) {\n      if (!(0, _index.isCommandKeyPressed)(e)) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        this._moveFocus(location, e);\n      }\n    };\n\n    return (0, _extend.extend)(this.callBase(), {\n      space: space,\n      enter: enter,\n      leftArrow: move.bind(this, FOCUS_LEFT),\n      rightArrow: move.bind(this, FOCUS_RIGHT),\n      upArrow: move.bind(this, FOCUS_UP),\n      downArrow: move.bind(this, FOCUS_DOWN),\n      pageUp: move.bind(this, FOCUS_UP),\n      pageDown: move.bind(this, FOCUS_DOWN),\n      home: move.bind(this, FOCUS_FIRST),\n      end: move.bind(this, FOCUS_LAST)\n    });\n  },\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      selectOnFocus: false,\n      loopItemFocus: true,\n      items: [],\n      itemTemplate: \"item\",\n      onItemRendered: null,\n      onItemClick: null,\n      onItemHold: null,\n      itemHoldTimeout: 750,\n      onItemContextMenu: null,\n      onFocusedItemChanged: null,\n      noDataText: _message.default.format(\"dxCollectionWidget-noDataText\"),\n      dataSource: null,\n      _itemAttributes: {},\n      itemTemplateProperty: \"template\",\n      focusOnSelectedItem: true,\n      focusedElement: null,\n      displayExpr: void 0,\n      disabledExpr: function (data) {\n        return data ? data.disabled : void 0;\n      },\n      visibleExpr: function (data) {\n        return data ? data.visible : void 0;\n      }\n    });\n  },\n  _init: function () {\n    this._compileDisplayGetter();\n\n    this.callBase();\n\n    this._cleanRenderedItems();\n\n    this._refreshDataSource();\n  },\n  _compileDisplayGetter: function () {\n    var displayExpr = this.option(\"displayExpr\");\n    this._displayGetter = displayExpr ? (0, _data.compileGetter)(this.option(\"displayExpr\")) : void 0;\n  },\n  _initTemplates: function () {\n    this._initItemsFromMarkup();\n\n    this._initDefaultItemTemplate();\n\n    this.callBase();\n  },\n  _getAnonymousTemplateName: function () {\n    return ANONYMOUS_TEMPLATE_NAME;\n  },\n  _initDefaultItemTemplate: function () {\n    var fieldsMap = this._getFieldsMap();\n\n    this._templateManager.addDefaultTemplates({\n      item: new _bindable_template.BindableTemplate(function ($container, data) {\n        if ((0, _type.isPlainObject)(data)) {\n          this._prepareDefaultItemTemplate(data, $container);\n        } else {\n          if (fieldsMap && (0, _type.isFunction)(fieldsMap.text)) {\n            data = fieldsMap.text(data);\n          }\n\n          $container.text(String((0, _common.ensureDefined)(data, \"\")));\n        }\n      }.bind(this), this._getBindableFields(), this.option(\"integrationOptions.watchMethod\"), fieldsMap)\n    });\n  },\n  _getBindableFields: function () {\n    return [\"text\", \"html\"];\n  },\n  _getFieldsMap: function () {\n    if (this._displayGetter) {\n      return {\n        text: this._displayGetter\n      };\n    }\n  },\n  _prepareDefaultItemTemplate: function (data, $container) {\n    if ((0, _type.isDefined)(data.text)) {\n      $container.text(data.text);\n    }\n\n    if ((0, _type.isDefined)(data.html)) {\n      $container.html(data.html);\n    }\n  },\n  _initItemsFromMarkup: function () {\n    var _this = this;\n\n    var rawItems = (0, _template_manager.findTemplates)(this.$element(), ITEMS_OPTIONS_NAME);\n\n    if (!rawItems.length || this.option(\"items\").length) {\n      return;\n    }\n\n    var items = rawItems.map(function (_ref) {\n      var element = _ref.element,\n          options = _ref.options;\n      var isTemplateRequired = /\\S/.test(element.innerHTML) && !options.template;\n\n      if (isTemplateRequired) {\n        options.template = _this._prepareItemTemplate(element);\n      } else {\n        (0, _renderer.default)(element).remove();\n      }\n\n      return options;\n    });\n    this.option(\"items\", items);\n  },\n  _prepareItemTemplate: function (item) {\n    var templateId = ITEM_TEMPLATE_ID_PREFIX + new _guid.default();\n    var $template = (0, _renderer.default)(item).detach().clone().removeAttr(\"data-options\").addClass(TEMPLATE_WRAPPER_CLASS);\n\n    this._saveTemplate(templateId, $template);\n\n    return templateId;\n  },\n  _dataSourceOptions: function () {\n    return {\n      paginate: false\n    };\n  },\n  _cleanRenderedItems: function () {\n    this._renderedItemsCount = 0;\n  },\n  _focusTarget: function () {\n    return this.$element();\n  },\n  _focusInHandler: function (e) {\n    this.callBase.apply(this, arguments);\n\n    if ((0, _array.inArray)(e.target, this._focusTarget()) === -1) {\n      return;\n    }\n\n    var $focusedElement = (0, _renderer.default)(this.option(\"focusedElement\"));\n\n    if ($focusedElement.length) {\n      this._setFocusedItem($focusedElement);\n    } else {\n      var $activeItem = this._getActiveItem();\n\n      if ($activeItem.length) {\n        this.option(\"focusedElement\", (0, _element.getPublicElement)($activeItem));\n      }\n    }\n  },\n  _focusOutHandler: function () {\n    this.callBase.apply(this, arguments);\n    var $target = (0, _renderer.default)(this.option(\"focusedElement\"));\n\n    this._updateFocusedItemState($target, false);\n  },\n  _getActiveItem: function (last) {\n    var $focusedElement = (0, _renderer.default)(this.option(\"focusedElement\"));\n\n    if ($focusedElement.length) {\n      return $focusedElement;\n    }\n\n    var index = this.option(\"focusOnSelectedItem\") ? this.option(\"selectedIndex\") : 0;\n\n    var activeElements = this._getActiveElement();\n\n    var lastIndex = activeElements.length - 1;\n\n    if (index < 0) {\n      index = last ? lastIndex : 0;\n    }\n\n    return activeElements.eq(index);\n  },\n  _moveFocus: function (location) {\n    var $items = this._getAvailableItems();\n\n    var $newTarget;\n\n    switch (location) {\n      case FOCUS_PAGE_UP:\n      case FOCUS_UP:\n        $newTarget = this._prevItem($items);\n        break;\n\n      case FOCUS_PAGE_DOWN:\n      case FOCUS_DOWN:\n        $newTarget = this._nextItem($items);\n        break;\n\n      case FOCUS_RIGHT:\n        $newTarget = this.option(\"rtlEnabled\") ? this._prevItem($items) : this._nextItem($items);\n        break;\n\n      case FOCUS_LEFT:\n        $newTarget = this.option(\"rtlEnabled\") ? this._nextItem($items) : this._prevItem($items);\n        break;\n\n      case FOCUS_FIRST:\n        $newTarget = $items.first();\n        break;\n\n      case FOCUS_LAST:\n        $newTarget = $items.last();\n        break;\n\n      default:\n        return false;\n    }\n\n    if (0 !== $newTarget.length) {\n      this.option(\"focusedElement\", (0, _element.getPublicElement)($newTarget));\n    }\n  },\n  _getVisibleItems: function ($itemElements) {\n    $itemElements = $itemElements || this._itemElements();\n    return $itemElements.filter(\":visible\");\n  },\n  _getAvailableItems: function ($itemElements) {\n    return this._getVisibleItems($itemElements).not(\".dx-state-disabled\");\n  },\n  _prevItem: function ($items) {\n    var $target = this._getActiveItem();\n\n    var targetIndex = $items.index($target);\n    var $last = $items.last();\n    var $item = (0, _renderer.default)($items[targetIndex - 1]);\n    var loop = this.option(\"loopItemFocus\");\n\n    if (0 === $item.length && loop) {\n      $item = $last;\n    }\n\n    return $item;\n  },\n  _nextItem: function ($items) {\n    var $target = this._getActiveItem(true);\n\n    var targetIndex = $items.index($target);\n    var $first = $items.first();\n    var $item = (0, _renderer.default)($items[targetIndex + 1]);\n    var loop = this.option(\"loopItemFocus\");\n\n    if (0 === $item.length && loop) {\n      $item = $first;\n    }\n\n    return $item;\n  },\n  _selectFocusedItem: function ($target) {\n    this.selectItem($target);\n  },\n  _updateFocusedItemState: function (target, isFocused, needCleanItemId) {\n    var $target = (0, _renderer.default)(target);\n\n    if ($target.length) {\n      this._refreshActiveDescendant();\n\n      this._refreshItemId($target, needCleanItemId);\n\n      this._toggleFocusClass(isFocused, $target);\n    }\n\n    this._updateParentActiveDescendant();\n  },\n  _refreshActiveDescendant: function ($target) {\n    this.setAria(\"activedescendant\", (0, _type.isDefined)(this.option(\"focusedElement\")) ? this.getFocusedItemId() : null, $target);\n  },\n  _refreshItemId: function ($target, needCleanItemId) {\n    if (!needCleanItemId && this.option(\"focusedElement\")) {\n      this.setAria(\"id\", this.getFocusedItemId(), $target);\n    } else {\n      this.setAria(\"id\", null, $target);\n    }\n  },\n  _setFocusedItem: function ($target) {\n    if (!$target || !$target.length) {\n      return;\n    }\n\n    this._updateFocusedItemState($target, true);\n\n    this.onFocusedItemChanged(this.getFocusedItemId());\n\n    if (this.option(\"selectOnFocus\")) {\n      this._selectFocusedItem($target);\n    }\n  },\n  _findItemElementByItem: function (item) {\n    var result = (0, _renderer.default)();\n    var that = this;\n    this.itemElements().each(function () {\n      var $item = (0, _renderer.default)(this);\n\n      if ($item.data(that._itemDataKey()) === item) {\n        result = $item;\n        return false;\n      }\n    });\n    return result;\n  },\n  _getIndexByItem: function (item) {\n    return this.option(\"items\").indexOf(item);\n  },\n  _itemOptionChanged: function (item, property, value, oldValue) {\n    var $item = this._findItemElementByItem(item);\n\n    if (!$item.length) {\n      return;\n    }\n\n    if (!this.constructor.ItemClass.getInstance($item).setDataField(property, value)) {\n      this._refreshItem($item, item);\n    }\n\n    var isDisabling = \"disabled\" === property && value;\n\n    if (isDisabling) {\n      this._resetItemFocus($item);\n    }\n  },\n  _resetItemFocus: function ($item) {\n    if ($item.is(this.option(\"focusedElement\"))) {\n      this.option(\"focusedElement\", null);\n    }\n  },\n  _refreshItem: function ($item) {\n    var itemData = this._getItemData($item);\n\n    var index = $item.data(this._itemIndexKey());\n\n    this._renderItem(this._renderedItemsCount + index, itemData, null, $item);\n  },\n  _updateParentActiveDescendant: _common.noop,\n  _optionChanged: function (args) {\n    if (\"items\" === args.name) {\n      var matches = args.fullName.match(ITEM_PATH_REGEX);\n\n      if (matches && matches.length) {\n        var property = matches[matches.length - 1];\n        var itemPath = args.fullName.replace(\".\" + property, \"\");\n        var item = this.option(itemPath);\n\n        this._itemOptionChanged(item, property, args.value, args.previousValue);\n\n        return;\n      }\n    }\n\n    switch (args.name) {\n      case \"items\":\n      case \"_itemAttributes\":\n      case \"itemTemplateProperty\":\n      case \"showItemDataTitle\":\n        this._cleanRenderedItems();\n\n        this._invalidate();\n\n        break;\n\n      case \"dataSource\":\n        this._refreshDataSource();\n\n        this._renderEmptyMessage();\n\n        break;\n\n      case \"noDataText\":\n        this._renderEmptyMessage();\n\n        break;\n\n      case \"itemTemplate\":\n        this._invalidate();\n\n        break;\n\n      case \"onItemRendered\":\n        this._createItemRenderAction();\n\n        break;\n\n      case \"onItemClick\":\n        break;\n\n      case \"onItemHold\":\n      case \"itemHoldTimeout\":\n        this._attachHoldEvent();\n\n        break;\n\n      case \"onItemContextMenu\":\n        this._attachContextMenuEvent();\n\n        break;\n\n      case \"onFocusedItemChanged\":\n        this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\n        break;\n\n      case \"selectOnFocus\":\n      case \"loopItemFocus\":\n      case \"focusOnSelectedItem\":\n        break;\n\n      case \"focusedElement\":\n        this._updateFocusedItemState(args.previousValue, false, true);\n\n        this._setFocusedItem((0, _renderer.default)(args.value));\n\n        break;\n\n      case \"displayExpr\":\n        this._compileDisplayGetter();\n\n        this._initDefaultItemTemplate();\n\n        this._invalidate();\n\n        break;\n\n      case \"visibleExpr\":\n      case \"disabledExpr\":\n        this._invalidate();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _invalidate: function () {\n    this.option(\"focusedElement\", null);\n    return this.callBase.apply(this, arguments);\n  },\n  _loadNextPage: function () {\n    var dataSource = this._dataSource;\n\n    this._expectNextPageLoading();\n\n    dataSource.pageIndex(1 + dataSource.pageIndex());\n    return dataSource.load();\n  },\n  _expectNextPageLoading: function () {\n    this._startIndexForAppendedItems = 0;\n  },\n  _expectLastItemLoading: function () {\n    this._startIndexForAppendedItems = -1;\n  },\n  _forgetNextPageLoading: function () {\n    this._startIndexForAppendedItems = null;\n  },\n  _dataSourceChangedHandler: function (newItems) {\n    var items = this.option(\"items\");\n\n    if (this._initialized && items && this._shouldAppendItems()) {\n      this._renderedItemsCount = items.length;\n\n      if (!this._isLastPage() || this._startIndexForAppendedItems !== -1) {\n        this.option().items = items.concat(newItems.slice(this._startIndexForAppendedItems));\n      }\n\n      this._forgetNextPageLoading();\n\n      this._refreshContent();\n    } else {\n      this.option(\"items\", newItems.slice());\n    }\n  },\n  _refreshContent: function () {\n    this._prepareContent();\n\n    this._renderContent();\n  },\n  _dataSourceLoadErrorHandler: function () {\n    this._forgetNextPageLoading();\n\n    this.option(\"items\", this.option(\"items\"));\n  },\n  _shouldAppendItems: function () {\n    return null != this._startIndexForAppendedItems && this._allowDynamicItemsAppend();\n  },\n  _allowDynamicItemsAppend: function () {\n    return false;\n  },\n  _clean: function () {\n    this._cleanFocusState();\n\n    this._cleanItemContainer();\n  },\n  _cleanItemContainer: function () {\n    (0, _renderer.default)(this._itemContainer()).empty();\n  },\n  _dispose: function () {\n    this.callBase();\n    clearTimeout(this._itemFocusTimeout);\n  },\n  _refresh: function () {\n    this._cleanRenderedItems();\n\n    this.callBase.apply(this, arguments);\n  },\n  _itemContainer: function () {\n    return this.$element();\n  },\n  _itemClass: function () {\n    return ITEM_CLASS;\n  },\n  _itemContentClass: function () {\n    return this._itemClass() + CONTENT_CLASS_POSTFIX;\n  },\n  _selectedItemClass: function () {\n    return SELECTED_ITEM_CLASS;\n  },\n  _itemResponseWaitClass: function () {\n    return ITEM_RESPONSE_WAIT_CLASS;\n  },\n  _itemSelector: function () {\n    return \".\" + this._itemClass();\n  },\n  _itemDataKey: function () {\n    return ITEM_DATA_KEY;\n  },\n  _itemIndexKey: function () {\n    return ITEM_INDEX_KEY;\n  },\n  _itemElements: function () {\n    return this._itemContainer().find(this._itemSelector());\n  },\n  _initMarkup: function () {\n    this.callBase();\n    this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\n    this.$element().addClass(COLLECTION_CLASS);\n\n    this._prepareContent();\n  },\n  _prepareContent: (0, _common.deferRenderer)(function () {\n    this._renderContentImpl();\n  }),\n  _renderContent: function () {\n    this._fireContentReadyAction();\n  },\n  _render: function () {\n    this.callBase();\n\n    this._attachClickEvent();\n\n    this._attachHoldEvent();\n\n    this._attachContextMenuEvent();\n  },\n  _attachClickEvent: function () {\n    var itemSelector = this._itemSelector();\n\n    var clickEventNamespace = (0, _index.addNamespace)(_click.name, this.NAME);\n    var pointerDownEventNamespace = (0, _index.addNamespace)(_pointer.default.down, this.NAME);\n    var that = this;\n    var pointerDownAction = new _action.default(function (args) {\n      var event = args.event;\n\n      that._itemPointerDownHandler(event);\n    });\n\n    _events_engine.default.off(this._itemContainer(), clickEventNamespace, itemSelector);\n\n    _events_engine.default.off(this._itemContainer(), pointerDownEventNamespace, itemSelector);\n\n    _events_engine.default.on(this._itemContainer(), clickEventNamespace, itemSelector, function (e) {\n      this._itemClickHandler(e);\n    }.bind(this));\n\n    _events_engine.default.on(this._itemContainer(), pointerDownEventNamespace, itemSelector, function (e) {\n      pointerDownAction.execute({\n        element: (0, _renderer.default)(e.target),\n        event: e\n      });\n    });\n  },\n  _itemClickHandler: function (e, args, config) {\n    this._itemDXEventHandler(e, \"onItemClick\", args, config);\n  },\n  _itemPointerDownHandler: function (e) {\n    if (!this.option(\"focusStateEnabled\")) {\n      return;\n    }\n\n    this._itemFocusHandler = function () {\n      clearTimeout(this._itemFocusTimeout);\n      this._itemFocusHandler = null;\n\n      if (e.isDefaultPrevented()) {\n        return;\n      }\n\n      var $target = (0, _renderer.default)(e.target);\n      var $closestItem = $target.closest(this._itemElements());\n\n      var $closestFocusable = this._closestFocusable($target);\n\n      if ($closestItem.length && $closestFocusable && (0, _array.inArray)($closestFocusable.get(0), this._focusTarget()) !== -1) {\n        this.option(\"focusedElement\", (0, _element.getPublicElement)($closestItem));\n      }\n    }.bind(this);\n\n    this._itemFocusTimeout = setTimeout(this._forcePointerDownFocus.bind(this));\n  },\n  _closestFocusable: function ($target) {\n    if ($target.is(_selectors.focusable)) {\n      return $target;\n    } else {\n      $target = $target.parent();\n\n      while ($target.length && !_dom_adapter.default.isDocument($target.get(0))) {\n        if ($target.is(_selectors.focusable)) {\n          return $target;\n        }\n\n        $target = $target.parent();\n      }\n    }\n  },\n  _forcePointerDownFocus: function () {\n    this._itemFocusHandler && this._itemFocusHandler();\n  },\n  _updateFocusState: function () {\n    this.callBase.apply(this, arguments);\n\n    this._forcePointerDownFocus();\n  },\n  _attachHoldEvent: function () {\n    var $itemContainer = this._itemContainer();\n\n    var itemSelector = this._itemSelector();\n\n    var eventName = (0, _index.addNamespace)(_hold.default.name, this.NAME);\n\n    _events_engine.default.off($itemContainer, eventName, itemSelector);\n\n    _events_engine.default.on($itemContainer, eventName, itemSelector, {\n      timeout: this._getHoldTimeout()\n    }, this._itemHoldHandler.bind(this));\n  },\n  _getHoldTimeout: function () {\n    return this.option(\"itemHoldTimeout\");\n  },\n  _shouldFireHoldEvent: function () {\n    return this.hasActionSubscription(\"onItemHold\");\n  },\n  _itemHoldHandler: function (e) {\n    if (this._shouldFireHoldEvent()) {\n      this._itemDXEventHandler(e, \"onItemHold\");\n    } else {\n      e.cancel = true;\n    }\n  },\n  _attachContextMenuEvent: function () {\n    var $itemContainer = this._itemContainer();\n\n    var itemSelector = this._itemSelector();\n\n    var eventName = (0, _index.addNamespace)(_contextmenu.name, this.NAME);\n\n    _events_engine.default.off($itemContainer, eventName, itemSelector);\n\n    _events_engine.default.on($itemContainer, eventName, itemSelector, this._itemContextMenuHandler.bind(this));\n  },\n  _shouldFireContextMenuEvent: function () {\n    return this.hasActionSubscription(\"onItemContextMenu\");\n  },\n  _itemContextMenuHandler: function (e) {\n    if (this._shouldFireContextMenuEvent()) {\n      this._itemDXEventHandler(e, \"onItemContextMenu\");\n    } else {\n      e.cancel = true;\n    }\n  },\n  _renderContentImpl: function () {\n    var items = this.option(\"items\") || [];\n\n    if (this._renderedItemsCount) {\n      this._renderItems(items.slice(this._renderedItemsCount));\n    } else {\n      this._renderItems(items);\n    }\n  },\n  _renderItems: function (items) {\n    if (items.length) {\n      (0, _iterator.each)(items, function (index, itemData) {\n        this._renderItem(this._renderedItemsCount + index, itemData);\n      }.bind(this));\n    }\n\n    this._renderEmptyMessage();\n  },\n  _renderItem: function (index, itemData, $container, $itemToReplace) {\n    $container = $container || this._itemContainer();\n\n    var $itemFrame = this._renderItemFrame(index, itemData, $container, $itemToReplace);\n\n    this._setElementData($itemFrame, itemData, index);\n\n    $itemFrame.attr(this.option(\"_itemAttributes\"));\n\n    this._attachItemClickEvent(itemData, $itemFrame);\n\n    var $itemContent = this._getItemContent($itemFrame);\n\n    var renderContentPromise = this._renderItemContent({\n      index: index,\n      itemData: itemData,\n      container: (0, _element.getPublicElement)($itemContent),\n      contentClass: this._itemContentClass(),\n      defaultTemplateName: this.option(\"itemTemplate\")\n    });\n\n    var that = this;\n    (0, _deferred.when)(renderContentPromise).done(function ($itemContent) {\n      that._postprocessRenderItem({\n        itemElement: $itemFrame,\n        itemContent: $itemContent,\n        itemData: itemData,\n        itemIndex: index\n      });\n\n      that._executeItemRenderAction(index, itemData, (0, _element.getPublicElement)($itemFrame));\n    });\n    return $itemFrame;\n  },\n  _getItemContent: function ($itemFrame) {\n    var $itemContent = $itemFrame.find(\".\" + ITEM_CONTENT_PLACEHOLDER_CLASS);\n    $itemContent.removeClass(ITEM_CONTENT_PLACEHOLDER_CLASS);\n    return $itemContent;\n  },\n  _attachItemClickEvent: function (itemData, $itemElement) {\n    if (!itemData || !itemData.onClick) {\n      return;\n    }\n\n    _events_engine.default.on($itemElement, _click.name, function (e) {\n      this._itemEventHandlerByHandler($itemElement, itemData.onClick, {\n        event: e\n      });\n    }.bind(this));\n  },\n  _renderItemContent: function (args) {\n    var itemTemplateName = this._getItemTemplateName(args);\n\n    var itemTemplate = this._getTemplate(itemTemplateName);\n\n    this._addItemContentClasses(args);\n\n    var $templateResult = (0, _renderer.default)(this._createItemByTemplate(itemTemplate, args));\n\n    if (!$templateResult.hasClass(TEMPLATE_WRAPPER_CLASS)) {\n      return args.container;\n    }\n\n    return this._renderItemContentByNode(args, $templateResult);\n  },\n  _renderItemContentByNode: function (args, $node) {\n    (0, _renderer.default)(args.container).replaceWith($node);\n    args.container = (0, _element.getPublicElement)($node);\n\n    this._addItemContentClasses(args);\n\n    return $node;\n  },\n  _addItemContentClasses: function (args) {\n    var classes = [ITEM_CLASS + CONTENT_CLASS_POSTFIX, args.contentClass];\n    (0, _renderer.default)(args.container).addClass(classes.join(\" \"));\n  },\n  _appendItemToContainer: function ($container, $itemFrame, index) {\n    $itemFrame.appendTo($container);\n  },\n  _renderItemFrame: function (index, itemData, $container, $itemToReplace) {\n    var $itemFrame = (0, _renderer.default)(\"<div>\");\n    new this.constructor.ItemClass($itemFrame, this._itemOptions(), itemData || {});\n\n    if ($itemToReplace && $itemToReplace.length) {\n      $itemToReplace.replaceWith($itemFrame);\n    } else {\n      this._appendItemToContainer.call(this, $container, $itemFrame, index);\n    }\n\n    if (this.option(\"showItemDataTitle\")) {\n      var displayValue = this._displayGetter ? this._displayGetter(itemData) : itemData;\n      $itemFrame.attr(\"title\", displayValue);\n    }\n\n    return $itemFrame;\n  },\n  _itemOptions: function () {\n    var that = this;\n    return {\n      watchMethod: function () {\n        return that.option(\"integrationOptions.watchMethod\");\n      },\n      owner: that,\n      fieldGetter: function (field) {\n        var expr = that.option(field + \"Expr\");\n        var getter = (0, _data.compileGetter)(expr);\n        return getter;\n      }\n    };\n  },\n  _postprocessRenderItem: _common.noop,\n  _executeItemRenderAction: function (index, itemData, itemElement) {\n    this._getItemRenderAction()({\n      itemElement: itemElement,\n      itemIndex: index,\n      itemData: itemData\n    });\n  },\n  _setElementData: function (element, data, index) {\n    element.addClass([ITEM_CLASS, this._itemClass()].join(\" \")).data(this._itemDataKey(), data).data(this._itemIndexKey(), index);\n  },\n  _createItemRenderAction: function () {\n    return this._itemRenderAction = this._createActionByOption(\"onItemRendered\", {\n      element: this.element(),\n      excludeValidators: [\"disabled\", \"readOnly\"],\n      category: \"rendering\"\n    });\n  },\n  _getItemRenderAction: function () {\n    return this._itemRenderAction || this._createItemRenderAction();\n  },\n  _getItemTemplateName: function (args) {\n    var data = args.itemData;\n    var templateProperty = args.templateProperty || this.option(\"itemTemplateProperty\");\n    var template = data && data[templateProperty];\n    return template || args.defaultTemplateName;\n  },\n  _createItemByTemplate: function (itemTemplate, renderArgs) {\n    return itemTemplate.render({\n      model: renderArgs.itemData,\n      container: renderArgs.container,\n      index: renderArgs.index\n    });\n  },\n  _emptyMessageContainer: function () {\n    return this._itemContainer();\n  },\n  _renderEmptyMessage: function (items) {\n    items = items || this.option(\"items\");\n    var noDataText = this.option(\"noDataText\");\n\n    var hideNoData = !noDataText || items && items.length || this._isDataSourceLoading();\n\n    if (hideNoData && this._$noData) {\n      this._$noData.remove();\n\n      this._$noData = null;\n      this.setAria(\"label\", void 0);\n    }\n\n    if (!hideNoData) {\n      this._$noData = this._$noData || (0, _renderer.default)(\"<div>\").addClass(\"dx-empty-message\");\n\n      this._$noData.appendTo(this._emptyMessageContainer()).html(noDataText);\n\n      this.setAria(\"label\", noDataText);\n    }\n\n    this.$element().toggleClass(EMPTY_COLLECTION, !hideNoData);\n  },\n  _itemDXEventHandler: function (dxEvent, handlerOptionName, actionArgs, actionConfig) {\n    this._itemEventHandler(dxEvent.target, handlerOptionName, (0, _extend.extend)(actionArgs, {\n      event: dxEvent\n    }), actionConfig);\n  },\n  _itemEventHandler: function (initiator, handlerOptionName, actionArgs, actionConfig) {\n    var action = this._createActionByOption(handlerOptionName, (0, _extend.extend)({\n      validatingTargetName: \"itemElement\"\n    }, actionConfig));\n\n    return this._itemEventHandlerImpl(initiator, action, actionArgs);\n  },\n  _itemEventHandlerByHandler: function (initiator, handler, actionArgs, actionConfig) {\n    var action = this._createAction(handler, (0, _extend.extend)({\n      validatingTargetName: \"itemElement\"\n    }, actionConfig));\n\n    return this._itemEventHandlerImpl(initiator, action, actionArgs);\n  },\n  _itemEventHandlerImpl: function (initiator, action, actionArgs) {\n    var $itemElement = this._closestItemElement((0, _renderer.default)(initiator));\n\n    var args = (0, _extend.extend)({}, actionArgs);\n    return action((0, _extend.extend)(actionArgs, this._extendActionArgs($itemElement), args));\n  },\n  _extendActionArgs: function ($itemElement) {\n    return {\n      itemElement: (0, _element.getPublicElement)($itemElement),\n      itemIndex: this._itemElements().index($itemElement),\n      itemData: this._getItemData($itemElement)\n    };\n  },\n  _closestItemElement: function ($element) {\n    return (0, _renderer.default)($element).closest(this._itemSelector());\n  },\n  _getItemData: function (itemElement) {\n    return (0, _renderer.default)(itemElement).data(this._itemDataKey());\n  },\n  _getSummaryItemsWidth: function (items, includeMargin) {\n    var result = 0;\n\n    if (items) {\n      (0, _iterator.each)(items, function (_, item) {\n        result += (0, _renderer.default)(item).outerWidth(includeMargin || false);\n      });\n    }\n\n    return result;\n  },\n  getFocusedItemId: function () {\n    if (!this._focusedItemId) {\n      this._focusedItemId = \"dx-\" + new _guid.default();\n    }\n\n    return this._focusedItemId;\n  },\n  itemElements: function () {\n    return this._itemElements();\n  },\n  itemsContainer: function () {\n    return this._itemContainer();\n  }\n}).include(_data_helper.default);\n\nCollectionWidget.ItemClass = _item.default;\nvar _default = CollectionWidget;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/ui/collection/ui.collection_widget.base.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_events_engine","_common","_template_manager","_element","_dom_adapter","_type","_deferred","_extend","_array","_iterator","_action","_guid","_ui","_index","_pointer","_data_helper","_item","_selectors","_message","_hold","_data","_click","_contextmenu","_bindable_template","obj","__esModule","COLLECTION_CLASS","ITEM_CLASS","CONTENT_CLASS_POSTFIX","ITEM_CONTENT_PLACEHOLDER_CLASS","ITEM_DATA_KEY","ITEM_INDEX_KEY","ITEM_TEMPLATE_ID_PREFIX","ITEMS_OPTIONS_NAME","SELECTED_ITEM_CLASS","ITEM_RESPONSE_WAIT_CLASS","EMPTY_COLLECTION","TEMPLATE_WRAPPER_CLASS","ITEM_PATH_REGEX","ANONYMOUS_TEMPLATE_NAME","FOCUS_UP","FOCUS_DOWN","FOCUS_LEFT","FOCUS_RIGHT","FOCUS_PAGE_UP","FOCUS_PAGE_DOWN","FOCUS_LAST","FOCUS_FIRST","CollectionWidget","inherit","_activeStateUnit","_supportedKeys","enter","e","$itemElement","option","length","_itemClickHandler","extend","target","get","currentTarget","space","preventDefault","call","move","location","isCommandKeyPressed","stopPropagation","_moveFocus","callBase","leftArrow","bind","rightArrow","upArrow","downArrow","pageUp","pageDown","home","end","_getDefaultOptions","selectOnFocus","loopItemFocus","items","itemTemplate","onItemRendered","onItemClick","onItemHold","itemHoldTimeout","onItemContextMenu","onFocusedItemChanged","noDataText","format","dataSource","_itemAttributes","itemTemplateProperty","focusOnSelectedItem","focusedElement","displayExpr","disabledExpr","data","disabled","visibleExpr","visible","_init","_compileDisplayGetter","_cleanRenderedItems","_refreshDataSource","_displayGetter","compileGetter","_initTemplates","_initItemsFromMarkup","_initDefaultItemTemplate","_getAnonymousTemplateName","fieldsMap","_getFieldsMap","_templateManager","addDefaultTemplates","item","BindableTemplate","$container","isPlainObject","_prepareDefaultItemTemplate","isFunction","text","String","ensureDefined","_getBindableFields","isDefined","html","_this","rawItems","findTemplates","$element","map","_ref","element","options","isTemplateRequired","test","innerHTML","template","_prepareItemTemplate","remove","templateId","$template","detach","clone","removeAttr","addClass","_saveTemplate","_dataSourceOptions","paginate","_renderedItemsCount","_focusTarget","_focusInHandler","apply","arguments","inArray","$focusedElement","_setFocusedItem","$activeItem","_getActiveItem","getPublicElement","_focusOutHandler","$target","_updateFocusedItemState","last","index","activeElements","_getActiveElement","lastIndex","eq","$items","_getAvailableItems","$newTarget","_prevItem","_nextItem","first","_getVisibleItems","$itemElements","_itemElements","filter","not","targetIndex","$last","$item","loop","$first","_selectFocusedItem","selectItem","isFocused","needCleanItemId","_refreshActiveDescendant","_refreshItemId","_toggleFocusClass","_updateParentActiveDescendant","setAria","getFocusedItemId","_findItemElementByItem","result","that","itemElements","each","_itemDataKey","_getIndexByItem","indexOf","_itemOptionChanged","property","value","oldValue","constructor","ItemClass","getInstance","setDataField","_refreshItem","isDisabling","_resetItemFocus","is","itemData","_getItemData","_itemIndexKey","_renderItem","noop","_optionChanged","args","name","matches","fullName","match","itemPath","replace","previousValue","_invalidate","_renderEmptyMessage","_createItemRenderAction","_attachHoldEvent","_attachContextMenuEvent","_createActionByOption","_loadNextPage","_dataSource","_expectNextPageLoading","pageIndex","load","_startIndexForAppendedItems","_expectLastItemLoading","_forgetNextPageLoading","_dataSourceChangedHandler","newItems","_initialized","_shouldAppendItems","_isLastPage","concat","slice","_refreshContent","_prepareContent","_renderContent","_dataSourceLoadErrorHandler","_allowDynamicItemsAppend","_clean","_cleanFocusState","_cleanItemContainer","_itemContainer","empty","_dispose","clearTimeout","_itemFocusTimeout","_refresh","_itemClass","_itemContentClass","_selectedItemClass","_itemResponseWaitClass","_itemSelector","find","_initMarkup","deferRenderer","_renderContentImpl","_fireContentReadyAction","_render","_attachClickEvent","itemSelector","clickEventNamespace","addNamespace","NAME","pointerDownEventNamespace","down","pointerDownAction","event","_itemPointerDownHandler","off","on","execute","config","_itemDXEventHandler","_itemFocusHandler","isDefaultPrevented","$closestItem","closest","$closestFocusable","_closestFocusable","setTimeout","_forcePointerDownFocus","focusable","parent","isDocument","_updateFocusState","$itemContainer","eventName","timeout","_getHoldTimeout","_itemHoldHandler","_shouldFireHoldEvent","hasActionSubscription","cancel","_itemContextMenuHandler","_shouldFireContextMenuEvent","_renderItems","$itemToReplace","$itemFrame","_renderItemFrame","_setElementData","attr","_attachItemClickEvent","$itemContent","_getItemContent","renderContentPromise","_renderItemContent","container","contentClass","defaultTemplateName","when","done","_postprocessRenderItem","itemElement","itemContent","itemIndex","_executeItemRenderAction","removeClass","onClick","_itemEventHandlerByHandler","itemTemplateName","_getItemTemplateName","_getTemplate","_addItemContentClasses","$templateResult","_createItemByTemplate","hasClass","_renderItemContentByNode","$node","replaceWith","classes","join","_appendItemToContainer","appendTo","_itemOptions","displayValue","watchMethod","owner","fieldGetter","field","expr","getter","_getItemRenderAction","_itemRenderAction","excludeValidators","category","templateProperty","renderArgs","render","model","_emptyMessageContainer","hideNoData","_isDataSourceLoading","_$noData","toggleClass","dxEvent","handlerOptionName","actionArgs","actionConfig","_itemEventHandler","initiator","action","validatingTargetName","_itemEventHandlerImpl","handler","_createAction","_closestItemElement","_extendActionArgs","_getSummaryItemsWidth","includeMargin","_","outerWidth","_focusedItemId","itemsContainer","include","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/collection/ui.collection_widget.base.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _template_manager = require(\"../../core/utils/template_manager\");\r\nvar _element = require(\"../../core/element\");\r\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _action = _interopRequireDefault(require(\"../../core/action\"));\r\nvar _guid = _interopRequireDefault(require(\"../../core/guid\"));\r\nvar _ui = _interopRequireDefault(require(\"../widget/ui.widget\"));\r\nvar _index = require(\"../../events/utils/index\");\r\nvar _pointer = _interopRequireDefault(require(\"../../events/pointer\"));\r\nvar _data_helper = _interopRequireDefault(require(\"../../data_helper\"));\r\nvar _item = _interopRequireDefault(require(\"./item\"));\r\nvar _selectors = require(\"../widget/selectors\");\r\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\r\nvar _hold = _interopRequireDefault(require(\"../../events/hold\"));\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _click = require(\"../../events/click\");\r\nvar _contextmenu = require(\"../../events/contextmenu\");\r\nvar _bindable_template = require(\"../../core/templates/bindable_template\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar COLLECTION_CLASS = \"dx-collection\";\r\nvar ITEM_CLASS = \"dx-item\";\r\nvar CONTENT_CLASS_POSTFIX = \"-content\";\r\nvar ITEM_CONTENT_PLACEHOLDER_CLASS = \"dx-item-content-placeholder\";\r\nvar ITEM_DATA_KEY = \"dxItemData\";\r\nvar ITEM_INDEX_KEY = \"dxItemIndex\";\r\nvar ITEM_TEMPLATE_ID_PREFIX = \"tmpl-\";\r\nvar ITEMS_OPTIONS_NAME = \"dxItem\";\r\nvar SELECTED_ITEM_CLASS = \"dx-item-selected\";\r\nvar ITEM_RESPONSE_WAIT_CLASS = \"dx-item-response-wait\";\r\nvar EMPTY_COLLECTION = \"dx-empty-collection\";\r\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\r\nvar ITEM_PATH_REGEX = /^([^.]+\\[\\d+\\]\\.)+([\\w.]+)$/;\r\nvar ANONYMOUS_TEMPLATE_NAME = \"item\";\r\nvar FOCUS_UP = \"up\";\r\nvar FOCUS_DOWN = \"down\";\r\nvar FOCUS_LEFT = \"left\";\r\nvar FOCUS_RIGHT = \"right\";\r\nvar FOCUS_PAGE_UP = \"pageup\";\r\nvar FOCUS_PAGE_DOWN = \"pagedown\";\r\nvar FOCUS_LAST = \"last\";\r\nvar FOCUS_FIRST = \"first\";\r\nvar CollectionWidget = _ui.default.inherit({\r\n    _activeStateUnit: \".\" + ITEM_CLASS,\r\n    _supportedKeys: function() {\r\n        var enter = function(e) {\r\n            var $itemElement = (0, _renderer.default)(this.option(\"focusedElement\"));\r\n            if (!$itemElement.length) {\r\n                return\r\n            }\r\n            this._itemClickHandler((0, _extend.extend)({}, e, {\r\n                target: $itemElement.get(0),\r\n                currentTarget: $itemElement.get(0)\r\n            }))\r\n        };\r\n        var space = function(e) {\r\n            e.preventDefault();\r\n            enter.call(this, e)\r\n        };\r\n        var move = function(location, e) {\r\n            if (!(0, _index.isCommandKeyPressed)(e)) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                this._moveFocus(location, e)\r\n            }\r\n        };\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            space: space,\r\n            enter: enter,\r\n            leftArrow: move.bind(this, FOCUS_LEFT),\r\n            rightArrow: move.bind(this, FOCUS_RIGHT),\r\n            upArrow: move.bind(this, FOCUS_UP),\r\n            downArrow: move.bind(this, FOCUS_DOWN),\r\n            pageUp: move.bind(this, FOCUS_UP),\r\n            pageDown: move.bind(this, FOCUS_DOWN),\r\n            home: move.bind(this, FOCUS_FIRST),\r\n            end: move.bind(this, FOCUS_LAST)\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            selectOnFocus: false,\r\n            loopItemFocus: true,\r\n            items: [],\r\n            itemTemplate: \"item\",\r\n            onItemRendered: null,\r\n            onItemClick: null,\r\n            onItemHold: null,\r\n            itemHoldTimeout: 750,\r\n            onItemContextMenu: null,\r\n            onFocusedItemChanged: null,\r\n            noDataText: _message.default.format(\"dxCollectionWidget-noDataText\"),\r\n            dataSource: null,\r\n            _itemAttributes: {},\r\n            itemTemplateProperty: \"template\",\r\n            focusOnSelectedItem: true,\r\n            focusedElement: null,\r\n            displayExpr: void 0,\r\n            disabledExpr: function(data) {\r\n                return data ? data.disabled : void 0\r\n            },\r\n            visibleExpr: function(data) {\r\n                return data ? data.visible : void 0\r\n            }\r\n        })\r\n    },\r\n    _init: function() {\r\n        this._compileDisplayGetter();\r\n        this.callBase();\r\n        this._cleanRenderedItems();\r\n        this._refreshDataSource()\r\n    },\r\n    _compileDisplayGetter: function() {\r\n        var displayExpr = this.option(\"displayExpr\");\r\n        this._displayGetter = displayExpr ? (0, _data.compileGetter)(this.option(\"displayExpr\")) : void 0\r\n    },\r\n    _initTemplates: function() {\r\n        this._initItemsFromMarkup();\r\n        this._initDefaultItemTemplate();\r\n        this.callBase()\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return ANONYMOUS_TEMPLATE_NAME\r\n    },\r\n    _initDefaultItemTemplate: function() {\r\n        var fieldsMap = this._getFieldsMap();\r\n        this._templateManager.addDefaultTemplates({\r\n            item: new _bindable_template.BindableTemplate(function($container, data) {\r\n                if ((0, _type.isPlainObject)(data)) {\r\n                    this._prepareDefaultItemTemplate(data, $container)\r\n                } else {\r\n                    if (fieldsMap && (0, _type.isFunction)(fieldsMap.text)) {\r\n                        data = fieldsMap.text(data)\r\n                    }\r\n                    $container.text(String((0, _common.ensureDefined)(data, \"\")))\r\n                }\r\n            }.bind(this), this._getBindableFields(), this.option(\"integrationOptions.watchMethod\"), fieldsMap)\r\n        })\r\n    },\r\n    _getBindableFields: function() {\r\n        return [\"text\", \"html\"]\r\n    },\r\n    _getFieldsMap: function() {\r\n        if (this._displayGetter) {\r\n            return {\r\n                text: this._displayGetter\r\n            }\r\n        }\r\n    },\r\n    _prepareDefaultItemTemplate: function(data, $container) {\r\n        if ((0, _type.isDefined)(data.text)) {\r\n            $container.text(data.text)\r\n        }\r\n        if ((0, _type.isDefined)(data.html)) {\r\n            $container.html(data.html)\r\n        }\r\n    },\r\n    _initItemsFromMarkup: function() {\r\n        var _this = this;\r\n        var rawItems = (0, _template_manager.findTemplates)(this.$element(), ITEMS_OPTIONS_NAME);\r\n        if (!rawItems.length || this.option(\"items\").length) {\r\n            return\r\n        }\r\n        var items = rawItems.map(function(_ref) {\r\n            var element = _ref.element,\r\n                options = _ref.options;\r\n            var isTemplateRequired = /\\S/.test(element.innerHTML) && !options.template;\r\n            if (isTemplateRequired) {\r\n                options.template = _this._prepareItemTemplate(element)\r\n            } else {\r\n                (0, _renderer.default)(element).remove()\r\n            }\r\n            return options\r\n        });\r\n        this.option(\"items\", items)\r\n    },\r\n    _prepareItemTemplate: function(item) {\r\n        var templateId = ITEM_TEMPLATE_ID_PREFIX + new _guid.default;\r\n        var $template = (0, _renderer.default)(item).detach().clone().removeAttr(\"data-options\").addClass(TEMPLATE_WRAPPER_CLASS);\r\n        this._saveTemplate(templateId, $template);\r\n        return templateId\r\n    },\r\n    _dataSourceOptions: function() {\r\n        return {\r\n            paginate: false\r\n        }\r\n    },\r\n    _cleanRenderedItems: function() {\r\n        this._renderedItemsCount = 0\r\n    },\r\n    _focusTarget: function() {\r\n        return this.$element()\r\n    },\r\n    _focusInHandler: function(e) {\r\n        this.callBase.apply(this, arguments);\r\n        if ((0, _array.inArray)(e.target, this._focusTarget()) === -1) {\r\n            return\r\n        }\r\n        var $focusedElement = (0, _renderer.default)(this.option(\"focusedElement\"));\r\n        if ($focusedElement.length) {\r\n            this._setFocusedItem($focusedElement)\r\n        } else {\r\n            var $activeItem = this._getActiveItem();\r\n            if ($activeItem.length) {\r\n                this.option(\"focusedElement\", (0, _element.getPublicElement)($activeItem))\r\n            }\r\n        }\r\n    },\r\n    _focusOutHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        var $target = (0, _renderer.default)(this.option(\"focusedElement\"));\r\n        this._updateFocusedItemState($target, false)\r\n    },\r\n    _getActiveItem: function(last) {\r\n        var $focusedElement = (0, _renderer.default)(this.option(\"focusedElement\"));\r\n        if ($focusedElement.length) {\r\n            return $focusedElement\r\n        }\r\n        var index = this.option(\"focusOnSelectedItem\") ? this.option(\"selectedIndex\") : 0;\r\n        var activeElements = this._getActiveElement();\r\n        var lastIndex = activeElements.length - 1;\r\n        if (index < 0) {\r\n            index = last ? lastIndex : 0\r\n        }\r\n        return activeElements.eq(index)\r\n    },\r\n    _moveFocus: function(location) {\r\n        var $items = this._getAvailableItems();\r\n        var $newTarget;\r\n        switch (location) {\r\n            case FOCUS_PAGE_UP:\r\n            case FOCUS_UP:\r\n                $newTarget = this._prevItem($items);\r\n                break;\r\n            case FOCUS_PAGE_DOWN:\r\n            case FOCUS_DOWN:\r\n                $newTarget = this._nextItem($items);\r\n                break;\r\n            case FOCUS_RIGHT:\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._prevItem($items) : this._nextItem($items);\r\n                break;\r\n            case FOCUS_LEFT:\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._nextItem($items) : this._prevItem($items);\r\n                break;\r\n            case FOCUS_FIRST:\r\n                $newTarget = $items.first();\r\n                break;\r\n            case FOCUS_LAST:\r\n                $newTarget = $items.last();\r\n                break;\r\n            default:\r\n                return false\r\n        }\r\n        if (0 !== $newTarget.length) {\r\n            this.option(\"focusedElement\", (0, _element.getPublicElement)($newTarget))\r\n        }\r\n    },\r\n    _getVisibleItems: function($itemElements) {\r\n        $itemElements = $itemElements || this._itemElements();\r\n        return $itemElements.filter(\":visible\")\r\n    },\r\n    _getAvailableItems: function($itemElements) {\r\n        return this._getVisibleItems($itemElements).not(\".dx-state-disabled\")\r\n    },\r\n    _prevItem: function($items) {\r\n        var $target = this._getActiveItem();\r\n        var targetIndex = $items.index($target);\r\n        var $last = $items.last();\r\n        var $item = (0, _renderer.default)($items[targetIndex - 1]);\r\n        var loop = this.option(\"loopItemFocus\");\r\n        if (0 === $item.length && loop) {\r\n            $item = $last\r\n        }\r\n        return $item\r\n    },\r\n    _nextItem: function($items) {\r\n        var $target = this._getActiveItem(true);\r\n        var targetIndex = $items.index($target);\r\n        var $first = $items.first();\r\n        var $item = (0, _renderer.default)($items[targetIndex + 1]);\r\n        var loop = this.option(\"loopItemFocus\");\r\n        if (0 === $item.length && loop) {\r\n            $item = $first\r\n        }\r\n        return $item\r\n    },\r\n    _selectFocusedItem: function($target) {\r\n        this.selectItem($target)\r\n    },\r\n    _updateFocusedItemState: function(target, isFocused, needCleanItemId) {\r\n        var $target = (0, _renderer.default)(target);\r\n        if ($target.length) {\r\n            this._refreshActiveDescendant();\r\n            this._refreshItemId($target, needCleanItemId);\r\n            this._toggleFocusClass(isFocused, $target)\r\n        }\r\n        this._updateParentActiveDescendant()\r\n    },\r\n    _refreshActiveDescendant: function($target) {\r\n        this.setAria(\"activedescendant\", (0, _type.isDefined)(this.option(\"focusedElement\")) ? this.getFocusedItemId() : null, $target)\r\n    },\r\n    _refreshItemId: function($target, needCleanItemId) {\r\n        if (!needCleanItemId && this.option(\"focusedElement\")) {\r\n            this.setAria(\"id\", this.getFocusedItemId(), $target)\r\n        } else {\r\n            this.setAria(\"id\", null, $target)\r\n        }\r\n    },\r\n    _setFocusedItem: function($target) {\r\n        if (!$target || !$target.length) {\r\n            return\r\n        }\r\n        this._updateFocusedItemState($target, true);\r\n        this.onFocusedItemChanged(this.getFocusedItemId());\r\n        if (this.option(\"selectOnFocus\")) {\r\n            this._selectFocusedItem($target)\r\n        }\r\n    },\r\n    _findItemElementByItem: function(item) {\r\n        var result = (0, _renderer.default)();\r\n        var that = this;\r\n        this.itemElements().each(function() {\r\n            var $item = (0, _renderer.default)(this);\r\n            if ($item.data(that._itemDataKey()) === item) {\r\n                result = $item;\r\n                return false\r\n            }\r\n        });\r\n        return result\r\n    },\r\n    _getIndexByItem: function(item) {\r\n        return this.option(\"items\").indexOf(item)\r\n    },\r\n    _itemOptionChanged: function(item, property, value, oldValue) {\r\n        var $item = this._findItemElementByItem(item);\r\n        if (!$item.length) {\r\n            return\r\n        }\r\n        if (!this.constructor.ItemClass.getInstance($item).setDataField(property, value)) {\r\n            this._refreshItem($item, item)\r\n        }\r\n        var isDisabling = \"disabled\" === property && value;\r\n        if (isDisabling) {\r\n            this._resetItemFocus($item)\r\n        }\r\n    },\r\n    _resetItemFocus: function($item) {\r\n        if ($item.is(this.option(\"focusedElement\"))) {\r\n            this.option(\"focusedElement\", null)\r\n        }\r\n    },\r\n    _refreshItem: function($item) {\r\n        var itemData = this._getItemData($item);\r\n        var index = $item.data(this._itemIndexKey());\r\n        this._renderItem(this._renderedItemsCount + index, itemData, null, $item)\r\n    },\r\n    _updateParentActiveDescendant: _common.noop,\r\n    _optionChanged: function(args) {\r\n        if (\"items\" === args.name) {\r\n            var matches = args.fullName.match(ITEM_PATH_REGEX);\r\n            if (matches && matches.length) {\r\n                var property = matches[matches.length - 1];\r\n                var itemPath = args.fullName.replace(\".\" + property, \"\");\r\n                var item = this.option(itemPath);\r\n                this._itemOptionChanged(item, property, args.value, args.previousValue);\r\n                return\r\n            }\r\n        }\r\n        switch (args.name) {\r\n            case \"items\":\r\n            case \"_itemAttributes\":\r\n            case \"itemTemplateProperty\":\r\n            case \"showItemDataTitle\":\r\n                this._cleanRenderedItems();\r\n                this._invalidate();\r\n                break;\r\n            case \"dataSource\":\r\n                this._refreshDataSource();\r\n                this._renderEmptyMessage();\r\n                break;\r\n            case \"noDataText\":\r\n                this._renderEmptyMessage();\r\n                break;\r\n            case \"itemTemplate\":\r\n                this._invalidate();\r\n                break;\r\n            case \"onItemRendered\":\r\n                this._createItemRenderAction();\r\n                break;\r\n            case \"onItemClick\":\r\n                break;\r\n            case \"onItemHold\":\r\n            case \"itemHoldTimeout\":\r\n                this._attachHoldEvent();\r\n                break;\r\n            case \"onItemContextMenu\":\r\n                this._attachContextMenuEvent();\r\n                break;\r\n            case \"onFocusedItemChanged\":\r\n                this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\r\n                break;\r\n            case \"selectOnFocus\":\r\n            case \"loopItemFocus\":\r\n            case \"focusOnSelectedItem\":\r\n                break;\r\n            case \"focusedElement\":\r\n                this._updateFocusedItemState(args.previousValue, false, true);\r\n                this._setFocusedItem((0, _renderer.default)(args.value));\r\n                break;\r\n            case \"displayExpr\":\r\n                this._compileDisplayGetter();\r\n                this._initDefaultItemTemplate();\r\n                this._invalidate();\r\n                break;\r\n            case \"visibleExpr\":\r\n            case \"disabledExpr\":\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _invalidate: function() {\r\n        this.option(\"focusedElement\", null);\r\n        return this.callBase.apply(this, arguments)\r\n    },\r\n    _loadNextPage: function() {\r\n        var dataSource = this._dataSource;\r\n        this._expectNextPageLoading();\r\n        dataSource.pageIndex(1 + dataSource.pageIndex());\r\n        return dataSource.load()\r\n    },\r\n    _expectNextPageLoading: function() {\r\n        this._startIndexForAppendedItems = 0\r\n    },\r\n    _expectLastItemLoading: function() {\r\n        this._startIndexForAppendedItems = -1\r\n    },\r\n    _forgetNextPageLoading: function() {\r\n        this._startIndexForAppendedItems = null\r\n    },\r\n    _dataSourceChangedHandler: function(newItems) {\r\n        var items = this.option(\"items\");\r\n        if (this._initialized && items && this._shouldAppendItems()) {\r\n            this._renderedItemsCount = items.length;\r\n            if (!this._isLastPage() || this._startIndexForAppendedItems !== -1) {\r\n                this.option().items = items.concat(newItems.slice(this._startIndexForAppendedItems))\r\n            }\r\n            this._forgetNextPageLoading();\r\n            this._refreshContent()\r\n        } else {\r\n            this.option(\"items\", newItems.slice())\r\n        }\r\n    },\r\n    _refreshContent: function() {\r\n        this._prepareContent();\r\n        this._renderContent()\r\n    },\r\n    _dataSourceLoadErrorHandler: function() {\r\n        this._forgetNextPageLoading();\r\n        this.option(\"items\", this.option(\"items\"))\r\n    },\r\n    _shouldAppendItems: function() {\r\n        return null != this._startIndexForAppendedItems && this._allowDynamicItemsAppend()\r\n    },\r\n    _allowDynamicItemsAppend: function() {\r\n        return false\r\n    },\r\n    _clean: function() {\r\n        this._cleanFocusState();\r\n        this._cleanItemContainer()\r\n    },\r\n    _cleanItemContainer: function() {\r\n        (0, _renderer.default)(this._itemContainer()).empty()\r\n    },\r\n    _dispose: function() {\r\n        this.callBase();\r\n        clearTimeout(this._itemFocusTimeout)\r\n    },\r\n    _refresh: function() {\r\n        this._cleanRenderedItems();\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _itemContainer: function() {\r\n        return this.$element()\r\n    },\r\n    _itemClass: function() {\r\n        return ITEM_CLASS\r\n    },\r\n    _itemContentClass: function() {\r\n        return this._itemClass() + CONTENT_CLASS_POSTFIX\r\n    },\r\n    _selectedItemClass: function() {\r\n        return SELECTED_ITEM_CLASS\r\n    },\r\n    _itemResponseWaitClass: function() {\r\n        return ITEM_RESPONSE_WAIT_CLASS\r\n    },\r\n    _itemSelector: function() {\r\n        return \".\" + this._itemClass()\r\n    },\r\n    _itemDataKey: function() {\r\n        return ITEM_DATA_KEY\r\n    },\r\n    _itemIndexKey: function() {\r\n        return ITEM_INDEX_KEY\r\n    },\r\n    _itemElements: function() {\r\n        return this._itemContainer().find(this._itemSelector())\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\r\n        this.$element().addClass(COLLECTION_CLASS);\r\n        this._prepareContent()\r\n    },\r\n    _prepareContent: (0, _common.deferRenderer)(function() {\r\n        this._renderContentImpl()\r\n    }),\r\n    _renderContent: function() {\r\n        this._fireContentReadyAction()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._attachClickEvent();\r\n        this._attachHoldEvent();\r\n        this._attachContextMenuEvent()\r\n    },\r\n    _attachClickEvent: function() {\r\n        var itemSelector = this._itemSelector();\r\n        var clickEventNamespace = (0, _index.addNamespace)(_click.name, this.NAME);\r\n        var pointerDownEventNamespace = (0, _index.addNamespace)(_pointer.default.down, this.NAME);\r\n        var that = this;\r\n        var pointerDownAction = new _action.default(function(args) {\r\n            var event = args.event;\r\n            that._itemPointerDownHandler(event)\r\n        });\r\n        _events_engine.default.off(this._itemContainer(), clickEventNamespace, itemSelector);\r\n        _events_engine.default.off(this._itemContainer(), pointerDownEventNamespace, itemSelector);\r\n        _events_engine.default.on(this._itemContainer(), clickEventNamespace, itemSelector, function(e) {\r\n            this._itemClickHandler(e)\r\n        }.bind(this));\r\n        _events_engine.default.on(this._itemContainer(), pointerDownEventNamespace, itemSelector, function(e) {\r\n            pointerDownAction.execute({\r\n                element: (0, _renderer.default)(e.target),\r\n                event: e\r\n            })\r\n        })\r\n    },\r\n    _itemClickHandler: function(e, args, config) {\r\n        this._itemDXEventHandler(e, \"onItemClick\", args, config)\r\n    },\r\n    _itemPointerDownHandler: function(e) {\r\n        if (!this.option(\"focusStateEnabled\")) {\r\n            return\r\n        }\r\n        this._itemFocusHandler = function() {\r\n            clearTimeout(this._itemFocusTimeout);\r\n            this._itemFocusHandler = null;\r\n            if (e.isDefaultPrevented()) {\r\n                return\r\n            }\r\n            var $target = (0, _renderer.default)(e.target);\r\n            var $closestItem = $target.closest(this._itemElements());\r\n            var $closestFocusable = this._closestFocusable($target);\r\n            if ($closestItem.length && $closestFocusable && (0, _array.inArray)($closestFocusable.get(0), this._focusTarget()) !== -1) {\r\n                this.option(\"focusedElement\", (0, _element.getPublicElement)($closestItem))\r\n            }\r\n        }.bind(this);\r\n        this._itemFocusTimeout = setTimeout(this._forcePointerDownFocus.bind(this))\r\n    },\r\n    _closestFocusable: function($target) {\r\n        if ($target.is(_selectors.focusable)) {\r\n            return $target\r\n        } else {\r\n            $target = $target.parent();\r\n            while ($target.length && !_dom_adapter.default.isDocument($target.get(0))) {\r\n                if ($target.is(_selectors.focusable)) {\r\n                    return $target\r\n                }\r\n                $target = $target.parent()\r\n            }\r\n        }\r\n    },\r\n    _forcePointerDownFocus: function() {\r\n        this._itemFocusHandler && this._itemFocusHandler()\r\n    },\r\n    _updateFocusState: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._forcePointerDownFocus()\r\n    },\r\n    _attachHoldEvent: function() {\r\n        var $itemContainer = this._itemContainer();\r\n        var itemSelector = this._itemSelector();\r\n        var eventName = (0, _index.addNamespace)(_hold.default.name, this.NAME);\r\n        _events_engine.default.off($itemContainer, eventName, itemSelector);\r\n        _events_engine.default.on($itemContainer, eventName, itemSelector, {\r\n            timeout: this._getHoldTimeout()\r\n        }, this._itemHoldHandler.bind(this))\r\n    },\r\n    _getHoldTimeout: function() {\r\n        return this.option(\"itemHoldTimeout\")\r\n    },\r\n    _shouldFireHoldEvent: function() {\r\n        return this.hasActionSubscription(\"onItemHold\")\r\n    },\r\n    _itemHoldHandler: function(e) {\r\n        if (this._shouldFireHoldEvent()) {\r\n            this._itemDXEventHandler(e, \"onItemHold\")\r\n        } else {\r\n            e.cancel = true\r\n        }\r\n    },\r\n    _attachContextMenuEvent: function() {\r\n        var $itemContainer = this._itemContainer();\r\n        var itemSelector = this._itemSelector();\r\n        var eventName = (0, _index.addNamespace)(_contextmenu.name, this.NAME);\r\n        _events_engine.default.off($itemContainer, eventName, itemSelector);\r\n        _events_engine.default.on($itemContainer, eventName, itemSelector, this._itemContextMenuHandler.bind(this))\r\n    },\r\n    _shouldFireContextMenuEvent: function() {\r\n        return this.hasActionSubscription(\"onItemContextMenu\")\r\n    },\r\n    _itemContextMenuHandler: function(e) {\r\n        if (this._shouldFireContextMenuEvent()) {\r\n            this._itemDXEventHandler(e, \"onItemContextMenu\")\r\n        } else {\r\n            e.cancel = true\r\n        }\r\n    },\r\n    _renderContentImpl: function() {\r\n        var items = this.option(\"items\") || [];\r\n        if (this._renderedItemsCount) {\r\n            this._renderItems(items.slice(this._renderedItemsCount))\r\n        } else {\r\n            this._renderItems(items)\r\n        }\r\n    },\r\n    _renderItems: function(items) {\r\n        if (items.length) {\r\n            (0, _iterator.each)(items, function(index, itemData) {\r\n                this._renderItem(this._renderedItemsCount + index, itemData)\r\n            }.bind(this))\r\n        }\r\n        this._renderEmptyMessage()\r\n    },\r\n    _renderItem: function(index, itemData, $container, $itemToReplace) {\r\n        $container = $container || this._itemContainer();\r\n        var $itemFrame = this._renderItemFrame(index, itemData, $container, $itemToReplace);\r\n        this._setElementData($itemFrame, itemData, index);\r\n        $itemFrame.attr(this.option(\"_itemAttributes\"));\r\n        this._attachItemClickEvent(itemData, $itemFrame);\r\n        var $itemContent = this._getItemContent($itemFrame);\r\n        var renderContentPromise = this._renderItemContent({\r\n            index: index,\r\n            itemData: itemData,\r\n            container: (0, _element.getPublicElement)($itemContent),\r\n            contentClass: this._itemContentClass(),\r\n            defaultTemplateName: this.option(\"itemTemplate\")\r\n        });\r\n        var that = this;\r\n        (0, _deferred.when)(renderContentPromise).done(function($itemContent) {\r\n            that._postprocessRenderItem({\r\n                itemElement: $itemFrame,\r\n                itemContent: $itemContent,\r\n                itemData: itemData,\r\n                itemIndex: index\r\n            });\r\n            that._executeItemRenderAction(index, itemData, (0, _element.getPublicElement)($itemFrame))\r\n        });\r\n        return $itemFrame\r\n    },\r\n    _getItemContent: function($itemFrame) {\r\n        var $itemContent = $itemFrame.find(\".\" + ITEM_CONTENT_PLACEHOLDER_CLASS);\r\n        $itemContent.removeClass(ITEM_CONTENT_PLACEHOLDER_CLASS);\r\n        return $itemContent\r\n    },\r\n    _attachItemClickEvent: function(itemData, $itemElement) {\r\n        if (!itemData || !itemData.onClick) {\r\n            return\r\n        }\r\n        _events_engine.default.on($itemElement, _click.name, function(e) {\r\n            this._itemEventHandlerByHandler($itemElement, itemData.onClick, {\r\n                event: e\r\n            })\r\n        }.bind(this))\r\n    },\r\n    _renderItemContent: function(args) {\r\n        var itemTemplateName = this._getItemTemplateName(args);\r\n        var itemTemplate = this._getTemplate(itemTemplateName);\r\n        this._addItemContentClasses(args);\r\n        var $templateResult = (0, _renderer.default)(this._createItemByTemplate(itemTemplate, args));\r\n        if (!$templateResult.hasClass(TEMPLATE_WRAPPER_CLASS)) {\r\n            return args.container\r\n        }\r\n        return this._renderItemContentByNode(args, $templateResult)\r\n    },\r\n    _renderItemContentByNode: function(args, $node) {\r\n        (0, _renderer.default)(args.container).replaceWith($node);\r\n        args.container = (0, _element.getPublicElement)($node);\r\n        this._addItemContentClasses(args);\r\n        return $node\r\n    },\r\n    _addItemContentClasses: function(args) {\r\n        var classes = [ITEM_CLASS + CONTENT_CLASS_POSTFIX, args.contentClass];\r\n        (0, _renderer.default)(args.container).addClass(classes.join(\" \"))\r\n    },\r\n    _appendItemToContainer: function($container, $itemFrame, index) {\r\n        $itemFrame.appendTo($container)\r\n    },\r\n    _renderItemFrame: function(index, itemData, $container, $itemToReplace) {\r\n        var $itemFrame = (0, _renderer.default)(\"<div>\");\r\n        new this.constructor.ItemClass($itemFrame, this._itemOptions(), itemData || {});\r\n        if ($itemToReplace && $itemToReplace.length) {\r\n            $itemToReplace.replaceWith($itemFrame)\r\n        } else {\r\n            this._appendItemToContainer.call(this, $container, $itemFrame, index)\r\n        }\r\n        if (this.option(\"showItemDataTitle\")) {\r\n            var displayValue = this._displayGetter ? this._displayGetter(itemData) : itemData;\r\n            $itemFrame.attr(\"title\", displayValue)\r\n        }\r\n        return $itemFrame\r\n    },\r\n    _itemOptions: function() {\r\n        var that = this;\r\n        return {\r\n            watchMethod: function() {\r\n                return that.option(\"integrationOptions.watchMethod\")\r\n            },\r\n            owner: that,\r\n            fieldGetter: function(field) {\r\n                var expr = that.option(field + \"Expr\");\r\n                var getter = (0, _data.compileGetter)(expr);\r\n                return getter\r\n            }\r\n        }\r\n    },\r\n    _postprocessRenderItem: _common.noop,\r\n    _executeItemRenderAction: function(index, itemData, itemElement) {\r\n        this._getItemRenderAction()({\r\n            itemElement: itemElement,\r\n            itemIndex: index,\r\n            itemData: itemData\r\n        })\r\n    },\r\n    _setElementData: function(element, data, index) {\r\n        element.addClass([ITEM_CLASS, this._itemClass()].join(\" \")).data(this._itemDataKey(), data).data(this._itemIndexKey(), index)\r\n    },\r\n    _createItemRenderAction: function() {\r\n        return this._itemRenderAction = this._createActionByOption(\"onItemRendered\", {\r\n            element: this.element(),\r\n            excludeValidators: [\"disabled\", \"readOnly\"],\r\n            category: \"rendering\"\r\n        })\r\n    },\r\n    _getItemRenderAction: function() {\r\n        return this._itemRenderAction || this._createItemRenderAction()\r\n    },\r\n    _getItemTemplateName: function(args) {\r\n        var data = args.itemData;\r\n        var templateProperty = args.templateProperty || this.option(\"itemTemplateProperty\");\r\n        var template = data && data[templateProperty];\r\n        return template || args.defaultTemplateName\r\n    },\r\n    _createItemByTemplate: function(itemTemplate, renderArgs) {\r\n        return itemTemplate.render({\r\n            model: renderArgs.itemData,\r\n            container: renderArgs.container,\r\n            index: renderArgs.index\r\n        })\r\n    },\r\n    _emptyMessageContainer: function() {\r\n        return this._itemContainer()\r\n    },\r\n    _renderEmptyMessage: function(items) {\r\n        items = items || this.option(\"items\");\r\n        var noDataText = this.option(\"noDataText\");\r\n        var hideNoData = !noDataText || items && items.length || this._isDataSourceLoading();\r\n        if (hideNoData && this._$noData) {\r\n            this._$noData.remove();\r\n            this._$noData = null;\r\n            this.setAria(\"label\", void 0)\r\n        }\r\n        if (!hideNoData) {\r\n            this._$noData = this._$noData || (0, _renderer.default)(\"<div>\").addClass(\"dx-empty-message\");\r\n            this._$noData.appendTo(this._emptyMessageContainer()).html(noDataText);\r\n            this.setAria(\"label\", noDataText)\r\n        }\r\n        this.$element().toggleClass(EMPTY_COLLECTION, !hideNoData)\r\n    },\r\n    _itemDXEventHandler: function(dxEvent, handlerOptionName, actionArgs, actionConfig) {\r\n        this._itemEventHandler(dxEvent.target, handlerOptionName, (0, _extend.extend)(actionArgs, {\r\n            event: dxEvent\r\n        }), actionConfig)\r\n    },\r\n    _itemEventHandler: function(initiator, handlerOptionName, actionArgs, actionConfig) {\r\n        var action = this._createActionByOption(handlerOptionName, (0, _extend.extend)({\r\n            validatingTargetName: \"itemElement\"\r\n        }, actionConfig));\r\n        return this._itemEventHandlerImpl(initiator, action, actionArgs)\r\n    },\r\n    _itemEventHandlerByHandler: function(initiator, handler, actionArgs, actionConfig) {\r\n        var action = this._createAction(handler, (0, _extend.extend)({\r\n            validatingTargetName: \"itemElement\"\r\n        }, actionConfig));\r\n        return this._itemEventHandlerImpl(initiator, action, actionArgs)\r\n    },\r\n    _itemEventHandlerImpl: function(initiator, action, actionArgs) {\r\n        var $itemElement = this._closestItemElement((0, _renderer.default)(initiator));\r\n        var args = (0, _extend.extend)({}, actionArgs);\r\n        return action((0, _extend.extend)(actionArgs, this._extendActionArgs($itemElement), args))\r\n    },\r\n    _extendActionArgs: function($itemElement) {\r\n        return {\r\n            itemElement: (0, _element.getPublicElement)($itemElement),\r\n            itemIndex: this._itemElements().index($itemElement),\r\n            itemData: this._getItemData($itemElement)\r\n        }\r\n    },\r\n    _closestItemElement: function($element) {\r\n        return (0, _renderer.default)($element).closest(this._itemSelector())\r\n    },\r\n    _getItemData: function(itemElement) {\r\n        return (0, _renderer.default)(itemElement).data(this._itemDataKey())\r\n    },\r\n    _getSummaryItemsWidth: function(items, includeMargin) {\r\n        var result = 0;\r\n        if (items) {\r\n            (0, _iterator.each)(items, function(_, item) {\r\n                result += (0, _renderer.default)(item).outerWidth(includeMargin || false)\r\n            })\r\n        }\r\n        return result\r\n    },\r\n    getFocusedItemId: function() {\r\n        if (!this._focusedItemId) {\r\n            this._focusedItemId = \"dx-\" + new _guid.default\r\n        }\r\n        return this._focusedItemId\r\n    },\r\n    itemElements: function() {\r\n        return this._itemElements()\r\n    },\r\n    itemsContainer: function() {\r\n        return this._itemContainer()\r\n    }\r\n}).include(_data_helper.default);\r\nCollectionWidget.ItemClass = _item.default;\r\nvar _default = CollectionWidget;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}