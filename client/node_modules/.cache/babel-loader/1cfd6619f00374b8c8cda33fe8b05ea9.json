{"ast":null,"code":"/**\r\n * DevExtreme (ui/drop_down_editor/ui.drop_down_editor.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _guid = _interopRequireDefault(require(\"../../core/guid\"));\n\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _selectors = require(\"../widget/selectors\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _element = require(\"../../core/element\");\n\nvar _ui = _interopRequireDefault(require(\"../widget/ui.errors\"));\n\nvar _position = _interopRequireDefault(require(\"../../animation/position\"));\n\nvar _position2 = require(\"../../core/utils/position\");\n\nvar _ui2 = _interopRequireDefault(require(\"./ui.drop_down_button\"));\n\nvar _ui3 = _interopRequireDefault(require(\"../widget/ui.widget\"));\n\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\n\nvar _index = require(\"../../events/utils/index\");\n\nvar _text_box = _interopRequireDefault(require(\"../text_box\"));\n\nvar _click = require(\"../../events/click\");\n\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\n\nvar _function_template = require(\"../../core/templates/function_template\");\n\nvar _popup = _interopRequireDefault(require(\"../popup\"));\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DROP_DOWN_EDITOR_CLASS = \"dx-dropdowneditor\";\nvar DROP_DOWN_EDITOR_INPUT_WRAPPER = \"dx-dropdowneditor-input-wrapper\";\nvar DROP_DOWN_EDITOR_BUTTON_ICON = \"dx-dropdowneditor-icon\";\nvar DROP_DOWN_EDITOR_OVERLAY = \"dx-dropdowneditor-overlay\";\nvar DROP_DOWN_EDITOR_OVERLAY_FLIPPED = \"dx-dropdowneditor-overlay-flipped\";\nvar DROP_DOWN_EDITOR_ACTIVE = \"dx-dropdowneditor-active\";\nvar DROP_DOWN_EDITOR_FIELD_CLICKABLE = \"dx-dropdowneditor-field-clickable\";\nvar DROP_DOWN_EDITOR_FIELD_TEMPLATE_WRAPPER = \"dx-dropdowneditor-field-template-wrapper\";\n\nvar isIOs = \"ios\" === _devices.default.current().platform;\n\nvar DropDownEditor = _text_box.default.inherit({\n  _supportedKeys: function () {\n    return (0, _extend.extend)({}, this.callBase(), {\n      tab: function (e) {\n        if (!this.option(\"opened\")) {\n          return;\n        }\n\n        if (\"instantly\" === this.option(\"applyValueMode\")) {\n          this.close();\n          return;\n        }\n\n        var $focusableElement = e.shiftKey ? this._getLastPopupElement() : this._getFirstPopupElement();\n        $focusableElement && _events_engine.default.trigger($focusableElement, \"focus\");\n        e.preventDefault();\n      },\n      escape: function (e) {\n        if (this.option(\"opened\")) {\n          e.preventDefault();\n        }\n\n        this.close();\n        return true;\n      },\n      upArrow: function (e) {\n        if (!(0, _index.isCommandKeyPressed)(e)) {\n          e.preventDefault();\n          e.stopPropagation();\n\n          if (e.altKey) {\n            this.close();\n            return false;\n          }\n        }\n\n        return true;\n      },\n      downArrow: function (e) {\n        if (!(0, _index.isCommandKeyPressed)(e)) {\n          e.preventDefault();\n          e.stopPropagation();\n\n          if (e.altKey) {\n            this._validatedOpening();\n\n            return false;\n          }\n        }\n\n        return true;\n      },\n      enter: function (e) {\n        if (this.option(\"opened\")) {\n          e.preventDefault();\n\n          this._valueChangeEventHandler(e);\n        }\n\n        return true;\n      }\n    });\n  },\n  _getDefaultButtons: function () {\n    return this.callBase().concat([{\n      name: \"dropDown\",\n      Ctor: _ui2.default\n    }]);\n  },\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      value: null,\n      onOpened: null,\n      onClosed: null,\n      opened: false,\n      acceptCustomValue: true,\n      applyValueMode: \"instantly\",\n      deferRendering: true,\n      activeStateEnabled: true,\n      dropDownButtonTemplate: \"dropDownButton\",\n      fieldTemplate: null,\n      openOnFieldClick: false,\n      showDropDownButton: true,\n      buttons: void 0,\n      dropDownOptions: {\n        showTitle: false\n      },\n      popupPosition: this._getDefaultPopupPosition(),\n      onPopupInitialized: null,\n      applyButtonText: _message.default.format(\"OK\"),\n      cancelButtonText: _message.default.format(\"Cancel\"),\n      buttonsLocation: \"default\",\n      useHiddenSubmitElement: false\n    });\n  },\n  _getDefaultPopupPosition: function (isRtlEnabled) {\n    var position = (0, _position2.getDefaultAlignment)(isRtlEnabled);\n    return {\n      offset: {\n        h: 0,\n        v: -1\n      },\n      my: position + \" top\",\n      at: position + \" bottom\",\n      collision: \"flip flip\"\n    };\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function (_device) {\n        var isGeneric = \"generic\" === _device.platform;\n        return isGeneric;\n      },\n      options: {\n        popupPosition: {\n          offset: {\n            v: 0\n          }\n        }\n      }\n    }]);\n  },\n  _inputWrapper: function () {\n    return this.$element().find(\".\" + DROP_DOWN_EDITOR_INPUT_WRAPPER);\n  },\n  _init: function () {\n    this.callBase();\n\n    this._initVisibilityActions();\n\n    this._initPopupInitializedAction();\n\n    this._updatePopupPosition(this.option(\"rtlEnabled\"));\n\n    this._options.cache(\"dropDownOptions\", this.option(\"dropDownOptions\"));\n  },\n  _updatePopupPosition: function (isRtlEnabled) {\n    var _this$_getDefaultPopu = this._getDefaultPopupPosition(isRtlEnabled),\n        my = _this$_getDefaultPopu.my,\n        at = _this$_getDefaultPopu.at;\n\n    var currentPosition = this.option(\"popupPosition\");\n    this.option(\"popupPosition\", (0, _extend.extend)({}, currentPosition, {\n      my: my,\n      at: at\n    }));\n  },\n  _initVisibilityActions: function () {\n    this._openAction = this._createActionByOption(\"onOpened\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n    this._closeAction = this._createActionByOption(\"onClosed\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n  },\n  _initPopupInitializedAction: function () {\n    this._popupInitializedAction = this._createActionByOption(\"onPopupInitialized\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n  },\n  _initMarkup: function () {\n    this._renderSubmitElement();\n\n    this.callBase();\n    this.$element().addClass(DROP_DOWN_EDITOR_CLASS);\n    this.setAria(\"role\", \"combobox\");\n  },\n  _render: function () {\n    this.callBase();\n\n    this._renderOpenHandler();\n\n    this._attachFocusOutHandler();\n\n    this._renderOpenedState();\n  },\n  _renderContentImpl: function () {\n    if (!this.option(\"deferRendering\")) {\n      this._createPopup();\n    }\n  },\n  _renderInput: function () {\n    this.callBase();\n    this.$element().wrapInner((0, _renderer.default)(\"<div>\").addClass(DROP_DOWN_EDITOR_INPUT_WRAPPER));\n    this._$container = this.$element().children().eq(0);\n\n    this._setDefaultAria();\n  },\n  _setDefaultAria: function () {\n    this.setAria({\n      haspopup: \"true\",\n      autocomplete: \"list\"\n    });\n  },\n  _readOnlyPropValue: function () {\n    return !this.option(\"acceptCustomValue\") || this.callBase();\n  },\n  _cleanFocusState: function () {\n    this.callBase();\n\n    if (this.option(\"fieldTemplate\")) {\n      this._detachFocusEvents();\n    }\n  },\n  _getFieldTemplate: function () {\n    return this.option(\"fieldTemplate\") && this._getTemplateByOption(\"fieldTemplate\");\n  },\n  _renderMask: function () {\n    if (this.option(\"fieldTemplate\")) {\n      return;\n    }\n\n    this.callBase();\n  },\n  _renderField: function () {\n    var fieldTemplate = this._getFieldTemplate();\n\n    fieldTemplate && this._renderTemplatedField(fieldTemplate, this._fieldRenderData());\n  },\n  _renderPlaceholder: function () {\n    var hasFieldTemplate = !!this._getFieldTemplate();\n\n    if (!hasFieldTemplate) {\n      this.callBase();\n    }\n  },\n  _renderValue: function () {\n    if (this.option(\"useHiddenSubmitElement\")) {\n      this._setSubmitValue();\n    }\n\n    var promise = this.callBase();\n    promise.always(this._renderField.bind(this));\n  },\n  _renderTemplatedField: function (fieldTemplate, data) {\n    var _this = this;\n\n    var isFocused = (0, _selectors.focused)(this._input());\n    var $container = this._$container;\n\n    this._detachKeyboardEvents();\n\n    this._refreshButtonsContainer();\n\n    var beforeButtonsContainerParent = this._$beforeButtonsContainer && this._$beforeButtonsContainer[0].parentNode;\n    var afterButtonsContainerParent = this._$afterButtonsContainer && this._$afterButtonsContainer[0].parentNode;\n    beforeButtonsContainerParent && beforeButtonsContainerParent.removeChild(this._$beforeButtonsContainer[0]);\n    afterButtonsContainerParent && afterButtonsContainerParent.removeChild(this._$afterButtonsContainer[0]);\n\n    this._detachFocusEvents();\n\n    $container.empty();\n    var $templateWrapper = (0, _renderer.default)(\"<div>\").addClass(DROP_DOWN_EDITOR_FIELD_TEMPLATE_WRAPPER).appendTo($container);\n    fieldTemplate.render({\n      model: data,\n      container: (0, _element.getPublicElement)($templateWrapper),\n      onRendered: function () {\n        var $input = _this._input();\n\n        if (!$input.length) {\n          throw _ui.default.Error(\"E1010\");\n        }\n\n        _this._integrateInput();\n\n        isFocused && _events_engine.default.trigger($input, \"focus\");\n      }\n    });\n    $container.prepend(this._$beforeButtonsContainer);\n    $container.append(this._$afterButtonsContainer);\n  },\n  _refreshButtonsContainer: function () {\n    this._$buttonsContainer = this.$element().children().eq(0);\n  },\n  _integrateInput: function () {\n    this._refreshEvents();\n\n    this._refreshValueChangeEvent();\n\n    this._renderFocusState();\n\n    this._refreshEmptinessEvent();\n  },\n  _refreshEmptinessEvent: function () {\n    _events_engine.default.off(this._input(), \"input blur\", this._toggleEmptinessEventHandler);\n\n    this._renderEmptinessEvent();\n  },\n  _fieldRenderData: function () {\n    return this.option(\"value\");\n  },\n  _initTemplates: function () {\n    this._templateManager.addDefaultTemplates({\n      dropDownButton: new _function_template.FunctionTemplate(function (options) {\n        var $icon = (0, _renderer.default)(\"<div>\").addClass(DROP_DOWN_EDITOR_BUTTON_ICON);\n        (0, _renderer.default)(options.container).append($icon);\n      })\n    });\n\n    this.callBase();\n  },\n  _renderOpenHandler: function () {\n    var $inputWrapper = this._inputWrapper();\n\n    var eventName = (0, _index.addNamespace)(_click.name, this.NAME);\n    var openOnFieldClick = this.option(\"openOnFieldClick\");\n\n    _events_engine.default.off($inputWrapper, eventName);\n\n    _events_engine.default.on($inputWrapper, eventName, this._getInputClickHandler(openOnFieldClick));\n\n    this.$element().toggleClass(DROP_DOWN_EDITOR_FIELD_CLICKABLE, openOnFieldClick);\n\n    if (openOnFieldClick) {\n      this._openOnFieldClickAction = this._createAction(this._openHandler.bind(this));\n    }\n  },\n  _attachFocusOutHandler: function () {\n    var _this2 = this;\n\n    if (isIOs) {\n      this._detachFocusOutEvents();\n\n      _events_engine.default.on(this._inputWrapper(), (0, _index.addNamespace)(\"focusout\", this.NAME), function (event) {\n        var newTarget = event.relatedTarget;\n        var popupWrapper = _this2.content ? (0, _renderer.default)(_this2.content()).closest(\".\" + DROP_DOWN_EDITOR_OVERLAY) : _this2._$popup;\n\n        if (newTarget && _this2.option(\"opened\")) {\n          var isNewTargetOutside = 0 === (0, _renderer.default)(newTarget).closest(\".\" + DROP_DOWN_EDITOR_OVERLAY, popupWrapper).length;\n\n          if (isNewTargetOutside) {\n            _this2.close();\n          }\n        }\n      });\n    }\n  },\n  _detachFocusOutEvents: function () {\n    isIOs && _events_engine.default.off(this._inputWrapper(), (0, _index.addNamespace)(\"focusout\", this.NAME));\n  },\n  _getInputClickHandler: function (openOnFieldClick) {\n    var _this3 = this;\n\n    return openOnFieldClick ? function (e) {\n      _this3._executeOpenAction(e);\n    } : function (e) {\n      _this3._focusInput();\n    };\n  },\n  _openHandler: function () {\n    this._toggleOpenState();\n  },\n  _executeOpenAction: function (e) {\n    this._openOnFieldClickAction({\n      event: e\n    });\n  },\n  _keyboardEventBindingTarget: function () {\n    return this._input();\n  },\n  _focusInput: function () {\n    if (this.option(\"disabled\")) {\n      return false;\n    }\n\n    if (this.option(\"focusStateEnabled\") && !(0, _selectors.focused)(this._input())) {\n      _events_engine.default.trigger(this._input(), \"focus\");\n    }\n\n    return true;\n  },\n  _toggleOpenState: function (isVisible) {\n    if (!this._focusInput()) {\n      return;\n    }\n\n    if (!this.option(\"readOnly\")) {\n      isVisible = arguments.length ? isVisible : !this.option(\"opened\");\n      this.option(\"opened\", isVisible);\n    }\n  },\n  _renderOpenedState: function () {\n    var opened = this.option(\"opened\");\n\n    if (opened) {\n      this._createPopup();\n    }\n\n    this.$element().toggleClass(DROP_DOWN_EDITOR_ACTIVE, opened);\n\n    this._setPopupOption(\"visible\", opened);\n\n    this.setAria({\n      expanded: opened\n    });\n    this.setAria(\"owns\", (opened || void 0) && this._popupContentId, this.$element());\n  },\n  _createPopup: function () {\n    if (this._$popup) {\n      return;\n    }\n\n    this._$popup = (0, _renderer.default)(\"<div>\").addClass(DROP_DOWN_EDITOR_OVERLAY).addClass(this.option(\"customOverlayCssClass\")).appendTo(this.$element());\n\n    this._renderPopup();\n\n    this._renderPopupContent();\n  },\n  _renderPopupContent: _common.noop,\n  _renderPopup: function () {\n    var popupConfig = (0, _extend.extend)(this._popupConfig(), this._options.cache(\"dropDownOptions\"));\n    this._popup = this._createComponent(this._$popup, _popup.default, popupConfig);\n\n    this._popup.on({\n      showing: this._popupShowingHandler.bind(this),\n      shown: this._popupShownHandler.bind(this),\n      hiding: this._popupHidingHandler.bind(this),\n      hidden: this._popupHiddenHandler.bind(this),\n      contentReady: this._contentReadyHandler.bind(this)\n    });\n\n    this._contentReadyHandler();\n\n    this._setPopupContentId(this._popup.$content());\n\n    this._bindInnerWidgetOptions(this._popup, \"dropDownOptions\");\n  },\n  _setPopupContentId: function ($popupContent) {\n    this._popupContentId = \"dx-\" + new _guid.default();\n    this.setAria(\"id\", this._popupContentId, $popupContent);\n  },\n  _contentReadyHandler: _common.noop,\n  _popupConfig: function () {\n    var _this4 = this;\n\n    return {\n      onInitialized: this._popupInitializedHandler(),\n      position: (0, _extend.extend)(this.option(\"popupPosition\"), {\n        of: this.$element()\n      }),\n      showTitle: this.option(\"dropDownOptions.showTitle\"),\n      width: function () {\n        return (0, _utils.getElementWidth)(_this4.$element());\n      },\n      height: \"auto\",\n      shading: false,\n      closeOnTargetScroll: true,\n      closeOnOutsideClick: this._closeOutsideDropDownHandler.bind(this),\n      animation: {\n        show: {\n          type: \"fade\",\n          duration: 0,\n          from: 0,\n          to: 1\n        },\n        hide: {\n          type: \"fade\",\n          duration: 400,\n          from: 1,\n          to: 0\n        }\n      },\n      deferRendering: false,\n      focusStateEnabled: false,\n      showCloseButton: false,\n      dragEnabled: false,\n      toolbarItems: this._getPopupToolbarItems(),\n      onPositioned: this._popupPositionedHandler.bind(this),\n      fullScreen: false,\n      contentTemplate: null\n    };\n  },\n  _popupInitializedHandler: function () {\n    var _this5 = this;\n\n    if (!this.option(\"onPopupInitialized\")) {\n      return null;\n    }\n\n    return function (e) {\n      _this5._popupInitializedAction({\n        popup: e.component\n      });\n    };\n  },\n  _dimensionChanged: function () {\n    var _this6 = this;\n\n    var popupWidth = (0, _utils.getSizeValue)(this.option(\"dropDownOptions.width\"));\n\n    if (void 0 === popupWidth) {\n      this._setPopupOption(\"width\", function () {\n        return (0, _utils.getElementWidth)(_this6.$element());\n      });\n    }\n  },\n  _popupPositionedHandler: function (e) {\n    e.position && this._popup.overlayContent().toggleClass(DROP_DOWN_EDITOR_OVERLAY_FLIPPED, e.position.v.flip);\n  },\n  _popupShowingHandler: _common.noop,\n  _popupHidingHandler: function () {\n    this.option(\"opened\", false);\n  },\n  _popupShownHandler: function () {\n    var _this$_validationMess;\n\n    this._openAction();\n\n    null === (_this$_validationMess = this._validationMessage) || void 0 === _this$_validationMess ? void 0 : _this$_validationMess.option(\"positionRequest\", this._getValidationMessagePositionRequest());\n  },\n  _popupHiddenHandler: function () {\n    var _this$_validationMess2;\n\n    this._closeAction();\n\n    null === (_this$_validationMess2 = this._validationMessage) || void 0 === _this$_validationMess2 ? void 0 : _this$_validationMess2.option(\"positionRequest\", this._getValidationMessagePositionRequest());\n  },\n  _getValidationMessagePositionRequest: function () {\n    var positionRequest = \"below\";\n\n    if (this._popup && this._popup.option(\"visible\")) {\n      var _animationPosition$se = _position.default.setup(this.$element()),\n          myTop = _animationPosition$se.top;\n\n      var _animationPosition$se2 = _position.default.setup(this._popup.$content()),\n          popupTop = _animationPosition$se2.top;\n\n      positionRequest = myTop + this.option(\"popupPosition\").offset.v > popupTop ? \"below\" : \"above\";\n    }\n\n    return positionRequest;\n  },\n  _closeOutsideDropDownHandler: function (_ref) {\n    var target = _ref.target;\n    var $target = (0, _renderer.default)(target);\n    var dropDownButton = this.getButton(\"dropDown\");\n    var $dropDownButton = dropDownButton && dropDownButton.$element();\n    var isInputClicked = !!$target.closest(this.$element()).length;\n    var isDropDownButtonClicked = !!$target.closest($dropDownButton).length;\n    var isOutsideClick = !isInputClicked && !isDropDownButtonClicked;\n    return isOutsideClick;\n  },\n  _clean: function () {\n    delete this._openOnFieldClickAction;\n\n    if (this._$popup) {\n      this._$popup.remove();\n\n      delete this._$popup;\n      delete this._popup;\n    }\n\n    this.callBase();\n  },\n  _setPopupOption: function (optionName, value) {\n    this._setWidgetOption(\"_popup\", arguments);\n  },\n  _validatedOpening: function () {\n    if (!this.option(\"readOnly\")) {\n      this._toggleOpenState(true);\n    }\n  },\n  _getPopupToolbarItems: function () {\n    return \"useButtons\" === this.option(\"applyValueMode\") ? this._popupToolbarItemsConfig() : [];\n  },\n  _getFirstPopupElement: function () {\n    return this._popup._wrapper().find(\".dx-popup-done.dx-button\");\n  },\n  _getLastPopupElement: function () {\n    return this._popup._wrapper().find(\".dx-popup-cancel.dx-button\");\n  },\n  _popupElementTabHandler: function (e) {\n    var $element = (0, _renderer.default)(e.currentTarget);\n\n    if (e.shiftKey && $element.is(this._getFirstPopupElement()) || !e.shiftKey && $element.is(this._getLastPopupElement())) {\n      _events_engine.default.trigger(this._input(), \"focus\");\n\n      e.preventDefault();\n    }\n  },\n  _popupElementEscHandler: function () {\n    _events_engine.default.trigger(this._input(), \"focus\");\n\n    this.close();\n  },\n  _popupButtonInitializedHandler: function (e) {\n    e.component.registerKeyHandler(\"tab\", this._popupElementTabHandler.bind(this));\n    e.component.registerKeyHandler(\"escape\", this._popupElementEscHandler.bind(this));\n  },\n  _popupToolbarItemsConfig: function () {\n    var buttonsConfig = [{\n      shortcut: \"done\",\n      options: {\n        onClick: this._applyButtonHandler.bind(this),\n        text: this.option(\"applyButtonText\"),\n        onInitialized: this._popupButtonInitializedHandler.bind(this)\n      }\n    }, {\n      shortcut: \"cancel\",\n      options: {\n        onClick: this._cancelButtonHandler.bind(this),\n        text: this.option(\"cancelButtonText\"),\n        onInitialized: this._popupButtonInitializedHandler.bind(this)\n      }\n    }];\n    return this._applyButtonsLocation(buttonsConfig);\n  },\n  _applyButtonsLocation: function (buttonsConfig) {\n    var buttonsLocation = this.option(\"buttonsLocation\");\n    var resultConfig = buttonsConfig;\n\n    if (\"default\" !== buttonsLocation) {\n      var position = (0, _common.splitPair)(buttonsLocation);\n      (0, _iterator.each)(resultConfig, function (_, element) {\n        (0, _extend.extend)(element, {\n          toolbar: position[0],\n          location: position[1]\n        });\n      });\n    }\n\n    return resultConfig;\n  },\n  _applyButtonHandler: function () {\n    this.close();\n    this.option(\"focusStateEnabled\") && this.focus();\n  },\n  _cancelButtonHandler: function () {\n    this.close();\n    this.option(\"focusStateEnabled\") && this.focus();\n  },\n  _popupOptionChanged: function (args) {\n    var options = _ui3.default.getOptionsFromContainer(args);\n\n    this._setPopupOption(options);\n\n    var optionsKeys = Object.keys(options);\n\n    if (optionsKeys.indexOf(\"width\") !== -1 || optionsKeys.indexOf(\"height\") !== -1) {\n      this._dimensionChanged();\n    }\n  },\n  _renderSubmitElement: function () {\n    if (this.option(\"useHiddenSubmitElement\")) {\n      this._$submitElement = (0, _renderer.default)(\"<input>\").attr(\"type\", \"hidden\").appendTo(this.$element());\n    }\n  },\n  _setSubmitValue: function () {\n    this._getSubmitElement().val(this.option(\"value\"));\n  },\n  _getSubmitElement: function () {\n    if (this.option(\"useHiddenSubmitElement\")) {\n      return this._$submitElement;\n    } else {\n      return this.callBase();\n    }\n  },\n  _dispose: function () {\n    this._detachFocusOutEvents();\n\n    this.callBase();\n  },\n  _setDeprecatedOptions: function () {\n    this.callBase();\n    (0, _extend.extend)(this._deprecatedOptions, {\n      showPopupTitle: {\n        since: \"20.1\",\n        alias: \"dropDownOptions.showTitle\"\n      }\n    });\n  },\n  _optionChanged: function (args) {\n    var _this$_popup;\n\n    switch (args.name) {\n      case \"width\":\n      case \"height\":\n        this.callBase(args);\n        null === (_this$_popup = this._popup) || void 0 === _this$_popup ? void 0 : _this$_popup.repaint();\n        break;\n\n      case \"opened\":\n        this._renderOpenedState();\n\n        break;\n\n      case \"onOpened\":\n      case \"onClosed\":\n        this._initVisibilityActions();\n\n        break;\n\n      case \"onPopupInitialized\":\n        this._initPopupInitializedAction();\n\n        break;\n\n      case \"fieldTemplate\":\n        if ((0, _type.isDefined)(args.value)) {\n          this._renderField();\n        } else {\n          this._invalidate();\n        }\n\n        break;\n\n      case \"acceptCustomValue\":\n      case \"openOnFieldClick\":\n        this._invalidate();\n\n        break;\n\n      case \"dropDownButtonTemplate\":\n      case \"showDropDownButton\":\n        this._updateButtons([\"dropDown\"]);\n\n        break;\n\n      case \"dropDownOptions\":\n        this._popupOptionChanged(args);\n\n        this._options.cache(\"dropDownOptions\", this.option(\"dropDownOptions\"));\n\n        break;\n\n      case \"popupPosition\":\n        break;\n\n      case \"deferRendering\":\n        if ((0, _window.hasWindow)()) {\n          this._createPopup();\n        }\n\n        break;\n\n      case \"applyValueMode\":\n      case \"applyButtonText\":\n      case \"cancelButtonText\":\n      case \"buttonsLocation\":\n        this._setPopupOption(\"toolbarItems\", this._getPopupToolbarItems());\n\n        break;\n\n      case \"showPopupTitle\":\n        this._setPopupOption(\"showTitle\", args.value);\n\n        break;\n\n      case \"useHiddenSubmitElement\":\n        if (this._$submitElement) {\n          this._$submitElement.remove();\n\n          this._$submitElement = void 0;\n        }\n\n        this._renderSubmitElement();\n\n        break;\n\n      case \"rtlEnabled\":\n        this._updatePopupPosition(args.value);\n\n        this.callBase(args);\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  open: function () {\n    this.option(\"opened\", true);\n  },\n  close: function () {\n    this.option(\"opened\", false);\n  },\n  field: function () {\n    return (0, _element.getPublicElement)(this._input());\n  },\n  content: function () {\n    return this._popup ? this._popup.content() : null;\n  }\n});\n\n(0, _component_registrator.default)(\"dxDropDownEditor\", DropDownEditor);\nvar _default = DropDownEditor;\nexports.default = _default;\nmodule.exports = exports.default;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/ui/drop_down_editor/ui.drop_down_editor.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_events_engine","_guid","_component_registrator","_common","_selectors","_iterator","_type","_extend","_element","_ui","_position","_position2","_ui2","_ui3","_message","_index","_text_box","_click","_devices","_function_template","_popup","_window","_utils","obj","__esModule","DROP_DOWN_EDITOR_CLASS","DROP_DOWN_EDITOR_INPUT_WRAPPER","DROP_DOWN_EDITOR_BUTTON_ICON","DROP_DOWN_EDITOR_OVERLAY","DROP_DOWN_EDITOR_OVERLAY_FLIPPED","DROP_DOWN_EDITOR_ACTIVE","DROP_DOWN_EDITOR_FIELD_CLICKABLE","DROP_DOWN_EDITOR_FIELD_TEMPLATE_WRAPPER","isIOs","current","platform","DropDownEditor","inherit","_supportedKeys","extend","callBase","tab","e","option","close","$focusableElement","shiftKey","_getLastPopupElement","_getFirstPopupElement","trigger","preventDefault","escape","upArrow","isCommandKeyPressed","stopPropagation","altKey","downArrow","_validatedOpening","enter","_valueChangeEventHandler","_getDefaultButtons","concat","name","Ctor","_getDefaultOptions","value","onOpened","onClosed","opened","acceptCustomValue","applyValueMode","deferRendering","activeStateEnabled","dropDownButtonTemplate","fieldTemplate","openOnFieldClick","showDropDownButton","buttons","dropDownOptions","showTitle","popupPosition","_getDefaultPopupPosition","onPopupInitialized","applyButtonText","format","cancelButtonText","buttonsLocation","useHiddenSubmitElement","isRtlEnabled","position","getDefaultAlignment","offset","h","v","my","at","collision","_defaultOptionsRules","device","_device","isGeneric","options","_inputWrapper","$element","find","_init","_initVisibilityActions","_initPopupInitializedAction","_updatePopupPosition","_options","cache","_this$_getDefaultPopu","currentPosition","_openAction","_createActionByOption","excludeValidators","_closeAction","_popupInitializedAction","_initMarkup","_renderSubmitElement","addClass","setAria","_render","_renderOpenHandler","_attachFocusOutHandler","_renderOpenedState","_renderContentImpl","_createPopup","_renderInput","wrapInner","_$container","children","eq","_setDefaultAria","haspopup","autocomplete","_readOnlyPropValue","_cleanFocusState","_detachFocusEvents","_getFieldTemplate","_getTemplateByOption","_renderMask","_renderField","_renderTemplatedField","_fieldRenderData","_renderPlaceholder","hasFieldTemplate","_renderValue","_setSubmitValue","promise","always","bind","data","_this","isFocused","focused","_input","$container","_detachKeyboardEvents","_refreshButtonsContainer","beforeButtonsContainerParent","_$beforeButtonsContainer","parentNode","afterButtonsContainerParent","_$afterButtonsContainer","removeChild","empty","$templateWrapper","appendTo","render","model","container","getPublicElement","onRendered","$input","length","Error","_integrateInput","prepend","append","_$buttonsContainer","_refreshEvents","_refreshValueChangeEvent","_renderFocusState","_refreshEmptinessEvent","off","_toggleEmptinessEventHandler","_renderEmptinessEvent","_initTemplates","_templateManager","addDefaultTemplates","dropDownButton","FunctionTemplate","$icon","$inputWrapper","eventName","addNamespace","NAME","on","_getInputClickHandler","toggleClass","_openOnFieldClickAction","_createAction","_openHandler","_this2","_detachFocusOutEvents","event","newTarget","relatedTarget","popupWrapper","content","closest","_$popup","isNewTargetOutside","_this3","_executeOpenAction","_focusInput","_toggleOpenState","_keyboardEventBindingTarget","isVisible","arguments","_setPopupOption","expanded","_popupContentId","_renderPopup","_renderPopupContent","noop","popupConfig","_popupConfig","_createComponent","showing","_popupShowingHandler","shown","_popupShownHandler","hiding","_popupHidingHandler","hidden","_popupHiddenHandler","contentReady","_contentReadyHandler","_setPopupContentId","$content","_bindInnerWidgetOptions","$popupContent","_this4","onInitialized","_popupInitializedHandler","of","width","getElementWidth","height","shading","closeOnTargetScroll","closeOnOutsideClick","_closeOutsideDropDownHandler","animation","show","type","duration","from","to","hide","focusStateEnabled","showCloseButton","dragEnabled","toolbarItems","_getPopupToolbarItems","onPositioned","_popupPositionedHandler","fullScreen","contentTemplate","_this5","popup","component","_dimensionChanged","_this6","popupWidth","getSizeValue","overlayContent","flip","_this$_validationMess","_validationMessage","_getValidationMessagePositionRequest","_this$_validationMess2","positionRequest","_animationPosition$se","setup","myTop","top","_animationPosition$se2","popupTop","_ref","target","$target","getButton","$dropDownButton","isInputClicked","isDropDownButtonClicked","isOutsideClick","_clean","remove","optionName","_setWidgetOption","_popupToolbarItemsConfig","_wrapper","_popupElementTabHandler","currentTarget","is","_popupElementEscHandler","_popupButtonInitializedHandler","registerKeyHandler","buttonsConfig","shortcut","onClick","_applyButtonHandler","text","_cancelButtonHandler","_applyButtonsLocation","resultConfig","splitPair","each","_","element","toolbar","location","focus","_popupOptionChanged","args","getOptionsFromContainer","optionsKeys","Object","keys","indexOf","_$submitElement","attr","_getSubmitElement","val","_dispose","_setDeprecatedOptions","_deprecatedOptions","showPopupTitle","since","alias","_optionChanged","_this$_popup","repaint","isDefined","_invalidate","_updateButtons","hasWindow","open","field","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/drop_down_editor/ui.drop_down_editor.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _guid = _interopRequireDefault(require(\"../../core/guid\"));\r\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _selectors = require(\"../widget/selectors\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _element = require(\"../../core/element\");\r\nvar _ui = _interopRequireDefault(require(\"../widget/ui.errors\"));\r\nvar _position = _interopRequireDefault(require(\"../../animation/position\"));\r\nvar _position2 = require(\"../../core/utils/position\");\r\nvar _ui2 = _interopRequireDefault(require(\"./ui.drop_down_button\"));\r\nvar _ui3 = _interopRequireDefault(require(\"../widget/ui.widget\"));\r\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\r\nvar _index = require(\"../../events/utils/index\");\r\nvar _text_box = _interopRequireDefault(require(\"../text_box\"));\r\nvar _click = require(\"../../events/click\");\r\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\r\nvar _function_template = require(\"../../core/templates/function_template\");\r\nvar _popup = _interopRequireDefault(require(\"../popup\"));\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _utils = require(\"./utils\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DROP_DOWN_EDITOR_CLASS = \"dx-dropdowneditor\";\r\nvar DROP_DOWN_EDITOR_INPUT_WRAPPER = \"dx-dropdowneditor-input-wrapper\";\r\nvar DROP_DOWN_EDITOR_BUTTON_ICON = \"dx-dropdowneditor-icon\";\r\nvar DROP_DOWN_EDITOR_OVERLAY = \"dx-dropdowneditor-overlay\";\r\nvar DROP_DOWN_EDITOR_OVERLAY_FLIPPED = \"dx-dropdowneditor-overlay-flipped\";\r\nvar DROP_DOWN_EDITOR_ACTIVE = \"dx-dropdowneditor-active\";\r\nvar DROP_DOWN_EDITOR_FIELD_CLICKABLE = \"dx-dropdowneditor-field-clickable\";\r\nvar DROP_DOWN_EDITOR_FIELD_TEMPLATE_WRAPPER = \"dx-dropdowneditor-field-template-wrapper\";\r\nvar isIOs = \"ios\" === _devices.default.current().platform;\r\nvar DropDownEditor = _text_box.default.inherit({\r\n    _supportedKeys: function() {\r\n        return (0, _extend.extend)({}, this.callBase(), {\r\n            tab: function(e) {\r\n                if (!this.option(\"opened\")) {\r\n                    return\r\n                }\r\n                if (\"instantly\" === this.option(\"applyValueMode\")) {\r\n                    this.close();\r\n                    return\r\n                }\r\n                var $focusableElement = e.shiftKey ? this._getLastPopupElement() : this._getFirstPopupElement();\r\n                $focusableElement && _events_engine.default.trigger($focusableElement, \"focus\");\r\n                e.preventDefault()\r\n            },\r\n            escape: function(e) {\r\n                if (this.option(\"opened\")) {\r\n                    e.preventDefault()\r\n                }\r\n                this.close();\r\n                return true\r\n            },\r\n            upArrow: function(e) {\r\n                if (!(0, _index.isCommandKeyPressed)(e)) {\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    if (e.altKey) {\r\n                        this.close();\r\n                        return false\r\n                    }\r\n                }\r\n                return true\r\n            },\r\n            downArrow: function(e) {\r\n                if (!(0, _index.isCommandKeyPressed)(e)) {\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    if (e.altKey) {\r\n                        this._validatedOpening();\r\n                        return false\r\n                    }\r\n                }\r\n                return true\r\n            },\r\n            enter: function(e) {\r\n                if (this.option(\"opened\")) {\r\n                    e.preventDefault();\r\n                    this._valueChangeEventHandler(e)\r\n                }\r\n                return true\r\n            }\r\n        })\r\n    },\r\n    _getDefaultButtons: function() {\r\n        return this.callBase().concat([{\r\n            name: \"dropDown\",\r\n            Ctor: _ui2.default\r\n        }])\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            value: null,\r\n            onOpened: null,\r\n            onClosed: null,\r\n            opened: false,\r\n            acceptCustomValue: true,\r\n            applyValueMode: \"instantly\",\r\n            deferRendering: true,\r\n            activeStateEnabled: true,\r\n            dropDownButtonTemplate: \"dropDownButton\",\r\n            fieldTemplate: null,\r\n            openOnFieldClick: false,\r\n            showDropDownButton: true,\r\n            buttons: void 0,\r\n            dropDownOptions: {\r\n                showTitle: false\r\n            },\r\n            popupPosition: this._getDefaultPopupPosition(),\r\n            onPopupInitialized: null,\r\n            applyButtonText: _message.default.format(\"OK\"),\r\n            cancelButtonText: _message.default.format(\"Cancel\"),\r\n            buttonsLocation: \"default\",\r\n            useHiddenSubmitElement: false\r\n        })\r\n    },\r\n    _getDefaultPopupPosition: function(isRtlEnabled) {\r\n        var position = (0, _position2.getDefaultAlignment)(isRtlEnabled);\r\n        return {\r\n            offset: {\r\n                h: 0,\r\n                v: -1\r\n            },\r\n            my: position + \" top\",\r\n            at: position + \" bottom\",\r\n            collision: \"flip flip\"\r\n        }\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function(_device) {\r\n                var isGeneric = \"generic\" === _device.platform;\r\n                return isGeneric\r\n            },\r\n            options: {\r\n                popupPosition: {\r\n                    offset: {\r\n                        v: 0\r\n                    }\r\n                }\r\n            }\r\n        }])\r\n    },\r\n    _inputWrapper: function() {\r\n        return this.$element().find(\".\" + DROP_DOWN_EDITOR_INPUT_WRAPPER)\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initVisibilityActions();\r\n        this._initPopupInitializedAction();\r\n        this._updatePopupPosition(this.option(\"rtlEnabled\"));\r\n        this._options.cache(\"dropDownOptions\", this.option(\"dropDownOptions\"))\r\n    },\r\n    _updatePopupPosition: function(isRtlEnabled) {\r\n        var _this$_getDefaultPopu = this._getDefaultPopupPosition(isRtlEnabled),\r\n            my = _this$_getDefaultPopu.my,\r\n            at = _this$_getDefaultPopu.at;\r\n        var currentPosition = this.option(\"popupPosition\");\r\n        this.option(\"popupPosition\", (0, _extend.extend)({}, currentPosition, {\r\n            my: my,\r\n            at: at\r\n        }))\r\n    },\r\n    _initVisibilityActions: function() {\r\n        this._openAction = this._createActionByOption(\"onOpened\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        });\r\n        this._closeAction = this._createActionByOption(\"onClosed\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        })\r\n    },\r\n    _initPopupInitializedAction: function() {\r\n        this._popupInitializedAction = this._createActionByOption(\"onPopupInitialized\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        })\r\n    },\r\n    _initMarkup: function() {\r\n        this._renderSubmitElement();\r\n        this.callBase();\r\n        this.$element().addClass(DROP_DOWN_EDITOR_CLASS);\r\n        this.setAria(\"role\", \"combobox\")\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._renderOpenHandler();\r\n        this._attachFocusOutHandler();\r\n        this._renderOpenedState()\r\n    },\r\n    _renderContentImpl: function() {\r\n        if (!this.option(\"deferRendering\")) {\r\n            this._createPopup()\r\n        }\r\n    },\r\n    _renderInput: function() {\r\n        this.callBase();\r\n        this.$element().wrapInner((0, _renderer.default)(\"<div>\").addClass(DROP_DOWN_EDITOR_INPUT_WRAPPER));\r\n        this._$container = this.$element().children().eq(0);\r\n        this._setDefaultAria()\r\n    },\r\n    _setDefaultAria: function() {\r\n        this.setAria({\r\n            haspopup: \"true\",\r\n            autocomplete: \"list\"\r\n        })\r\n    },\r\n    _readOnlyPropValue: function() {\r\n        return !this.option(\"acceptCustomValue\") || this.callBase()\r\n    },\r\n    _cleanFocusState: function() {\r\n        this.callBase();\r\n        if (this.option(\"fieldTemplate\")) {\r\n            this._detachFocusEvents()\r\n        }\r\n    },\r\n    _getFieldTemplate: function() {\r\n        return this.option(\"fieldTemplate\") && this._getTemplateByOption(\"fieldTemplate\")\r\n    },\r\n    _renderMask: function() {\r\n        if (this.option(\"fieldTemplate\")) {\r\n            return\r\n        }\r\n        this.callBase()\r\n    },\r\n    _renderField: function() {\r\n        var fieldTemplate = this._getFieldTemplate();\r\n        fieldTemplate && this._renderTemplatedField(fieldTemplate, this._fieldRenderData())\r\n    },\r\n    _renderPlaceholder: function() {\r\n        var hasFieldTemplate = !!this._getFieldTemplate();\r\n        if (!hasFieldTemplate) {\r\n            this.callBase()\r\n        }\r\n    },\r\n    _renderValue: function() {\r\n        if (this.option(\"useHiddenSubmitElement\")) {\r\n            this._setSubmitValue()\r\n        }\r\n        var promise = this.callBase();\r\n        promise.always(this._renderField.bind(this))\r\n    },\r\n    _renderTemplatedField: function(fieldTemplate, data) {\r\n        var _this = this;\r\n        var isFocused = (0, _selectors.focused)(this._input());\r\n        var $container = this._$container;\r\n        this._detachKeyboardEvents();\r\n        this._refreshButtonsContainer();\r\n        var beforeButtonsContainerParent = this._$beforeButtonsContainer && this._$beforeButtonsContainer[0].parentNode;\r\n        var afterButtonsContainerParent = this._$afterButtonsContainer && this._$afterButtonsContainer[0].parentNode;\r\n        beforeButtonsContainerParent && beforeButtonsContainerParent.removeChild(this._$beforeButtonsContainer[0]);\r\n        afterButtonsContainerParent && afterButtonsContainerParent.removeChild(this._$afterButtonsContainer[0]);\r\n        this._detachFocusEvents();\r\n        $container.empty();\r\n        var $templateWrapper = (0, _renderer.default)(\"<div>\").addClass(DROP_DOWN_EDITOR_FIELD_TEMPLATE_WRAPPER).appendTo($container);\r\n        fieldTemplate.render({\r\n            model: data,\r\n            container: (0, _element.getPublicElement)($templateWrapper),\r\n            onRendered: function() {\r\n                var $input = _this._input();\r\n                if (!$input.length) {\r\n                    throw _ui.default.Error(\"E1010\")\r\n                }\r\n                _this._integrateInput();\r\n                isFocused && _events_engine.default.trigger($input, \"focus\")\r\n            }\r\n        });\r\n        $container.prepend(this._$beforeButtonsContainer);\r\n        $container.append(this._$afterButtonsContainer)\r\n    },\r\n    _refreshButtonsContainer: function() {\r\n        this._$buttonsContainer = this.$element().children().eq(0)\r\n    },\r\n    _integrateInput: function() {\r\n        this._refreshEvents();\r\n        this._refreshValueChangeEvent();\r\n        this._renderFocusState();\r\n        this._refreshEmptinessEvent()\r\n    },\r\n    _refreshEmptinessEvent: function() {\r\n        _events_engine.default.off(this._input(), \"input blur\", this._toggleEmptinessEventHandler);\r\n        this._renderEmptinessEvent()\r\n    },\r\n    _fieldRenderData: function() {\r\n        return this.option(\"value\")\r\n    },\r\n    _initTemplates: function() {\r\n        this._templateManager.addDefaultTemplates({\r\n            dropDownButton: new _function_template.FunctionTemplate(function(options) {\r\n                var $icon = (0, _renderer.default)(\"<div>\").addClass(DROP_DOWN_EDITOR_BUTTON_ICON);\r\n                (0, _renderer.default)(options.container).append($icon)\r\n            })\r\n        });\r\n        this.callBase()\r\n    },\r\n    _renderOpenHandler: function() {\r\n        var $inputWrapper = this._inputWrapper();\r\n        var eventName = (0, _index.addNamespace)(_click.name, this.NAME);\r\n        var openOnFieldClick = this.option(\"openOnFieldClick\");\r\n        _events_engine.default.off($inputWrapper, eventName);\r\n        _events_engine.default.on($inputWrapper, eventName, this._getInputClickHandler(openOnFieldClick));\r\n        this.$element().toggleClass(DROP_DOWN_EDITOR_FIELD_CLICKABLE, openOnFieldClick);\r\n        if (openOnFieldClick) {\r\n            this._openOnFieldClickAction = this._createAction(this._openHandler.bind(this))\r\n        }\r\n    },\r\n    _attachFocusOutHandler: function() {\r\n        var _this2 = this;\r\n        if (isIOs) {\r\n            this._detachFocusOutEvents();\r\n            _events_engine.default.on(this._inputWrapper(), (0, _index.addNamespace)(\"focusout\", this.NAME), function(event) {\r\n                var newTarget = event.relatedTarget;\r\n                var popupWrapper = _this2.content ? (0, _renderer.default)(_this2.content()).closest(\".\" + DROP_DOWN_EDITOR_OVERLAY) : _this2._$popup;\r\n                if (newTarget && _this2.option(\"opened\")) {\r\n                    var isNewTargetOutside = 0 === (0, _renderer.default)(newTarget).closest(\".\" + DROP_DOWN_EDITOR_OVERLAY, popupWrapper).length;\r\n                    if (isNewTargetOutside) {\r\n                        _this2.close()\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    },\r\n    _detachFocusOutEvents: function() {\r\n        isIOs && _events_engine.default.off(this._inputWrapper(), (0, _index.addNamespace)(\"focusout\", this.NAME))\r\n    },\r\n    _getInputClickHandler: function(openOnFieldClick) {\r\n        var _this3 = this;\r\n        return openOnFieldClick ? function(e) {\r\n            _this3._executeOpenAction(e)\r\n        } : function(e) {\r\n            _this3._focusInput()\r\n        }\r\n    },\r\n    _openHandler: function() {\r\n        this._toggleOpenState()\r\n    },\r\n    _executeOpenAction: function(e) {\r\n        this._openOnFieldClickAction({\r\n            event: e\r\n        })\r\n    },\r\n    _keyboardEventBindingTarget: function() {\r\n        return this._input()\r\n    },\r\n    _focusInput: function() {\r\n        if (this.option(\"disabled\")) {\r\n            return false\r\n        }\r\n        if (this.option(\"focusStateEnabled\") && !(0, _selectors.focused)(this._input())) {\r\n            _events_engine.default.trigger(this._input(), \"focus\")\r\n        }\r\n        return true\r\n    },\r\n    _toggleOpenState: function(isVisible) {\r\n        if (!this._focusInput()) {\r\n            return\r\n        }\r\n        if (!this.option(\"readOnly\")) {\r\n            isVisible = arguments.length ? isVisible : !this.option(\"opened\");\r\n            this.option(\"opened\", isVisible)\r\n        }\r\n    },\r\n    _renderOpenedState: function() {\r\n        var opened = this.option(\"opened\");\r\n        if (opened) {\r\n            this._createPopup()\r\n        }\r\n        this.$element().toggleClass(DROP_DOWN_EDITOR_ACTIVE, opened);\r\n        this._setPopupOption(\"visible\", opened);\r\n        this.setAria({\r\n            expanded: opened\r\n        });\r\n        this.setAria(\"owns\", (opened || void 0) && this._popupContentId, this.$element())\r\n    },\r\n    _createPopup: function() {\r\n        if (this._$popup) {\r\n            return\r\n        }\r\n        this._$popup = (0, _renderer.default)(\"<div>\").addClass(DROP_DOWN_EDITOR_OVERLAY).addClass(this.option(\"customOverlayCssClass\")).appendTo(this.$element());\r\n        this._renderPopup();\r\n        this._renderPopupContent()\r\n    },\r\n    _renderPopupContent: _common.noop,\r\n    _renderPopup: function() {\r\n        var popupConfig = (0, _extend.extend)(this._popupConfig(), this._options.cache(\"dropDownOptions\"));\r\n        this._popup = this._createComponent(this._$popup, _popup.default, popupConfig);\r\n        this._popup.on({\r\n            showing: this._popupShowingHandler.bind(this),\r\n            shown: this._popupShownHandler.bind(this),\r\n            hiding: this._popupHidingHandler.bind(this),\r\n            hidden: this._popupHiddenHandler.bind(this),\r\n            contentReady: this._contentReadyHandler.bind(this)\r\n        });\r\n        this._contentReadyHandler();\r\n        this._setPopupContentId(this._popup.$content());\r\n        this._bindInnerWidgetOptions(this._popup, \"dropDownOptions\")\r\n    },\r\n    _setPopupContentId: function($popupContent) {\r\n        this._popupContentId = \"dx-\" + new _guid.default;\r\n        this.setAria(\"id\", this._popupContentId, $popupContent)\r\n    },\r\n    _contentReadyHandler: _common.noop,\r\n    _popupConfig: function() {\r\n        var _this4 = this;\r\n        return {\r\n            onInitialized: this._popupInitializedHandler(),\r\n            position: (0, _extend.extend)(this.option(\"popupPosition\"), {\r\n                of: this.$element()\r\n            }),\r\n            showTitle: this.option(\"dropDownOptions.showTitle\"),\r\n            width: function() {\r\n                return (0, _utils.getElementWidth)(_this4.$element())\r\n            },\r\n            height: \"auto\",\r\n            shading: false,\r\n            closeOnTargetScroll: true,\r\n            closeOnOutsideClick: this._closeOutsideDropDownHandler.bind(this),\r\n            animation: {\r\n                show: {\r\n                    type: \"fade\",\r\n                    duration: 0,\r\n                    from: 0,\r\n                    to: 1\r\n                },\r\n                hide: {\r\n                    type: \"fade\",\r\n                    duration: 400,\r\n                    from: 1,\r\n                    to: 0\r\n                }\r\n            },\r\n            deferRendering: false,\r\n            focusStateEnabled: false,\r\n            showCloseButton: false,\r\n            dragEnabled: false,\r\n            toolbarItems: this._getPopupToolbarItems(),\r\n            onPositioned: this._popupPositionedHandler.bind(this),\r\n            fullScreen: false,\r\n            contentTemplate: null\r\n        }\r\n    },\r\n    _popupInitializedHandler: function() {\r\n        var _this5 = this;\r\n        if (!this.option(\"onPopupInitialized\")) {\r\n            return null\r\n        }\r\n        return function(e) {\r\n            _this5._popupInitializedAction({\r\n                popup: e.component\r\n            })\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        var _this6 = this;\r\n        var popupWidth = (0, _utils.getSizeValue)(this.option(\"dropDownOptions.width\"));\r\n        if (void 0 === popupWidth) {\r\n            this._setPopupOption(\"width\", function() {\r\n                return (0, _utils.getElementWidth)(_this6.$element())\r\n            })\r\n        }\r\n    },\r\n    _popupPositionedHandler: function(e) {\r\n        e.position && this._popup.overlayContent().toggleClass(DROP_DOWN_EDITOR_OVERLAY_FLIPPED, e.position.v.flip)\r\n    },\r\n    _popupShowingHandler: _common.noop,\r\n    _popupHidingHandler: function() {\r\n        this.option(\"opened\", false)\r\n    },\r\n    _popupShownHandler: function() {\r\n        var _this$_validationMess;\r\n        this._openAction();\r\n        null === (_this$_validationMess = this._validationMessage) || void 0 === _this$_validationMess ? void 0 : _this$_validationMess.option(\"positionRequest\", this._getValidationMessagePositionRequest())\r\n    },\r\n    _popupHiddenHandler: function() {\r\n        var _this$_validationMess2;\r\n        this._closeAction();\r\n        null === (_this$_validationMess2 = this._validationMessage) || void 0 === _this$_validationMess2 ? void 0 : _this$_validationMess2.option(\"positionRequest\", this._getValidationMessagePositionRequest())\r\n    },\r\n    _getValidationMessagePositionRequest: function() {\r\n        var positionRequest = \"below\";\r\n        if (this._popup && this._popup.option(\"visible\")) {\r\n            var _animationPosition$se = _position.default.setup(this.$element()),\r\n                myTop = _animationPosition$se.top;\r\n            var _animationPosition$se2 = _position.default.setup(this._popup.$content()),\r\n                popupTop = _animationPosition$se2.top;\r\n            positionRequest = myTop + this.option(\"popupPosition\").offset.v > popupTop ? \"below\" : \"above\"\r\n        }\r\n        return positionRequest\r\n    },\r\n    _closeOutsideDropDownHandler: function(_ref) {\r\n        var target = _ref.target;\r\n        var $target = (0, _renderer.default)(target);\r\n        var dropDownButton = this.getButton(\"dropDown\");\r\n        var $dropDownButton = dropDownButton && dropDownButton.$element();\r\n        var isInputClicked = !!$target.closest(this.$element()).length;\r\n        var isDropDownButtonClicked = !!$target.closest($dropDownButton).length;\r\n        var isOutsideClick = !isInputClicked && !isDropDownButtonClicked;\r\n        return isOutsideClick\r\n    },\r\n    _clean: function() {\r\n        delete this._openOnFieldClickAction;\r\n        if (this._$popup) {\r\n            this._$popup.remove();\r\n            delete this._$popup;\r\n            delete this._popup\r\n        }\r\n        this.callBase()\r\n    },\r\n    _setPopupOption: function(optionName, value) {\r\n        this._setWidgetOption(\"_popup\", arguments)\r\n    },\r\n    _validatedOpening: function() {\r\n        if (!this.option(\"readOnly\")) {\r\n            this._toggleOpenState(true)\r\n        }\r\n    },\r\n    _getPopupToolbarItems: function() {\r\n        return \"useButtons\" === this.option(\"applyValueMode\") ? this._popupToolbarItemsConfig() : []\r\n    },\r\n    _getFirstPopupElement: function() {\r\n        return this._popup._wrapper().find(\".dx-popup-done.dx-button\")\r\n    },\r\n    _getLastPopupElement: function() {\r\n        return this._popup._wrapper().find(\".dx-popup-cancel.dx-button\")\r\n    },\r\n    _popupElementTabHandler: function(e) {\r\n        var $element = (0, _renderer.default)(e.currentTarget);\r\n        if (e.shiftKey && $element.is(this._getFirstPopupElement()) || !e.shiftKey && $element.is(this._getLastPopupElement())) {\r\n            _events_engine.default.trigger(this._input(), \"focus\");\r\n            e.preventDefault()\r\n        }\r\n    },\r\n    _popupElementEscHandler: function() {\r\n        _events_engine.default.trigger(this._input(), \"focus\");\r\n        this.close()\r\n    },\r\n    _popupButtonInitializedHandler: function(e) {\r\n        e.component.registerKeyHandler(\"tab\", this._popupElementTabHandler.bind(this));\r\n        e.component.registerKeyHandler(\"escape\", this._popupElementEscHandler.bind(this))\r\n    },\r\n    _popupToolbarItemsConfig: function() {\r\n        var buttonsConfig = [{\r\n            shortcut: \"done\",\r\n            options: {\r\n                onClick: this._applyButtonHandler.bind(this),\r\n                text: this.option(\"applyButtonText\"),\r\n                onInitialized: this._popupButtonInitializedHandler.bind(this)\r\n            }\r\n        }, {\r\n            shortcut: \"cancel\",\r\n            options: {\r\n                onClick: this._cancelButtonHandler.bind(this),\r\n                text: this.option(\"cancelButtonText\"),\r\n                onInitialized: this._popupButtonInitializedHandler.bind(this)\r\n            }\r\n        }];\r\n        return this._applyButtonsLocation(buttonsConfig)\r\n    },\r\n    _applyButtonsLocation: function(buttonsConfig) {\r\n        var buttonsLocation = this.option(\"buttonsLocation\");\r\n        var resultConfig = buttonsConfig;\r\n        if (\"default\" !== buttonsLocation) {\r\n            var position = (0, _common.splitPair)(buttonsLocation);\r\n            (0, _iterator.each)(resultConfig, function(_, element) {\r\n                (0, _extend.extend)(element, {\r\n                    toolbar: position[0],\r\n                    location: position[1]\r\n                })\r\n            })\r\n        }\r\n        return resultConfig\r\n    },\r\n    _applyButtonHandler: function() {\r\n        this.close();\r\n        this.option(\"focusStateEnabled\") && this.focus()\r\n    },\r\n    _cancelButtonHandler: function() {\r\n        this.close();\r\n        this.option(\"focusStateEnabled\") && this.focus()\r\n    },\r\n    _popupOptionChanged: function(args) {\r\n        var options = _ui3.default.getOptionsFromContainer(args);\r\n        this._setPopupOption(options);\r\n        var optionsKeys = Object.keys(options);\r\n        if (optionsKeys.indexOf(\"width\") !== -1 || optionsKeys.indexOf(\"height\") !== -1) {\r\n            this._dimensionChanged()\r\n        }\r\n    },\r\n    _renderSubmitElement: function() {\r\n        if (this.option(\"useHiddenSubmitElement\")) {\r\n            this._$submitElement = (0, _renderer.default)(\"<input>\").attr(\"type\", \"hidden\").appendTo(this.$element())\r\n        }\r\n    },\r\n    _setSubmitValue: function() {\r\n        this._getSubmitElement().val(this.option(\"value\"))\r\n    },\r\n    _getSubmitElement: function() {\r\n        if (this.option(\"useHiddenSubmitElement\")) {\r\n            return this._$submitElement\r\n        } else {\r\n            return this.callBase()\r\n        }\r\n    },\r\n    _dispose: function() {\r\n        this._detachFocusOutEvents();\r\n        this.callBase()\r\n    },\r\n    _setDeprecatedOptions: function() {\r\n        this.callBase();\r\n        (0, _extend.extend)(this._deprecatedOptions, {\r\n            showPopupTitle: {\r\n                since: \"20.1\",\r\n                alias: \"dropDownOptions.showTitle\"\r\n            }\r\n        })\r\n    },\r\n    _optionChanged: function(args) {\r\n        var _this$_popup;\r\n        switch (args.name) {\r\n            case \"width\":\r\n            case \"height\":\r\n                this.callBase(args);\r\n                null === (_this$_popup = this._popup) || void 0 === _this$_popup ? void 0 : _this$_popup.repaint();\r\n                break;\r\n            case \"opened\":\r\n                this._renderOpenedState();\r\n                break;\r\n            case \"onOpened\":\r\n            case \"onClosed\":\r\n                this._initVisibilityActions();\r\n                break;\r\n            case \"onPopupInitialized\":\r\n                this._initPopupInitializedAction();\r\n                break;\r\n            case \"fieldTemplate\":\r\n                if ((0, _type.isDefined)(args.value)) {\r\n                    this._renderField()\r\n                } else {\r\n                    this._invalidate()\r\n                }\r\n                break;\r\n            case \"acceptCustomValue\":\r\n            case \"openOnFieldClick\":\r\n                this._invalidate();\r\n                break;\r\n            case \"dropDownButtonTemplate\":\r\n            case \"showDropDownButton\":\r\n                this._updateButtons([\"dropDown\"]);\r\n                break;\r\n            case \"dropDownOptions\":\r\n                this._popupOptionChanged(args);\r\n                this._options.cache(\"dropDownOptions\", this.option(\"dropDownOptions\"));\r\n                break;\r\n            case \"popupPosition\":\r\n                break;\r\n            case \"deferRendering\":\r\n                if ((0, _window.hasWindow)()) {\r\n                    this._createPopup()\r\n                }\r\n                break;\r\n            case \"applyValueMode\":\r\n            case \"applyButtonText\":\r\n            case \"cancelButtonText\":\r\n            case \"buttonsLocation\":\r\n                this._setPopupOption(\"toolbarItems\", this._getPopupToolbarItems());\r\n                break;\r\n            case \"showPopupTitle\":\r\n                this._setPopupOption(\"showTitle\", args.value);\r\n                break;\r\n            case \"useHiddenSubmitElement\":\r\n                if (this._$submitElement) {\r\n                    this._$submitElement.remove();\r\n                    this._$submitElement = void 0\r\n                }\r\n                this._renderSubmitElement();\r\n                break;\r\n            case \"rtlEnabled\":\r\n                this._updatePopupPosition(args.value);\r\n                this.callBase(args);\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    open: function() {\r\n        this.option(\"opened\", true)\r\n    },\r\n    close: function() {\r\n        this.option(\"opened\", false)\r\n    },\r\n    field: function() {\r\n        return (0, _element.getPublicElement)(this._input())\r\n    },\r\n    content: function() {\r\n        return this._popup ? this._popup.content() : null\r\n    }\r\n});\r\n(0, _component_registrator.default)(\"dxDropDownEditor\", DropDownEditor);\r\nvar _default = DropDownEditor;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}