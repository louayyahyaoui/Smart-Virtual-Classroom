{"ast":null,"code":"/**\r\n * DevExtreme (ui/draggable.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\n\nvar _window = require(\"../core/utils/window\");\n\nvar _events_engine = _interopRequireDefault(require(\"../events/core/events_engine\"));\n\nvar _string = require(\"../core/utils/string\");\n\nvar _component_registrator = _interopRequireDefault(require(\"../core/component_registrator\"));\n\nvar _translator = require(\"../animation/translator\");\n\nvar _animator = _interopRequireDefault(require(\"./scroll_view/animator\"));\n\nvar _browser = _interopRequireDefault(require(\"../core/utils/browser\"));\n\nvar _inflector = require(\"../core/utils/inflector\");\n\nvar _extend = require(\"../core/utils/extend\");\n\nvar _dom_component = _interopRequireDefault(require(\"../core/dom_component\"));\n\nvar _element = require(\"../core/element\");\n\nvar _index = require(\"../events/utils/index\");\n\nvar _pointer = _interopRequireDefault(require(\"../events/pointer\"));\n\nvar _drag = require(\"../events/drag\");\n\nvar _position = _interopRequireDefault(require(\"../animation/position\"));\n\nvar _type = require(\"../core/utils/type\");\n\nvar _common = require(\"../core/utils/common\");\n\nvar _view_port = require(\"../core/utils/view_port\");\n\nvar _empty_template = require(\"../core/templates/empty_template\");\n\nvar _deferred = require(\"../core/utils/deferred\");\n\nvar _position2 = require(\"../core/utils/position\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar window = (0, _window.getWindow)();\nvar DRAGGABLE = \"dxDraggable\";\nvar DRAGSTART_EVENT_NAME = (0, _index.addNamespace)(_drag.start, DRAGGABLE);\nvar DRAG_EVENT_NAME = (0, _index.addNamespace)(_drag.move, DRAGGABLE);\nvar DRAGEND_EVENT_NAME = (0, _index.addNamespace)(_drag.end, DRAGGABLE);\nvar DRAG_ENTER_EVENT_NAME = (0, _index.addNamespace)(_drag.enter, DRAGGABLE);\nvar DRAGEND_LEAVE_EVENT_NAME = (0, _index.addNamespace)(_drag.leave, DRAGGABLE);\nvar POINTERDOWN_EVENT_NAME = (0, _index.addNamespace)(_pointer.default.down, DRAGGABLE);\nvar CLONE_CLASS = \"clone\";\nvar targetDraggable;\nvar sourceDraggable;\nvar ANONYMOUS_TEMPLATE_NAME = \"content\";\n\nvar getMousePosition = function (event) {\n  return {\n    x: event.pageX - (0, _renderer.default)(window).scrollLeft(),\n    y: event.pageY - (0, _renderer.default)(window).scrollTop()\n  };\n};\n\nvar GESTURE_COVER_CLASS = \"dx-gesture-cover\";\n\nvar ScrollHelper = function () {\n  function ScrollHelper(orientation, component) {\n    this._preventScroll = true;\n    this._component = component;\n\n    if (\"vertical\" === orientation) {\n      this._scrollValue = \"scrollTop\";\n      this._overFlowAttr = \"overflowY\";\n      this._sizeAttr = \"height\";\n      this._scrollSizeProp = \"scrollHeight\";\n      this._clientSizeProp = \"clientHeight\";\n      this._limitProps = {\n        start: \"top\",\n        end: \"bottom\"\n      };\n    } else {\n      this._scrollValue = \"scrollLeft\";\n      this._overFlowAttr = \"overflowX\";\n      this._sizeAttr = \"width\";\n      this._scrollSizeProp = \"scrollWidth\";\n      this._clientSizeProp = \"clientWidth\";\n      this._limitProps = {\n        start: \"left\",\n        end: \"right\"\n      };\n    }\n  }\n\n  var _proto = ScrollHelper.prototype;\n\n  _proto.updateScrollable = function (elements, mousePosition) {\n    var that = this;\n\n    if (!elements.some(function (element) {\n      return that._trySetScrollable(element, mousePosition);\n    })) {\n      that._$scrollableAtPointer = null;\n      that._scrollSpeed = 0;\n    }\n  };\n\n  _proto.isScrolling = function () {\n    return !!this._scrollSpeed;\n  };\n\n  _proto.isScrollable = function ($element) {\n    var that = this;\n    return (\"auto\" === $element.css(that._overFlowAttr) || $element.hasClass(\"dx-scrollable-container\")) && $element.prop(that._scrollSizeProp) > $element[that._sizeAttr]();\n  };\n\n  _proto._trySetScrollable = function (element, mousePosition) {\n    var that = this;\n    var $element = (0, _renderer.default)(element);\n    var distanceToBorders;\n\n    var sensitivity = that._component.option(\"scrollSensitivity\");\n\n    var isScrollable = that.isScrollable($element);\n\n    if (isScrollable) {\n      distanceToBorders = that._calculateDistanceToBorders($element, mousePosition);\n\n      if (sensitivity > distanceToBorders[that._limitProps.start]) {\n        if (!that._preventScroll) {\n          that._scrollSpeed = -that._calculateScrollSpeed(distanceToBorders[that._limitProps.start]);\n          that._$scrollableAtPointer = $element;\n        }\n      } else {\n        if (sensitivity > distanceToBorders[that._limitProps.end]) {\n          if (!that._preventScroll) {\n            that._scrollSpeed = that._calculateScrollSpeed(distanceToBorders[that._limitProps.end]);\n            that._$scrollableAtPointer = $element;\n          }\n        } else {\n          isScrollable = false;\n          that._preventScroll = false;\n        }\n      }\n    }\n\n    return isScrollable;\n  };\n\n  _proto._calculateDistanceToBorders = function ($area, mousePosition) {\n    var area = $area.get(0);\n    var areaBoundingRect;\n\n    if (area) {\n      areaBoundingRect = (0, _position2.getBoundingRect)(area);\n      return {\n        left: mousePosition.x - areaBoundingRect.left,\n        top: mousePosition.y - areaBoundingRect.top,\n        right: areaBoundingRect.right - mousePosition.x,\n        bottom: areaBoundingRect.bottom - mousePosition.y\n      };\n    } else {\n      return {};\n    }\n  };\n\n  _proto._calculateScrollSpeed = function (distance) {\n    var component = this._component;\n    var sensitivity = component.option(\"scrollSensitivity\");\n    var maxSpeed = component.option(\"scrollSpeed\");\n    return Math.ceil(Math.pow((sensitivity - distance) / sensitivity, 2) * maxSpeed);\n  };\n\n  _proto.scrollByStep = function () {\n    var that = this;\n\n    if (that._$scrollableAtPointer && that._scrollSpeed) {\n      if (that._$scrollableAtPointer.hasClass(\"dx-scrollable-container\")) {\n        var $scrollable = that._$scrollableAtPointer.closest(\".dx-scrollable\");\n\n        var scrollableInstance = $scrollable.data(\"dxScrollable\") || $scrollable.data(\"dxScrollView\");\n\n        if (scrollableInstance) {\n          var nextScrollPosition = scrollableInstance.scrollOffset()[that._limitProps.start] + that._scrollSpeed;\n\n          scrollableInstance.scrollTo(_defineProperty({}, that._limitProps.start, nextScrollPosition));\n        }\n      } else {\n        var _nextScrollPosition = that._$scrollableAtPointer[that._scrollValue]() + that._scrollSpeed;\n\n        that._$scrollableAtPointer[that._scrollValue](_nextScrollPosition);\n      }\n\n      var dragMoveArgs = that._component._dragMoveArgs;\n\n      if (dragMoveArgs) {\n        that._component._dragMoveHandler(dragMoveArgs);\n      }\n    }\n  };\n\n  _proto.reset = function () {\n    this._$scrollableAtPointer = null;\n    this._scrollSpeed = 0;\n    this._preventScroll = true;\n  };\n\n  _proto.isOutsideScrollable = function ($scrollable, event) {\n    if (!$scrollable) {\n      return false;\n    }\n\n    var scrollableSize = (0, _position2.getBoundingRect)($scrollable.get(0));\n    var start = scrollableSize[this._limitProps.start];\n    var size = scrollableSize[this._sizeAttr];\n    var mousePosition = getMousePosition(event);\n    var location = \"width\" === this._sizeAttr ? mousePosition.x : mousePosition.y;\n    return location < start || location > start + size;\n  };\n\n  return ScrollHelper;\n}();\n\nvar ScrollAnimator = _animator.default.inherit({\n  ctor: function (strategy) {\n    this.callBase();\n    this._strategy = strategy;\n  },\n  _step: function () {\n    var horizontalScrollHelper = this._strategy._horizontalScrollHelper;\n    var verticalScrollHelper = this._strategy._verticalScrollHelper;\n    horizontalScrollHelper && horizontalScrollHelper.scrollByStep();\n    verticalScrollHelper && verticalScrollHelper.scrollByStep();\n  }\n});\n\nvar Draggable = _dom_component.default.inherit({\n  reset: _common.noop,\n  dragMove: _common.noop,\n  dragEnter: _common.noop,\n  dragLeave: _common.noop,\n  dragEnd: function (sourceEvent) {\n    var sourceDraggable = this._getSourceDraggable();\n\n    sourceDraggable._fireRemoveEvent(sourceEvent);\n\n    return new _deferred.Deferred().resolve();\n  },\n  _fireRemoveEvent: _common.noop,\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      onDragStart: null,\n      onDragMove: null,\n      onDragEnd: null,\n      onDragEnter: null,\n      onDragLeave: null,\n      onDrop: null,\n      immediate: true,\n      dragDirection: \"both\",\n      boundary: void 0,\n      boundOffset: 0,\n      allowMoveByClick: false,\n      itemData: null,\n      container: void 0,\n      dragTemplate: void 0,\n      contentTemplate: \"content\",\n      handle: \"\",\n      filter: \"\",\n      clone: false,\n      autoScroll: true,\n      scrollSpeed: 30,\n      scrollSensitivity: 60,\n      group: void 0,\n      data: void 0\n    });\n  },\n  _setOptionsByReference: function () {\n    this.callBase.apply(this, arguments);\n    (0, _extend.extend)(this._optionsByReference, {\n      component: true,\n      group: true,\n      itemData: true,\n      data: true\n    });\n  },\n  _init: function () {\n    this.callBase();\n\n    this._attachEventHandlers();\n\n    this._scrollAnimator = new ScrollAnimator(this);\n    this._horizontalScrollHelper = new ScrollHelper(\"horizontal\", this);\n    this._verticalScrollHelper = new ScrollHelper(\"vertical\", this);\n  },\n  _normalizeCursorOffset: function (offset) {\n    if ((0, _type.isObject)(offset)) {\n      offset = {\n        h: offset.x,\n        v: offset.y\n      };\n    }\n\n    offset = (0, _common.splitPair)(offset).map(function (value) {\n      return parseFloat(value);\n    });\n    return {\n      left: offset[0],\n      top: 1 === offset.length ? offset[0] : offset[1]\n    };\n  },\n  _getNormalizedCursorOffset: function (offset, options) {\n    if ((0, _type.isFunction)(offset)) {\n      offset = offset.call(this, options);\n    }\n\n    return this._normalizeCursorOffset(offset);\n  },\n  _calculateElementOffset: function (options) {\n    var elementOffset;\n    var dragElementOffset;\n    var event = options.event;\n    var $element = (0, _renderer.default)(options.itemElement);\n    var $dragElement = (0, _renderer.default)(options.dragElement);\n\n    var isCloned = this._dragElementIsCloned();\n\n    var cursorOffset = this.option(\"cursorOffset\");\n    var normalizedCursorOffset = {\n      left: 0,\n      top: 0\n    };\n    var currentLocate = this._initialLocate = (0, _translator.locate)($dragElement);\n\n    if (isCloned || options.initialOffset || cursorOffset) {\n      elementOffset = options.initialOffset || $element.offset();\n\n      if (cursorOffset) {\n        normalizedCursorOffset = this._getNormalizedCursorOffset(cursorOffset, options);\n\n        if (isFinite(normalizedCursorOffset.left)) {\n          elementOffset.left = event.pageX;\n        }\n\n        if (isFinite(normalizedCursorOffset.top)) {\n          elementOffset.top = event.pageY;\n        }\n      }\n\n      dragElementOffset = $dragElement.offset();\n      elementOffset.top -= dragElementOffset.top + (normalizedCursorOffset.top || 0) - currentLocate.top;\n      elementOffset.left -= dragElementOffset.left + (normalizedCursorOffset.left || 0) - currentLocate.left;\n    }\n\n    return elementOffset;\n  },\n  _initPosition: function (options) {\n    var $dragElement = (0, _renderer.default)(options.dragElement);\n\n    var elementOffset = this._calculateElementOffset(options);\n\n    if (elementOffset) {\n      this._move(elementOffset, $dragElement);\n    }\n\n    this._startPosition = (0, _translator.locate)($dragElement);\n  },\n  _startAnimator: function () {\n    if (!this._scrollAnimator.inProgress()) {\n      this._scrollAnimator.start();\n    }\n  },\n  _stopAnimator: function () {\n    this._scrollAnimator.stop();\n  },\n  _addWidgetPrefix: function (className) {\n    var componentName = this.NAME;\n    return (0, _inflector.dasherize)(componentName) + (className ? \"-\" + className : \"\");\n  },\n  _getItemsSelector: function () {\n    return this.option(\"filter\") || \"\";\n  },\n  _$content: function () {\n    var $element = this.$element();\n    var $wrapper = $element.children(\".dx-template-wrapper\");\n    return $wrapper.length ? $wrapper : $element;\n  },\n  _attachEventHandlers: function () {\n    var _this = this;\n\n    if (this.option(\"disabled\")) {\n      return;\n    }\n\n    var $element = this._$content();\n\n    var itemsSelector = this._getItemsSelector();\n\n    var allowMoveByClick = this.option(\"allowMoveByClick\");\n    var data = {\n      direction: this.option(\"dragDirection\"),\n      immediate: this.option(\"immediate\"),\n      checkDropTarget: function ($target, event) {\n        var targetGroup = _this.option(\"group\");\n\n        var sourceGroup = _this._getSourceDraggable().option(\"group\");\n\n        var $scrollable = _this._getScrollable($target);\n\n        if (_this._verticalScrollHelper.isOutsideScrollable($scrollable, event) || _this._horizontalScrollHelper.isOutsideScrollable($scrollable, event)) {\n          return false;\n        }\n\n        return sourceGroup && sourceGroup === targetGroup;\n      }\n    };\n\n    if (allowMoveByClick) {\n      $element = this._getArea();\n\n      _events_engine.default.on($element, POINTERDOWN_EVENT_NAME, data, this._pointerDownHandler.bind(this));\n    }\n\n    if (\">\" === itemsSelector[0]) {\n      itemsSelector = itemsSelector.slice(1);\n    }\n\n    _events_engine.default.on($element, DRAGSTART_EVENT_NAME, itemsSelector, data, this._dragStartHandler.bind(this));\n\n    _events_engine.default.on($element, DRAG_EVENT_NAME, data, this._dragMoveHandler.bind(this));\n\n    _events_engine.default.on($element, DRAGEND_EVENT_NAME, data, this._dragEndHandler.bind(this));\n\n    _events_engine.default.on($element, DRAG_ENTER_EVENT_NAME, data, this._dragEnterHandler.bind(this));\n\n    _events_engine.default.on($element, DRAGEND_LEAVE_EVENT_NAME, data, this._dragLeaveHandler.bind(this));\n  },\n  _dragElementIsCloned: function () {\n    return this._$dragElement && this._$dragElement.hasClass(this._addWidgetPrefix(CLONE_CLASS));\n  },\n  _getDragTemplateArgs: function ($element, $container) {\n    return {\n      container: (0, _element.getPublicElement)($container),\n      model: {\n        itemData: this.option(\"itemData\"),\n        itemElement: (0, _element.getPublicElement)($element)\n      }\n    };\n  },\n  _createDragElement: function ($element) {\n    var result = $element;\n    var clone = this.option(\"clone\");\n\n    var $container = this._getContainer();\n\n    var template = this.option(\"dragTemplate\");\n\n    if (template) {\n      template = this._getTemplate(template);\n      result = (0, _renderer.default)(\"<div>\").appendTo($container);\n      template.render(this._getDragTemplateArgs($element, result));\n    } else {\n      if (clone) {\n        result = (0, _renderer.default)(\"<div>\").appendTo($container);\n        $element.clone().css({\n          width: $element.css(\"width\"),\n          height: $element.css(\"height\")\n        }).appendTo(result);\n      }\n    }\n\n    return result.toggleClass(this._addWidgetPrefix(CLONE_CLASS), result.get(0) !== $element.get(0)).toggleClass(\"dx-rtl\", this.option(\"rtlEnabled\"));\n  },\n  _resetDragElement: function () {\n    if (this._dragElementIsCloned()) {\n      this._$dragElement.remove();\n    } else {\n      this._toggleDraggingClass(false);\n    }\n\n    this._$dragElement = null;\n  },\n  _resetSourceElement: function () {\n    this._toggleDragSourceClass(false);\n\n    this._$sourceElement = null;\n  },\n  _detachEventHandlers: function () {\n    _events_engine.default.off(this._$content(), \".\" + DRAGGABLE);\n\n    _events_engine.default.off(this._getArea(), \".\" + DRAGGABLE);\n  },\n  _move: function (position, $element) {\n    (0, _translator.move)($element || this._$dragElement, position);\n  },\n  _getDraggableElement: function (e) {\n    var $sourceElement = this._getSourceElement();\n\n    if ($sourceElement) {\n      return $sourceElement;\n    }\n\n    var allowMoveByClick = this.option(\"allowMoveByClick\");\n\n    if (allowMoveByClick) {\n      return this.$element();\n    }\n\n    var $target = (0, _renderer.default)(e && e.target);\n\n    var itemsSelector = this._getItemsSelector();\n\n    if (\">\" === itemsSelector[0]) {\n      var $items = this._$content().find(itemsSelector);\n\n      if (!$items.is($target)) {\n        $target = $target.closest($items);\n      }\n    }\n\n    return $target;\n  },\n  _getSourceElement: function () {\n    var draggable = this._getSourceDraggable();\n\n    return draggable._$sourceElement;\n  },\n  _pointerDownHandler: function (e) {\n    if ((0, _index.needSkipEvent)(e)) {\n      return;\n    }\n\n    var position = {};\n    var $element = this.$element();\n    var dragDirection = this.option(\"dragDirection\");\n\n    if (\"horizontal\" === dragDirection || \"both\" === dragDirection) {\n      position.left = e.pageX - $element.offset().left + (0, _translator.locate)($element).left - $element.width() / 2;\n    }\n\n    if (\"vertical\" === dragDirection || \"both\" === dragDirection) {\n      position.top = e.pageY - $element.offset().top + (0, _translator.locate)($element).top - $element.height() / 2;\n    }\n\n    this._move(position, $element);\n\n    this._getAction(\"onDragMove\")(this._getEventArgs(e));\n  },\n  _isValidElement: function (event, $element) {\n    var handle = this.option(\"handle\");\n    var $target = (0, _renderer.default)(event.originalEvent && event.originalEvent.target);\n\n    if (handle && !$target.closest(handle).length) {\n      return false;\n    }\n\n    if (!$element.length) {\n      return false;\n    }\n\n    return !$element.is(\".dx-state-disabled, .dx-state-disabled *\");\n  },\n  _dragStartHandler: function (e) {\n    var $element = this._getDraggableElement(e);\n\n    if (this._$sourceElement) {\n      return;\n    }\n\n    if (!this._isValidElement(e, $element)) {\n      e.cancel = true;\n      return;\n    }\n\n    var dragStartArgs = this._getDragStartArgs(e, $element);\n\n    this._getAction(\"onDragStart\")(dragStartArgs);\n\n    if (dragStartArgs.cancel) {\n      e.cancel = true;\n      return;\n    }\n\n    this.option(\"itemData\", dragStartArgs.itemData);\n\n    this._setSourceDraggable();\n\n    this._$sourceElement = $element;\n    var initialOffset = $element.offset();\n\n    var $dragElement = this._$dragElement = this._createDragElement($element);\n\n    this._toggleDraggingClass(true);\n\n    this._toggleDragSourceClass(true);\n\n    this._setGestureCoverCursor($dragElement.children());\n\n    var isFixedPosition = \"fixed\" === $dragElement.css(\"position\");\n\n    this._initPosition((0, _extend.extend)({}, dragStartArgs, {\n      dragElement: $dragElement.get(0),\n      initialOffset: isFixedPosition && initialOffset\n    }));\n\n    var $area = this._getArea();\n\n    var areaOffset = this._getAreaOffset($area);\n\n    var boundOffset = this._getBoundOffset();\n\n    var areaWidth = $area.outerWidth();\n    var areaHeight = $area.outerHeight();\n    var elementWidth = $dragElement.width();\n    var elementHeight = $dragElement.height();\n    var startOffset = {\n      left: $dragElement.offset().left - areaOffset.left,\n      top: $dragElement.offset().top - areaOffset.top\n    };\n\n    if ($area.length) {\n      e.maxLeftOffset = startOffset.left - boundOffset.left;\n      e.maxRightOffset = areaWidth - startOffset.left - elementWidth - boundOffset.right;\n      e.maxTopOffset = startOffset.top - boundOffset.top;\n      e.maxBottomOffset = areaHeight - startOffset.top - elementHeight - boundOffset.bottom;\n    }\n\n    if (this.option(\"autoScroll\")) {\n      this._startAnimator();\n    }\n  },\n  _getAreaOffset: function ($area) {\n    var offset = $area && _position.default.offset($area);\n\n    return offset ? offset : {\n      left: 0,\n      top: 0\n    };\n  },\n  _toggleDraggingClass: function (value) {\n    this._$dragElement && this._$dragElement.toggleClass(this._addWidgetPrefix(\"dragging\"), value);\n  },\n  _toggleDragSourceClass: function (value, $element) {\n    var $sourceElement = $element || this._$sourceElement;\n    $sourceElement && $sourceElement.toggleClass(this._addWidgetPrefix(\"source\"), value);\n  },\n  _setGestureCoverCursor: function ($element) {\n    (0, _renderer.default)(\".\".concat(GESTURE_COVER_CLASS)).css(\"cursor\", $element.css(\"cursor\"));\n  },\n  _getBoundOffset: function () {\n    var boundOffset = this.option(\"boundOffset\");\n\n    if ((0, _type.isFunction)(boundOffset)) {\n      boundOffset = boundOffset.call(this);\n    }\n\n    return (0, _string.quadToObject)(boundOffset);\n  },\n  _getArea: function () {\n    var area = this.option(\"boundary\");\n\n    if ((0, _type.isFunction)(area)) {\n      area = area.call(this);\n    }\n\n    return (0, _renderer.default)(area);\n  },\n  _getContainer: function () {\n    var container = this.option(\"container\");\n\n    if (void 0 === container) {\n      container = (0, _view_port.value)();\n    }\n\n    return (0, _renderer.default)(container);\n  },\n  _dragMoveHandler: function (e, scrollBy) {\n    this._dragMoveArgs = e;\n\n    if (!this._$dragElement) {\n      e.cancel = true;\n      return;\n    }\n\n    var offset = e.offset;\n    var startPosition = this._startPosition;\n\n    this._move({\n      left: startPosition.left + offset.x,\n      top: startPosition.top + offset.y\n    });\n\n    if (!scrollBy) {\n      this._updateScrollable(e);\n    }\n\n    var eventArgs = this._getEventArgs(e);\n\n    this._getAction(\"onDragMove\")(eventArgs);\n\n    if (true === eventArgs.cancel) {\n      return;\n    }\n\n    var targetDraggable = this._getTargetDraggable();\n\n    targetDraggable.dragMove(e, scrollBy);\n  },\n  _updateScrollable: function (e) {\n    var that = this;\n\n    if (that.option(\"autoScroll\")) {\n      var mousePosition = getMousePosition(e);\n      var allObjects = that.getElementsFromPoint(mousePosition);\n\n      that._verticalScrollHelper.updateScrollable(allObjects, mousePosition);\n\n      that._horizontalScrollHelper.updateScrollable(allObjects, mousePosition);\n    }\n  },\n  getElementsFromPoint: function (position, dragElement) {\n    var ownerDocument = (dragElement || this._$dragElement.get(0)).ownerDocument;\n\n    if (_browser.default.msie) {\n      var msElements = ownerDocument.msElementsFromPoint(position.x, position.y);\n\n      if (msElements) {\n        return Array.prototype.slice.call(msElements);\n      }\n\n      return [];\n    }\n\n    return ownerDocument.elementsFromPoint(position.x, position.y);\n  },\n  _getScrollable: function ($element) {\n    var _this2 = this;\n\n    var $scrollable;\n    $element.parents().toArray().some(function (parent) {\n      var $parent = (0, _renderer.default)(parent);\n\n      if (_this2._horizontalScrollHelper.isScrollable($parent) || _this2._verticalScrollHelper.isScrollable($parent)) {\n        $scrollable = $parent;\n        return true;\n      }\n    });\n    return $scrollable;\n  },\n  _defaultActionArgs: function () {\n    var args = this.callBase.apply(this, arguments);\n    var component = this.option(\"component\");\n\n    if (component) {\n      args.component = component;\n      args.element = component.element();\n    }\n\n    return args;\n  },\n  _getEventArgs: function (e) {\n    var sourceDraggable = this._getSourceDraggable();\n\n    var targetDraggable = this._getTargetDraggable();\n\n    return {\n      event: e,\n      itemData: sourceDraggable.option(\"itemData\"),\n      itemElement: (0, _element.getPublicElement)(sourceDraggable._$sourceElement),\n      fromComponent: sourceDraggable.option(\"component\") || sourceDraggable,\n      toComponent: targetDraggable.option(\"component\") || targetDraggable,\n      fromData: sourceDraggable.option(\"data\"),\n      toData: targetDraggable.option(\"data\")\n    };\n  },\n  _getDragStartArgs: function (e, $itemElement) {\n    var args = this._getEventArgs(e);\n\n    return {\n      event: args.event,\n      itemData: args.itemData,\n      itemElement: $itemElement,\n      fromData: args.fromData\n    };\n  },\n  _revertItemToInitialPosition: function () {\n    !this._dragElementIsCloned() && this._move(this._initialLocate, this._$sourceElement);\n  },\n  _dragEndHandler: function (e) {\n    var _this3 = this;\n\n    var d = new _deferred.Deferred();\n\n    var dragEndEventArgs = this._getEventArgs(e);\n\n    var dropEventArgs = this._getEventArgs(e);\n\n    var targetDraggable = this._getTargetDraggable();\n\n    var needRevertPosition = true;\n\n    try {\n      this._getAction(\"onDragEnd\")(dragEndEventArgs);\n    } finally {\n      (0, _deferred.when)((0, _deferred.fromPromise)(dragEndEventArgs.cancel)).done(function (cancel) {\n        if (!cancel) {\n          if (targetDraggable !== _this3) {\n            targetDraggable._getAction(\"onDrop\")(dropEventArgs);\n          }\n\n          if (!dropEventArgs.cancel) {\n            needRevertPosition = false;\n            (0, _deferred.when)((0, _deferred.fromPromise)(targetDraggable.dragEnd(dragEndEventArgs))).always(d.resolve);\n            return;\n          }\n        }\n\n        d.resolve();\n      }).fail(d.resolve);\n      d.done(function () {\n        if (needRevertPosition) {\n          _this3._revertItemToInitialPosition();\n        }\n\n        _this3.reset();\n\n        targetDraggable.reset();\n\n        _this3._stopAnimator();\n\n        _this3._horizontalScrollHelper.reset();\n\n        _this3._verticalScrollHelper.reset();\n\n        _this3._resetDragElement();\n\n        _this3._resetSourceElement();\n\n        _this3._resetTargetDraggable();\n\n        _this3._resetSourceDraggable();\n      });\n    }\n  },\n  _isTargetOverAnotherDraggable: function (e) {\n    var _this4 = this;\n\n    var sourceDraggable = this._getSourceDraggable();\n\n    if (this === sourceDraggable) {\n      return false;\n    }\n\n    var $dragElement = sourceDraggable._$dragElement;\n    var $sourceDraggableElement = sourceDraggable.$element();\n    var $targetDraggableElement = this.$element();\n    var mousePosition = getMousePosition(e);\n    var elements = this.getElementsFromPoint(mousePosition, e.target);\n    var firstWidgetElement = elements.filter(function (element) {\n      var $element = (0, _renderer.default)(element);\n\n      if ($element.hasClass(_this4._addWidgetPrefix())) {\n        return !$element.closest($dragElement).length;\n      }\n    })[0];\n\n    var $sourceElement = this._getSourceElement();\n\n    var isTargetOverItself = firstWidgetElement === $sourceDraggableElement.get(0);\n    var isTargetOverNestedDraggable = (0, _renderer.default)(firstWidgetElement).closest($sourceElement).length;\n    return !firstWidgetElement || firstWidgetElement === $targetDraggableElement.get(0) && !isTargetOverItself && !isTargetOverNestedDraggable;\n  },\n  _dragEnterHandler: function (e) {\n    this._fireDragEnterEvent(e);\n\n    if (this._isTargetOverAnotherDraggable(e)) {\n      this._setTargetDraggable();\n    }\n\n    var sourceDraggable = this._getSourceDraggable();\n\n    sourceDraggable.dragEnter(e);\n  },\n  _dragLeaveHandler: function (e) {\n    this._fireDragLeaveEvent(e);\n\n    this._resetTargetDraggable();\n\n    if (this !== this._getSourceDraggable()) {\n      this.reset();\n    }\n\n    var sourceDraggable = this._getSourceDraggable();\n\n    sourceDraggable.dragLeave(e);\n  },\n  _getAction: function (name) {\n    return this[\"_\" + name + \"Action\"] || this._createActionByOption(name);\n  },\n  _getAnonymousTemplateName: function () {\n    return ANONYMOUS_TEMPLATE_NAME;\n  },\n  _initTemplates: function () {\n    if (!this.option(\"contentTemplate\")) {\n      return;\n    }\n\n    this._templateManager.addDefaultTemplates({\n      content: new _empty_template.EmptyTemplate()\n    });\n\n    this.callBase.apply(this, arguments);\n  },\n  _render: function () {\n    this.callBase();\n    this.$element().addClass(this._addWidgetPrefix());\n    var transclude = this._templateManager.anonymousTemplateName === this.option(\"contentTemplate\");\n\n    var template = this._getTemplateByOption(\"contentTemplate\");\n\n    if (template) {\n      (0, _renderer.default)(template.render({\n        container: this.element(),\n        transclude: transclude\n      }));\n    }\n  },\n  _optionChanged: function (args) {\n    var name = args.name;\n\n    switch (name) {\n      case \"onDragStart\":\n      case \"onDragMove\":\n      case \"onDragEnd\":\n      case \"onDrop\":\n      case \"onDragEnter\":\n      case \"onDragLeave\":\n        this[\"_\" + name + \"Action\"] = this._createActionByOption(name);\n        break;\n\n      case \"dragTemplate\":\n      case \"contentTemplate\":\n      case \"container\":\n      case \"clone\":\n        break;\n\n      case \"allowMoveByClick\":\n      case \"dragDirection\":\n      case \"disabled\":\n      case \"boundary\":\n      case \"filter\":\n      case \"immediate\":\n        this._resetDragElement();\n\n        this._detachEventHandlers();\n\n        this._attachEventHandlers();\n\n        break;\n\n      case \"autoScroll\":\n        this._verticalScrollHelper.reset();\n\n        this._horizontalScrollHelper.reset();\n\n        break;\n\n      case \"scrollSensitivity\":\n      case \"scrollSpeed\":\n      case \"boundOffset\":\n      case \"handle\":\n      case \"group\":\n      case \"data\":\n      case \"itemData\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _getTargetDraggable: function () {\n    return targetDraggable || this;\n  },\n  _getSourceDraggable: function () {\n    return sourceDraggable || this;\n  },\n  _setTargetDraggable: function () {\n    var currentGroup = this.option(\"group\");\n\n    var sourceDraggable = this._getSourceDraggable();\n\n    if (currentGroup && currentGroup === sourceDraggable.option(\"group\")) {\n      targetDraggable = this;\n    }\n  },\n  _setSourceDraggable: function () {\n    sourceDraggable = this;\n  },\n  _resetSourceDraggable: function () {\n    sourceDraggable = null;\n  },\n  _resetTargetDraggable: function () {\n    targetDraggable = null;\n  },\n  _dispose: function () {\n    this.callBase();\n\n    this._detachEventHandlers();\n\n    this._resetDragElement();\n\n    this._resetTargetDraggable();\n\n    this._resetSourceDraggable();\n\n    this._$sourceElement = null;\n\n    this._stopAnimator();\n  },\n  _fireDragEnterEvent: function (sourceEvent) {\n    var args = this._getEventArgs(sourceEvent);\n\n    this._getAction(\"onDragEnter\")(args);\n  },\n  _fireDragLeaveEvent: function (sourceEvent) {\n    var args = this._getEventArgs(sourceEvent);\n\n    this._getAction(\"onDragLeave\")(args);\n  }\n});\n\n(0, _component_registrator.default)(DRAGGABLE, Draggable);\nvar _default = Draggable;\nexports.default = _default;\nmodule.exports = exports.default;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/ui/draggable.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_window","_events_engine","_string","_component_registrator","_translator","_animator","_browser","_inflector","_extend","_dom_component","_element","_index","_pointer","_drag","_position","_type","_common","_view_port","_empty_template","_deferred","_position2","obj","__esModule","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","window","getWindow","DRAGGABLE","DRAGSTART_EVENT_NAME","addNamespace","start","DRAG_EVENT_NAME","move","DRAGEND_EVENT_NAME","end","DRAG_ENTER_EVENT_NAME","enter","DRAGEND_LEAVE_EVENT_NAME","leave","POINTERDOWN_EVENT_NAME","down","CLONE_CLASS","targetDraggable","sourceDraggable","ANONYMOUS_TEMPLATE_NAME","getMousePosition","event","x","pageX","scrollLeft","y","pageY","scrollTop","GESTURE_COVER_CLASS","ScrollHelper","orientation","component","_preventScroll","_component","_scrollValue","_overFlowAttr","_sizeAttr","_scrollSizeProp","_clientSizeProp","_limitProps","_proto","prototype","updateScrollable","elements","mousePosition","that","some","element","_trySetScrollable","_$scrollableAtPointer","_scrollSpeed","isScrolling","isScrollable","$element","css","hasClass","prop","distanceToBorders","sensitivity","option","_calculateDistanceToBorders","_calculateScrollSpeed","$area","area","get","areaBoundingRect","getBoundingRect","left","top","right","bottom","distance","maxSpeed","Math","ceil","pow","scrollByStep","$scrollable","closest","scrollableInstance","data","nextScrollPosition","scrollOffset","scrollTo","_nextScrollPosition","dragMoveArgs","_dragMoveArgs","_dragMoveHandler","reset","isOutsideScrollable","scrollableSize","size","location","ScrollAnimator","inherit","ctor","strategy","callBase","_strategy","_step","horizontalScrollHelper","_horizontalScrollHelper","verticalScrollHelper","_verticalScrollHelper","Draggable","noop","dragMove","dragEnter","dragLeave","dragEnd","sourceEvent","_getSourceDraggable","_fireRemoveEvent","Deferred","resolve","_getDefaultOptions","extend","onDragStart","onDragMove","onDragEnd","onDragEnter","onDragLeave","onDrop","immediate","dragDirection","boundary","boundOffset","allowMoveByClick","itemData","container","dragTemplate","contentTemplate","handle","filter","clone","autoScroll","scrollSpeed","scrollSensitivity","group","_setOptionsByReference","apply","arguments","_optionsByReference","_init","_attachEventHandlers","_scrollAnimator","_normalizeCursorOffset","offset","isObject","h","v","splitPair","map","parseFloat","length","_getNormalizedCursorOffset","options","isFunction","call","_calculateElementOffset","elementOffset","dragElementOffset","itemElement","$dragElement","dragElement","isCloned","_dragElementIsCloned","cursorOffset","normalizedCursorOffset","currentLocate","_initialLocate","locate","initialOffset","isFinite","_initPosition","_move","_startPosition","_startAnimator","inProgress","_stopAnimator","stop","_addWidgetPrefix","className","componentName","NAME","dasherize","_getItemsSelector","_$content","$wrapper","children","_this","itemsSelector","direction","checkDropTarget","$target","targetGroup","sourceGroup","_getScrollable","_getArea","on","_pointerDownHandler","bind","slice","_dragStartHandler","_dragEndHandler","_dragEnterHandler","_dragLeaveHandler","_$dragElement","_getDragTemplateArgs","$container","getPublicElement","model","_createDragElement","result","_getContainer","template","_getTemplate","appendTo","render","width","height","toggleClass","_resetDragElement","remove","_toggleDraggingClass","_resetSourceElement","_toggleDragSourceClass","_$sourceElement","_detachEventHandlers","off","position","_getDraggableElement","e","$sourceElement","_getSourceElement","target","$items","find","is","draggable","needSkipEvent","_getAction","_getEventArgs","_isValidElement","originalEvent","cancel","dragStartArgs","_getDragStartArgs","_setSourceDraggable","_setGestureCoverCursor","isFixedPosition","areaOffset","_getAreaOffset","_getBoundOffset","areaWidth","outerWidth","areaHeight","outerHeight","elementWidth","elementHeight","startOffset","maxLeftOffset","maxRightOffset","maxTopOffset","maxBottomOffset","concat","quadToObject","scrollBy","startPosition","_updateScrollable","eventArgs","_getTargetDraggable","allObjects","getElementsFromPoint","ownerDocument","msie","msElements","msElementsFromPoint","Array","elementsFromPoint","_this2","parents","toArray","parent","$parent","_defaultActionArgs","args","fromComponent","toComponent","fromData","toData","$itemElement","_revertItemToInitialPosition","_this3","d","dragEndEventArgs","dropEventArgs","needRevertPosition","when","fromPromise","done","always","fail","_resetTargetDraggable","_resetSourceDraggable","_isTargetOverAnotherDraggable","_this4","$sourceDraggableElement","$targetDraggableElement","firstWidgetElement","isTargetOverItself","isTargetOverNestedDraggable","_fireDragEnterEvent","_setTargetDraggable","_fireDragLeaveEvent","name","_createActionByOption","_getAnonymousTemplateName","_initTemplates","_templateManager","addDefaultTemplates","content","EmptyTemplate","_render","addClass","transclude","anonymousTemplateName","_getTemplateByOption","_optionChanged","currentGroup","_dispose","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/draggable.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\r\nvar _window = require(\"../core/utils/window\");\r\nvar _events_engine = _interopRequireDefault(require(\"../events/core/events_engine\"));\r\nvar _string = require(\"../core/utils/string\");\r\nvar _component_registrator = _interopRequireDefault(require(\"../core/component_registrator\"));\r\nvar _translator = require(\"../animation/translator\");\r\nvar _animator = _interopRequireDefault(require(\"./scroll_view/animator\"));\r\nvar _browser = _interopRequireDefault(require(\"../core/utils/browser\"));\r\nvar _inflector = require(\"../core/utils/inflector\");\r\nvar _extend = require(\"../core/utils/extend\");\r\nvar _dom_component = _interopRequireDefault(require(\"../core/dom_component\"));\r\nvar _element = require(\"../core/element\");\r\nvar _index = require(\"../events/utils/index\");\r\nvar _pointer = _interopRequireDefault(require(\"../events/pointer\"));\r\nvar _drag = require(\"../events/drag\");\r\nvar _position = _interopRequireDefault(require(\"../animation/position\"));\r\nvar _type = require(\"../core/utils/type\");\r\nvar _common = require(\"../core/utils/common\");\r\nvar _view_port = require(\"../core/utils/view_port\");\r\nvar _empty_template = require(\"../core/templates/empty_template\");\r\nvar _deferred = require(\"../core/utils/deferred\");\r\nvar _position2 = require(\"../core/utils/position\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _defineProperty(obj, key, value) {\r\n    if (key in obj) {\r\n        Object.defineProperty(obj, key, {\r\n            value: value,\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true\r\n        })\r\n    } else {\r\n        obj[key] = value\r\n    }\r\n    return obj\r\n}\r\nvar window = (0, _window.getWindow)();\r\nvar DRAGGABLE = \"dxDraggable\";\r\nvar DRAGSTART_EVENT_NAME = (0, _index.addNamespace)(_drag.start, DRAGGABLE);\r\nvar DRAG_EVENT_NAME = (0, _index.addNamespace)(_drag.move, DRAGGABLE);\r\nvar DRAGEND_EVENT_NAME = (0, _index.addNamespace)(_drag.end, DRAGGABLE);\r\nvar DRAG_ENTER_EVENT_NAME = (0, _index.addNamespace)(_drag.enter, DRAGGABLE);\r\nvar DRAGEND_LEAVE_EVENT_NAME = (0, _index.addNamespace)(_drag.leave, DRAGGABLE);\r\nvar POINTERDOWN_EVENT_NAME = (0, _index.addNamespace)(_pointer.default.down, DRAGGABLE);\r\nvar CLONE_CLASS = \"clone\";\r\nvar targetDraggable;\r\nvar sourceDraggable;\r\nvar ANONYMOUS_TEMPLATE_NAME = \"content\";\r\nvar getMousePosition = function(event) {\r\n    return {\r\n        x: event.pageX - (0, _renderer.default)(window).scrollLeft(),\r\n        y: event.pageY - (0, _renderer.default)(window).scrollTop()\r\n    }\r\n};\r\nvar GESTURE_COVER_CLASS = \"dx-gesture-cover\";\r\nvar ScrollHelper = function() {\r\n    function ScrollHelper(orientation, component) {\r\n        this._preventScroll = true;\r\n        this._component = component;\r\n        if (\"vertical\" === orientation) {\r\n            this._scrollValue = \"scrollTop\";\r\n            this._overFlowAttr = \"overflowY\";\r\n            this._sizeAttr = \"height\";\r\n            this._scrollSizeProp = \"scrollHeight\";\r\n            this._clientSizeProp = \"clientHeight\";\r\n            this._limitProps = {\r\n                start: \"top\",\r\n                end: \"bottom\"\r\n            }\r\n        } else {\r\n            this._scrollValue = \"scrollLeft\";\r\n            this._overFlowAttr = \"overflowX\";\r\n            this._sizeAttr = \"width\";\r\n            this._scrollSizeProp = \"scrollWidth\";\r\n            this._clientSizeProp = \"clientWidth\";\r\n            this._limitProps = {\r\n                start: \"left\",\r\n                end: \"right\"\r\n            }\r\n        }\r\n    }\r\n    var _proto = ScrollHelper.prototype;\r\n    _proto.updateScrollable = function(elements, mousePosition) {\r\n        var that = this;\r\n        if (!elements.some(function(element) {\r\n                return that._trySetScrollable(element, mousePosition)\r\n            })) {\r\n            that._$scrollableAtPointer = null;\r\n            that._scrollSpeed = 0\r\n        }\r\n    };\r\n    _proto.isScrolling = function() {\r\n        return !!this._scrollSpeed\r\n    };\r\n    _proto.isScrollable = function($element) {\r\n        var that = this;\r\n        return (\"auto\" === $element.css(that._overFlowAttr) || $element.hasClass(\"dx-scrollable-container\")) && $element.prop(that._scrollSizeProp) > $element[that._sizeAttr]()\r\n    };\r\n    _proto._trySetScrollable = function(element, mousePosition) {\r\n        var that = this;\r\n        var $element = (0, _renderer.default)(element);\r\n        var distanceToBorders;\r\n        var sensitivity = that._component.option(\"scrollSensitivity\");\r\n        var isScrollable = that.isScrollable($element);\r\n        if (isScrollable) {\r\n            distanceToBorders = that._calculateDistanceToBorders($element, mousePosition);\r\n            if (sensitivity > distanceToBorders[that._limitProps.start]) {\r\n                if (!that._preventScroll) {\r\n                    that._scrollSpeed = -that._calculateScrollSpeed(distanceToBorders[that._limitProps.start]);\r\n                    that._$scrollableAtPointer = $element\r\n                }\r\n            } else {\r\n                if (sensitivity > distanceToBorders[that._limitProps.end]) {\r\n                    if (!that._preventScroll) {\r\n                        that._scrollSpeed = that._calculateScrollSpeed(distanceToBorders[that._limitProps.end]);\r\n                        that._$scrollableAtPointer = $element\r\n                    }\r\n                } else {\r\n                    isScrollable = false;\r\n                    that._preventScroll = false\r\n                }\r\n            }\r\n        }\r\n        return isScrollable\r\n    };\r\n    _proto._calculateDistanceToBorders = function($area, mousePosition) {\r\n        var area = $area.get(0);\r\n        var areaBoundingRect;\r\n        if (area) {\r\n            areaBoundingRect = (0, _position2.getBoundingRect)(area);\r\n            return {\r\n                left: mousePosition.x - areaBoundingRect.left,\r\n                top: mousePosition.y - areaBoundingRect.top,\r\n                right: areaBoundingRect.right - mousePosition.x,\r\n                bottom: areaBoundingRect.bottom - mousePosition.y\r\n            }\r\n        } else {\r\n            return {}\r\n        }\r\n    };\r\n    _proto._calculateScrollSpeed = function(distance) {\r\n        var component = this._component;\r\n        var sensitivity = component.option(\"scrollSensitivity\");\r\n        var maxSpeed = component.option(\"scrollSpeed\");\r\n        return Math.ceil(Math.pow((sensitivity - distance) / sensitivity, 2) * maxSpeed)\r\n    };\r\n    _proto.scrollByStep = function() {\r\n        var that = this;\r\n        if (that._$scrollableAtPointer && that._scrollSpeed) {\r\n            if (that._$scrollableAtPointer.hasClass(\"dx-scrollable-container\")) {\r\n                var $scrollable = that._$scrollableAtPointer.closest(\".dx-scrollable\");\r\n                var scrollableInstance = $scrollable.data(\"dxScrollable\") || $scrollable.data(\"dxScrollView\");\r\n                if (scrollableInstance) {\r\n                    var nextScrollPosition = scrollableInstance.scrollOffset()[that._limitProps.start] + that._scrollSpeed;\r\n                    scrollableInstance.scrollTo(_defineProperty({}, that._limitProps.start, nextScrollPosition))\r\n                }\r\n            } else {\r\n                var _nextScrollPosition = that._$scrollableAtPointer[that._scrollValue]() + that._scrollSpeed;\r\n                that._$scrollableAtPointer[that._scrollValue](_nextScrollPosition)\r\n            }\r\n            var dragMoveArgs = that._component._dragMoveArgs;\r\n            if (dragMoveArgs) {\r\n                that._component._dragMoveHandler(dragMoveArgs)\r\n            }\r\n        }\r\n    };\r\n    _proto.reset = function() {\r\n        this._$scrollableAtPointer = null;\r\n        this._scrollSpeed = 0;\r\n        this._preventScroll = true\r\n    };\r\n    _proto.isOutsideScrollable = function($scrollable, event) {\r\n        if (!$scrollable) {\r\n            return false\r\n        }\r\n        var scrollableSize = (0, _position2.getBoundingRect)($scrollable.get(0));\r\n        var start = scrollableSize[this._limitProps.start];\r\n        var size = scrollableSize[this._sizeAttr];\r\n        var mousePosition = getMousePosition(event);\r\n        var location = \"width\" === this._sizeAttr ? mousePosition.x : mousePosition.y;\r\n        return location < start || location > start + size\r\n    };\r\n    return ScrollHelper\r\n}();\r\nvar ScrollAnimator = _animator.default.inherit({\r\n    ctor: function(strategy) {\r\n        this.callBase();\r\n        this._strategy = strategy\r\n    },\r\n    _step: function() {\r\n        var horizontalScrollHelper = this._strategy._horizontalScrollHelper;\r\n        var verticalScrollHelper = this._strategy._verticalScrollHelper;\r\n        horizontalScrollHelper && horizontalScrollHelper.scrollByStep();\r\n        verticalScrollHelper && verticalScrollHelper.scrollByStep()\r\n    }\r\n});\r\nvar Draggable = _dom_component.default.inherit({\r\n    reset: _common.noop,\r\n    dragMove: _common.noop,\r\n    dragEnter: _common.noop,\r\n    dragLeave: _common.noop,\r\n    dragEnd: function(sourceEvent) {\r\n        var sourceDraggable = this._getSourceDraggable();\r\n        sourceDraggable._fireRemoveEvent(sourceEvent);\r\n        return (new _deferred.Deferred).resolve()\r\n    },\r\n    _fireRemoveEvent: _common.noop,\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            onDragStart: null,\r\n            onDragMove: null,\r\n            onDragEnd: null,\r\n            onDragEnter: null,\r\n            onDragLeave: null,\r\n            onDrop: null,\r\n            immediate: true,\r\n            dragDirection: \"both\",\r\n            boundary: void 0,\r\n            boundOffset: 0,\r\n            allowMoveByClick: false,\r\n            itemData: null,\r\n            container: void 0,\r\n            dragTemplate: void 0,\r\n            contentTemplate: \"content\",\r\n            handle: \"\",\r\n            filter: \"\",\r\n            clone: false,\r\n            autoScroll: true,\r\n            scrollSpeed: 30,\r\n            scrollSensitivity: 60,\r\n            group: void 0,\r\n            data: void 0\r\n        })\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this.callBase.apply(this, arguments);\r\n        (0, _extend.extend)(this._optionsByReference, {\r\n            component: true,\r\n            group: true,\r\n            itemData: true,\r\n            data: true\r\n        })\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._attachEventHandlers();\r\n        this._scrollAnimator = new ScrollAnimator(this);\r\n        this._horizontalScrollHelper = new ScrollHelper(\"horizontal\", this);\r\n        this._verticalScrollHelper = new ScrollHelper(\"vertical\", this)\r\n    },\r\n    _normalizeCursorOffset: function(offset) {\r\n        if ((0, _type.isObject)(offset)) {\r\n            offset = {\r\n                h: offset.x,\r\n                v: offset.y\r\n            }\r\n        }\r\n        offset = (0, _common.splitPair)(offset).map(function(value) {\r\n            return parseFloat(value)\r\n        });\r\n        return {\r\n            left: offset[0],\r\n            top: 1 === offset.length ? offset[0] : offset[1]\r\n        }\r\n    },\r\n    _getNormalizedCursorOffset: function(offset, options) {\r\n        if ((0, _type.isFunction)(offset)) {\r\n            offset = offset.call(this, options)\r\n        }\r\n        return this._normalizeCursorOffset(offset)\r\n    },\r\n    _calculateElementOffset: function(options) {\r\n        var elementOffset;\r\n        var dragElementOffset;\r\n        var event = options.event;\r\n        var $element = (0, _renderer.default)(options.itemElement);\r\n        var $dragElement = (0, _renderer.default)(options.dragElement);\r\n        var isCloned = this._dragElementIsCloned();\r\n        var cursorOffset = this.option(\"cursorOffset\");\r\n        var normalizedCursorOffset = {\r\n            left: 0,\r\n            top: 0\r\n        };\r\n        var currentLocate = this._initialLocate = (0, _translator.locate)($dragElement);\r\n        if (isCloned || options.initialOffset || cursorOffset) {\r\n            elementOffset = options.initialOffset || $element.offset();\r\n            if (cursorOffset) {\r\n                normalizedCursorOffset = this._getNormalizedCursorOffset(cursorOffset, options);\r\n                if (isFinite(normalizedCursorOffset.left)) {\r\n                    elementOffset.left = event.pageX\r\n                }\r\n                if (isFinite(normalizedCursorOffset.top)) {\r\n                    elementOffset.top = event.pageY\r\n                }\r\n            }\r\n            dragElementOffset = $dragElement.offset();\r\n            elementOffset.top -= dragElementOffset.top + (normalizedCursorOffset.top || 0) - currentLocate.top;\r\n            elementOffset.left -= dragElementOffset.left + (normalizedCursorOffset.left || 0) - currentLocate.left\r\n        }\r\n        return elementOffset\r\n    },\r\n    _initPosition: function(options) {\r\n        var $dragElement = (0, _renderer.default)(options.dragElement);\r\n        var elementOffset = this._calculateElementOffset(options);\r\n        if (elementOffset) {\r\n            this._move(elementOffset, $dragElement)\r\n        }\r\n        this._startPosition = (0, _translator.locate)($dragElement)\r\n    },\r\n    _startAnimator: function() {\r\n        if (!this._scrollAnimator.inProgress()) {\r\n            this._scrollAnimator.start()\r\n        }\r\n    },\r\n    _stopAnimator: function() {\r\n        this._scrollAnimator.stop()\r\n    },\r\n    _addWidgetPrefix: function(className) {\r\n        var componentName = this.NAME;\r\n        return (0, _inflector.dasherize)(componentName) + (className ? \"-\" + className : \"\")\r\n    },\r\n    _getItemsSelector: function() {\r\n        return this.option(\"filter\") || \"\"\r\n    },\r\n    _$content: function() {\r\n        var $element = this.$element();\r\n        var $wrapper = $element.children(\".dx-template-wrapper\");\r\n        return $wrapper.length ? $wrapper : $element\r\n    },\r\n    _attachEventHandlers: function() {\r\n        var _this = this;\r\n        if (this.option(\"disabled\")) {\r\n            return\r\n        }\r\n        var $element = this._$content();\r\n        var itemsSelector = this._getItemsSelector();\r\n        var allowMoveByClick = this.option(\"allowMoveByClick\");\r\n        var data = {\r\n            direction: this.option(\"dragDirection\"),\r\n            immediate: this.option(\"immediate\"),\r\n            checkDropTarget: function($target, event) {\r\n                var targetGroup = _this.option(\"group\");\r\n                var sourceGroup = _this._getSourceDraggable().option(\"group\");\r\n                var $scrollable = _this._getScrollable($target);\r\n                if (_this._verticalScrollHelper.isOutsideScrollable($scrollable, event) || _this._horizontalScrollHelper.isOutsideScrollable($scrollable, event)) {\r\n                    return false\r\n                }\r\n                return sourceGroup && sourceGroup === targetGroup\r\n            }\r\n        };\r\n        if (allowMoveByClick) {\r\n            $element = this._getArea();\r\n            _events_engine.default.on($element, POINTERDOWN_EVENT_NAME, data, this._pointerDownHandler.bind(this))\r\n        }\r\n        if (\">\" === itemsSelector[0]) {\r\n            itemsSelector = itemsSelector.slice(1)\r\n        }\r\n        _events_engine.default.on($element, DRAGSTART_EVENT_NAME, itemsSelector, data, this._dragStartHandler.bind(this));\r\n        _events_engine.default.on($element, DRAG_EVENT_NAME, data, this._dragMoveHandler.bind(this));\r\n        _events_engine.default.on($element, DRAGEND_EVENT_NAME, data, this._dragEndHandler.bind(this));\r\n        _events_engine.default.on($element, DRAG_ENTER_EVENT_NAME, data, this._dragEnterHandler.bind(this));\r\n        _events_engine.default.on($element, DRAGEND_LEAVE_EVENT_NAME, data, this._dragLeaveHandler.bind(this))\r\n    },\r\n    _dragElementIsCloned: function() {\r\n        return this._$dragElement && this._$dragElement.hasClass(this._addWidgetPrefix(CLONE_CLASS))\r\n    },\r\n    _getDragTemplateArgs: function($element, $container) {\r\n        return {\r\n            container: (0, _element.getPublicElement)($container),\r\n            model: {\r\n                itemData: this.option(\"itemData\"),\r\n                itemElement: (0, _element.getPublicElement)($element)\r\n            }\r\n        }\r\n    },\r\n    _createDragElement: function($element) {\r\n        var result = $element;\r\n        var clone = this.option(\"clone\");\r\n        var $container = this._getContainer();\r\n        var template = this.option(\"dragTemplate\");\r\n        if (template) {\r\n            template = this._getTemplate(template);\r\n            result = (0, _renderer.default)(\"<div>\").appendTo($container);\r\n            template.render(this._getDragTemplateArgs($element, result))\r\n        } else {\r\n            if (clone) {\r\n                result = (0, _renderer.default)(\"<div>\").appendTo($container);\r\n                $element.clone().css({\r\n                    width: $element.css(\"width\"),\r\n                    height: $element.css(\"height\")\r\n                }).appendTo(result)\r\n            }\r\n        }\r\n        return result.toggleClass(this._addWidgetPrefix(CLONE_CLASS), result.get(0) !== $element.get(0)).toggleClass(\"dx-rtl\", this.option(\"rtlEnabled\"))\r\n    },\r\n    _resetDragElement: function() {\r\n        if (this._dragElementIsCloned()) {\r\n            this._$dragElement.remove()\r\n        } else {\r\n            this._toggleDraggingClass(false)\r\n        }\r\n        this._$dragElement = null\r\n    },\r\n    _resetSourceElement: function() {\r\n        this._toggleDragSourceClass(false);\r\n        this._$sourceElement = null\r\n    },\r\n    _detachEventHandlers: function() {\r\n        _events_engine.default.off(this._$content(), \".\" + DRAGGABLE);\r\n        _events_engine.default.off(this._getArea(), \".\" + DRAGGABLE)\r\n    },\r\n    _move: function(position, $element) {\r\n        (0, _translator.move)($element || this._$dragElement, position)\r\n    },\r\n    _getDraggableElement: function(e) {\r\n        var $sourceElement = this._getSourceElement();\r\n        if ($sourceElement) {\r\n            return $sourceElement\r\n        }\r\n        var allowMoveByClick = this.option(\"allowMoveByClick\");\r\n        if (allowMoveByClick) {\r\n            return this.$element()\r\n        }\r\n        var $target = (0, _renderer.default)(e && e.target);\r\n        var itemsSelector = this._getItemsSelector();\r\n        if (\">\" === itemsSelector[0]) {\r\n            var $items = this._$content().find(itemsSelector);\r\n            if (!$items.is($target)) {\r\n                $target = $target.closest($items)\r\n            }\r\n        }\r\n        return $target\r\n    },\r\n    _getSourceElement: function() {\r\n        var draggable = this._getSourceDraggable();\r\n        return draggable._$sourceElement\r\n    },\r\n    _pointerDownHandler: function(e) {\r\n        if ((0, _index.needSkipEvent)(e)) {\r\n            return\r\n        }\r\n        var position = {};\r\n        var $element = this.$element();\r\n        var dragDirection = this.option(\"dragDirection\");\r\n        if (\"horizontal\" === dragDirection || \"both\" === dragDirection) {\r\n            position.left = e.pageX - $element.offset().left + (0, _translator.locate)($element).left - $element.width() / 2\r\n        }\r\n        if (\"vertical\" === dragDirection || \"both\" === dragDirection) {\r\n            position.top = e.pageY - $element.offset().top + (0, _translator.locate)($element).top - $element.height() / 2\r\n        }\r\n        this._move(position, $element);\r\n        this._getAction(\"onDragMove\")(this._getEventArgs(e))\r\n    },\r\n    _isValidElement: function(event, $element) {\r\n        var handle = this.option(\"handle\");\r\n        var $target = (0, _renderer.default)(event.originalEvent && event.originalEvent.target);\r\n        if (handle && !$target.closest(handle).length) {\r\n            return false\r\n        }\r\n        if (!$element.length) {\r\n            return false\r\n        }\r\n        return !$element.is(\".dx-state-disabled, .dx-state-disabled *\")\r\n    },\r\n    _dragStartHandler: function(e) {\r\n        var $element = this._getDraggableElement(e);\r\n        if (this._$sourceElement) {\r\n            return\r\n        }\r\n        if (!this._isValidElement(e, $element)) {\r\n            e.cancel = true;\r\n            return\r\n        }\r\n        var dragStartArgs = this._getDragStartArgs(e, $element);\r\n        this._getAction(\"onDragStart\")(dragStartArgs);\r\n        if (dragStartArgs.cancel) {\r\n            e.cancel = true;\r\n            return\r\n        }\r\n        this.option(\"itemData\", dragStartArgs.itemData);\r\n        this._setSourceDraggable();\r\n        this._$sourceElement = $element;\r\n        var initialOffset = $element.offset();\r\n        var $dragElement = this._$dragElement = this._createDragElement($element);\r\n        this._toggleDraggingClass(true);\r\n        this._toggleDragSourceClass(true);\r\n        this._setGestureCoverCursor($dragElement.children());\r\n        var isFixedPosition = \"fixed\" === $dragElement.css(\"position\");\r\n        this._initPosition((0, _extend.extend)({}, dragStartArgs, {\r\n            dragElement: $dragElement.get(0),\r\n            initialOffset: isFixedPosition && initialOffset\r\n        }));\r\n        var $area = this._getArea();\r\n        var areaOffset = this._getAreaOffset($area);\r\n        var boundOffset = this._getBoundOffset();\r\n        var areaWidth = $area.outerWidth();\r\n        var areaHeight = $area.outerHeight();\r\n        var elementWidth = $dragElement.width();\r\n        var elementHeight = $dragElement.height();\r\n        var startOffset = {\r\n            left: $dragElement.offset().left - areaOffset.left,\r\n            top: $dragElement.offset().top - areaOffset.top\r\n        };\r\n        if ($area.length) {\r\n            e.maxLeftOffset = startOffset.left - boundOffset.left;\r\n            e.maxRightOffset = areaWidth - startOffset.left - elementWidth - boundOffset.right;\r\n            e.maxTopOffset = startOffset.top - boundOffset.top;\r\n            e.maxBottomOffset = areaHeight - startOffset.top - elementHeight - boundOffset.bottom\r\n        }\r\n        if (this.option(\"autoScroll\")) {\r\n            this._startAnimator()\r\n        }\r\n    },\r\n    _getAreaOffset: function($area) {\r\n        var offset = $area && _position.default.offset($area);\r\n        return offset ? offset : {\r\n            left: 0,\r\n            top: 0\r\n        }\r\n    },\r\n    _toggleDraggingClass: function(value) {\r\n        this._$dragElement && this._$dragElement.toggleClass(this._addWidgetPrefix(\"dragging\"), value)\r\n    },\r\n    _toggleDragSourceClass: function(value, $element) {\r\n        var $sourceElement = $element || this._$sourceElement;\r\n        $sourceElement && $sourceElement.toggleClass(this._addWidgetPrefix(\"source\"), value)\r\n    },\r\n    _setGestureCoverCursor: function($element) {\r\n        (0, _renderer.default)(\".\".concat(GESTURE_COVER_CLASS)).css(\"cursor\", $element.css(\"cursor\"))\r\n    },\r\n    _getBoundOffset: function() {\r\n        var boundOffset = this.option(\"boundOffset\");\r\n        if ((0, _type.isFunction)(boundOffset)) {\r\n            boundOffset = boundOffset.call(this)\r\n        }\r\n        return (0, _string.quadToObject)(boundOffset)\r\n    },\r\n    _getArea: function() {\r\n        var area = this.option(\"boundary\");\r\n        if ((0, _type.isFunction)(area)) {\r\n            area = area.call(this)\r\n        }\r\n        return (0, _renderer.default)(area)\r\n    },\r\n    _getContainer: function() {\r\n        var container = this.option(\"container\");\r\n        if (void 0 === container) {\r\n            container = (0, _view_port.value)()\r\n        }\r\n        return (0, _renderer.default)(container)\r\n    },\r\n    _dragMoveHandler: function(e, scrollBy) {\r\n        this._dragMoveArgs = e;\r\n        if (!this._$dragElement) {\r\n            e.cancel = true;\r\n            return\r\n        }\r\n        var offset = e.offset;\r\n        var startPosition = this._startPosition;\r\n        this._move({\r\n            left: startPosition.left + offset.x,\r\n            top: startPosition.top + offset.y\r\n        });\r\n        if (!scrollBy) {\r\n            this._updateScrollable(e)\r\n        }\r\n        var eventArgs = this._getEventArgs(e);\r\n        this._getAction(\"onDragMove\")(eventArgs);\r\n        if (true === eventArgs.cancel) {\r\n            return\r\n        }\r\n        var targetDraggable = this._getTargetDraggable();\r\n        targetDraggable.dragMove(e, scrollBy)\r\n    },\r\n    _updateScrollable: function(e) {\r\n        var that = this;\r\n        if (that.option(\"autoScroll\")) {\r\n            var mousePosition = getMousePosition(e);\r\n            var allObjects = that.getElementsFromPoint(mousePosition);\r\n            that._verticalScrollHelper.updateScrollable(allObjects, mousePosition);\r\n            that._horizontalScrollHelper.updateScrollable(allObjects, mousePosition)\r\n        }\r\n    },\r\n    getElementsFromPoint: function(position, dragElement) {\r\n        var ownerDocument = (dragElement || this._$dragElement.get(0)).ownerDocument;\r\n        if (_browser.default.msie) {\r\n            var msElements = ownerDocument.msElementsFromPoint(position.x, position.y);\r\n            if (msElements) {\r\n                return Array.prototype.slice.call(msElements)\r\n            }\r\n            return []\r\n        }\r\n        return ownerDocument.elementsFromPoint(position.x, position.y)\r\n    },\r\n    _getScrollable: function($element) {\r\n        var _this2 = this;\r\n        var $scrollable;\r\n        $element.parents().toArray().some(function(parent) {\r\n            var $parent = (0, _renderer.default)(parent);\r\n            if (_this2._horizontalScrollHelper.isScrollable($parent) || _this2._verticalScrollHelper.isScrollable($parent)) {\r\n                $scrollable = $parent;\r\n                return true\r\n            }\r\n        });\r\n        return $scrollable\r\n    },\r\n    _defaultActionArgs: function() {\r\n        var args = this.callBase.apply(this, arguments);\r\n        var component = this.option(\"component\");\r\n        if (component) {\r\n            args.component = component;\r\n            args.element = component.element()\r\n        }\r\n        return args\r\n    },\r\n    _getEventArgs: function(e) {\r\n        var sourceDraggable = this._getSourceDraggable();\r\n        var targetDraggable = this._getTargetDraggable();\r\n        return {\r\n            event: e,\r\n            itemData: sourceDraggable.option(\"itemData\"),\r\n            itemElement: (0, _element.getPublicElement)(sourceDraggable._$sourceElement),\r\n            fromComponent: sourceDraggable.option(\"component\") || sourceDraggable,\r\n            toComponent: targetDraggable.option(\"component\") || targetDraggable,\r\n            fromData: sourceDraggable.option(\"data\"),\r\n            toData: targetDraggable.option(\"data\")\r\n        }\r\n    },\r\n    _getDragStartArgs: function(e, $itemElement) {\r\n        var args = this._getEventArgs(e);\r\n        return {\r\n            event: args.event,\r\n            itemData: args.itemData,\r\n            itemElement: $itemElement,\r\n            fromData: args.fromData\r\n        }\r\n    },\r\n    _revertItemToInitialPosition: function() {\r\n        !this._dragElementIsCloned() && this._move(this._initialLocate, this._$sourceElement)\r\n    },\r\n    _dragEndHandler: function(e) {\r\n        var _this3 = this;\r\n        var d = new _deferred.Deferred;\r\n        var dragEndEventArgs = this._getEventArgs(e);\r\n        var dropEventArgs = this._getEventArgs(e);\r\n        var targetDraggable = this._getTargetDraggable();\r\n        var needRevertPosition = true;\r\n        try {\r\n            this._getAction(\"onDragEnd\")(dragEndEventArgs)\r\n        } finally {\r\n            (0, _deferred.when)((0, _deferred.fromPromise)(dragEndEventArgs.cancel)).done(function(cancel) {\r\n                if (!cancel) {\r\n                    if (targetDraggable !== _this3) {\r\n                        targetDraggable._getAction(\"onDrop\")(dropEventArgs)\r\n                    }\r\n                    if (!dropEventArgs.cancel) {\r\n                        needRevertPosition = false;\r\n                        (0, _deferred.when)((0, _deferred.fromPromise)(targetDraggable.dragEnd(dragEndEventArgs))).always(d.resolve);\r\n                        return\r\n                    }\r\n                }\r\n                d.resolve()\r\n            }).fail(d.resolve);\r\n            d.done(function() {\r\n                if (needRevertPosition) {\r\n                    _this3._revertItemToInitialPosition()\r\n                }\r\n                _this3.reset();\r\n                targetDraggable.reset();\r\n                _this3._stopAnimator();\r\n                _this3._horizontalScrollHelper.reset();\r\n                _this3._verticalScrollHelper.reset();\r\n                _this3._resetDragElement();\r\n                _this3._resetSourceElement();\r\n                _this3._resetTargetDraggable();\r\n                _this3._resetSourceDraggable()\r\n            })\r\n        }\r\n    },\r\n    _isTargetOverAnotherDraggable: function(e) {\r\n        var _this4 = this;\r\n        var sourceDraggable = this._getSourceDraggable();\r\n        if (this === sourceDraggable) {\r\n            return false\r\n        }\r\n        var $dragElement = sourceDraggable._$dragElement;\r\n        var $sourceDraggableElement = sourceDraggable.$element();\r\n        var $targetDraggableElement = this.$element();\r\n        var mousePosition = getMousePosition(e);\r\n        var elements = this.getElementsFromPoint(mousePosition, e.target);\r\n        var firstWidgetElement = elements.filter(function(element) {\r\n            var $element = (0, _renderer.default)(element);\r\n            if ($element.hasClass(_this4._addWidgetPrefix())) {\r\n                return !$element.closest($dragElement).length\r\n            }\r\n        })[0];\r\n        var $sourceElement = this._getSourceElement();\r\n        var isTargetOverItself = firstWidgetElement === $sourceDraggableElement.get(0);\r\n        var isTargetOverNestedDraggable = (0, _renderer.default)(firstWidgetElement).closest($sourceElement).length;\r\n        return !firstWidgetElement || firstWidgetElement === $targetDraggableElement.get(0) && !isTargetOverItself && !isTargetOverNestedDraggable\r\n    },\r\n    _dragEnterHandler: function(e) {\r\n        this._fireDragEnterEvent(e);\r\n        if (this._isTargetOverAnotherDraggable(e)) {\r\n            this._setTargetDraggable()\r\n        }\r\n        var sourceDraggable = this._getSourceDraggable();\r\n        sourceDraggable.dragEnter(e)\r\n    },\r\n    _dragLeaveHandler: function(e) {\r\n        this._fireDragLeaveEvent(e);\r\n        this._resetTargetDraggable();\r\n        if (this !== this._getSourceDraggable()) {\r\n            this.reset()\r\n        }\r\n        var sourceDraggable = this._getSourceDraggable();\r\n        sourceDraggable.dragLeave(e)\r\n    },\r\n    _getAction: function(name) {\r\n        return this[\"_\" + name + \"Action\"] || this._createActionByOption(name)\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return ANONYMOUS_TEMPLATE_NAME\r\n    },\r\n    _initTemplates: function() {\r\n        if (!this.option(\"contentTemplate\")) {\r\n            return\r\n        }\r\n        this._templateManager.addDefaultTemplates({\r\n            content: new _empty_template.EmptyTemplate\r\n        });\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this.$element().addClass(this._addWidgetPrefix());\r\n        var transclude = this._templateManager.anonymousTemplateName === this.option(\"contentTemplate\");\r\n        var template = this._getTemplateByOption(\"contentTemplate\");\r\n        if (template) {\r\n            (0, _renderer.default)(template.render({\r\n                container: this.element(),\r\n                transclude: transclude\r\n            }))\r\n        }\r\n    },\r\n    _optionChanged: function(args) {\r\n        var name = args.name;\r\n        switch (name) {\r\n            case \"onDragStart\":\r\n            case \"onDragMove\":\r\n            case \"onDragEnd\":\r\n            case \"onDrop\":\r\n            case \"onDragEnter\":\r\n            case \"onDragLeave\":\r\n                this[\"_\" + name + \"Action\"] = this._createActionByOption(name);\r\n                break;\r\n            case \"dragTemplate\":\r\n            case \"contentTemplate\":\r\n            case \"container\":\r\n            case \"clone\":\r\n                break;\r\n            case \"allowMoveByClick\":\r\n            case \"dragDirection\":\r\n            case \"disabled\":\r\n            case \"boundary\":\r\n            case \"filter\":\r\n            case \"immediate\":\r\n                this._resetDragElement();\r\n                this._detachEventHandlers();\r\n                this._attachEventHandlers();\r\n                break;\r\n            case \"autoScroll\":\r\n                this._verticalScrollHelper.reset();\r\n                this._horizontalScrollHelper.reset();\r\n                break;\r\n            case \"scrollSensitivity\":\r\n            case \"scrollSpeed\":\r\n            case \"boundOffset\":\r\n            case \"handle\":\r\n            case \"group\":\r\n            case \"data\":\r\n            case \"itemData\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _getTargetDraggable: function() {\r\n        return targetDraggable || this\r\n    },\r\n    _getSourceDraggable: function() {\r\n        return sourceDraggable || this\r\n    },\r\n    _setTargetDraggable: function() {\r\n        var currentGroup = this.option(\"group\");\r\n        var sourceDraggable = this._getSourceDraggable();\r\n        if (currentGroup && currentGroup === sourceDraggable.option(\"group\")) {\r\n            targetDraggable = this\r\n        }\r\n    },\r\n    _setSourceDraggable: function() {\r\n        sourceDraggable = this\r\n    },\r\n    _resetSourceDraggable: function() {\r\n        sourceDraggable = null\r\n    },\r\n    _resetTargetDraggable: function() {\r\n        targetDraggable = null\r\n    },\r\n    _dispose: function() {\r\n        this.callBase();\r\n        this._detachEventHandlers();\r\n        this._resetDragElement();\r\n        this._resetTargetDraggable();\r\n        this._resetSourceDraggable();\r\n        this._$sourceElement = null;\r\n        this._stopAnimator()\r\n    },\r\n    _fireDragEnterEvent: function(sourceEvent) {\r\n        var args = this._getEventArgs(sourceEvent);\r\n        this._getAction(\"onDragEnter\")(args)\r\n    },\r\n    _fireDragLeaveEvent: function(sourceEvent) {\r\n        var args = this._getEventArgs(sourceEvent);\r\n        this._getAction(\"onDragLeave\")(args)\r\n    }\r\n});\r\n(0, _component_registrator.default)(DRAGGABLE, Draggable);\r\nvar _default = Draggable;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}