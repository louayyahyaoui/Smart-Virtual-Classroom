{"ast":null,"code":"/**\r\n * DevExtreme (ui/calendar/ui.calendar.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _guid = _interopRequireDefault(require(\"../../core/guid\"));\n\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _math = require(\"../../core/utils/math\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _button = _interopRequireDefault(require(\"../button\"));\n\nvar _editor = _interopRequireDefault(require(\"../editor/editor\"));\n\nvar _swipeable = _interopRequireDefault(require(\"../../events/gesture/swipeable\"));\n\nvar _uiCalendar = _interopRequireDefault(require(\"./ui.calendar.navigator\"));\n\nvar _uiCalendar2 = _interopRequireDefault(require(\"./ui.calendar.views\"));\n\nvar _translator = require(\"../../animation/translator\");\n\nvar _browser = _interopRequireDefault(require(\"../../core/utils/browser\"));\n\nvar _date2 = _interopRequireDefault(require(\"../../core/utils/date\"));\n\nvar _date_serialization = _interopRequireDefault(require(\"../../core/utils/date_serialization\"));\n\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\n\nvar _fx = _interopRequireDefault(require(\"../../animation/fx\"));\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\n\nvar _function_template = require(\"../../core/templates/function_template\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar CALENDAR_CLASS = \"dx-calendar\";\nvar CALENDAR_BODY_CLASS = \"dx-calendar-body\";\nvar CALENDAR_CELL_CLASS = \"dx-calendar-cell\";\nvar CALENDAR_FOOTER_CLASS = \"dx-calendar-footer\";\nvar CALENDAR_TODAY_BUTTON_CLASS = \"dx-calendar-today-button\";\nvar CALENDAR_HAS_FOOTER_CLASS = \"dx-calendar-with-footer\";\nvar CALENDAR_VIEWS_WRAPPER_CLASS = \"dx-calendar-views-wrapper\";\nvar CALENDAR_VIEW_CLASS = \"dx-calendar-view\";\nvar FOCUSED_STATE_CLASS = \"dx-state-focused\";\nvar ANIMATION_DURATION_SHOW_VIEW = 250;\nvar POP_ANIMATION_FROM = .6;\nvar POP_ANIMATION_TO = 1;\nvar CALENDAR_INPUT_STANDARD_PATTERN = \"yyyy-MM-dd\";\nvar CALENDAR_DATE_VALUE_KEY = \"dxDateValueKey\";\nvar LEVEL_COMPARE_MAP = {\n  month: 3,\n  year: 2,\n  decade: 1,\n  century: 0\n};\nvar ZOOM_LEVEL = {\n  MONTH: \"month\",\n  YEAR: \"year\",\n  DECADE: \"decade\",\n  CENTURY: \"century\"\n};\nvar isIE11 = _browser.default.msie && parseInt(_browser.default.version) <= 11;\n\nvar Calendar = _editor.default.inherit({\n  _activeStateUnit: \".\" + CALENDAR_CELL_CLASS,\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      hoverStateEnabled: true,\n      activeStateEnabled: true,\n      currentDate: new Date(),\n      value: null,\n      dateSerializationFormat: void 0,\n      min: new Date(1e3, 0),\n      max: new Date(3e3, 0),\n      firstDayOfWeek: void 0,\n      zoomLevel: ZOOM_LEVEL.MONTH,\n      maxZoomLevel: ZOOM_LEVEL.MONTH,\n      minZoomLevel: ZOOM_LEVEL.CENTURY,\n      showTodayButton: false,\n      cellTemplate: \"cell\",\n      disabledDates: null,\n      onCellClick: null,\n      onContouredChanged: null,\n      hasFocus: function (element) {\n        return element.hasClass(FOCUSED_STATE_CLASS);\n      },\n      _todayDate: function () {\n        return new Date();\n      }\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        return \"desktop\" === _devices.default.real().deviceType && !_devices.default.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }]);\n  },\n  _supportedKeys: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      rightArrow: function (e) {\n        e.preventDefault();\n\n        if (e.ctrlKey) {\n          this._waitRenderView(1);\n        } else {\n          this._moveCurrentDateByOffset(1 * this._getRtlCorrection());\n        }\n      },\n      leftArrow: function (e) {\n        e.preventDefault();\n\n        if (e.ctrlKey) {\n          this._waitRenderView(-1);\n        } else {\n          this._moveCurrentDateByOffset(-1 * this._getRtlCorrection());\n        }\n      },\n      upArrow: function (e) {\n        e.preventDefault();\n\n        if (e.ctrlKey) {\n          this._navigateUp();\n        } else {\n          if (_fx.default.isAnimating(this._view.$element())) {\n            return;\n          }\n\n          this._moveCurrentDateByOffset(-1 * this._view.option(\"colCount\"));\n        }\n      },\n      downArrow: function (e) {\n        e.preventDefault();\n\n        if (e.ctrlKey) {\n          this._navigateDown();\n        } else {\n          if (_fx.default.isAnimating(this._view.$element())) {\n            return;\n          }\n\n          this._moveCurrentDateByOffset(1 * this._view.option(\"colCount\"));\n        }\n      },\n      home: function (e) {\n        e.preventDefault();\n        var zoomLevel = this.option(\"zoomLevel\");\n        var currentDate = this.option(\"currentDate\");\n\n        var min = this._dateOption(\"min\");\n\n        if (this._view.isDateDisabled(currentDate)) {\n          return;\n        }\n\n        var date = _date2.default.sameView(zoomLevel, currentDate, min) ? min : _date2.default.getViewFirstCellDate(zoomLevel, currentDate);\n\n        this._moveToClosestAvailableDate(date);\n      },\n      end: function (e) {\n        e.preventDefault();\n        var zoomLevel = this.option(\"zoomLevel\");\n        var currentDate = this.option(\"currentDate\");\n\n        var max = this._dateOption(\"max\");\n\n        if (this._view.isDateDisabled(currentDate)) {\n          return;\n        }\n\n        var date = _date2.default.sameView(zoomLevel, currentDate, max) ? max : _date2.default.getViewLastCellDate(zoomLevel, currentDate);\n\n        this._moveToClosestAvailableDate(date);\n      },\n      pageUp: function (e) {\n        e.preventDefault();\n\n        this._waitRenderView(-1 * this._getRtlCorrection());\n      },\n      pageDown: function (e) {\n        e.preventDefault();\n\n        this._waitRenderView(1 * this._getRtlCorrection());\n      },\n      tab: _common.noop,\n      enter: function (e) {\n        if (!this._isMaxZoomLevel()) {\n          this._navigateDown();\n        } else {\n          if (!this._view.isDateDisabled(this.option(\"currentDate\"))) {\n            var value = this._updateTimeComponent(this.option(\"currentDate\"));\n\n            this._dateValue(value, e);\n          }\n        }\n      }\n    });\n  },\n  _getSerializationFormat: function (optionName) {\n    var value = this.option(optionName || \"value\");\n\n    if (this.option(\"dateSerializationFormat\")) {\n      return this.option(\"dateSerializationFormat\");\n    }\n\n    if ((0, _type.isNumeric)(value)) {\n      return \"number\";\n    }\n\n    if (!(0, _type.isString)(value)) {\n      return;\n    }\n\n    return _date_serialization.default.getDateSerializationFormat(value);\n  },\n  _convertToDate: function (value, optionName) {\n    return _date_serialization.default.deserializeDate(value);\n  },\n  _dateValue: function (value, event) {\n    if (event) {\n      if (\"keydown\" === event.type) {\n        var cellElement = this._view._getContouredCell().get(0);\n\n        event.target = cellElement;\n      }\n\n      this._saveValueChangeEvent(event);\n    }\n\n    this._dateOption(\"value\", value);\n  },\n  _dateOption: function (optionName, optionValue) {\n    if (1 === arguments.length) {\n      return this._convertToDate(this.option(optionName), optionName);\n    }\n\n    var serializationFormat = this._getSerializationFormat(optionName);\n\n    this.option(optionName, _date_serialization.default.serializeDate(optionValue, serializationFormat));\n  },\n  _shiftDate: function (zoomLevel, date, offset, reverse) {\n    switch (zoomLevel) {\n      case ZOOM_LEVEL.MONTH:\n        date.setDate(date.getDate() + offset * reverse);\n        break;\n\n      case ZOOM_LEVEL.YEAR:\n        date.setMonth(date.getMonth() + offset * reverse);\n        break;\n\n      case ZOOM_LEVEL.DECADE:\n        date.setFullYear(date.getFullYear() + offset * reverse);\n        break;\n\n      case ZOOM_LEVEL.CENTURY:\n        date.setFullYear(date.getFullYear() + 10 * offset * reverse);\n    }\n  },\n  _moveCurrentDateByOffset: function (offset) {\n    var baseDate = this.option(\"currentDate\");\n    var currentDate = new Date(baseDate);\n    var zoomLevel = this.option(\"zoomLevel\");\n\n    this._shiftDate(zoomLevel, currentDate, offset, 1);\n\n    var maxDate = this._getMaxDate();\n\n    var minDate = this._getMinDate();\n\n    var isDateForwardInNeighborView = this._areDatesInNeighborView(zoomLevel, currentDate, baseDate);\n\n    var isDateForwardInRange = (0, _math.inRange)(currentDate, minDate, maxDate) && isDateForwardInNeighborView;\n    var dateForward = new Date(currentDate);\n\n    while (isDateForwardInRange) {\n      if (isDateForwardInRange && !this._view.isDateDisabled(dateForward)) {\n        currentDate = dateForward;\n        break;\n      }\n\n      this._shiftDate(zoomLevel, dateForward, offset, 1);\n\n      isDateForwardInNeighborView = this._areDatesInNeighborView(zoomLevel, dateForward, baseDate);\n      isDateForwardInRange = (0, _math.inRange)(dateForward, minDate, maxDate) && isDateForwardInNeighborView;\n    }\n\n    if (this._view.isDateDisabled(baseDate) || this._view.isDateDisabled(currentDate)) {\n      this._waitRenderView(offset > 0 ? 1 : -1);\n    } else {\n      this.option(\"currentDate\", currentDate);\n    }\n  },\n  _areDatesInSameView: function (zoomLevel, date1, date2) {\n    switch (zoomLevel) {\n      case ZOOM_LEVEL.MONTH:\n        return date1.getMonth() === date2.getMonth();\n\n      case ZOOM_LEVEL.YEAR:\n        return date1.getYear() === date2.getYear();\n\n      case ZOOM_LEVEL.DECADE:\n        return parseInt(date1.getYear() / 10) === parseInt(date2.getYear() / 10);\n\n      case ZOOM_LEVEL.CENTURY:\n        return parseInt(date1.getYear() / 100) === parseInt(date2.getYear() / 100);\n    }\n  },\n  _areDatesInNeighborView: function (zoomLevel, date1, date2) {\n    var monthMinDistance = function (a, b) {\n      var abs = Math.abs(a - b);\n      return Math.min(abs, 12 - abs);\n    };\n\n    switch (zoomLevel) {\n      case ZOOM_LEVEL.MONTH:\n        return monthMinDistance(date1.getMonth(), date2.getMonth()) <= 1;\n\n      case ZOOM_LEVEL.YEAR:\n        return Math.abs(date1.getYear() - date2.getYear()) <= 1;\n\n      case ZOOM_LEVEL.DECADE:\n        return Math.abs(date1.getYear() - date2.getYear()) <= 10;\n\n      case ZOOM_LEVEL.CENTURY:\n        return Math.abs(date1.getYear() - date2.getYear()) <= 100;\n    }\n  },\n  _moveToClosestAvailableDate: function () {\n    var baseDate = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.option(\"currentDate\");\n\n    var currentDate = _date2.default.createDate(baseDate);\n\n    var zoomLevel = this.option(\"zoomLevel\");\n    var isCurrentDateAvailable = !this._isDateNotAvailable(currentDate);\n    var isDateForwardAvailable = isCurrentDateAvailable;\n    var isDateBackwardAvailable = isCurrentDateAvailable;\n    var isDateForwardInStartView;\n    var isDateBackwardInStartView;\n\n    var dateForward = _date2.default.createDate(currentDate);\n\n    var dateBackward = _date2.default.createDate(currentDate);\n\n    do {\n      if (isDateForwardAvailable) {\n        currentDate = dateForward;\n        break;\n      }\n\n      if (isDateBackwardAvailable) {\n        currentDate = dateBackward;\n        break;\n      }\n\n      this._shiftDate(zoomLevel, dateForward, 1, 1);\n\n      this._shiftDate(zoomLevel, dateBackward, 1, -1);\n\n      isDateForwardInStartView = this._areDatesInSameView(zoomLevel, dateForward, baseDate);\n      isDateBackwardInStartView = this._areDatesInSameView(zoomLevel, dateBackward, baseDate);\n      isDateForwardAvailable = isDateForwardInStartView && !this._isDateNotAvailable(dateForward);\n      isDateBackwardAvailable = isDateBackwardInStartView && !this._isDateNotAvailable(dateBackward);\n    } while (isDateForwardInStartView || isDateBackwardInStartView);\n\n    this.option(\"currentDate\", currentDate);\n  },\n  _isDateNotAvailable: function (date) {\n    var maxDate = this._getMaxDate();\n\n    var minDate = this._getMinDate();\n\n    return !(0, _math.inRange)(date, minDate, maxDate) || this._view.isDateDisabled(date);\n  },\n  _init: function () {\n    this.callBase();\n\n    this._correctZoomLevel();\n\n    this._initCurrentDate();\n\n    this._initActions();\n  },\n  _correctZoomLevel: function () {\n    var minZoomLevel = this.option(\"minZoomLevel\");\n    var maxZoomLevel = this.option(\"maxZoomLevel\");\n    var zoomLevel = this.option(\"zoomLevel\");\n\n    if (LEVEL_COMPARE_MAP[maxZoomLevel] < LEVEL_COMPARE_MAP[minZoomLevel]) {\n      return;\n    }\n\n    if (LEVEL_COMPARE_MAP[zoomLevel] > LEVEL_COMPARE_MAP[maxZoomLevel]) {\n      this.option(\"zoomLevel\", maxZoomLevel);\n    } else {\n      if (LEVEL_COMPARE_MAP[zoomLevel] < LEVEL_COMPARE_MAP[minZoomLevel]) {\n        this.option(\"zoomLevel\", minZoomLevel);\n      }\n    }\n  },\n  _initCurrentDate: function () {\n    var currentDate = this._getNormalizedDate(this._dateOption(\"value\")) || this._getNormalizedDate(this.option(\"currentDate\"));\n\n    this.option(\"currentDate\", currentDate);\n  },\n  _getNormalizedDate: function (date) {\n    date = _date2.default.normalizeDate(date, this._getMinDate(), this._getMaxDate());\n    return (0, _type.isDefined)(date) ? this._getDate(date) : date;\n  },\n  _initActions: function () {\n    this._cellClickAction = this._createActionByOption(\"onCellClick\");\n    this._onContouredChanged = this._createActionByOption(\"onContouredChanged\");\n  },\n  _initTemplates: function () {\n    this._templateManager.addDefaultTemplates({\n      cell: new _function_template.FunctionTemplate(function (options) {\n        var data = options.model;\n        (0, _renderer.default)(options.container).append((0, _renderer.default)(\"<span>\").text(data && data.text || String(data)));\n      })\n    });\n\n    this.callBase();\n  },\n  _updateCurrentDate: function (date) {\n    if (_fx.default.isAnimating(this._$viewsWrapper)) {\n      _fx.default.stop(this._$viewsWrapper, true);\n    }\n\n    var min = this._getMinDate();\n\n    var max = this._getMaxDate();\n\n    if (min > max) {\n      this.option(\"currentDate\", new Date());\n      return;\n    }\n\n    var normalizedDate = this._getNormalizedDate(date);\n\n    if (date.getTime() !== normalizedDate.getTime()) {\n      this.option(\"currentDate\", _date2.default.createDate(normalizedDate));\n      return;\n    }\n\n    var offset = this._getViewsOffset(this._view.option(\"date\"), normalizedDate);\n\n    if (0 !== offset && !this._isMaxZoomLevel() && this._isOtherViewCellClicked) {\n      offset = 0;\n    }\n\n    if (this._view && 0 !== offset && !this._suppressNavigation) {\n      this._navigate(offset, normalizedDate);\n    } else {\n      this._renderNavigator();\n\n      this._setViewContoured(normalizedDate);\n\n      this._updateAriaId(normalizedDate);\n    }\n  },\n  _setViewContoured: function (date) {\n    if (this.option(\"hasFocus\")(this._focusTarget())) {\n      this._view.option(\"contouredDate\", date);\n    }\n  },\n  _getMinDate: function () {\n    if (this.min) {\n      return this.min;\n    }\n\n    this.min = this._dateOption(\"min\") || new Date(1e3, 0);\n    return this.min;\n  },\n  _getMaxDate: function () {\n    if (this.max) {\n      return this.max;\n    }\n\n    this.max = this._dateOption(\"max\") || new Date(3e3, 0);\n    return this.max;\n  },\n  _getViewsOffset: function (startDate, endDate) {\n    var zoomLevel = this.option(\"zoomLevel\");\n\n    if (zoomLevel === ZOOM_LEVEL.MONTH) {\n      return this._getMonthsOffset(startDate, endDate);\n    }\n\n    var zoomCorrection;\n\n    switch (zoomLevel) {\n      case ZOOM_LEVEL.CENTURY:\n        zoomCorrection = 100;\n        break;\n\n      case ZOOM_LEVEL.DECADE:\n        zoomCorrection = 10;\n        break;\n\n      default:\n        zoomCorrection = 1;\n    }\n\n    return parseInt(endDate.getFullYear() / zoomCorrection) - parseInt(startDate.getFullYear() / zoomCorrection);\n  },\n  _getMonthsOffset: function (startDate, endDate) {\n    var yearOffset = endDate.getFullYear() - startDate.getFullYear();\n    var monthOffset = endDate.getMonth() - startDate.getMonth();\n    return 12 * yearOffset + monthOffset;\n  },\n  _waitRenderView: function (offset) {\n    var _this = this;\n\n    if (this._alreadyViewRender) {\n      return;\n    }\n\n    this._alreadyViewRender = true;\n\n    var date = this._getDateByOffset(offset * this._getRtlCorrection());\n\n    this._moveToClosestAvailableDate(date);\n\n    this._waitRenderViewTimeout = setTimeout(function () {\n      _this._alreadyViewRender = false;\n    });\n  },\n  _getRtlCorrection: function () {\n    return this.option(\"rtlEnabled\") ? -1 : 1;\n  },\n  _getDateByOffset: function (offset, date) {\n    var _date;\n\n    date = this._getDate(null !== (_date = date) && void 0 !== _date ? _date : this.option(\"currentDate\"));\n    var currentDay = date.getDate();\n    var difference = _date2.default.getDifferenceInMonth(this.option(\"zoomLevel\")) * offset;\n    date.setDate(1);\n    date.setMonth(date.getMonth() + difference);\n\n    var lastDay = _date2.default.getLastMonthDate(date).getDate();\n\n    date.setDate(currentDay > lastDay ? lastDay : currentDay);\n    return date;\n  },\n  _focusTarget: function () {\n    return this.$element();\n  },\n  _initMarkup: function () {\n    this._renderSubmitElement();\n\n    this.callBase();\n    var $element = this.$element();\n    $element.addClass(CALENDAR_CLASS);\n\n    this._renderBody();\n\n    $element.append(this.$body);\n\n    this._renderViews();\n\n    this._renderNavigator();\n\n    $element.append(this._navigator.$element());\n\n    this._renderSwipeable();\n\n    this._renderFooter();\n\n    this._updateAriaSelected();\n\n    this._updateAriaId();\n\n    this._moveToClosestAvailableDate();\n  },\n  _render: function () {\n    this.callBase();\n\n    this._setViewContoured(this.option(\"currentDate\"));\n  },\n  _renderBody: function () {\n    if (!this._$viewsWrapper) {\n      this.$body = (0, _renderer.default)(\"<div>\").addClass(CALENDAR_BODY_CLASS);\n      this._$viewsWrapper = (0, _renderer.default)(\"<div>\").addClass(CALENDAR_VIEWS_WRAPPER_CLASS);\n      this.$body.append(this._$viewsWrapper);\n    }\n  },\n  _getKeyboardListeners: function () {\n    return this.callBase().concat([this._view]);\n  },\n  _renderViews: function () {\n    this.$element().addClass(CALENDAR_VIEW_CLASS + \"-\" + this.option(\"zoomLevel\"));\n    var currentDate = this.option(\"currentDate\");\n    this._view = this._renderSpecificView(currentDate);\n\n    if ((0, _window.hasWindow)()) {\n      var beforeDate = this._getDateByOffset(-1, currentDate);\n\n      this._beforeView = this._isViewAvailable(beforeDate) ? this._renderSpecificView(beforeDate) : null;\n\n      var afterDate = this._getDateByOffset(1, currentDate);\n\n      afterDate.setDate(1);\n      this._afterView = this._isViewAvailable(afterDate) ? this._renderSpecificView(afterDate) : null;\n    }\n\n    this._translateViews();\n  },\n  _renderSpecificView: function (date) {\n    var specificView = _uiCalendar2.default[this.option(\"zoomLevel\")];\n\n    var $view = (0, _renderer.default)(\"<div>\").appendTo(this._$viewsWrapper);\n\n    var config = this._viewConfig(date);\n\n    return this._createComponent($view, specificView, config);\n  },\n  _viewConfig: function (date) {\n    var disabledDates = this.option(\"disabledDates\");\n    disabledDates = (0, _type.isFunction)(disabledDates) ? this._injectComponent(disabledDates.bind(this)) : disabledDates;\n    return {\n      date: date,\n      min: this._getMinDate(),\n      max: this._getMaxDate(),\n      firstDayOfWeek: this.option(\"firstDayOfWeek\"),\n      value: this._dateOption(\"value\"),\n      tabIndex: void 0,\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      hoverStateEnabled: this.option(\"hoverStateEnabled\"),\n      disabledDates: disabledDates,\n      onCellClick: this._cellClickHandler.bind(this),\n      cellTemplate: this._getTemplateByOption(\"cellTemplate\"),\n      allowValueSelection: this._isMaxZoomLevel(),\n      _todayDate: this.option(\"_todayDate\")\n    };\n  },\n  _injectComponent: function (func) {\n    var that = this;\n    return function (params) {\n      (0, _extend.extend)(params, {\n        component: that\n      });\n      return func(params);\n    };\n  },\n  _isViewAvailable: function (date) {\n    var zoomLevel = this.option(\"zoomLevel\");\n\n    var min = _date2.default.getViewMinBoundaryDate(zoomLevel, this._getMinDate());\n\n    var max = _date2.default.getViewMaxBoundaryDate(zoomLevel, this._getMaxDate());\n\n    return _date2.default.dateInRange(date, min, max);\n  },\n  _translateViews: function () {\n    (0, _translator.move)(this._view.$element(), {\n      left: 0,\n      top: 0\n    });\n    this._beforeView && (0, _translator.move)(this._beforeView.$element(), {\n      left: this._getViewPosition(-1),\n      top: 0\n    });\n    this._afterView && (0, _translator.move)(this._afterView.$element(), {\n      left: this._getViewPosition(1),\n      top: 0\n    });\n  },\n  _getViewPosition: function (coefficient) {\n    var rtlCorrection = this.option(\"rtlEnabled\") && !_browser.default.msie ? -1 : 1;\n    return 100 * coefficient * rtlCorrection + \"%\";\n  },\n  _cellClickHandler: function (e) {\n    var zoomLevel = this.option(\"zoomLevel\");\n\n    var nextView = _date2.default.getViewDown(zoomLevel);\n\n    var isMaxZoomLevel = this._isMaxZoomLevel();\n\n    if (nextView && !isMaxZoomLevel) {\n      this._navigateDown(e.event.currentTarget);\n    } else {\n      var newValue = this._updateTimeComponent(e.value);\n\n      this._dateValue(newValue, e.event);\n\n      this._cellClickAction(e);\n    }\n  },\n  _updateTimeComponent: function (date) {\n    var result = _date2.default.createDate(date);\n\n    var currentValue = this._dateOption(\"value\");\n\n    if (currentValue) {\n      result.setHours(currentValue.getHours());\n      result.setMinutes(currentValue.getMinutes());\n      result.setSeconds(currentValue.getSeconds());\n      result.setMilliseconds(currentValue.getMilliseconds());\n    }\n\n    return result;\n  },\n  _isMaxZoomLevel: function () {\n    return this.option(\"zoomLevel\") === this.option(\"maxZoomLevel\");\n  },\n  _navigateDown: function (cell) {\n    var zoomLevel = this.option(\"zoomLevel\");\n\n    if (this._isMaxZoomLevel()) {\n      return;\n    }\n\n    var nextView = _date2.default.getViewDown(zoomLevel);\n\n    if (!nextView) {\n      return;\n    }\n\n    var newCurrentDate = this._view.option(\"contouredDate\") || this._view.option(\"date\");\n\n    if (cell) {\n      newCurrentDate = (0, _renderer.default)(cell).data(CALENDAR_DATE_VALUE_KEY);\n    }\n\n    this._isOtherViewCellClicked = true;\n    this.option(\"currentDate\", newCurrentDate);\n    this.option(\"zoomLevel\", nextView);\n    this._isOtherViewCellClicked = false;\n\n    this._renderNavigator();\n\n    this._animateShowView();\n\n    this._moveToClosestAvailableDate();\n\n    this._setViewContoured(this._getNormalizedDate(this.option(\"currentDate\")));\n  },\n  _renderNavigator: function () {\n    if (!this._navigator) {\n      this._navigator = new _uiCalendar.default((0, _renderer.default)(\"<div>\"), this._navigatorConfig());\n    }\n\n    this._navigator.option(\"text\", this._view.getNavigatorCaption());\n\n    this._updateButtonsVisibility();\n  },\n  _navigatorConfig: function () {\n    return {\n      text: this._view.getNavigatorCaption(),\n      onClick: this._navigatorClickHandler.bind(this),\n      onCaptionClick: this._navigateUp.bind(this),\n      rtlEnabled: this.option(\"rtlEnabled\")\n    };\n  },\n  _navigatorClickHandler: function (e) {\n    var currentDate = this._getDateByOffset(e.direction, this.option(\"currentDate\"));\n\n    this._moveToClosestAvailableDate(currentDate);\n  },\n  _navigateUp: function () {\n    var zoomLevel = this.option(\"zoomLevel\");\n\n    var nextView = _date2.default.getViewUp(zoomLevel);\n\n    if (!nextView || this._isMinZoomLevel(zoomLevel)) {\n      return;\n    }\n\n    this.option(\"zoomLevel\", nextView);\n\n    this._renderNavigator();\n\n    this._animateShowView();\n\n    this._moveToClosestAvailableDate();\n\n    this._setViewContoured(this._getNormalizedDate(this.option(\"currentDate\")));\n  },\n  _isMinZoomLevel: function (zoomLevel) {\n    var min = this._getMinDate();\n\n    var max = this._getMaxDate();\n\n    return _date2.default.sameView(zoomLevel, min, max) || this.option(\"minZoomLevel\") === zoomLevel;\n  },\n  _updateButtonsVisibility: function () {\n    this._navigator.toggleButton(\"next\", !(0, _type.isDefined)(this._getRequiredView(\"next\")));\n\n    this._navigator.toggleButton(\"prev\", !(0, _type.isDefined)(this._getRequiredView(\"prev\")));\n  },\n  _renderSwipeable: function () {\n    if (!this._swipeable) {\n      this._swipeable = this._createComponent(this.$element(), _swipeable.default, {\n        onStart: this._swipeStartHandler.bind(this),\n        onUpdated: this._swipeUpdateHandler.bind(this),\n        onEnd: this._swipeEndHandler.bind(this),\n        itemSizeFunc: this._viewWidth.bind(this)\n      });\n    }\n  },\n  _swipeStartHandler: function (e) {\n    _fx.default.stop(this._$viewsWrapper, true);\n\n    e.event.maxLeftOffset = this._getRequiredView(\"next\") ? 1 : 0;\n    e.event.maxRightOffset = this._getRequiredView(\"prev\") ? 1 : 0;\n  },\n  _getRequiredView: function (name) {\n    var view;\n    var isRtl = this.option(\"rtlEnabled\");\n\n    if (\"next\" === name) {\n      view = isRtl ? this._beforeView : this._afterView;\n    } else {\n      if (\"prev\" === name) {\n        view = isRtl ? this._afterView : this._beforeView;\n      }\n    }\n\n    return view;\n  },\n  _swipeUpdateHandler: function (e) {\n    var offset = e.event.offset;\n    (0, _translator.move)(this._$viewsWrapper, {\n      left: offset * this._viewWidth(),\n      top: 0\n    });\n\n    this._updateNavigatorCaption(offset);\n  },\n  _swipeEndHandler: function (e) {\n    var targetOffset = e.event.targetOffset;\n    var moveOffset = !targetOffset ? 0 : targetOffset / Math.abs(targetOffset);\n\n    if (0 === moveOffset) {\n      this._animateWrapper(0, ANIMATION_DURATION_SHOW_VIEW);\n\n      return;\n    }\n\n    var date = this._getDateByOffset(-moveOffset * this._getRtlCorrection());\n\n    if (this._isDateInInvalidRange(date)) {\n      if (moveOffset >= 0) {\n        date = new Date(this._getMinDate());\n      } else {\n        date = new Date(this._getMaxDate());\n      }\n    }\n\n    this.option(\"currentDate\", date);\n  },\n  _viewWidth: function () {\n    if (!this._viewWidthValue) {\n      this._viewWidthValue = this.$element().width();\n    }\n\n    return this._viewWidthValue;\n  },\n  _updateNavigatorCaption: function (offset) {\n    offset *= this._getRtlCorrection();\n    var view = this._view;\n\n    if (offset > .5 && this._beforeView) {\n      view = this._beforeView;\n    } else {\n      if (offset < -.5 && this._afterView) {\n        view = this._afterView;\n      }\n    }\n\n    this._navigator.option(\"text\", view.getNavigatorCaption());\n  },\n  _isDateInInvalidRange: function (date) {\n    if (this._view.isBoundary(date)) {\n      return;\n    }\n\n    var min = this._getMinDate();\n\n    var max = this._getMaxDate();\n\n    var normalizedDate = _date2.default.normalizeDate(date, min, max);\n\n    return normalizedDate === min || normalizedDate === max;\n  },\n  _renderFooter: function () {\n    var showTodayButton = this.option(\"showTodayButton\");\n\n    if (showTodayButton) {\n      var $todayButton = this._createComponent((0, _renderer.default)(\"<a>\"), _button.default, {\n        focusStateEnabled: false,\n        text: _message.default.format(\"dxCalendar-todayButtonText\"),\n        onClick: function (args) {\n          this._toTodayView(args);\n        }.bind(this),\n        integrationOptions: {}\n      }).$element().addClass(CALENDAR_TODAY_BUTTON_CLASS);\n\n      this._$footer = (0, _renderer.default)(\"<div>\").addClass(CALENDAR_FOOTER_CLASS).append($todayButton);\n      this.$element().append(this._$footer);\n    }\n\n    this.$element().toggleClass(CALENDAR_HAS_FOOTER_CLASS, showTodayButton);\n  },\n  _renderSubmitElement: function () {\n    this._$submitElement = (0, _renderer.default)(\"<input>\").attr(\"type\", \"hidden\").appendTo(this.$element());\n\n    this._setSubmitValue(this.option(\"value\"));\n  },\n  _setSubmitValue: function (value) {\n    var dateValue = this._convertToDate(value);\n\n    this._getSubmitElement().val(_date_serialization.default.serializeDate(dateValue, CALENDAR_INPUT_STANDARD_PATTERN));\n  },\n  _getSubmitElement: function () {\n    return this._$submitElement;\n  },\n  _animateShowView: function () {\n    _fx.default.stop(this._view.$element(), true);\n\n    return this._popAnimationView(this._view, POP_ANIMATION_FROM, POP_ANIMATION_TO, ANIMATION_DURATION_SHOW_VIEW).promise();\n  },\n  _popAnimationView: function (view, from, to, duration) {\n    return _fx.default.animate(view.$element(), {\n      type: \"pop\",\n      from: {\n        scale: from,\n        opacity: from\n      },\n      to: {\n        scale: to,\n        opacity: to\n      },\n      duration: duration\n    });\n  },\n  _navigate: function (offset, value) {\n    if (0 !== offset && 1 !== Math.abs(offset) && this._isViewAvailable(value)) {\n      var newView = this._renderSpecificView(value);\n\n      if (offset > 0) {\n        this._afterView && this._afterView.$element().remove();\n        this._afterView = newView;\n      } else {\n        this._beforeView && this._beforeView.$element().remove();\n        this._beforeView = newView;\n      }\n\n      this._translateViews();\n    }\n\n    var rtlCorrection = this._getRtlCorrection();\n\n    var offsetSign = offset > 0 ? 1 : offset < 0 ? -1 : 0;\n\n    var endPosition = -rtlCorrection * offsetSign * this._viewWidth();\n\n    var viewsWrapperPosition = this._$viewsWrapper.position().left;\n\n    if (viewsWrapperPosition !== endPosition) {\n      if (this._preventViewChangeAnimation) {\n        this._wrapperAnimationEndHandler(offset, value);\n      } else {\n        this._animateWrapper(endPosition, ANIMATION_DURATION_SHOW_VIEW).done(this._wrapperAnimationEndHandler.bind(this, offset, value));\n      }\n    }\n  },\n  _animateWrapper: function (to, duration) {\n    return _fx.default.animate(this._$viewsWrapper, {\n      type: \"slide\",\n      from: {\n        left: this._$viewsWrapper.position().left\n      },\n      to: {\n        left: to\n      },\n      duration: duration\n    });\n  },\n  _getDate: function (value) {\n    var result = _date2.default.createDate(value);\n\n    if (isIE11 && (0, _type.isDate)(value)) {\n      result.setMilliseconds(0);\n    }\n\n    return result;\n  },\n  _toTodayView: function (args) {\n    this._saveValueChangeEvent(args.event);\n\n    var today = new Date();\n\n    if (this._isMaxZoomLevel()) {\n      this._dateOption(\"value\", today);\n\n      return;\n    }\n\n    this._preventViewChangeAnimation = true;\n    this.option(\"zoomLevel\", this.option(\"maxZoomLevel\"));\n\n    this._dateOption(\"value\", today);\n\n    this._animateShowView();\n\n    this._preventViewChangeAnimation = false;\n  },\n  _wrapperAnimationEndHandler: function (offset, newDate) {\n    this._rearrangeViews(offset);\n\n    this._translateViews();\n\n    this._resetLocation();\n\n    this._renderNavigator();\n\n    this._setViewContoured(newDate);\n\n    this._updateAriaId(newDate);\n  },\n  _rearrangeViews: function (offset) {\n    if (0 === offset) {\n      return;\n    }\n\n    var viewOffset;\n    var viewToCreateKey;\n    var viewToRemoveKey;\n\n    if (offset < 0) {\n      viewOffset = 1;\n      viewToCreateKey = \"_beforeView\";\n      viewToRemoveKey = \"_afterView\";\n    } else {\n      viewOffset = -1;\n      viewToCreateKey = \"_afterView\";\n      viewToRemoveKey = \"_beforeView\";\n    }\n\n    if (!this[viewToCreateKey]) {\n      return;\n    }\n\n    var destinationDate = this[viewToCreateKey].option(\"date\");\n\n    if (this[viewToRemoveKey]) {\n      this[viewToRemoveKey].$element().remove();\n    }\n\n    if (offset === viewOffset) {\n      this[viewToRemoveKey] = this._view;\n    } else {\n      this[viewToRemoveKey] = this._renderSpecificView(this._getDateByOffset(viewOffset, destinationDate));\n\n      this._view.$element().remove();\n    }\n\n    this._view = this[viewToCreateKey];\n\n    var dateByOffset = this._getDateByOffset(-viewOffset, destinationDate);\n\n    this[viewToCreateKey] = this._isViewAvailable(dateByOffset) ? this._renderSpecificView(dateByOffset) : null;\n  },\n  _resetLocation: function () {\n    (0, _translator.move)(this._$viewsWrapper, {\n      left: 0,\n      top: 0\n    });\n  },\n  _clean: function () {\n    this.callBase();\n\n    this._clearViewWidthCache();\n\n    delete this._$viewsWrapper;\n    delete this._navigator;\n    delete this._$footer;\n  },\n  _clearViewWidthCache: function () {\n    delete this._viewWidthValue;\n  },\n  _disposeViews: function () {\n    this._view.$element().remove();\n\n    this._beforeView && this._beforeView.$element().remove();\n    this._afterView && this._afterView.$element().remove();\n    delete this._view;\n    delete this._beforeView;\n    delete this._afterView;\n  },\n  _dispose: function () {\n    clearTimeout(this._waitRenderViewTimeout);\n    this.callBase();\n  },\n  _refreshViews: function () {\n    this._disposeViews();\n\n    this._renderViews();\n  },\n  _visibilityChanged: function () {\n    this._translateViews();\n  },\n  _focusInHandler: function () {\n    this.callBase.apply(this, arguments);\n\n    this._view.option(\"contouredDate\", this.option(\"currentDate\"));\n  },\n  _focusOutHandler: function () {\n    this.callBase.apply(this, arguments);\n\n    this._view.option(\"contouredDate\", null);\n  },\n  _updateViewsValue: function (value) {\n    var newValue = value ? new Date(value) : null;\n\n    this._view.option(\"value\", newValue);\n\n    this._beforeView && this._beforeView.option(\"value\", newValue);\n    this._afterView && this._afterView.option(\"value\", newValue);\n  },\n  _updateAriaSelected: function (value, previousValue) {\n    var _value;\n\n    value = null !== (_value = value) && void 0 !== _value ? _value : this._dateOption(\"value\");\n\n    var $prevSelectedCell = this._view._getCellByDate(previousValue);\n\n    var $selectedCell = this._view._getCellByDate(value);\n\n    this.setAria(\"selected\", void 0, $prevSelectedCell);\n    this.setAria(\"selected\", true, $selectedCell);\n\n    if (value && this.option(\"currentDate\").getTime() === value.getTime()) {\n      this._updateAriaId(value);\n    }\n  },\n  _updateAriaId: function (value) {\n    var _value2;\n\n    value = null !== (_value2 = value) && void 0 !== _value2 ? _value2 : this.option(\"currentDate\");\n    var ariaId = \"dx-\" + new _guid.default();\n\n    var $newCell = this._view._getCellByDate(value);\n\n    this.setAria(\"id\", ariaId, $newCell);\n    this.setAria(\"activedescendant\", ariaId);\n\n    this._onContouredChanged(ariaId);\n  },\n  _suppressingNavigation: function (callback, args) {\n    this._suppressNavigation = true;\n    callback.apply(this, args);\n    delete this._suppressNavigation;\n  },\n  _optionChanged: function (args) {\n    var value = args.value;\n    var previousValue = args.previousValue;\n\n    switch (args.name) {\n      case \"width\":\n        this.callBase(args);\n\n        this._clearViewWidthCache();\n\n        break;\n\n      case \"min\":\n      case \"max\":\n        this.min = void 0;\n        this.max = void 0;\n\n        this._suppressingNavigation(this._updateCurrentDate, [this.option(\"currentDate\")]);\n\n        this._refreshViews();\n\n        this._renderNavigator();\n\n        break;\n\n      case \"firstDayOfWeek\":\n        this._refreshViews();\n\n        this._updateButtonsVisibility();\n\n        break;\n\n      case \"currentDate\":\n        this.setAria(\"id\", void 0, this._view._getCellByDate(previousValue));\n\n        this._updateCurrentDate(value);\n\n        break;\n\n      case \"zoomLevel\":\n        this.$element().removeClass(CALENDAR_VIEW_CLASS + \"-\" + previousValue);\n\n        this._correctZoomLevel();\n\n        this._refreshViews();\n\n        this._renderNavigator();\n\n        this._updateAriaId();\n\n        break;\n\n      case \"minZoomLevel\":\n      case \"maxZoomLevel\":\n        this._correctZoomLevel();\n\n        this._updateButtonsVisibility();\n\n        break;\n\n      case \"value\":\n        value = this._convertToDate(value);\n        previousValue = this._convertToDate(previousValue);\n\n        this._updateAriaSelected(value, previousValue);\n\n        this.option(\"currentDate\", (0, _type.isDefined)(value) ? _date2.default.createDate(value) : new Date());\n\n        this._updateViewsValue(value);\n\n        this._setSubmitValue(value);\n\n        this.callBase(args);\n        break;\n\n      case \"onCellClick\":\n        this._view.option(\"onCellClick\", value);\n\n        break;\n\n      case \"onContouredChanged\":\n        this._onContouredChanged = this._createActionByOption(\"onContouredChanged\");\n        break;\n\n      case \"disabledDates\":\n      case \"dateSerializationFormat\":\n      case \"cellTemplate\":\n      case \"showTodayButton\":\n        this._invalidate();\n\n        break;\n\n      case \"hasFocus\":\n        break;\n\n      case \"_todayDate\":\n        this._refreshViews();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n});\n\n(0, _component_registrator.default)(\"dxCalendar\", Calendar);\nvar _default = Calendar;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/ui/calendar/ui.calendar.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_guid","_component_registrator","_common","_type","_math","_extend","_button","_editor","_swipeable","_uiCalendar","_uiCalendar2","_translator","_browser","_date2","_date_serialization","_devices","_fx","_window","_message","_function_template","obj","__esModule","CALENDAR_CLASS","CALENDAR_BODY_CLASS","CALENDAR_CELL_CLASS","CALENDAR_FOOTER_CLASS","CALENDAR_TODAY_BUTTON_CLASS","CALENDAR_HAS_FOOTER_CLASS","CALENDAR_VIEWS_WRAPPER_CLASS","CALENDAR_VIEW_CLASS","FOCUSED_STATE_CLASS","ANIMATION_DURATION_SHOW_VIEW","POP_ANIMATION_FROM","POP_ANIMATION_TO","CALENDAR_INPUT_STANDARD_PATTERN","CALENDAR_DATE_VALUE_KEY","LEVEL_COMPARE_MAP","month","year","decade","century","ZOOM_LEVEL","MONTH","YEAR","DECADE","CENTURY","isIE11","msie","parseInt","version","Calendar","inherit","_activeStateUnit","_getDefaultOptions","extend","callBase","hoverStateEnabled","activeStateEnabled","currentDate","Date","value","dateSerializationFormat","min","max","firstDayOfWeek","zoomLevel","maxZoomLevel","minZoomLevel","showTodayButton","cellTemplate","disabledDates","onCellClick","onContouredChanged","hasFocus","element","hasClass","_todayDate","_defaultOptionsRules","concat","device","real","deviceType","isSimulator","options","focusStateEnabled","_supportedKeys","rightArrow","e","preventDefault","ctrlKey","_waitRenderView","_moveCurrentDateByOffset","_getRtlCorrection","leftArrow","upArrow","_navigateUp","isAnimating","_view","$element","option","downArrow","_navigateDown","home","_dateOption","isDateDisabled","date","sameView","getViewFirstCellDate","_moveToClosestAvailableDate","end","getViewLastCellDate","pageUp","pageDown","tab","noop","enter","_isMaxZoomLevel","_updateTimeComponent","_dateValue","_getSerializationFormat","optionName","isNumeric","isString","getDateSerializationFormat","_convertToDate","deserializeDate","event","type","cellElement","_getContouredCell","get","target","_saveValueChangeEvent","optionValue","arguments","length","serializationFormat","serializeDate","_shiftDate","offset","reverse","setDate","getDate","setMonth","getMonth","setFullYear","getFullYear","baseDate","maxDate","_getMaxDate","minDate","_getMinDate","isDateForwardInNeighborView","_areDatesInNeighborView","isDateForwardInRange","inRange","dateForward","_areDatesInSameView","date1","date2","getYear","monthMinDistance","a","b","abs","Math","createDate","isCurrentDateAvailable","_isDateNotAvailable","isDateForwardAvailable","isDateBackwardAvailable","isDateForwardInStartView","isDateBackwardInStartView","dateBackward","_init","_correctZoomLevel","_initCurrentDate","_initActions","_getNormalizedDate","normalizeDate","isDefined","_getDate","_cellClickAction","_createActionByOption","_onContouredChanged","_initTemplates","_templateManager","addDefaultTemplates","cell","FunctionTemplate","data","model","container","append","text","String","_updateCurrentDate","_$viewsWrapper","stop","normalizedDate","getTime","_getViewsOffset","_isOtherViewCellClicked","_suppressNavigation","_navigate","_renderNavigator","_setViewContoured","_updateAriaId","_focusTarget","startDate","endDate","_getMonthsOffset","zoomCorrection","yearOffset","monthOffset","_this","_alreadyViewRender","_getDateByOffset","_waitRenderViewTimeout","setTimeout","_date","currentDay","difference","getDifferenceInMonth","lastDay","getLastMonthDate","_initMarkup","_renderSubmitElement","addClass","_renderBody","$body","_renderViews","_navigator","_renderSwipeable","_renderFooter","_updateAriaSelected","_render","_getKeyboardListeners","_renderSpecificView","hasWindow","beforeDate","_beforeView","_isViewAvailable","afterDate","_afterView","_translateViews","specificView","$view","appendTo","config","_viewConfig","_createComponent","isFunction","_injectComponent","bind","tabIndex","_cellClickHandler","_getTemplateByOption","allowValueSelection","func","that","params","component","getViewMinBoundaryDate","getViewMaxBoundaryDate","dateInRange","move","left","top","_getViewPosition","coefficient","rtlCorrection","nextView","getViewDown","isMaxZoomLevel","currentTarget","newValue","result","currentValue","setHours","getHours","setMinutes","getMinutes","setSeconds","getSeconds","setMilliseconds","getMilliseconds","newCurrentDate","_animateShowView","_navigatorConfig","getNavigatorCaption","_updateButtonsVisibility","onClick","_navigatorClickHandler","onCaptionClick","rtlEnabled","direction","getViewUp","_isMinZoomLevel","toggleButton","_getRequiredView","onStart","_swipeStartHandler","onUpdated","_swipeUpdateHandler","onEnd","_swipeEndHandler","itemSizeFunc","_viewWidth","maxLeftOffset","maxRightOffset","name","view","isRtl","_updateNavigatorCaption","targetOffset","moveOffset","_animateWrapper","_isDateInInvalidRange","_viewWidthValue","width","isBoundary","$todayButton","format","args","_toTodayView","integrationOptions","_$footer","toggleClass","_$submitElement","attr","_setSubmitValue","dateValue","_getSubmitElement","val","_popAnimationView","promise","from","to","duration","animate","scale","opacity","newView","remove","offsetSign","endPosition","viewsWrapperPosition","position","_preventViewChangeAnimation","_wrapperAnimationEndHandler","done","isDate","today","newDate","_rearrangeViews","_resetLocation","viewOffset","viewToCreateKey","viewToRemoveKey","destinationDate","dateByOffset","_clean","_clearViewWidthCache","_disposeViews","_dispose","clearTimeout","_refreshViews","_visibilityChanged","_focusInHandler","apply","_focusOutHandler","_updateViewsValue","previousValue","_value","$prevSelectedCell","_getCellByDate","$selectedCell","setAria","_value2","ariaId","$newCell","_suppressingNavigation","callback","_optionChanged","removeClass","_invalidate","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/calendar/ui.calendar.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _guid = _interopRequireDefault(require(\"../../core/guid\"));\r\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _math = require(\"../../core/utils/math\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _button = _interopRequireDefault(require(\"../button\"));\r\nvar _editor = _interopRequireDefault(require(\"../editor/editor\"));\r\nvar _swipeable = _interopRequireDefault(require(\"../../events/gesture/swipeable\"));\r\nvar _uiCalendar = _interopRequireDefault(require(\"./ui.calendar.navigator\"));\r\nvar _uiCalendar2 = _interopRequireDefault(require(\"./ui.calendar.views\"));\r\nvar _translator = require(\"../../animation/translator\");\r\nvar _browser = _interopRequireDefault(require(\"../../core/utils/browser\"));\r\nvar _date2 = _interopRequireDefault(require(\"../../core/utils/date\"));\r\nvar _date_serialization = _interopRequireDefault(require(\"../../core/utils/date_serialization\"));\r\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\r\nvar _fx = _interopRequireDefault(require(\"../../animation/fx\"));\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\r\nvar _function_template = require(\"../../core/templates/function_template\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar CALENDAR_CLASS = \"dx-calendar\";\r\nvar CALENDAR_BODY_CLASS = \"dx-calendar-body\";\r\nvar CALENDAR_CELL_CLASS = \"dx-calendar-cell\";\r\nvar CALENDAR_FOOTER_CLASS = \"dx-calendar-footer\";\r\nvar CALENDAR_TODAY_BUTTON_CLASS = \"dx-calendar-today-button\";\r\nvar CALENDAR_HAS_FOOTER_CLASS = \"dx-calendar-with-footer\";\r\nvar CALENDAR_VIEWS_WRAPPER_CLASS = \"dx-calendar-views-wrapper\";\r\nvar CALENDAR_VIEW_CLASS = \"dx-calendar-view\";\r\nvar FOCUSED_STATE_CLASS = \"dx-state-focused\";\r\nvar ANIMATION_DURATION_SHOW_VIEW = 250;\r\nvar POP_ANIMATION_FROM = .6;\r\nvar POP_ANIMATION_TO = 1;\r\nvar CALENDAR_INPUT_STANDARD_PATTERN = \"yyyy-MM-dd\";\r\nvar CALENDAR_DATE_VALUE_KEY = \"dxDateValueKey\";\r\nvar LEVEL_COMPARE_MAP = {\r\n    month: 3,\r\n    year: 2,\r\n    decade: 1,\r\n    century: 0\r\n};\r\nvar ZOOM_LEVEL = {\r\n    MONTH: \"month\",\r\n    YEAR: \"year\",\r\n    DECADE: \"decade\",\r\n    CENTURY: \"century\"\r\n};\r\nvar isIE11 = _browser.default.msie && parseInt(_browser.default.version) <= 11;\r\nvar Calendar = _editor.default.inherit({\r\n    _activeStateUnit: \".\" + CALENDAR_CELL_CLASS,\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            hoverStateEnabled: true,\r\n            activeStateEnabled: true,\r\n            currentDate: new Date,\r\n            value: null,\r\n            dateSerializationFormat: void 0,\r\n            min: new Date(1e3, 0),\r\n            max: new Date(3e3, 0),\r\n            firstDayOfWeek: void 0,\r\n            zoomLevel: ZOOM_LEVEL.MONTH,\r\n            maxZoomLevel: ZOOM_LEVEL.MONTH,\r\n            minZoomLevel: ZOOM_LEVEL.CENTURY,\r\n            showTodayButton: false,\r\n            cellTemplate: \"cell\",\r\n            disabledDates: null,\r\n            onCellClick: null,\r\n            onContouredChanged: null,\r\n            hasFocus: function(element) {\r\n                return element.hasClass(FOCUSED_STATE_CLASS)\r\n            },\r\n            _todayDate: function() {\r\n                return new Date\r\n            }\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return \"desktop\" === _devices.default.real().deviceType && !_devices.default.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }])\r\n    },\r\n    _supportedKeys: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            rightArrow: function(e) {\r\n                e.preventDefault();\r\n                if (e.ctrlKey) {\r\n                    this._waitRenderView(1)\r\n                } else {\r\n                    this._moveCurrentDateByOffset(1 * this._getRtlCorrection())\r\n                }\r\n            },\r\n            leftArrow: function(e) {\r\n                e.preventDefault();\r\n                if (e.ctrlKey) {\r\n                    this._waitRenderView(-1)\r\n                } else {\r\n                    this._moveCurrentDateByOffset(-1 * this._getRtlCorrection())\r\n                }\r\n            },\r\n            upArrow: function(e) {\r\n                e.preventDefault();\r\n                if (e.ctrlKey) {\r\n                    this._navigateUp()\r\n                } else {\r\n                    if (_fx.default.isAnimating(this._view.$element())) {\r\n                        return\r\n                    }\r\n                    this._moveCurrentDateByOffset(-1 * this._view.option(\"colCount\"))\r\n                }\r\n            },\r\n            downArrow: function(e) {\r\n                e.preventDefault();\r\n                if (e.ctrlKey) {\r\n                    this._navigateDown()\r\n                } else {\r\n                    if (_fx.default.isAnimating(this._view.$element())) {\r\n                        return\r\n                    }\r\n                    this._moveCurrentDateByOffset(1 * this._view.option(\"colCount\"))\r\n                }\r\n            },\r\n            home: function(e) {\r\n                e.preventDefault();\r\n                var zoomLevel = this.option(\"zoomLevel\");\r\n                var currentDate = this.option(\"currentDate\");\r\n                var min = this._dateOption(\"min\");\r\n                if (this._view.isDateDisabled(currentDate)) {\r\n                    return\r\n                }\r\n                var date = _date2.default.sameView(zoomLevel, currentDate, min) ? min : _date2.default.getViewFirstCellDate(zoomLevel, currentDate);\r\n                this._moveToClosestAvailableDate(date)\r\n            },\r\n            end: function(e) {\r\n                e.preventDefault();\r\n                var zoomLevel = this.option(\"zoomLevel\");\r\n                var currentDate = this.option(\"currentDate\");\r\n                var max = this._dateOption(\"max\");\r\n                if (this._view.isDateDisabled(currentDate)) {\r\n                    return\r\n                }\r\n                var date = _date2.default.sameView(zoomLevel, currentDate, max) ? max : _date2.default.getViewLastCellDate(zoomLevel, currentDate);\r\n                this._moveToClosestAvailableDate(date)\r\n            },\r\n            pageUp: function(e) {\r\n                e.preventDefault();\r\n                this._waitRenderView(-1 * this._getRtlCorrection())\r\n            },\r\n            pageDown: function(e) {\r\n                e.preventDefault();\r\n                this._waitRenderView(1 * this._getRtlCorrection())\r\n            },\r\n            tab: _common.noop,\r\n            enter: function(e) {\r\n                if (!this._isMaxZoomLevel()) {\r\n                    this._navigateDown()\r\n                } else {\r\n                    if (!this._view.isDateDisabled(this.option(\"currentDate\"))) {\r\n                        var value = this._updateTimeComponent(this.option(\"currentDate\"));\r\n                        this._dateValue(value, e)\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _getSerializationFormat: function(optionName) {\r\n        var value = this.option(optionName || \"value\");\r\n        if (this.option(\"dateSerializationFormat\")) {\r\n            return this.option(\"dateSerializationFormat\")\r\n        }\r\n        if ((0, _type.isNumeric)(value)) {\r\n            return \"number\"\r\n        }\r\n        if (!(0, _type.isString)(value)) {\r\n            return\r\n        }\r\n        return _date_serialization.default.getDateSerializationFormat(value)\r\n    },\r\n    _convertToDate: function(value, optionName) {\r\n        return _date_serialization.default.deserializeDate(value)\r\n    },\r\n    _dateValue: function(value, event) {\r\n        if (event) {\r\n            if (\"keydown\" === event.type) {\r\n                var cellElement = this._view._getContouredCell().get(0);\r\n                event.target = cellElement\r\n            }\r\n            this._saveValueChangeEvent(event)\r\n        }\r\n        this._dateOption(\"value\", value)\r\n    },\r\n    _dateOption: function(optionName, optionValue) {\r\n        if (1 === arguments.length) {\r\n            return this._convertToDate(this.option(optionName), optionName)\r\n        }\r\n        var serializationFormat = this._getSerializationFormat(optionName);\r\n        this.option(optionName, _date_serialization.default.serializeDate(optionValue, serializationFormat))\r\n    },\r\n    _shiftDate: function(zoomLevel, date, offset, reverse) {\r\n        switch (zoomLevel) {\r\n            case ZOOM_LEVEL.MONTH:\r\n                date.setDate(date.getDate() + offset * reverse);\r\n                break;\r\n            case ZOOM_LEVEL.YEAR:\r\n                date.setMonth(date.getMonth() + offset * reverse);\r\n                break;\r\n            case ZOOM_LEVEL.DECADE:\r\n                date.setFullYear(date.getFullYear() + offset * reverse);\r\n                break;\r\n            case ZOOM_LEVEL.CENTURY:\r\n                date.setFullYear(date.getFullYear() + 10 * offset * reverse)\r\n        }\r\n    },\r\n    _moveCurrentDateByOffset: function(offset) {\r\n        var baseDate = this.option(\"currentDate\");\r\n        var currentDate = new Date(baseDate);\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        this._shiftDate(zoomLevel, currentDate, offset, 1);\r\n        var maxDate = this._getMaxDate();\r\n        var minDate = this._getMinDate();\r\n        var isDateForwardInNeighborView = this._areDatesInNeighborView(zoomLevel, currentDate, baseDate);\r\n        var isDateForwardInRange = (0, _math.inRange)(currentDate, minDate, maxDate) && isDateForwardInNeighborView;\r\n        var dateForward = new Date(currentDate);\r\n        while (isDateForwardInRange) {\r\n            if (isDateForwardInRange && !this._view.isDateDisabled(dateForward)) {\r\n                currentDate = dateForward;\r\n                break\r\n            }\r\n            this._shiftDate(zoomLevel, dateForward, offset, 1);\r\n            isDateForwardInNeighborView = this._areDatesInNeighborView(zoomLevel, dateForward, baseDate);\r\n            isDateForwardInRange = (0, _math.inRange)(dateForward, minDate, maxDate) && isDateForwardInNeighborView\r\n        }\r\n        if (this._view.isDateDisabled(baseDate) || this._view.isDateDisabled(currentDate)) {\r\n            this._waitRenderView(offset > 0 ? 1 : -1)\r\n        } else {\r\n            this.option(\"currentDate\", currentDate)\r\n        }\r\n    },\r\n    _areDatesInSameView: function(zoomLevel, date1, date2) {\r\n        switch (zoomLevel) {\r\n            case ZOOM_LEVEL.MONTH:\r\n                return date1.getMonth() === date2.getMonth();\r\n            case ZOOM_LEVEL.YEAR:\r\n                return date1.getYear() === date2.getYear();\r\n            case ZOOM_LEVEL.DECADE:\r\n                return parseInt(date1.getYear() / 10) === parseInt(date2.getYear() / 10);\r\n            case ZOOM_LEVEL.CENTURY:\r\n                return parseInt(date1.getYear() / 100) === parseInt(date2.getYear() / 100)\r\n        }\r\n    },\r\n    _areDatesInNeighborView: function(zoomLevel, date1, date2) {\r\n        var monthMinDistance = function(a, b) {\r\n            var abs = Math.abs(a - b);\r\n            return Math.min(abs, 12 - abs)\r\n        };\r\n        switch (zoomLevel) {\r\n            case ZOOM_LEVEL.MONTH:\r\n                return monthMinDistance(date1.getMonth(), date2.getMonth()) <= 1;\r\n            case ZOOM_LEVEL.YEAR:\r\n                return Math.abs(date1.getYear() - date2.getYear()) <= 1;\r\n            case ZOOM_LEVEL.DECADE:\r\n                return Math.abs(date1.getYear() - date2.getYear()) <= 10;\r\n            case ZOOM_LEVEL.CENTURY:\r\n                return Math.abs(date1.getYear() - date2.getYear()) <= 100\r\n        }\r\n    },\r\n    _moveToClosestAvailableDate: function() {\r\n        var baseDate = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.option(\"currentDate\");\r\n        var currentDate = _date2.default.createDate(baseDate);\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        var isCurrentDateAvailable = !this._isDateNotAvailable(currentDate);\r\n        var isDateForwardAvailable = isCurrentDateAvailable;\r\n        var isDateBackwardAvailable = isCurrentDateAvailable;\r\n        var isDateForwardInStartView;\r\n        var isDateBackwardInStartView;\r\n        var dateForward = _date2.default.createDate(currentDate);\r\n        var dateBackward = _date2.default.createDate(currentDate);\r\n        do {\r\n            if (isDateForwardAvailable) {\r\n                currentDate = dateForward;\r\n                break\r\n            }\r\n            if (isDateBackwardAvailable) {\r\n                currentDate = dateBackward;\r\n                break\r\n            }\r\n            this._shiftDate(zoomLevel, dateForward, 1, 1);\r\n            this._shiftDate(zoomLevel, dateBackward, 1, -1);\r\n            isDateForwardInStartView = this._areDatesInSameView(zoomLevel, dateForward, baseDate);\r\n            isDateBackwardInStartView = this._areDatesInSameView(zoomLevel, dateBackward, baseDate);\r\n            isDateForwardAvailable = isDateForwardInStartView && !this._isDateNotAvailable(dateForward);\r\n            isDateBackwardAvailable = isDateBackwardInStartView && !this._isDateNotAvailable(dateBackward)\r\n        } while (isDateForwardInStartView || isDateBackwardInStartView);\r\n        this.option(\"currentDate\", currentDate)\r\n    },\r\n    _isDateNotAvailable: function(date) {\r\n        var maxDate = this._getMaxDate();\r\n        var minDate = this._getMinDate();\r\n        return !(0, _math.inRange)(date, minDate, maxDate) || this._view.isDateDisabled(date)\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._correctZoomLevel();\r\n        this._initCurrentDate();\r\n        this._initActions()\r\n    },\r\n    _correctZoomLevel: function() {\r\n        var minZoomLevel = this.option(\"minZoomLevel\");\r\n        var maxZoomLevel = this.option(\"maxZoomLevel\");\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        if (LEVEL_COMPARE_MAP[maxZoomLevel] < LEVEL_COMPARE_MAP[minZoomLevel]) {\r\n            return\r\n        }\r\n        if (LEVEL_COMPARE_MAP[zoomLevel] > LEVEL_COMPARE_MAP[maxZoomLevel]) {\r\n            this.option(\"zoomLevel\", maxZoomLevel)\r\n        } else {\r\n            if (LEVEL_COMPARE_MAP[zoomLevel] < LEVEL_COMPARE_MAP[minZoomLevel]) {\r\n                this.option(\"zoomLevel\", minZoomLevel)\r\n            }\r\n        }\r\n    },\r\n    _initCurrentDate: function() {\r\n        var currentDate = this._getNormalizedDate(this._dateOption(\"value\")) || this._getNormalizedDate(this.option(\"currentDate\"));\r\n        this.option(\"currentDate\", currentDate)\r\n    },\r\n    _getNormalizedDate: function(date) {\r\n        date = _date2.default.normalizeDate(date, this._getMinDate(), this._getMaxDate());\r\n        return (0, _type.isDefined)(date) ? this._getDate(date) : date\r\n    },\r\n    _initActions: function() {\r\n        this._cellClickAction = this._createActionByOption(\"onCellClick\");\r\n        this._onContouredChanged = this._createActionByOption(\"onContouredChanged\")\r\n    },\r\n    _initTemplates: function() {\r\n        this._templateManager.addDefaultTemplates({\r\n            cell: new _function_template.FunctionTemplate(function(options) {\r\n                var data = options.model;\r\n                (0, _renderer.default)(options.container).append((0, _renderer.default)(\"<span>\").text(data && data.text || String(data)))\r\n            })\r\n        });\r\n        this.callBase()\r\n    },\r\n    _updateCurrentDate: function(date) {\r\n        if (_fx.default.isAnimating(this._$viewsWrapper)) {\r\n            _fx.default.stop(this._$viewsWrapper, true)\r\n        }\r\n        var min = this._getMinDate();\r\n        var max = this._getMaxDate();\r\n        if (min > max) {\r\n            this.option(\"currentDate\", new Date);\r\n            return\r\n        }\r\n        var normalizedDate = this._getNormalizedDate(date);\r\n        if (date.getTime() !== normalizedDate.getTime()) {\r\n            this.option(\"currentDate\", _date2.default.createDate(normalizedDate));\r\n            return\r\n        }\r\n        var offset = this._getViewsOffset(this._view.option(\"date\"), normalizedDate);\r\n        if (0 !== offset && !this._isMaxZoomLevel() && this._isOtherViewCellClicked) {\r\n            offset = 0\r\n        }\r\n        if (this._view && 0 !== offset && !this._suppressNavigation) {\r\n            this._navigate(offset, normalizedDate)\r\n        } else {\r\n            this._renderNavigator();\r\n            this._setViewContoured(normalizedDate);\r\n            this._updateAriaId(normalizedDate)\r\n        }\r\n    },\r\n    _setViewContoured: function(date) {\r\n        if (this.option(\"hasFocus\")(this._focusTarget())) {\r\n            this._view.option(\"contouredDate\", date)\r\n        }\r\n    },\r\n    _getMinDate: function() {\r\n        if (this.min) {\r\n            return this.min\r\n        }\r\n        this.min = this._dateOption(\"min\") || new Date(1e3, 0);\r\n        return this.min\r\n    },\r\n    _getMaxDate: function() {\r\n        if (this.max) {\r\n            return this.max\r\n        }\r\n        this.max = this._dateOption(\"max\") || new Date(3e3, 0);\r\n        return this.max\r\n    },\r\n    _getViewsOffset: function(startDate, endDate) {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        if (zoomLevel === ZOOM_LEVEL.MONTH) {\r\n            return this._getMonthsOffset(startDate, endDate)\r\n        }\r\n        var zoomCorrection;\r\n        switch (zoomLevel) {\r\n            case ZOOM_LEVEL.CENTURY:\r\n                zoomCorrection = 100;\r\n                break;\r\n            case ZOOM_LEVEL.DECADE:\r\n                zoomCorrection = 10;\r\n                break;\r\n            default:\r\n                zoomCorrection = 1\r\n        }\r\n        return parseInt(endDate.getFullYear() / zoomCorrection) - parseInt(startDate.getFullYear() / zoomCorrection)\r\n    },\r\n    _getMonthsOffset: function(startDate, endDate) {\r\n        var yearOffset = endDate.getFullYear() - startDate.getFullYear();\r\n        var monthOffset = endDate.getMonth() - startDate.getMonth();\r\n        return 12 * yearOffset + monthOffset\r\n    },\r\n    _waitRenderView: function(offset) {\r\n        var _this = this;\r\n        if (this._alreadyViewRender) {\r\n            return\r\n        }\r\n        this._alreadyViewRender = true;\r\n        var date = this._getDateByOffset(offset * this._getRtlCorrection());\r\n        this._moveToClosestAvailableDate(date);\r\n        this._waitRenderViewTimeout = setTimeout(function() {\r\n            _this._alreadyViewRender = false\r\n        })\r\n    },\r\n    _getRtlCorrection: function() {\r\n        return this.option(\"rtlEnabled\") ? -1 : 1\r\n    },\r\n    _getDateByOffset: function(offset, date) {\r\n        var _date;\r\n        date = this._getDate(null !== (_date = date) && void 0 !== _date ? _date : this.option(\"currentDate\"));\r\n        var currentDay = date.getDate();\r\n        var difference = _date2.default.getDifferenceInMonth(this.option(\"zoomLevel\")) * offset;\r\n        date.setDate(1);\r\n        date.setMonth(date.getMonth() + difference);\r\n        var lastDay = _date2.default.getLastMonthDate(date).getDate();\r\n        date.setDate(currentDay > lastDay ? lastDay : currentDay);\r\n        return date\r\n    },\r\n    _focusTarget: function() {\r\n        return this.$element()\r\n    },\r\n    _initMarkup: function() {\r\n        this._renderSubmitElement();\r\n        this.callBase();\r\n        var $element = this.$element();\r\n        $element.addClass(CALENDAR_CLASS);\r\n        this._renderBody();\r\n        $element.append(this.$body);\r\n        this._renderViews();\r\n        this._renderNavigator();\r\n        $element.append(this._navigator.$element());\r\n        this._renderSwipeable();\r\n        this._renderFooter();\r\n        this._updateAriaSelected();\r\n        this._updateAriaId();\r\n        this._moveToClosestAvailableDate()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._setViewContoured(this.option(\"currentDate\"))\r\n    },\r\n    _renderBody: function() {\r\n        if (!this._$viewsWrapper) {\r\n            this.$body = (0, _renderer.default)(\"<div>\").addClass(CALENDAR_BODY_CLASS);\r\n            this._$viewsWrapper = (0, _renderer.default)(\"<div>\").addClass(CALENDAR_VIEWS_WRAPPER_CLASS);\r\n            this.$body.append(this._$viewsWrapper)\r\n        }\r\n    },\r\n    _getKeyboardListeners: function() {\r\n        return this.callBase().concat([this._view])\r\n    },\r\n    _renderViews: function() {\r\n        this.$element().addClass(CALENDAR_VIEW_CLASS + \"-\" + this.option(\"zoomLevel\"));\r\n        var currentDate = this.option(\"currentDate\");\r\n        this._view = this._renderSpecificView(currentDate);\r\n        if ((0, _window.hasWindow)()) {\r\n            var beforeDate = this._getDateByOffset(-1, currentDate);\r\n            this._beforeView = this._isViewAvailable(beforeDate) ? this._renderSpecificView(beforeDate) : null;\r\n            var afterDate = this._getDateByOffset(1, currentDate);\r\n            afterDate.setDate(1);\r\n            this._afterView = this._isViewAvailable(afterDate) ? this._renderSpecificView(afterDate) : null\r\n        }\r\n        this._translateViews()\r\n    },\r\n    _renderSpecificView: function(date) {\r\n        var specificView = _uiCalendar2.default[this.option(\"zoomLevel\")];\r\n        var $view = (0, _renderer.default)(\"<div>\").appendTo(this._$viewsWrapper);\r\n        var config = this._viewConfig(date);\r\n        return this._createComponent($view, specificView, config)\r\n    },\r\n    _viewConfig: function(date) {\r\n        var disabledDates = this.option(\"disabledDates\");\r\n        disabledDates = (0, _type.isFunction)(disabledDates) ? this._injectComponent(disabledDates.bind(this)) : disabledDates;\r\n        return {\r\n            date: date,\r\n            min: this._getMinDate(),\r\n            max: this._getMaxDate(),\r\n            firstDayOfWeek: this.option(\"firstDayOfWeek\"),\r\n            value: this._dateOption(\"value\"),\r\n            tabIndex: void 0,\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            hoverStateEnabled: this.option(\"hoverStateEnabled\"),\r\n            disabledDates: disabledDates,\r\n            onCellClick: this._cellClickHandler.bind(this),\r\n            cellTemplate: this._getTemplateByOption(\"cellTemplate\"),\r\n            allowValueSelection: this._isMaxZoomLevel(),\r\n            _todayDate: this.option(\"_todayDate\")\r\n        }\r\n    },\r\n    _injectComponent: function(func) {\r\n        var that = this;\r\n        return function(params) {\r\n            (0, _extend.extend)(params, {\r\n                component: that\r\n            });\r\n            return func(params)\r\n        }\r\n    },\r\n    _isViewAvailable: function(date) {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        var min = _date2.default.getViewMinBoundaryDate(zoomLevel, this._getMinDate());\r\n        var max = _date2.default.getViewMaxBoundaryDate(zoomLevel, this._getMaxDate());\r\n        return _date2.default.dateInRange(date, min, max)\r\n    },\r\n    _translateViews: function() {\r\n        (0, _translator.move)(this._view.$element(), {\r\n            left: 0,\r\n            top: 0\r\n        });\r\n        this._beforeView && (0, _translator.move)(this._beforeView.$element(), {\r\n            left: this._getViewPosition(-1),\r\n            top: 0\r\n        });\r\n        this._afterView && (0, _translator.move)(this._afterView.$element(), {\r\n            left: this._getViewPosition(1),\r\n            top: 0\r\n        })\r\n    },\r\n    _getViewPosition: function(coefficient) {\r\n        var rtlCorrection = this.option(\"rtlEnabled\") && !_browser.default.msie ? -1 : 1;\r\n        return 100 * coefficient * rtlCorrection + \"%\"\r\n    },\r\n    _cellClickHandler: function(e) {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        var nextView = _date2.default.getViewDown(zoomLevel);\r\n        var isMaxZoomLevel = this._isMaxZoomLevel();\r\n        if (nextView && !isMaxZoomLevel) {\r\n            this._navigateDown(e.event.currentTarget)\r\n        } else {\r\n            var newValue = this._updateTimeComponent(e.value);\r\n            this._dateValue(newValue, e.event);\r\n            this._cellClickAction(e)\r\n        }\r\n    },\r\n    _updateTimeComponent: function(date) {\r\n        var result = _date2.default.createDate(date);\r\n        var currentValue = this._dateOption(\"value\");\r\n        if (currentValue) {\r\n            result.setHours(currentValue.getHours());\r\n            result.setMinutes(currentValue.getMinutes());\r\n            result.setSeconds(currentValue.getSeconds());\r\n            result.setMilliseconds(currentValue.getMilliseconds())\r\n        }\r\n        return result\r\n    },\r\n    _isMaxZoomLevel: function() {\r\n        return this.option(\"zoomLevel\") === this.option(\"maxZoomLevel\")\r\n    },\r\n    _navigateDown: function(cell) {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        if (this._isMaxZoomLevel()) {\r\n            return\r\n        }\r\n        var nextView = _date2.default.getViewDown(zoomLevel);\r\n        if (!nextView) {\r\n            return\r\n        }\r\n        var newCurrentDate = this._view.option(\"contouredDate\") || this._view.option(\"date\");\r\n        if (cell) {\r\n            newCurrentDate = (0, _renderer.default)(cell).data(CALENDAR_DATE_VALUE_KEY)\r\n        }\r\n        this._isOtherViewCellClicked = true;\r\n        this.option(\"currentDate\", newCurrentDate);\r\n        this.option(\"zoomLevel\", nextView);\r\n        this._isOtherViewCellClicked = false;\r\n        this._renderNavigator();\r\n        this._animateShowView();\r\n        this._moveToClosestAvailableDate();\r\n        this._setViewContoured(this._getNormalizedDate(this.option(\"currentDate\")))\r\n    },\r\n    _renderNavigator: function() {\r\n        if (!this._navigator) {\r\n            this._navigator = new _uiCalendar.default((0, _renderer.default)(\"<div>\"), this._navigatorConfig())\r\n        }\r\n        this._navigator.option(\"text\", this._view.getNavigatorCaption());\r\n        this._updateButtonsVisibility()\r\n    },\r\n    _navigatorConfig: function() {\r\n        return {\r\n            text: this._view.getNavigatorCaption(),\r\n            onClick: this._navigatorClickHandler.bind(this),\r\n            onCaptionClick: this._navigateUp.bind(this),\r\n            rtlEnabled: this.option(\"rtlEnabled\")\r\n        }\r\n    },\r\n    _navigatorClickHandler: function(e) {\r\n        var currentDate = this._getDateByOffset(e.direction, this.option(\"currentDate\"));\r\n        this._moveToClosestAvailableDate(currentDate)\r\n    },\r\n    _navigateUp: function() {\r\n        var zoomLevel = this.option(\"zoomLevel\");\r\n        var nextView = _date2.default.getViewUp(zoomLevel);\r\n        if (!nextView || this._isMinZoomLevel(zoomLevel)) {\r\n            return\r\n        }\r\n        this.option(\"zoomLevel\", nextView);\r\n        this._renderNavigator();\r\n        this._animateShowView();\r\n        this._moveToClosestAvailableDate();\r\n        this._setViewContoured(this._getNormalizedDate(this.option(\"currentDate\")))\r\n    },\r\n    _isMinZoomLevel: function(zoomLevel) {\r\n        var min = this._getMinDate();\r\n        var max = this._getMaxDate();\r\n        return _date2.default.sameView(zoomLevel, min, max) || this.option(\"minZoomLevel\") === zoomLevel\r\n    },\r\n    _updateButtonsVisibility: function() {\r\n        this._navigator.toggleButton(\"next\", !(0, _type.isDefined)(this._getRequiredView(\"next\")));\r\n        this._navigator.toggleButton(\"prev\", !(0, _type.isDefined)(this._getRequiredView(\"prev\")))\r\n    },\r\n    _renderSwipeable: function() {\r\n        if (!this._swipeable) {\r\n            this._swipeable = this._createComponent(this.$element(), _swipeable.default, {\r\n                onStart: this._swipeStartHandler.bind(this),\r\n                onUpdated: this._swipeUpdateHandler.bind(this),\r\n                onEnd: this._swipeEndHandler.bind(this),\r\n                itemSizeFunc: this._viewWidth.bind(this)\r\n            })\r\n        }\r\n    },\r\n    _swipeStartHandler: function(e) {\r\n        _fx.default.stop(this._$viewsWrapper, true);\r\n        e.event.maxLeftOffset = this._getRequiredView(\"next\") ? 1 : 0;\r\n        e.event.maxRightOffset = this._getRequiredView(\"prev\") ? 1 : 0\r\n    },\r\n    _getRequiredView: function(name) {\r\n        var view;\r\n        var isRtl = this.option(\"rtlEnabled\");\r\n        if (\"next\" === name) {\r\n            view = isRtl ? this._beforeView : this._afterView\r\n        } else {\r\n            if (\"prev\" === name) {\r\n                view = isRtl ? this._afterView : this._beforeView\r\n            }\r\n        }\r\n        return view\r\n    },\r\n    _swipeUpdateHandler: function(e) {\r\n        var offset = e.event.offset;\r\n        (0, _translator.move)(this._$viewsWrapper, {\r\n            left: offset * this._viewWidth(),\r\n            top: 0\r\n        });\r\n        this._updateNavigatorCaption(offset)\r\n    },\r\n    _swipeEndHandler: function(e) {\r\n        var targetOffset = e.event.targetOffset;\r\n        var moveOffset = !targetOffset ? 0 : targetOffset / Math.abs(targetOffset);\r\n        if (0 === moveOffset) {\r\n            this._animateWrapper(0, ANIMATION_DURATION_SHOW_VIEW);\r\n            return\r\n        }\r\n        var date = this._getDateByOffset(-moveOffset * this._getRtlCorrection());\r\n        if (this._isDateInInvalidRange(date)) {\r\n            if (moveOffset >= 0) {\r\n                date = new Date(this._getMinDate())\r\n            } else {\r\n                date = new Date(this._getMaxDate())\r\n            }\r\n        }\r\n        this.option(\"currentDate\", date)\r\n    },\r\n    _viewWidth: function() {\r\n        if (!this._viewWidthValue) {\r\n            this._viewWidthValue = this.$element().width()\r\n        }\r\n        return this._viewWidthValue\r\n    },\r\n    _updateNavigatorCaption: function(offset) {\r\n        offset *= this._getRtlCorrection();\r\n        var view = this._view;\r\n        if (offset > .5 && this._beforeView) {\r\n            view = this._beforeView\r\n        } else {\r\n            if (offset < -.5 && this._afterView) {\r\n                view = this._afterView\r\n            }\r\n        }\r\n        this._navigator.option(\"text\", view.getNavigatorCaption())\r\n    },\r\n    _isDateInInvalidRange: function(date) {\r\n        if (this._view.isBoundary(date)) {\r\n            return\r\n        }\r\n        var min = this._getMinDate();\r\n        var max = this._getMaxDate();\r\n        var normalizedDate = _date2.default.normalizeDate(date, min, max);\r\n        return normalizedDate === min || normalizedDate === max\r\n    },\r\n    _renderFooter: function() {\r\n        var showTodayButton = this.option(\"showTodayButton\");\r\n        if (showTodayButton) {\r\n            var $todayButton = this._createComponent((0, _renderer.default)(\"<a>\"), _button.default, {\r\n                focusStateEnabled: false,\r\n                text: _message.default.format(\"dxCalendar-todayButtonText\"),\r\n                onClick: function(args) {\r\n                    this._toTodayView(args)\r\n                }.bind(this),\r\n                integrationOptions: {}\r\n            }).$element().addClass(CALENDAR_TODAY_BUTTON_CLASS);\r\n            this._$footer = (0, _renderer.default)(\"<div>\").addClass(CALENDAR_FOOTER_CLASS).append($todayButton);\r\n            this.$element().append(this._$footer)\r\n        }\r\n        this.$element().toggleClass(CALENDAR_HAS_FOOTER_CLASS, showTodayButton)\r\n    },\r\n    _renderSubmitElement: function() {\r\n        this._$submitElement = (0, _renderer.default)(\"<input>\").attr(\"type\", \"hidden\").appendTo(this.$element());\r\n        this._setSubmitValue(this.option(\"value\"))\r\n    },\r\n    _setSubmitValue: function(value) {\r\n        var dateValue = this._convertToDate(value);\r\n        this._getSubmitElement().val(_date_serialization.default.serializeDate(dateValue, CALENDAR_INPUT_STANDARD_PATTERN))\r\n    },\r\n    _getSubmitElement: function() {\r\n        return this._$submitElement\r\n    },\r\n    _animateShowView: function() {\r\n        _fx.default.stop(this._view.$element(), true);\r\n        return this._popAnimationView(this._view, POP_ANIMATION_FROM, POP_ANIMATION_TO, ANIMATION_DURATION_SHOW_VIEW).promise()\r\n    },\r\n    _popAnimationView: function(view, from, to, duration) {\r\n        return _fx.default.animate(view.$element(), {\r\n            type: \"pop\",\r\n            from: {\r\n                scale: from,\r\n                opacity: from\r\n            },\r\n            to: {\r\n                scale: to,\r\n                opacity: to\r\n            },\r\n            duration: duration\r\n        })\r\n    },\r\n    _navigate: function(offset, value) {\r\n        if (0 !== offset && 1 !== Math.abs(offset) && this._isViewAvailable(value)) {\r\n            var newView = this._renderSpecificView(value);\r\n            if (offset > 0) {\r\n                this._afterView && this._afterView.$element().remove();\r\n                this._afterView = newView\r\n            } else {\r\n                this._beforeView && this._beforeView.$element().remove();\r\n                this._beforeView = newView\r\n            }\r\n            this._translateViews()\r\n        }\r\n        var rtlCorrection = this._getRtlCorrection();\r\n        var offsetSign = offset > 0 ? 1 : offset < 0 ? -1 : 0;\r\n        var endPosition = -rtlCorrection * offsetSign * this._viewWidth();\r\n        var viewsWrapperPosition = this._$viewsWrapper.position().left;\r\n        if (viewsWrapperPosition !== endPosition) {\r\n            if (this._preventViewChangeAnimation) {\r\n                this._wrapperAnimationEndHandler(offset, value)\r\n            } else {\r\n                this._animateWrapper(endPosition, ANIMATION_DURATION_SHOW_VIEW).done(this._wrapperAnimationEndHandler.bind(this, offset, value))\r\n            }\r\n        }\r\n    },\r\n    _animateWrapper: function(to, duration) {\r\n        return _fx.default.animate(this._$viewsWrapper, {\r\n            type: \"slide\",\r\n            from: {\r\n                left: this._$viewsWrapper.position().left\r\n            },\r\n            to: {\r\n                left: to\r\n            },\r\n            duration: duration\r\n        })\r\n    },\r\n    _getDate: function(value) {\r\n        var result = _date2.default.createDate(value);\r\n        if (isIE11 && (0, _type.isDate)(value)) {\r\n            result.setMilliseconds(0)\r\n        }\r\n        return result\r\n    },\r\n    _toTodayView: function(args) {\r\n        this._saveValueChangeEvent(args.event);\r\n        var today = new Date;\r\n        if (this._isMaxZoomLevel()) {\r\n            this._dateOption(\"value\", today);\r\n            return\r\n        }\r\n        this._preventViewChangeAnimation = true;\r\n        this.option(\"zoomLevel\", this.option(\"maxZoomLevel\"));\r\n        this._dateOption(\"value\", today);\r\n        this._animateShowView();\r\n        this._preventViewChangeAnimation = false\r\n    },\r\n    _wrapperAnimationEndHandler: function(offset, newDate) {\r\n        this._rearrangeViews(offset);\r\n        this._translateViews();\r\n        this._resetLocation();\r\n        this._renderNavigator();\r\n        this._setViewContoured(newDate);\r\n        this._updateAriaId(newDate)\r\n    },\r\n    _rearrangeViews: function(offset) {\r\n        if (0 === offset) {\r\n            return\r\n        }\r\n        var viewOffset;\r\n        var viewToCreateKey;\r\n        var viewToRemoveKey;\r\n        if (offset < 0) {\r\n            viewOffset = 1;\r\n            viewToCreateKey = \"_beforeView\";\r\n            viewToRemoveKey = \"_afterView\"\r\n        } else {\r\n            viewOffset = -1;\r\n            viewToCreateKey = \"_afterView\";\r\n            viewToRemoveKey = \"_beforeView\"\r\n        }\r\n        if (!this[viewToCreateKey]) {\r\n            return\r\n        }\r\n        var destinationDate = this[viewToCreateKey].option(\"date\");\r\n        if (this[viewToRemoveKey]) {\r\n            this[viewToRemoveKey].$element().remove()\r\n        }\r\n        if (offset === viewOffset) {\r\n            this[viewToRemoveKey] = this._view\r\n        } else {\r\n            this[viewToRemoveKey] = this._renderSpecificView(this._getDateByOffset(viewOffset, destinationDate));\r\n            this._view.$element().remove()\r\n        }\r\n        this._view = this[viewToCreateKey];\r\n        var dateByOffset = this._getDateByOffset(-viewOffset, destinationDate);\r\n        this[viewToCreateKey] = this._isViewAvailable(dateByOffset) ? this._renderSpecificView(dateByOffset) : null\r\n    },\r\n    _resetLocation: function() {\r\n        (0, _translator.move)(this._$viewsWrapper, {\r\n            left: 0,\r\n            top: 0\r\n        })\r\n    },\r\n    _clean: function() {\r\n        this.callBase();\r\n        this._clearViewWidthCache();\r\n        delete this._$viewsWrapper;\r\n        delete this._navigator;\r\n        delete this._$footer\r\n    },\r\n    _clearViewWidthCache: function() {\r\n        delete this._viewWidthValue\r\n    },\r\n    _disposeViews: function() {\r\n        this._view.$element().remove();\r\n        this._beforeView && this._beforeView.$element().remove();\r\n        this._afterView && this._afterView.$element().remove();\r\n        delete this._view;\r\n        delete this._beforeView;\r\n        delete this._afterView\r\n    },\r\n    _dispose: function() {\r\n        clearTimeout(this._waitRenderViewTimeout);\r\n        this.callBase()\r\n    },\r\n    _refreshViews: function() {\r\n        this._disposeViews();\r\n        this._renderViews()\r\n    },\r\n    _visibilityChanged: function() {\r\n        this._translateViews()\r\n    },\r\n    _focusInHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._view.option(\"contouredDate\", this.option(\"currentDate\"))\r\n    },\r\n    _focusOutHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._view.option(\"contouredDate\", null)\r\n    },\r\n    _updateViewsValue: function(value) {\r\n        var newValue = value ? new Date(value) : null;\r\n        this._view.option(\"value\", newValue);\r\n        this._beforeView && this._beforeView.option(\"value\", newValue);\r\n        this._afterView && this._afterView.option(\"value\", newValue)\r\n    },\r\n    _updateAriaSelected: function(value, previousValue) {\r\n        var _value;\r\n        value = null !== (_value = value) && void 0 !== _value ? _value : this._dateOption(\"value\");\r\n        var $prevSelectedCell = this._view._getCellByDate(previousValue);\r\n        var $selectedCell = this._view._getCellByDate(value);\r\n        this.setAria(\"selected\", void 0, $prevSelectedCell);\r\n        this.setAria(\"selected\", true, $selectedCell);\r\n        if (value && this.option(\"currentDate\").getTime() === value.getTime()) {\r\n            this._updateAriaId(value)\r\n        }\r\n    },\r\n    _updateAriaId: function(value) {\r\n        var _value2;\r\n        value = null !== (_value2 = value) && void 0 !== _value2 ? _value2 : this.option(\"currentDate\");\r\n        var ariaId = \"dx-\" + new _guid.default;\r\n        var $newCell = this._view._getCellByDate(value);\r\n        this.setAria(\"id\", ariaId, $newCell);\r\n        this.setAria(\"activedescendant\", ariaId);\r\n        this._onContouredChanged(ariaId)\r\n    },\r\n    _suppressingNavigation: function(callback, args) {\r\n        this._suppressNavigation = true;\r\n        callback.apply(this, args);\r\n        delete this._suppressNavigation\r\n    },\r\n    _optionChanged: function(args) {\r\n        var value = args.value;\r\n        var previousValue = args.previousValue;\r\n        switch (args.name) {\r\n            case \"width\":\r\n                this.callBase(args);\r\n                this._clearViewWidthCache();\r\n                break;\r\n            case \"min\":\r\n            case \"max\":\r\n                this.min = void 0;\r\n                this.max = void 0;\r\n                this._suppressingNavigation(this._updateCurrentDate, [this.option(\"currentDate\")]);\r\n                this._refreshViews();\r\n                this._renderNavigator();\r\n                break;\r\n            case \"firstDayOfWeek\":\r\n                this._refreshViews();\r\n                this._updateButtonsVisibility();\r\n                break;\r\n            case \"currentDate\":\r\n                this.setAria(\"id\", void 0, this._view._getCellByDate(previousValue));\r\n                this._updateCurrentDate(value);\r\n                break;\r\n            case \"zoomLevel\":\r\n                this.$element().removeClass(CALENDAR_VIEW_CLASS + \"-\" + previousValue);\r\n                this._correctZoomLevel();\r\n                this._refreshViews();\r\n                this._renderNavigator();\r\n                this._updateAriaId();\r\n                break;\r\n            case \"minZoomLevel\":\r\n            case \"maxZoomLevel\":\r\n                this._correctZoomLevel();\r\n                this._updateButtonsVisibility();\r\n                break;\r\n            case \"value\":\r\n                value = this._convertToDate(value);\r\n                previousValue = this._convertToDate(previousValue);\r\n                this._updateAriaSelected(value, previousValue);\r\n                this.option(\"currentDate\", (0, _type.isDefined)(value) ? _date2.default.createDate(value) : new Date);\r\n                this._updateViewsValue(value);\r\n                this._setSubmitValue(value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"onCellClick\":\r\n                this._view.option(\"onCellClick\", value);\r\n                break;\r\n            case \"onContouredChanged\":\r\n                this._onContouredChanged = this._createActionByOption(\"onContouredChanged\");\r\n                break;\r\n            case \"disabledDates\":\r\n            case \"dateSerializationFormat\":\r\n            case \"cellTemplate\":\r\n            case \"showTodayButton\":\r\n                this._invalidate();\r\n                break;\r\n            case \"hasFocus\":\r\n                break;\r\n            case \"_todayDate\":\r\n                this._refreshViews();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n});\r\n(0, _component_registrator.default)(\"dxCalendar\", Calendar);\r\nvar _default = Calendar;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}