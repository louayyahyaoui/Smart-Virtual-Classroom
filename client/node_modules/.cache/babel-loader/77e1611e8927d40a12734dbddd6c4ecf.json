{"ast":null,"code":"/**\r\n * DevExtreme (animation/fx.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\n\nvar _window = require(\"../core/utils/window\");\n\nvar _events_engine = _interopRequireDefault(require(\"../events/core/events_engine\"));\n\nvar _errors = _interopRequireDefault(require(\"../core/errors\"));\n\nvar _element = require(\"../core/element\");\n\nvar _extend = require(\"../core/utils/extend\");\n\nvar _type = require(\"../core/utils/type\");\n\nvar _iterator = require(\"../core/utils/iterator\");\n\nvar _translator = require(\"./translator\");\n\nvar _easing = require(\"./easing\");\n\nvar _frame = require(\"./frame\");\n\nvar _support = require(\"../core/utils/support\");\n\nvar _position = _interopRequireDefault(require(\"./position\"));\n\nvar _remove_event = _interopRequireDefault(require(\"../core/remove_event\"));\n\nvar _index = require(\"../events/utils/index\");\n\nvar _deferred = require(\"../core/utils/deferred\");\n\nvar _common = require(\"../core/utils/common\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar window = (0, _window.getWindow)();\nvar removeEventName = (0, _index.addNamespace)(_remove_event.default, \"dxFX\");\nvar RELATIVE_VALUE_REGEX = /^([+-])=(.*)/i;\nvar ANIM_DATA_KEY = \"dxAnimData\";\nvar ANIM_QUEUE_KEY = \"dxAnimQueue\";\nvar TRANSFORM_PROP = \"transform\";\nvar TransitionAnimationStrategy = {\n  initAnimation: function ($element, config) {\n    $element.css({\n      transitionProperty: \"none\"\n    });\n\n    if (\"string\" === typeof config.from) {\n      $element.addClass(config.from);\n    } else {\n      setProps($element, config.from);\n    }\n\n    var that = this;\n    var deferred = new _deferred.Deferred();\n    var cleanupWhen = config.cleanupWhen;\n    config.transitionAnimation = {\n      deferred: deferred,\n      finish: function () {\n        that._finishTransition($element);\n\n        if (cleanupWhen) {\n          (0, _deferred.when)(deferred, cleanupWhen).always(function () {\n            that._cleanup($element, config);\n          });\n        } else {\n          that._cleanup($element, config);\n        }\n\n        deferred.resolveWith($element, [config, $element]);\n      }\n    };\n\n    this._completeAnimationCallback($element, config).done(function () {\n      config.transitionAnimation.finish();\n    }).fail(function () {\n      deferred.rejectWith($element, [config, $element]);\n    });\n\n    if (!config.duration) {\n      config.transitionAnimation.finish();\n    }\n\n    $element.css(\"transform\");\n  },\n  animate: function ($element, config) {\n    this._startAnimation($element, config);\n\n    return config.transitionAnimation.deferred.promise();\n  },\n  _completeAnimationCallback: function ($element, config) {\n    var that = this;\n    var startTime = Date.now() + config.delay;\n    var deferred = new _deferred.Deferred();\n    var transitionEndFired = new _deferred.Deferred();\n    var simulatedTransitionEndFired = new _deferred.Deferred();\n    var simulatedEndEventTimer;\n    var transitionEndEventFullName = (0, _support.transitionEndEventName)() + \".dxFX\";\n\n    config.transitionAnimation.cleanup = function () {\n      clearTimeout(simulatedEndEventTimer);\n      clearTimeout(waitForJSCompleteTimer);\n\n      _events_engine.default.off($element, transitionEndEventFullName);\n\n      _events_engine.default.off($element, removeEventName);\n    };\n\n    _events_engine.default.one($element, transitionEndEventFullName, function () {\n      if (Date.now() - startTime >= config.duration) {\n        transitionEndFired.reject();\n      }\n    });\n\n    _events_engine.default.off($element, removeEventName);\n\n    _events_engine.default.on($element, removeEventName, function () {\n      that.stop($element, config);\n      deferred.reject();\n    });\n\n    var waitForJSCompleteTimer = setTimeout(function () {\n      simulatedEndEventTimer = setTimeout(function () {\n        simulatedTransitionEndFired.reject();\n      }, config.duration + config.delay + fx._simulatedTransitionEndDelay);\n      (0, _deferred.when)(transitionEndFired, simulatedTransitionEndFired).fail(function () {\n        deferred.resolve();\n      }.bind(this));\n    });\n    return deferred.promise();\n  },\n  _startAnimation: function ($element, config) {\n    $element.css({\n      transitionProperty: \"all\",\n      transitionDelay: config.delay + \"ms\",\n      transitionDuration: config.duration + \"ms\",\n      transitionTimingFunction: config.easing\n    });\n\n    if (\"string\" === typeof config.to) {\n      $element[0].className += \" \" + config.to;\n    } else {\n      if (config.to) {\n        setProps($element, config.to);\n      }\n    }\n  },\n  _finishTransition: function ($element) {\n    $element.css(\"transition\", \"none\");\n  },\n  _cleanup: function ($element, config) {\n    config.transitionAnimation.cleanup();\n\n    if (\"string\" === typeof config.from) {\n      $element.removeClass(config.from);\n      $element.removeClass(config.to);\n    }\n  },\n  stop: function ($element, config, jumpToEnd) {\n    if (!config) {\n      return;\n    }\n\n    if (jumpToEnd) {\n      config.transitionAnimation.finish();\n    } else {\n      if ((0, _type.isPlainObject)(config.to)) {\n        (0, _iterator.each)(config.to, function (key) {\n          $element.css(key, $element.css(key));\n        });\n      }\n\n      this._finishTransition($element);\n\n      this._cleanup($element, config);\n    }\n  }\n};\nvar FrameAnimationStrategy = {\n  initAnimation: function ($element, config) {\n    setProps($element, config.from);\n  },\n  animate: function ($element, config) {\n    var deferred = new _deferred.Deferred();\n    var that = this;\n\n    if (!config) {\n      return deferred.reject().promise();\n    }\n\n    (0, _iterator.each)(config.to, function (prop) {\n      if (void 0 === config.from[prop]) {\n        config.from[prop] = that._normalizeValue($element.css(prop));\n      }\n    });\n\n    if (config.to[TRANSFORM_PROP]) {\n      config.from[TRANSFORM_PROP] = that._parseTransform(config.from[TRANSFORM_PROP]);\n      config.to[TRANSFORM_PROP] = that._parseTransform(config.to[TRANSFORM_PROP]);\n    }\n\n    config.frameAnimation = {\n      to: config.to,\n      from: config.from,\n      currentValue: config.from,\n      easing: (0, _easing.convertTransitionTimingFuncToEasing)(config.easing),\n      duration: config.duration,\n      startTime: new Date().valueOf(),\n      finish: function () {\n        this.currentValue = this.to;\n        this.draw();\n        (0, _frame.cancelAnimationFrame)(config.frameAnimation.animationFrameId);\n        deferred.resolve();\n      },\n      draw: function () {\n        if (config.draw) {\n          config.draw(this.currentValue);\n          return;\n        }\n\n        var currentValue = (0, _extend.extend)({}, this.currentValue);\n\n        if (currentValue[TRANSFORM_PROP]) {\n          currentValue[TRANSFORM_PROP] = (0, _iterator.map)(currentValue[TRANSFORM_PROP], function (value, prop) {\n            if (\"translate\" === prop) {\n              return (0, _translator.getTranslateCss)(value);\n            } else {\n              if (\"scale\" === prop) {\n                return \"scale(\" + value + \")\";\n              } else {\n                if (\"rotate\" === prop.substr(0, prop.length - 1)) {\n                  return prop + \"(\" + value + \"deg)\";\n                }\n              }\n            }\n          }).join(\" \");\n        }\n\n        $element.css(currentValue);\n      }\n    };\n\n    if (config.delay) {\n      config.frameAnimation.startTime += config.delay;\n      config.frameAnimation.delayTimeout = setTimeout(function () {\n        that._startAnimation($element, config);\n      }, config.delay);\n    } else {\n      that._startAnimation($element, config);\n    }\n\n    return deferred.promise();\n  },\n  _startAnimation: function ($element, config) {\n    _events_engine.default.off($element, removeEventName);\n\n    _events_engine.default.on($element, removeEventName, function () {\n      if (config.frameAnimation) {\n        (0, _frame.cancelAnimationFrame)(config.frameAnimation.animationFrameId);\n      }\n    });\n\n    this._animationStep($element, config);\n  },\n  _parseTransform: function (transformString) {\n    var result = {};\n    (0, _iterator.each)(transformString.match(/\\w+\\d*\\w*\\([^)]*\\)\\s*/g), function (i, part) {\n      var translateData = (0, _translator.parseTranslate)(part);\n      var scaleData = part.match(/scale\\((.+?)\\)/);\n      var rotateData = part.match(/(rotate.)\\((.+)deg\\)/);\n\n      if (translateData) {\n        result.translate = translateData;\n      }\n\n      if (scaleData && scaleData[1]) {\n        result.scale = parseFloat(scaleData[1]);\n      }\n\n      if (rotateData && rotateData[1]) {\n        result[rotateData[1]] = parseFloat(rotateData[2]);\n      }\n    });\n    return result;\n  },\n  stop: function ($element, config, jumpToEnd) {\n    var frameAnimation = config && config.frameAnimation;\n\n    if (!frameAnimation) {\n      return;\n    }\n\n    (0, _frame.cancelAnimationFrame)(frameAnimation.animationFrameId);\n    clearTimeout(frameAnimation.delayTimeout);\n\n    if (jumpToEnd) {\n      frameAnimation.finish();\n    }\n\n    delete config.frameAnimation;\n  },\n  _animationStep: function ($element, config) {\n    var frameAnimation = config && config.frameAnimation;\n\n    if (!frameAnimation) {\n      return;\n    }\n\n    var now = new Date().valueOf();\n\n    if (now >= frameAnimation.startTime + frameAnimation.duration) {\n      frameAnimation.finish();\n      return;\n    }\n\n    frameAnimation.currentValue = this._calcStepValue(frameAnimation, now - frameAnimation.startTime);\n    frameAnimation.draw();\n    var that = this;\n    frameAnimation.animationFrameId = (0, _frame.requestAnimationFrame)(function () {\n      that._animationStep($element, config);\n    });\n  },\n  _calcStepValue: function (frameAnimation, currentDuration) {\n    var calcValueRecursively = function calcValueRecursively(from, to) {\n      var result = Array.isArray(to) ? [] : {};\n\n      var calcEasedValue = function (propName) {\n        var x = currentDuration / frameAnimation.duration;\n        var t = currentDuration;\n        var b = 1 * from[propName];\n        var c = to[propName] - from[propName];\n        var d = frameAnimation.duration;\n        return (0, _easing.getEasing)(frameAnimation.easing)(x, t, b, c, d);\n      };\n\n      (0, _iterator.each)(to, function (propName, endPropValue) {\n        if (\"string\" === typeof endPropValue && false === parseFloat(endPropValue, 10)) {\n          return true;\n        }\n\n        result[propName] = \"object\" === _typeof(endPropValue) ? calcValueRecursively(from[propName], endPropValue) : calcEasedValue(propName);\n      });\n      return result;\n    };\n\n    return calcValueRecursively(frameAnimation.from, frameAnimation.to);\n  },\n  _normalizeValue: function (value) {\n    var numericValue = parseFloat(value, 10);\n\n    if (false === numericValue) {\n      return value;\n    }\n\n    return numericValue;\n  }\n};\nvar FallbackToNoAnimationStrategy = {\n  initAnimation: function () {},\n  animate: function () {\n    return new _deferred.Deferred().resolve().promise();\n  },\n  stop: _common.noop,\n  isSynchronous: true\n};\n\nvar getAnimationStrategy = function (config) {\n  config = config || {};\n  var animationStrategies = {\n    transition: (0, _support.transition)() ? TransitionAnimationStrategy : FrameAnimationStrategy,\n    frame: FrameAnimationStrategy,\n    noAnimation: FallbackToNoAnimationStrategy\n  };\n  var strategy = config.strategy || \"transition\";\n\n  if (\"css\" === config.type && !(0, _support.transition)()) {\n    strategy = \"noAnimation\";\n  }\n\n  return animationStrategies[strategy];\n};\n\nvar baseConfigValidator = function (config, animationType, validate, typeMessage) {\n  (0, _iterator.each)([\"from\", \"to\"], function () {\n    if (!validate(config[this])) {\n      throw _errors.default.Error(\"E0010\", animationType, this, typeMessage);\n    }\n  });\n};\n\nvar isObjectConfigValidator = function (config, animationType) {\n  return baseConfigValidator(config, animationType, function (target) {\n    return (0, _type.isPlainObject)(target);\n  }, \"a plain object\");\n};\n\nvar isStringConfigValidator = function (config, animationType) {\n  return baseConfigValidator(config, animationType, function (target) {\n    return \"string\" === typeof target;\n  }, \"a string\");\n};\n\nvar CustomAnimationConfigurator = {\n  setup: function () {}\n};\nvar CssAnimationConfigurator = {\n  validateConfig: function (config) {\n    isStringConfigValidator(config, \"css\");\n  },\n  setup: function () {}\n};\nvar positionAliases = {\n  top: {\n    my: \"bottom center\",\n    at: \"top center\"\n  },\n  bottom: {\n    my: \"top center\",\n    at: \"bottom center\"\n  },\n  right: {\n    my: \"left center\",\n    at: \"right center\"\n  },\n  left: {\n    my: \"right center\",\n    at: \"left center\"\n  }\n};\nvar SlideAnimationConfigurator = {\n  validateConfig: function (config) {\n    isObjectConfigValidator(config, \"slide\");\n  },\n  setup: function ($element, config) {\n    var location = (0, _translator.locate)($element);\n\n    if (\"slide\" !== config.type) {\n      var positioningConfig = \"slideIn\" === config.type ? config.from : config.to;\n      positioningConfig.position = (0, _extend.extend)({\n        of: window\n      }, positionAliases[config.direction]);\n      setupPosition($element, positioningConfig);\n    }\n\n    this._setUpConfig(location, config.from);\n\n    this._setUpConfig(location, config.to);\n\n    (0, _translator.clearCache)($element);\n  },\n  _setUpConfig: function (location, config) {\n    config.left = \"left\" in config ? config.left : \"+=0\";\n    config.top = \"top\" in config ? config.top : \"+=0\";\n\n    this._initNewPosition(location, config);\n  },\n  _initNewPosition: function (location, config) {\n    var position = {\n      left: config.left,\n      top: config.top\n    };\n    delete config.left;\n    delete config.top;\n\n    var relativeValue = this._getRelativeValue(position.left);\n\n    if (void 0 !== relativeValue) {\n      position.left = relativeValue + location.left;\n    } else {\n      config.left = 0;\n    }\n\n    relativeValue = this._getRelativeValue(position.top);\n\n    if (void 0 !== relativeValue) {\n      position.top = relativeValue + location.top;\n    } else {\n      config.top = 0;\n    }\n\n    config[TRANSFORM_PROP] = (0, _translator.getTranslateCss)({\n      x: position.left,\n      y: position.top\n    });\n  },\n  _getRelativeValue: function (value) {\n    var relativeValue;\n\n    if (\"string\" === typeof value && (relativeValue = RELATIVE_VALUE_REGEX.exec(value))) {\n      return parseInt(relativeValue[1] + \"1\") * relativeValue[2];\n    }\n  }\n};\nvar FadeAnimationConfigurator = {\n  setup: function ($element, config) {\n    var from = config.from;\n    var fromOpacity = (0, _type.isPlainObject)(from) ? config.skipElementInitialStyles ? 0 : $element.css(\"opacity\") : String(from);\n    var toOpacity;\n\n    switch (config.type) {\n      case \"fadeIn\":\n        toOpacity = 1;\n        break;\n\n      case \"fadeOut\":\n        toOpacity = 0;\n        break;\n\n      default:\n        toOpacity = String(config.to);\n    }\n\n    config.from = {\n      visibility: \"visible\",\n      opacity: fromOpacity\n    };\n    config.to = {\n      opacity: toOpacity\n    };\n  }\n};\nvar PopAnimationConfigurator = {\n  validateConfig: function (config) {\n    isObjectConfigValidator(config, \"pop\");\n  },\n  setup: function ($element, config) {\n    var from = config.from;\n    var to = config.to;\n    var fromOpacity = \"opacity\" in from ? from.opacity : $element.css(\"opacity\");\n    var toOpacity = \"opacity\" in to ? to.opacity : 1;\n    var fromScale = \"scale\" in from ? from.scale : 0;\n    var toScale = \"scale\" in to ? to.scale : 1;\n    config.from = {\n      opacity: fromOpacity\n    };\n    var translate = (0, _translator.getTranslate)($element);\n    config.from[TRANSFORM_PROP] = this._getCssTransform(translate, fromScale);\n    config.to = {\n      opacity: toOpacity\n    };\n    config.to[TRANSFORM_PROP] = this._getCssTransform(translate, toScale);\n  },\n  _getCssTransform: function (translate, scale) {\n    return (0, _translator.getTranslateCss)(translate) + \"scale(\" + scale + \")\";\n  }\n};\nvar animationConfigurators = {\n  custom: CustomAnimationConfigurator,\n  slide: SlideAnimationConfigurator,\n  slideIn: SlideAnimationConfigurator,\n  slideOut: SlideAnimationConfigurator,\n  fade: FadeAnimationConfigurator,\n  fadeIn: FadeAnimationConfigurator,\n  fadeOut: FadeAnimationConfigurator,\n  pop: PopAnimationConfigurator,\n  css: CssAnimationConfigurator\n};\n\nvar getAnimationConfigurator = function (config) {\n  var result = animationConfigurators[config.type];\n\n  if (!result) {\n    throw _errors.default.Error(\"E0011\", config.type);\n  }\n\n  return result;\n};\n\nvar defaultJSConfig = {\n  type: \"custom\",\n  from: {},\n  to: {},\n  duration: 400,\n  start: _common.noop,\n  complete: _common.noop,\n  easing: \"ease\",\n  delay: 0\n};\nvar defaultCssConfig = {\n  duration: 400,\n  easing: \"ease\",\n  delay: 0\n};\n\nfunction setupAnimationOnElement() {\n  var animation = this;\n  var $element = animation.element;\n  var config = animation.config;\n  setupPosition($element, config.from);\n  setupPosition($element, config.to);\n  animation.configurator.setup($element, config);\n  $element.data(ANIM_DATA_KEY, animation);\n\n  if (fx.off) {\n    config.duration = 0;\n    config.delay = 0;\n  }\n\n  animation.strategy.initAnimation($element, config);\n\n  if (config.start) {\n    var element = (0, _element.getPublicElement)($element);\n    config.start.apply(this, [element, config]);\n  }\n}\n\nvar onElementAnimationComplete = function (animation) {\n  var $element = animation.element;\n  var config = animation.config;\n  $element.removeData(ANIM_DATA_KEY);\n\n  if (config.complete) {\n    var element = (0, _element.getPublicElement)($element);\n    config.complete.apply(this, [element, config]);\n  }\n\n  animation.deferred.resolveWith(this, [$element, config]);\n};\n\nvar startAnimationOnElement = function () {\n  var animation = this;\n  var $element = animation.element;\n  var config = animation.config;\n  animation.isStarted = true;\n  return animation.strategy.animate($element, config).done(function () {\n    onElementAnimationComplete(animation);\n  }).fail(function () {\n    animation.deferred.rejectWith(this, [$element, config]);\n  });\n};\n\nvar stopAnimationOnElement = function (jumpToEnd) {\n  var animation = this;\n  var $element = animation.element;\n  var config = animation.config;\n  clearTimeout(animation.startTimeout);\n\n  if (!animation.isStarted) {\n    animation.start();\n  }\n\n  animation.strategy.stop($element, config, jumpToEnd);\n};\n\nvar scopedRemoveEvent = (0, _index.addNamespace)(_remove_event.default, \"dxFXStartAnimation\");\n\nvar subscribeToRemoveEvent = function (animation) {\n  _events_engine.default.off(animation.element, scopedRemoveEvent);\n\n  _events_engine.default.on(animation.element, scopedRemoveEvent, function () {\n    fx.stop(animation.element);\n  });\n\n  animation.deferred.always(function () {\n    _events_engine.default.off(animation.element, scopedRemoveEvent);\n  });\n};\n\nvar createAnimation = function (element, initialConfig) {\n  var defaultConfig = \"css\" === initialConfig.type ? defaultCssConfig : defaultJSConfig;\n  var config = (0, _extend.extend)(true, {}, defaultConfig, initialConfig);\n  var configurator = getAnimationConfigurator(config);\n  var strategy = getAnimationStrategy(config);\n  var animation = {\n    element: (0, _renderer.default)(element),\n    config: config,\n    configurator: configurator,\n    strategy: strategy,\n    isSynchronous: strategy.isSynchronous,\n    setup: setupAnimationOnElement,\n    start: startAnimationOnElement,\n    stop: stopAnimationOnElement,\n    deferred: new _deferred.Deferred()\n  };\n\n  if ((0, _type.isFunction)(configurator.validateConfig)) {\n    configurator.validateConfig(config);\n  }\n\n  subscribeToRemoveEvent(animation);\n  return animation;\n};\n\nvar animate = function (element, config) {\n  var $element = (0, _renderer.default)(element);\n\n  if (!$element.length) {\n    return new _deferred.Deferred().resolve().promise();\n  }\n\n  var animation = createAnimation($element, config);\n  pushInAnimationQueue($element, animation);\n  return animation.deferred.promise();\n};\n\nfunction pushInAnimationQueue($element, animation) {\n  var queueData = getAnimQueueData($element);\n  writeAnimQueueData($element, queueData);\n  queueData.push(animation);\n\n  if (!isAnimating($element)) {\n    shiftFromAnimationQueue($element, queueData);\n  }\n}\n\nfunction getAnimQueueData($element) {\n  return $element.data(ANIM_QUEUE_KEY) || [];\n}\n\nfunction writeAnimQueueData($element, queueData) {\n  $element.data(ANIM_QUEUE_KEY, queueData);\n}\n\nvar destroyAnimQueueData = function ($element) {\n  $element.removeData(ANIM_QUEUE_KEY);\n};\n\nfunction isAnimating($element) {\n  return !!$element.data(ANIM_DATA_KEY);\n}\n\nfunction shiftFromAnimationQueue($element, queueData) {\n  queueData = getAnimQueueData($element);\n\n  if (!queueData.length) {\n    return;\n  }\n\n  var animation = queueData.shift();\n\n  if (0 === queueData.length) {\n    destroyAnimQueueData($element);\n  }\n\n  executeAnimation(animation).done(function () {\n    if (!isAnimating($element)) {\n      shiftFromAnimationQueue($element);\n    }\n  });\n}\n\nfunction executeAnimation(animation) {\n  animation.setup();\n\n  if (fx.off || animation.isSynchronous) {\n    animation.start();\n  } else {\n    animation.startTimeout = setTimeout(function () {\n      animation.start();\n    });\n  }\n\n  return animation.deferred.promise();\n}\n\nfunction setupPosition($element, config) {\n  if (!config || !config.position) {\n    return;\n  }\n\n  var win = (0, _renderer.default)(window);\n  var left = 0;\n  var top = 0;\n\n  var position = _position.default.calculate($element, config.position);\n\n  var offset = $element.offset();\n  var currentPosition = $element.position();\n\n  if (currentPosition.top > offset.top) {\n    top = win.scrollTop();\n  }\n\n  if (currentPosition.left > offset.left) {\n    left = win.scrollLeft();\n  }\n\n  (0, _extend.extend)(config, {\n    left: position.h.location - offset.left + currentPosition.left - left,\n    top: position.v.location - offset.top + currentPosition.top - top\n  });\n  delete config.position;\n}\n\nfunction setProps($element, props) {\n  (0, _iterator.each)(props, function (key, value) {\n    try {\n      $element.css(key, (0, _type.isFunction)(value) ? value() : value);\n    } catch (e) {}\n  });\n}\n\nvar stop = function (element, jumpToEnd) {\n  var $element = (0, _renderer.default)(element);\n  var queueData = getAnimQueueData($element);\n  (0, _iterator.each)(queueData, function (_, animation) {\n    animation.config.delay = 0;\n    animation.config.duration = 0;\n    animation.isSynchronous = true;\n  });\n\n  if (!isAnimating($element)) {\n    shiftFromAnimationQueue($element, queueData);\n  }\n\n  var animation = $element.data(ANIM_DATA_KEY);\n\n  if (animation) {\n    animation.stop(jumpToEnd);\n  }\n\n  $element.removeData(ANIM_DATA_KEY);\n  destroyAnimQueueData($element);\n};\n\nvar fx = {\n  off: false,\n  animationTypes: animationConfigurators,\n  animate: animate,\n  createAnimation: createAnimation,\n  isAnimating: isAnimating,\n  stop: stop,\n  _simulatedTransitionEndDelay: 100\n};\nvar _default = fx;\nexports.default = _default;\nmodule.exports = exports.default;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/animation/fx.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_window","_events_engine","_errors","_element","_extend","_type","_iterator","_translator","_easing","_frame","_support","_position","_remove_event","_index","_deferred","_common","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","window","getWindow","removeEventName","addNamespace","RELATIVE_VALUE_REGEX","ANIM_DATA_KEY","ANIM_QUEUE_KEY","TRANSFORM_PROP","TransitionAnimationStrategy","initAnimation","$element","config","css","transitionProperty","from","addClass","setProps","that","deferred","Deferred","cleanupWhen","transitionAnimation","finish","_finishTransition","when","always","_cleanup","resolveWith","_completeAnimationCallback","done","fail","rejectWith","duration","animate","_startAnimation","promise","startTime","Date","now","delay","transitionEndFired","simulatedTransitionEndFired","simulatedEndEventTimer","transitionEndEventFullName","transitionEndEventName","cleanup","clearTimeout","waitForJSCompleteTimer","off","one","reject","on","stop","setTimeout","fx","_simulatedTransitionEndDelay","resolve","bind","transitionDelay","transitionDuration","transitionTimingFunction","easing","to","className","removeClass","jumpToEnd","isPlainObject","each","key","FrameAnimationStrategy","prop","_normalizeValue","_parseTransform","frameAnimation","currentValue","convertTransitionTimingFuncToEasing","valueOf","draw","cancelAnimationFrame","animationFrameId","extend","map","value","getTranslateCss","substr","length","join","delayTimeout","_animationStep","transformString","result","match","i","part","translateData","parseTranslate","scaleData","rotateData","translate","scale","parseFloat","_calcStepValue","requestAnimationFrame","currentDuration","calcValueRecursively","Array","isArray","calcEasedValue","propName","x","t","b","c","d","getEasing","endPropValue","numericValue","FallbackToNoAnimationStrategy","noop","isSynchronous","getAnimationStrategy","animationStrategies","transition","frame","noAnimation","strategy","type","baseConfigValidator","animationType","validate","typeMessage","Error","isObjectConfigValidator","target","isStringConfigValidator","CustomAnimationConfigurator","setup","CssAnimationConfigurator","validateConfig","positionAliases","top","my","at","bottom","right","left","SlideAnimationConfigurator","location","locate","positioningConfig","position","of","direction","setupPosition","_setUpConfig","clearCache","_initNewPosition","relativeValue","_getRelativeValue","y","exec","parseInt","FadeAnimationConfigurator","fromOpacity","skipElementInitialStyles","String","toOpacity","visibility","opacity","PopAnimationConfigurator","fromScale","toScale","getTranslate","_getCssTransform","animationConfigurators","custom","slide","slideIn","slideOut","fade","fadeIn","fadeOut","pop","getAnimationConfigurator","defaultJSConfig","start","complete","defaultCssConfig","setupAnimationOnElement","animation","element","configurator","data","getPublicElement","apply","onElementAnimationComplete","removeData","startAnimationOnElement","isStarted","stopAnimationOnElement","startTimeout","scopedRemoveEvent","subscribeToRemoveEvent","createAnimation","initialConfig","defaultConfig","isFunction","pushInAnimationQueue","queueData","getAnimQueueData","writeAnimQueueData","push","isAnimating","shiftFromAnimationQueue","destroyAnimQueueData","shift","executeAnimation","win","calculate","offset","currentPosition","scrollTop","scrollLeft","h","v","props","e","_","animationTypes","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (animation/fx.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\r\nvar _window = require(\"../core/utils/window\");\r\nvar _events_engine = _interopRequireDefault(require(\"../events/core/events_engine\"));\r\nvar _errors = _interopRequireDefault(require(\"../core/errors\"));\r\nvar _element = require(\"../core/element\");\r\nvar _extend = require(\"../core/utils/extend\");\r\nvar _type = require(\"../core/utils/type\");\r\nvar _iterator = require(\"../core/utils/iterator\");\r\nvar _translator = require(\"./translator\");\r\nvar _easing = require(\"./easing\");\r\nvar _frame = require(\"./frame\");\r\nvar _support = require(\"../core/utils/support\");\r\nvar _position = _interopRequireDefault(require(\"./position\"));\r\nvar _remove_event = _interopRequireDefault(require(\"../core/remove_event\"));\r\nvar _index = require(\"../events/utils/index\");\r\nvar _deferred = require(\"../core/utils/deferred\");\r\nvar _common = require(\"../core/utils/common\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nvar window = (0, _window.getWindow)();\r\nvar removeEventName = (0, _index.addNamespace)(_remove_event.default, \"dxFX\");\r\nvar RELATIVE_VALUE_REGEX = /^([+-])=(.*)/i;\r\nvar ANIM_DATA_KEY = \"dxAnimData\";\r\nvar ANIM_QUEUE_KEY = \"dxAnimQueue\";\r\nvar TRANSFORM_PROP = \"transform\";\r\nvar TransitionAnimationStrategy = {\r\n    initAnimation: function($element, config) {\r\n        $element.css({\r\n            transitionProperty: \"none\"\r\n        });\r\n        if (\"string\" === typeof config.from) {\r\n            $element.addClass(config.from)\r\n        } else {\r\n            setProps($element, config.from)\r\n        }\r\n        var that = this;\r\n        var deferred = new _deferred.Deferred;\r\n        var cleanupWhen = config.cleanupWhen;\r\n        config.transitionAnimation = {\r\n            deferred: deferred,\r\n            finish: function() {\r\n                that._finishTransition($element);\r\n                if (cleanupWhen) {\r\n                    (0, _deferred.when)(deferred, cleanupWhen).always(function() {\r\n                        that._cleanup($element, config)\r\n                    })\r\n                } else {\r\n                    that._cleanup($element, config)\r\n                }\r\n                deferred.resolveWith($element, [config, $element])\r\n            }\r\n        };\r\n        this._completeAnimationCallback($element, config).done(function() {\r\n            config.transitionAnimation.finish()\r\n        }).fail(function() {\r\n            deferred.rejectWith($element, [config, $element])\r\n        });\r\n        if (!config.duration) {\r\n            config.transitionAnimation.finish()\r\n        }\r\n        $element.css(\"transform\")\r\n    },\r\n    animate: function($element, config) {\r\n        this._startAnimation($element, config);\r\n        return config.transitionAnimation.deferred.promise()\r\n    },\r\n    _completeAnimationCallback: function($element, config) {\r\n        var that = this;\r\n        var startTime = Date.now() + config.delay;\r\n        var deferred = new _deferred.Deferred;\r\n        var transitionEndFired = new _deferred.Deferred;\r\n        var simulatedTransitionEndFired = new _deferred.Deferred;\r\n        var simulatedEndEventTimer;\r\n        var transitionEndEventFullName = (0, _support.transitionEndEventName)() + \".dxFX\";\r\n        config.transitionAnimation.cleanup = function() {\r\n            clearTimeout(simulatedEndEventTimer);\r\n            clearTimeout(waitForJSCompleteTimer);\r\n            _events_engine.default.off($element, transitionEndEventFullName);\r\n            _events_engine.default.off($element, removeEventName)\r\n        };\r\n        _events_engine.default.one($element, transitionEndEventFullName, function() {\r\n            if (Date.now() - startTime >= config.duration) {\r\n                transitionEndFired.reject()\r\n            }\r\n        });\r\n        _events_engine.default.off($element, removeEventName);\r\n        _events_engine.default.on($element, removeEventName, function() {\r\n            that.stop($element, config);\r\n            deferred.reject()\r\n        });\r\n        var waitForJSCompleteTimer = setTimeout(function() {\r\n            simulatedEndEventTimer = setTimeout(function() {\r\n                simulatedTransitionEndFired.reject()\r\n            }, config.duration + config.delay + fx._simulatedTransitionEndDelay);\r\n            (0, _deferred.when)(transitionEndFired, simulatedTransitionEndFired).fail(function() {\r\n                deferred.resolve()\r\n            }.bind(this))\r\n        });\r\n        return deferred.promise()\r\n    },\r\n    _startAnimation: function($element, config) {\r\n        $element.css({\r\n            transitionProperty: \"all\",\r\n            transitionDelay: config.delay + \"ms\",\r\n            transitionDuration: config.duration + \"ms\",\r\n            transitionTimingFunction: config.easing\r\n        });\r\n        if (\"string\" === typeof config.to) {\r\n            $element[0].className += \" \" + config.to\r\n        } else {\r\n            if (config.to) {\r\n                setProps($element, config.to)\r\n            }\r\n        }\r\n    },\r\n    _finishTransition: function($element) {\r\n        $element.css(\"transition\", \"none\")\r\n    },\r\n    _cleanup: function($element, config) {\r\n        config.transitionAnimation.cleanup();\r\n        if (\"string\" === typeof config.from) {\r\n            $element.removeClass(config.from);\r\n            $element.removeClass(config.to)\r\n        }\r\n    },\r\n    stop: function($element, config, jumpToEnd) {\r\n        if (!config) {\r\n            return\r\n        }\r\n        if (jumpToEnd) {\r\n            config.transitionAnimation.finish()\r\n        } else {\r\n            if ((0, _type.isPlainObject)(config.to)) {\r\n                (0, _iterator.each)(config.to, function(key) {\r\n                    $element.css(key, $element.css(key))\r\n                })\r\n            }\r\n            this._finishTransition($element);\r\n            this._cleanup($element, config)\r\n        }\r\n    }\r\n};\r\nvar FrameAnimationStrategy = {\r\n    initAnimation: function($element, config) {\r\n        setProps($element, config.from)\r\n    },\r\n    animate: function($element, config) {\r\n        var deferred = new _deferred.Deferred;\r\n        var that = this;\r\n        if (!config) {\r\n            return deferred.reject().promise()\r\n        }(0, _iterator.each)(config.to, function(prop) {\r\n            if (void 0 === config.from[prop]) {\r\n                config.from[prop] = that._normalizeValue($element.css(prop))\r\n            }\r\n        });\r\n        if (config.to[TRANSFORM_PROP]) {\r\n            config.from[TRANSFORM_PROP] = that._parseTransform(config.from[TRANSFORM_PROP]);\r\n            config.to[TRANSFORM_PROP] = that._parseTransform(config.to[TRANSFORM_PROP])\r\n        }\r\n        config.frameAnimation = {\r\n            to: config.to,\r\n            from: config.from,\r\n            currentValue: config.from,\r\n            easing: (0, _easing.convertTransitionTimingFuncToEasing)(config.easing),\r\n            duration: config.duration,\r\n            startTime: (new Date).valueOf(),\r\n            finish: function() {\r\n                this.currentValue = this.to;\r\n                this.draw();\r\n                (0, _frame.cancelAnimationFrame)(config.frameAnimation.animationFrameId);\r\n                deferred.resolve()\r\n            },\r\n            draw: function() {\r\n                if (config.draw) {\r\n                    config.draw(this.currentValue);\r\n                    return\r\n                }\r\n                var currentValue = (0, _extend.extend)({}, this.currentValue);\r\n                if (currentValue[TRANSFORM_PROP]) {\r\n                    currentValue[TRANSFORM_PROP] = (0, _iterator.map)(currentValue[TRANSFORM_PROP], function(value, prop) {\r\n                        if (\"translate\" === prop) {\r\n                            return (0, _translator.getTranslateCss)(value)\r\n                        } else {\r\n                            if (\"scale\" === prop) {\r\n                                return \"scale(\" + value + \")\"\r\n                            } else {\r\n                                if (\"rotate\" === prop.substr(0, prop.length - 1)) {\r\n                                    return prop + \"(\" + value + \"deg)\"\r\n                                }\r\n                            }\r\n                        }\r\n                    }).join(\" \")\r\n                }\r\n                $element.css(currentValue)\r\n            }\r\n        };\r\n        if (config.delay) {\r\n            config.frameAnimation.startTime += config.delay;\r\n            config.frameAnimation.delayTimeout = setTimeout(function() {\r\n                that._startAnimation($element, config)\r\n            }, config.delay)\r\n        } else {\r\n            that._startAnimation($element, config)\r\n        }\r\n        return deferred.promise()\r\n    },\r\n    _startAnimation: function($element, config) {\r\n        _events_engine.default.off($element, removeEventName);\r\n        _events_engine.default.on($element, removeEventName, function() {\r\n            if (config.frameAnimation) {\r\n                (0, _frame.cancelAnimationFrame)(config.frameAnimation.animationFrameId)\r\n            }\r\n        });\r\n        this._animationStep($element, config)\r\n    },\r\n    _parseTransform: function(transformString) {\r\n        var result = {};\r\n        (0, _iterator.each)(transformString.match(/\\w+\\d*\\w*\\([^)]*\\)\\s*/g), function(i, part) {\r\n            var translateData = (0, _translator.parseTranslate)(part);\r\n            var scaleData = part.match(/scale\\((.+?)\\)/);\r\n            var rotateData = part.match(/(rotate.)\\((.+)deg\\)/);\r\n            if (translateData) {\r\n                result.translate = translateData\r\n            }\r\n            if (scaleData && scaleData[1]) {\r\n                result.scale = parseFloat(scaleData[1])\r\n            }\r\n            if (rotateData && rotateData[1]) {\r\n                result[rotateData[1]] = parseFloat(rotateData[2])\r\n            }\r\n        });\r\n        return result\r\n    },\r\n    stop: function($element, config, jumpToEnd) {\r\n        var frameAnimation = config && config.frameAnimation;\r\n        if (!frameAnimation) {\r\n            return\r\n        }(0, _frame.cancelAnimationFrame)(frameAnimation.animationFrameId);\r\n        clearTimeout(frameAnimation.delayTimeout);\r\n        if (jumpToEnd) {\r\n            frameAnimation.finish()\r\n        }\r\n        delete config.frameAnimation\r\n    },\r\n    _animationStep: function($element, config) {\r\n        var frameAnimation = config && config.frameAnimation;\r\n        if (!frameAnimation) {\r\n            return\r\n        }\r\n        var now = (new Date).valueOf();\r\n        if (now >= frameAnimation.startTime + frameAnimation.duration) {\r\n            frameAnimation.finish();\r\n            return\r\n        }\r\n        frameAnimation.currentValue = this._calcStepValue(frameAnimation, now - frameAnimation.startTime);\r\n        frameAnimation.draw();\r\n        var that = this;\r\n        frameAnimation.animationFrameId = (0, _frame.requestAnimationFrame)(function() {\r\n            that._animationStep($element, config)\r\n        })\r\n    },\r\n    _calcStepValue: function(frameAnimation, currentDuration) {\r\n        var calcValueRecursively = function calcValueRecursively(from, to) {\r\n            var result = Array.isArray(to) ? [] : {};\r\n            var calcEasedValue = function(propName) {\r\n                var x = currentDuration / frameAnimation.duration;\r\n                var t = currentDuration;\r\n                var b = 1 * from[propName];\r\n                var c = to[propName] - from[propName];\r\n                var d = frameAnimation.duration;\r\n                return (0, _easing.getEasing)(frameAnimation.easing)(x, t, b, c, d)\r\n            };\r\n            (0, _iterator.each)(to, function(propName, endPropValue) {\r\n                if (\"string\" === typeof endPropValue && false === parseFloat(endPropValue, 10)) {\r\n                    return true\r\n                }\r\n                result[propName] = \"object\" === _typeof(endPropValue) ? calcValueRecursively(from[propName], endPropValue) : calcEasedValue(propName)\r\n            });\r\n            return result\r\n        };\r\n        return calcValueRecursively(frameAnimation.from, frameAnimation.to)\r\n    },\r\n    _normalizeValue: function(value) {\r\n        var numericValue = parseFloat(value, 10);\r\n        if (false === numericValue) {\r\n            return value\r\n        }\r\n        return numericValue\r\n    }\r\n};\r\nvar FallbackToNoAnimationStrategy = {\r\n    initAnimation: function() {},\r\n    animate: function() {\r\n        return (new _deferred.Deferred).resolve().promise()\r\n    },\r\n    stop: _common.noop,\r\n    isSynchronous: true\r\n};\r\nvar getAnimationStrategy = function(config) {\r\n    config = config || {};\r\n    var animationStrategies = {\r\n        transition: (0, _support.transition)() ? TransitionAnimationStrategy : FrameAnimationStrategy,\r\n        frame: FrameAnimationStrategy,\r\n        noAnimation: FallbackToNoAnimationStrategy\r\n    };\r\n    var strategy = config.strategy || \"transition\";\r\n    if (\"css\" === config.type && !(0, _support.transition)()) {\r\n        strategy = \"noAnimation\"\r\n    }\r\n    return animationStrategies[strategy]\r\n};\r\nvar baseConfigValidator = function(config, animationType, validate, typeMessage) {\r\n    (0, _iterator.each)([\"from\", \"to\"], function() {\r\n        if (!validate(config[this])) {\r\n            throw _errors.default.Error(\"E0010\", animationType, this, typeMessage)\r\n        }\r\n    })\r\n};\r\nvar isObjectConfigValidator = function(config, animationType) {\r\n    return baseConfigValidator(config, animationType, function(target) {\r\n        return (0, _type.isPlainObject)(target)\r\n    }, \"a plain object\")\r\n};\r\nvar isStringConfigValidator = function(config, animationType) {\r\n    return baseConfigValidator(config, animationType, function(target) {\r\n        return \"string\" === typeof target\r\n    }, \"a string\")\r\n};\r\nvar CustomAnimationConfigurator = {\r\n    setup: function() {}\r\n};\r\nvar CssAnimationConfigurator = {\r\n    validateConfig: function(config) {\r\n        isStringConfigValidator(config, \"css\")\r\n    },\r\n    setup: function() {}\r\n};\r\nvar positionAliases = {\r\n    top: {\r\n        my: \"bottom center\",\r\n        at: \"top center\"\r\n    },\r\n    bottom: {\r\n        my: \"top center\",\r\n        at: \"bottom center\"\r\n    },\r\n    right: {\r\n        my: \"left center\",\r\n        at: \"right center\"\r\n    },\r\n    left: {\r\n        my: \"right center\",\r\n        at: \"left center\"\r\n    }\r\n};\r\nvar SlideAnimationConfigurator = {\r\n    validateConfig: function(config) {\r\n        isObjectConfigValidator(config, \"slide\")\r\n    },\r\n    setup: function($element, config) {\r\n        var location = (0, _translator.locate)($element);\r\n        if (\"slide\" !== config.type) {\r\n            var positioningConfig = \"slideIn\" === config.type ? config.from : config.to;\r\n            positioningConfig.position = (0, _extend.extend)({\r\n                of: window\r\n            }, positionAliases[config.direction]);\r\n            setupPosition($element, positioningConfig)\r\n        }\r\n        this._setUpConfig(location, config.from);\r\n        this._setUpConfig(location, config.to);\r\n        (0, _translator.clearCache)($element)\r\n    },\r\n    _setUpConfig: function(location, config) {\r\n        config.left = \"left\" in config ? config.left : \"+=0\";\r\n        config.top = \"top\" in config ? config.top : \"+=0\";\r\n        this._initNewPosition(location, config)\r\n    },\r\n    _initNewPosition: function(location, config) {\r\n        var position = {\r\n            left: config.left,\r\n            top: config.top\r\n        };\r\n        delete config.left;\r\n        delete config.top;\r\n        var relativeValue = this._getRelativeValue(position.left);\r\n        if (void 0 !== relativeValue) {\r\n            position.left = relativeValue + location.left\r\n        } else {\r\n            config.left = 0\r\n        }\r\n        relativeValue = this._getRelativeValue(position.top);\r\n        if (void 0 !== relativeValue) {\r\n            position.top = relativeValue + location.top\r\n        } else {\r\n            config.top = 0\r\n        }\r\n        config[TRANSFORM_PROP] = (0, _translator.getTranslateCss)({\r\n            x: position.left,\r\n            y: position.top\r\n        })\r\n    },\r\n    _getRelativeValue: function(value) {\r\n        var relativeValue;\r\n        if (\"string\" === typeof value && (relativeValue = RELATIVE_VALUE_REGEX.exec(value))) {\r\n            return parseInt(relativeValue[1] + \"1\") * relativeValue[2]\r\n        }\r\n    }\r\n};\r\nvar FadeAnimationConfigurator = {\r\n    setup: function($element, config) {\r\n        var from = config.from;\r\n        var fromOpacity = (0, _type.isPlainObject)(from) ? config.skipElementInitialStyles ? 0 : $element.css(\"opacity\") : String(from);\r\n        var toOpacity;\r\n        switch (config.type) {\r\n            case \"fadeIn\":\r\n                toOpacity = 1;\r\n                break;\r\n            case \"fadeOut\":\r\n                toOpacity = 0;\r\n                break;\r\n            default:\r\n                toOpacity = String(config.to)\r\n        }\r\n        config.from = {\r\n            visibility: \"visible\",\r\n            opacity: fromOpacity\r\n        };\r\n        config.to = {\r\n            opacity: toOpacity\r\n        }\r\n    }\r\n};\r\nvar PopAnimationConfigurator = {\r\n    validateConfig: function(config) {\r\n        isObjectConfigValidator(config, \"pop\")\r\n    },\r\n    setup: function($element, config) {\r\n        var from = config.from;\r\n        var to = config.to;\r\n        var fromOpacity = \"opacity\" in from ? from.opacity : $element.css(\"opacity\");\r\n        var toOpacity = \"opacity\" in to ? to.opacity : 1;\r\n        var fromScale = \"scale\" in from ? from.scale : 0;\r\n        var toScale = \"scale\" in to ? to.scale : 1;\r\n        config.from = {\r\n            opacity: fromOpacity\r\n        };\r\n        var translate = (0, _translator.getTranslate)($element);\r\n        config.from[TRANSFORM_PROP] = this._getCssTransform(translate, fromScale);\r\n        config.to = {\r\n            opacity: toOpacity\r\n        };\r\n        config.to[TRANSFORM_PROP] = this._getCssTransform(translate, toScale)\r\n    },\r\n    _getCssTransform: function(translate, scale) {\r\n        return (0, _translator.getTranslateCss)(translate) + \"scale(\" + scale + \")\"\r\n    }\r\n};\r\nvar animationConfigurators = {\r\n    custom: CustomAnimationConfigurator,\r\n    slide: SlideAnimationConfigurator,\r\n    slideIn: SlideAnimationConfigurator,\r\n    slideOut: SlideAnimationConfigurator,\r\n    fade: FadeAnimationConfigurator,\r\n    fadeIn: FadeAnimationConfigurator,\r\n    fadeOut: FadeAnimationConfigurator,\r\n    pop: PopAnimationConfigurator,\r\n    css: CssAnimationConfigurator\r\n};\r\nvar getAnimationConfigurator = function(config) {\r\n    var result = animationConfigurators[config.type];\r\n    if (!result) {\r\n        throw _errors.default.Error(\"E0011\", config.type)\r\n    }\r\n    return result\r\n};\r\nvar defaultJSConfig = {\r\n    type: \"custom\",\r\n    from: {},\r\n    to: {},\r\n    duration: 400,\r\n    start: _common.noop,\r\n    complete: _common.noop,\r\n    easing: \"ease\",\r\n    delay: 0\r\n};\r\nvar defaultCssConfig = {\r\n    duration: 400,\r\n    easing: \"ease\",\r\n    delay: 0\r\n};\r\n\r\nfunction setupAnimationOnElement() {\r\n    var animation = this;\r\n    var $element = animation.element;\r\n    var config = animation.config;\r\n    setupPosition($element, config.from);\r\n    setupPosition($element, config.to);\r\n    animation.configurator.setup($element, config);\r\n    $element.data(ANIM_DATA_KEY, animation);\r\n    if (fx.off) {\r\n        config.duration = 0;\r\n        config.delay = 0\r\n    }\r\n    animation.strategy.initAnimation($element, config);\r\n    if (config.start) {\r\n        var element = (0, _element.getPublicElement)($element);\r\n        config.start.apply(this, [element, config])\r\n    }\r\n}\r\nvar onElementAnimationComplete = function(animation) {\r\n    var $element = animation.element;\r\n    var config = animation.config;\r\n    $element.removeData(ANIM_DATA_KEY);\r\n    if (config.complete) {\r\n        var element = (0, _element.getPublicElement)($element);\r\n        config.complete.apply(this, [element, config])\r\n    }\r\n    animation.deferred.resolveWith(this, [$element, config])\r\n};\r\nvar startAnimationOnElement = function() {\r\n    var animation = this;\r\n    var $element = animation.element;\r\n    var config = animation.config;\r\n    animation.isStarted = true;\r\n    return animation.strategy.animate($element, config).done(function() {\r\n        onElementAnimationComplete(animation)\r\n    }).fail(function() {\r\n        animation.deferred.rejectWith(this, [$element, config])\r\n    })\r\n};\r\nvar stopAnimationOnElement = function(jumpToEnd) {\r\n    var animation = this;\r\n    var $element = animation.element;\r\n    var config = animation.config;\r\n    clearTimeout(animation.startTimeout);\r\n    if (!animation.isStarted) {\r\n        animation.start()\r\n    }\r\n    animation.strategy.stop($element, config, jumpToEnd)\r\n};\r\nvar scopedRemoveEvent = (0, _index.addNamespace)(_remove_event.default, \"dxFXStartAnimation\");\r\nvar subscribeToRemoveEvent = function(animation) {\r\n    _events_engine.default.off(animation.element, scopedRemoveEvent);\r\n    _events_engine.default.on(animation.element, scopedRemoveEvent, function() {\r\n        fx.stop(animation.element)\r\n    });\r\n    animation.deferred.always(function() {\r\n        _events_engine.default.off(animation.element, scopedRemoveEvent)\r\n    })\r\n};\r\nvar createAnimation = function(element, initialConfig) {\r\n    var defaultConfig = \"css\" === initialConfig.type ? defaultCssConfig : defaultJSConfig;\r\n    var config = (0, _extend.extend)(true, {}, defaultConfig, initialConfig);\r\n    var configurator = getAnimationConfigurator(config);\r\n    var strategy = getAnimationStrategy(config);\r\n    var animation = {\r\n        element: (0, _renderer.default)(element),\r\n        config: config,\r\n        configurator: configurator,\r\n        strategy: strategy,\r\n        isSynchronous: strategy.isSynchronous,\r\n        setup: setupAnimationOnElement,\r\n        start: startAnimationOnElement,\r\n        stop: stopAnimationOnElement,\r\n        deferred: new _deferred.Deferred\r\n    };\r\n    if ((0, _type.isFunction)(configurator.validateConfig)) {\r\n        configurator.validateConfig(config)\r\n    }\r\n    subscribeToRemoveEvent(animation);\r\n    return animation\r\n};\r\nvar animate = function(element, config) {\r\n    var $element = (0, _renderer.default)(element);\r\n    if (!$element.length) {\r\n        return (new _deferred.Deferred).resolve().promise()\r\n    }\r\n    var animation = createAnimation($element, config);\r\n    pushInAnimationQueue($element, animation);\r\n    return animation.deferred.promise()\r\n};\r\n\r\nfunction pushInAnimationQueue($element, animation) {\r\n    var queueData = getAnimQueueData($element);\r\n    writeAnimQueueData($element, queueData);\r\n    queueData.push(animation);\r\n    if (!isAnimating($element)) {\r\n        shiftFromAnimationQueue($element, queueData)\r\n    }\r\n}\r\n\r\nfunction getAnimQueueData($element) {\r\n    return $element.data(ANIM_QUEUE_KEY) || []\r\n}\r\n\r\nfunction writeAnimQueueData($element, queueData) {\r\n    $element.data(ANIM_QUEUE_KEY, queueData)\r\n}\r\nvar destroyAnimQueueData = function($element) {\r\n    $element.removeData(ANIM_QUEUE_KEY)\r\n};\r\n\r\nfunction isAnimating($element) {\r\n    return !!$element.data(ANIM_DATA_KEY)\r\n}\r\n\r\nfunction shiftFromAnimationQueue($element, queueData) {\r\n    queueData = getAnimQueueData($element);\r\n    if (!queueData.length) {\r\n        return\r\n    }\r\n    var animation = queueData.shift();\r\n    if (0 === queueData.length) {\r\n        destroyAnimQueueData($element)\r\n    }\r\n    executeAnimation(animation).done(function() {\r\n        if (!isAnimating($element)) {\r\n            shiftFromAnimationQueue($element)\r\n        }\r\n    })\r\n}\r\n\r\nfunction executeAnimation(animation) {\r\n    animation.setup();\r\n    if (fx.off || animation.isSynchronous) {\r\n        animation.start()\r\n    } else {\r\n        animation.startTimeout = setTimeout(function() {\r\n            animation.start()\r\n        })\r\n    }\r\n    return animation.deferred.promise()\r\n}\r\n\r\nfunction setupPosition($element, config) {\r\n    if (!config || !config.position) {\r\n        return\r\n    }\r\n    var win = (0, _renderer.default)(window);\r\n    var left = 0;\r\n    var top = 0;\r\n    var position = _position.default.calculate($element, config.position);\r\n    var offset = $element.offset();\r\n    var currentPosition = $element.position();\r\n    if (currentPosition.top > offset.top) {\r\n        top = win.scrollTop()\r\n    }\r\n    if (currentPosition.left > offset.left) {\r\n        left = win.scrollLeft()\r\n    }(0, _extend.extend)(config, {\r\n        left: position.h.location - offset.left + currentPosition.left - left,\r\n        top: position.v.location - offset.top + currentPosition.top - top\r\n    });\r\n    delete config.position\r\n}\r\n\r\nfunction setProps($element, props) {\r\n    (0, _iterator.each)(props, function(key, value) {\r\n        try {\r\n            $element.css(key, (0, _type.isFunction)(value) ? value() : value)\r\n        } catch (e) {}\r\n    })\r\n}\r\nvar stop = function(element, jumpToEnd) {\r\n    var $element = (0, _renderer.default)(element);\r\n    var queueData = getAnimQueueData($element);\r\n    (0, _iterator.each)(queueData, function(_, animation) {\r\n        animation.config.delay = 0;\r\n        animation.config.duration = 0;\r\n        animation.isSynchronous = true\r\n    });\r\n    if (!isAnimating($element)) {\r\n        shiftFromAnimationQueue($element, queueData)\r\n    }\r\n    var animation = $element.data(ANIM_DATA_KEY);\r\n    if (animation) {\r\n        animation.stop(jumpToEnd)\r\n    }\r\n    $element.removeData(ANIM_DATA_KEY);\r\n    destroyAnimQueueData($element)\r\n};\r\nvar fx = {\r\n    off: false,\r\n    animationTypes: animationConfigurators,\r\n    animate: animate,\r\n    createAnimation: createAnimation,\r\n    isAnimating: isAnimating,\r\n    stop: stop,\r\n    _simulatedTransitionEndDelay: 100\r\n};\r\nvar _default = fx;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}