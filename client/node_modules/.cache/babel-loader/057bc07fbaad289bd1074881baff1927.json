{"ast":null,"code":"/**\r\n * DevExtreme (ui/scroll_view/ui.scroll_view.native.pull_down.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _callbacks = _interopRequireDefault(require(\"../../core/utils/callbacks\"));\n\nvar _translator = require(\"../../animation/translator\");\n\nvar _uiScrollable = _interopRequireDefault(require(\"./ui.scrollable.native\"));\n\nvar _load_indicator = _interopRequireDefault(require(\"../load_indicator\"));\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _browser = _interopRequireDefault(require(\"../../core/utils/browser\"));\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar SCROLLVIEW_PULLDOWN_REFRESHING_CLASS = \"dx-scrollview-pull-down-loading\";\nvar SCROLLVIEW_PULLDOWN_READY_CLASS = \"dx-scrollview-pull-down-ready\";\nvar SCROLLVIEW_PULLDOWN_IMAGE_CLASS = \"dx-scrollview-pull-down-image\";\nvar SCROLLVIEW_PULLDOWN_INDICATOR_CLASS = \"dx-scrollview-pull-down-indicator\";\nvar SCROLLVIEW_PULLDOWN_TEXT_CLASS = \"dx-scrollview-pull-down-text\";\nvar SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS = \"dx-scrollview-pull-down-text-visible\";\nvar STATE_RELEASED = 0;\nvar STATE_READY = 1;\nvar STATE_REFRESHING = 2;\nvar STATE_LOADING = 3;\nvar PULLDOWN_RELEASE_TIME = 400;\n\nvar PullDownNativeScrollViewStrategy = _uiScrollable.default.inherit({\n  _init: function (scrollView) {\n    this.callBase(scrollView);\n    this._$topPocket = scrollView._$topPocket;\n    this._$pullDown = scrollView._$pullDown;\n    this._$bottomPocket = scrollView._$bottomPocket;\n    this._$refreshingText = scrollView._$refreshingText;\n    this._$scrollViewContent = (0, _renderer.default)(scrollView.content());\n\n    this._initCallbacks();\n  },\n  _initCallbacks: function () {\n    this.pullDownCallbacks = (0, _callbacks.default)();\n    this.releaseCallbacks = (0, _callbacks.default)();\n    this.reachBottomCallbacks = (0, _callbacks.default)();\n  },\n  render: function () {\n    this.callBase();\n\n    this._renderPullDown();\n\n    this._releaseState();\n  },\n  _renderPullDown: function () {\n    var $image = (0, _renderer.default)(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_IMAGE_CLASS);\n    var $loadContainer = (0, _renderer.default)(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_INDICATOR_CLASS);\n    var $loadIndicator = new _load_indicator.default((0, _renderer.default)(\"<div>\")).$element();\n    var $text = this._$pullDownText = (0, _renderer.default)(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_TEXT_CLASS);\n    this._$pullingDownText = (0, _renderer.default)(\"<div>\").text(this.option(\"pullingDownText\")).appendTo($text);\n    this._$pulledDownText = (0, _renderer.default)(\"<div>\").text(this.option(\"pulledDownText\")).appendTo($text);\n    this._$refreshingText = (0, _renderer.default)(\"<div>\").text(this.option(\"refreshingText\")).appendTo($text);\n\n    this._$pullDown.empty().append($image).append($loadContainer.append($loadIndicator)).append($text);\n  },\n  _releaseState: function () {\n    this._state = STATE_RELEASED;\n\n    this._refreshPullDownText();\n  },\n  _pushBackFromBoundary: function () {\n    if (!this._isLocked() && !this._component.isEmpty()) {\n      this.callBase();\n    }\n  },\n  _refreshPullDownText: function () {\n    var that = this;\n    var pullDownTextItems = [{\n      element: this._$pullingDownText,\n      visibleState: STATE_RELEASED\n    }, {\n      element: this._$pulledDownText,\n      visibleState: STATE_READY\n    }, {\n      element: this._$refreshingText,\n      visibleState: STATE_REFRESHING\n    }];\n    (0, _iterator.each)(pullDownTextItems, function (_, item) {\n      var action = that._state === item.visibleState ? \"addClass\" : \"removeClass\";\n      item.element[action](SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS);\n    });\n  },\n  update: function () {\n    this.callBase();\n\n    this._setTopPocketOffset();\n  },\n  _updateDimensions: function () {\n    this.callBase();\n    this._topPocketSize = this._$topPocket.height();\n    this._bottomPocketSize = this._$bottomPocket.height();\n\n    if (_browser.default.msie) {\n      this._scrollOffset = Math.round(100 * (this._$container.height() - this._$content.height())) / 100;\n    } else {\n      this._scrollOffset = this._$container.height() - this._$content.height();\n    }\n  },\n  _allowedDirections: function () {\n    var allowedDirections = this.callBase();\n    allowedDirections.vertical = allowedDirections.vertical || this._pullDownEnabled;\n    return allowedDirections;\n  },\n  _setTopPocketOffset: function () {\n    this._$topPocket.css({\n      top: -this._topPocketSize\n    });\n  },\n  handleEnd: function () {\n    this.callBase();\n\n    this._complete();\n  },\n  handleStop: function () {\n    this.callBase();\n\n    this._complete();\n  },\n  _complete: function () {\n    if (this._state === STATE_READY) {\n      this._setPullDownOffset(this._topPocketSize);\n\n      clearTimeout(this._pullDownRefreshTimeout);\n      this._pullDownRefreshTimeout = setTimeout(function () {\n        this._pullDownRefreshing();\n      }.bind(this), 400);\n    }\n  },\n  _setPullDownOffset: function (offset) {\n    (0, _translator.move)(this._$topPocket, {\n      top: offset\n    });\n    (0, _translator.move)(this._$scrollViewContent, {\n      top: offset\n    });\n  },\n  handleScroll: function (e) {\n    this.callBase(e);\n\n    if (this._state === STATE_REFRESHING) {\n      return;\n    }\n\n    var currentLocation = this.location().top;\n    var scrollDelta = (this._location || 0) - currentLocation;\n    this._location = currentLocation;\n\n    if (this._isPullDown()) {\n      this._pullDownReady();\n    } else {\n      if (scrollDelta > 0 && this._isReachBottom()) {\n        this._reachBottom();\n      } else {\n        this._stateReleased();\n      }\n    }\n  },\n  _isPullDown: function () {\n    return this._pullDownEnabled && this._location >= this._topPocketSize;\n  },\n  _isReachBottom: function () {\n    return this._reachBottomEnabled && this._location - (this._scrollOffset + this._bottomPocketSize) <= .5;\n  },\n  _reachBottom: function () {\n    if (this._state === STATE_LOADING) {\n      return;\n    }\n\n    this._state = STATE_LOADING;\n    this.reachBottomCallbacks.fire();\n  },\n  _pullDownReady: function () {\n    if (this._state === STATE_READY) {\n      return;\n    }\n\n    this._state = STATE_READY;\n\n    this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_READY_CLASS);\n\n    this._refreshPullDownText();\n  },\n  _stateReleased: function () {\n    if (this._state === STATE_RELEASED) {\n      return;\n    }\n\n    this._$pullDown.removeClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS).removeClass(SCROLLVIEW_PULLDOWN_READY_CLASS);\n\n    this._releaseState();\n  },\n  _pullDownRefreshing: function () {\n    if (this._state === STATE_REFRESHING) {\n      return;\n    }\n\n    this._state = STATE_REFRESHING;\n\n    this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS).removeClass(SCROLLVIEW_PULLDOWN_READY_CLASS);\n\n    this._refreshPullDownText();\n\n    this.pullDownCallbacks.fire();\n  },\n  pullDownEnable: function (enabled) {\n    if (enabled) {\n      this._updateDimensions();\n\n      this._setTopPocketOffset();\n    }\n\n    this._pullDownEnabled = enabled;\n  },\n  reachBottomEnable: function (enabled) {\n    this._reachBottomEnabled = enabled;\n  },\n  pendingRelease: function () {\n    this._state = STATE_READY;\n  },\n  release: function () {\n    var deferred = new _deferred.Deferred();\n\n    this._updateDimensions();\n\n    clearTimeout(this._releaseTimeout);\n\n    if (this._state === STATE_LOADING) {\n      this._state = STATE_RELEASED;\n    }\n\n    this._releaseTimeout = setTimeout(function () {\n      this._setPullDownOffset(0);\n\n      this._stateReleased();\n\n      this.releaseCallbacks.fire();\n\n      this._updateAction();\n\n      deferred.resolve();\n    }.bind(this), PULLDOWN_RELEASE_TIME);\n    return deferred.promise();\n  },\n  dispose: function () {\n    clearTimeout(this._pullDownRefreshTimeout);\n    clearTimeout(this._releaseTimeout);\n    this.callBase();\n  }\n});\n\nvar _default = PullDownNativeScrollViewStrategy;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/ui/scroll_view/ui.scroll_view.native.pull_down.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_callbacks","_translator","_uiScrollable","_load_indicator","_iterator","_browser","_deferred","obj","__esModule","SCROLLVIEW_PULLDOWN_REFRESHING_CLASS","SCROLLVIEW_PULLDOWN_READY_CLASS","SCROLLVIEW_PULLDOWN_IMAGE_CLASS","SCROLLVIEW_PULLDOWN_INDICATOR_CLASS","SCROLLVIEW_PULLDOWN_TEXT_CLASS","SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS","STATE_RELEASED","STATE_READY","STATE_REFRESHING","STATE_LOADING","PULLDOWN_RELEASE_TIME","PullDownNativeScrollViewStrategy","inherit","_init","scrollView","callBase","_$topPocket","_$pullDown","_$bottomPocket","_$refreshingText","_$scrollViewContent","content","_initCallbacks","pullDownCallbacks","releaseCallbacks","reachBottomCallbacks","render","_renderPullDown","_releaseState","$image","addClass","$loadContainer","$loadIndicator","$element","$text","_$pullDownText","_$pullingDownText","text","option","appendTo","_$pulledDownText","empty","append","_state","_refreshPullDownText","_pushBackFromBoundary","_isLocked","_component","isEmpty","that","pullDownTextItems","element","visibleState","each","_","item","action","update","_setTopPocketOffset","_updateDimensions","_topPocketSize","height","_bottomPocketSize","msie","_scrollOffset","Math","round","_$container","_$content","_allowedDirections","allowedDirections","vertical","_pullDownEnabled","css","top","handleEnd","_complete","handleStop","_setPullDownOffset","clearTimeout","_pullDownRefreshTimeout","setTimeout","_pullDownRefreshing","bind","offset","move","handleScroll","e","currentLocation","location","scrollDelta","_location","_isPullDown","_pullDownReady","_isReachBottom","_reachBottom","_stateReleased","_reachBottomEnabled","fire","removeClass","pullDownEnable","enabled","reachBottomEnable","pendingRelease","release","deferred","Deferred","_releaseTimeout","_updateAction","resolve","promise","dispose","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scroll_view/ui.scroll_view.native.pull_down.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _callbacks = _interopRequireDefault(require(\"../../core/utils/callbacks\"));\r\nvar _translator = require(\"../../animation/translator\");\r\nvar _uiScrollable = _interopRequireDefault(require(\"./ui.scrollable.native\"));\r\nvar _load_indicator = _interopRequireDefault(require(\"../load_indicator\"));\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _browser = _interopRequireDefault(require(\"../../core/utils/browser\"));\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar SCROLLVIEW_PULLDOWN_REFRESHING_CLASS = \"dx-scrollview-pull-down-loading\";\r\nvar SCROLLVIEW_PULLDOWN_READY_CLASS = \"dx-scrollview-pull-down-ready\";\r\nvar SCROLLVIEW_PULLDOWN_IMAGE_CLASS = \"dx-scrollview-pull-down-image\";\r\nvar SCROLLVIEW_PULLDOWN_INDICATOR_CLASS = \"dx-scrollview-pull-down-indicator\";\r\nvar SCROLLVIEW_PULLDOWN_TEXT_CLASS = \"dx-scrollview-pull-down-text\";\r\nvar SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS = \"dx-scrollview-pull-down-text-visible\";\r\nvar STATE_RELEASED = 0;\r\nvar STATE_READY = 1;\r\nvar STATE_REFRESHING = 2;\r\nvar STATE_LOADING = 3;\r\nvar PULLDOWN_RELEASE_TIME = 400;\r\nvar PullDownNativeScrollViewStrategy = _uiScrollable.default.inherit({\r\n    _init: function(scrollView) {\r\n        this.callBase(scrollView);\r\n        this._$topPocket = scrollView._$topPocket;\r\n        this._$pullDown = scrollView._$pullDown;\r\n        this._$bottomPocket = scrollView._$bottomPocket;\r\n        this._$refreshingText = scrollView._$refreshingText;\r\n        this._$scrollViewContent = (0, _renderer.default)(scrollView.content());\r\n        this._initCallbacks()\r\n    },\r\n    _initCallbacks: function() {\r\n        this.pullDownCallbacks = (0, _callbacks.default)();\r\n        this.releaseCallbacks = (0, _callbacks.default)();\r\n        this.reachBottomCallbacks = (0, _callbacks.default)()\r\n    },\r\n    render: function() {\r\n        this.callBase();\r\n        this._renderPullDown();\r\n        this._releaseState()\r\n    },\r\n    _renderPullDown: function() {\r\n        var $image = (0, _renderer.default)(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_IMAGE_CLASS);\r\n        var $loadContainer = (0, _renderer.default)(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_INDICATOR_CLASS);\r\n        var $loadIndicator = new _load_indicator.default((0, _renderer.default)(\"<div>\")).$element();\r\n        var $text = this._$pullDownText = (0, _renderer.default)(\"<div>\").addClass(SCROLLVIEW_PULLDOWN_TEXT_CLASS);\r\n        this._$pullingDownText = (0, _renderer.default)(\"<div>\").text(this.option(\"pullingDownText\")).appendTo($text);\r\n        this._$pulledDownText = (0, _renderer.default)(\"<div>\").text(this.option(\"pulledDownText\")).appendTo($text);\r\n        this._$refreshingText = (0, _renderer.default)(\"<div>\").text(this.option(\"refreshingText\")).appendTo($text);\r\n        this._$pullDown.empty().append($image).append($loadContainer.append($loadIndicator)).append($text)\r\n    },\r\n    _releaseState: function() {\r\n        this._state = STATE_RELEASED;\r\n        this._refreshPullDownText()\r\n    },\r\n    _pushBackFromBoundary: function() {\r\n        if (!this._isLocked() && !this._component.isEmpty()) {\r\n            this.callBase()\r\n        }\r\n    },\r\n    _refreshPullDownText: function() {\r\n        var that = this;\r\n        var pullDownTextItems = [{\r\n            element: this._$pullingDownText,\r\n            visibleState: STATE_RELEASED\r\n        }, {\r\n            element: this._$pulledDownText,\r\n            visibleState: STATE_READY\r\n        }, {\r\n            element: this._$refreshingText,\r\n            visibleState: STATE_REFRESHING\r\n        }];\r\n        (0, _iterator.each)(pullDownTextItems, function(_, item) {\r\n            var action = that._state === item.visibleState ? \"addClass\" : \"removeClass\";\r\n            item.element[action](SCROLLVIEW_PULLDOWN_VISIBLE_TEXT_CLASS)\r\n        })\r\n    },\r\n    update: function() {\r\n        this.callBase();\r\n        this._setTopPocketOffset()\r\n    },\r\n    _updateDimensions: function() {\r\n        this.callBase();\r\n        this._topPocketSize = this._$topPocket.height();\r\n        this._bottomPocketSize = this._$bottomPocket.height();\r\n        if (_browser.default.msie) {\r\n            this._scrollOffset = Math.round(100 * (this._$container.height() - this._$content.height())) / 100\r\n        } else {\r\n            this._scrollOffset = this._$container.height() - this._$content.height()\r\n        }\r\n    },\r\n    _allowedDirections: function() {\r\n        var allowedDirections = this.callBase();\r\n        allowedDirections.vertical = allowedDirections.vertical || this._pullDownEnabled;\r\n        return allowedDirections\r\n    },\r\n    _setTopPocketOffset: function() {\r\n        this._$topPocket.css({\r\n            top: -this._topPocketSize\r\n        })\r\n    },\r\n    handleEnd: function() {\r\n        this.callBase();\r\n        this._complete()\r\n    },\r\n    handleStop: function() {\r\n        this.callBase();\r\n        this._complete()\r\n    },\r\n    _complete: function() {\r\n        if (this._state === STATE_READY) {\r\n            this._setPullDownOffset(this._topPocketSize);\r\n            clearTimeout(this._pullDownRefreshTimeout);\r\n            this._pullDownRefreshTimeout = setTimeout(function() {\r\n                this._pullDownRefreshing()\r\n            }.bind(this), 400)\r\n        }\r\n    },\r\n    _setPullDownOffset: function(offset) {\r\n        (0, _translator.move)(this._$topPocket, {\r\n            top: offset\r\n        });\r\n        (0, _translator.move)(this._$scrollViewContent, {\r\n            top: offset\r\n        })\r\n    },\r\n    handleScroll: function(e) {\r\n        this.callBase(e);\r\n        if (this._state === STATE_REFRESHING) {\r\n            return\r\n        }\r\n        var currentLocation = this.location().top;\r\n        var scrollDelta = (this._location || 0) - currentLocation;\r\n        this._location = currentLocation;\r\n        if (this._isPullDown()) {\r\n            this._pullDownReady()\r\n        } else {\r\n            if (scrollDelta > 0 && this._isReachBottom()) {\r\n                this._reachBottom()\r\n            } else {\r\n                this._stateReleased()\r\n            }\r\n        }\r\n    },\r\n    _isPullDown: function() {\r\n        return this._pullDownEnabled && this._location >= this._topPocketSize\r\n    },\r\n    _isReachBottom: function() {\r\n        return this._reachBottomEnabled && this._location - (this._scrollOffset + this._bottomPocketSize) <= .5\r\n    },\r\n    _reachBottom: function() {\r\n        if (this._state === STATE_LOADING) {\r\n            return\r\n        }\r\n        this._state = STATE_LOADING;\r\n        this.reachBottomCallbacks.fire()\r\n    },\r\n    _pullDownReady: function() {\r\n        if (this._state === STATE_READY) {\r\n            return\r\n        }\r\n        this._state = STATE_READY;\r\n        this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_READY_CLASS);\r\n        this._refreshPullDownText()\r\n    },\r\n    _stateReleased: function() {\r\n        if (this._state === STATE_RELEASED) {\r\n            return\r\n        }\r\n        this._$pullDown.removeClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS).removeClass(SCROLLVIEW_PULLDOWN_READY_CLASS);\r\n        this._releaseState()\r\n    },\r\n    _pullDownRefreshing: function() {\r\n        if (this._state === STATE_REFRESHING) {\r\n            return\r\n        }\r\n        this._state = STATE_REFRESHING;\r\n        this._$pullDown.addClass(SCROLLVIEW_PULLDOWN_REFRESHING_CLASS).removeClass(SCROLLVIEW_PULLDOWN_READY_CLASS);\r\n        this._refreshPullDownText();\r\n        this.pullDownCallbacks.fire()\r\n    },\r\n    pullDownEnable: function(enabled) {\r\n        if (enabled) {\r\n            this._updateDimensions();\r\n            this._setTopPocketOffset()\r\n        }\r\n        this._pullDownEnabled = enabled\r\n    },\r\n    reachBottomEnable: function(enabled) {\r\n        this._reachBottomEnabled = enabled\r\n    },\r\n    pendingRelease: function() {\r\n        this._state = STATE_READY\r\n    },\r\n    release: function() {\r\n        var deferred = new _deferred.Deferred;\r\n        this._updateDimensions();\r\n        clearTimeout(this._releaseTimeout);\r\n        if (this._state === STATE_LOADING) {\r\n            this._state = STATE_RELEASED\r\n        }\r\n        this._releaseTimeout = setTimeout(function() {\r\n            this._setPullDownOffset(0);\r\n            this._stateReleased();\r\n            this.releaseCallbacks.fire();\r\n            this._updateAction();\r\n            deferred.resolve()\r\n        }.bind(this), PULLDOWN_RELEASE_TIME);\r\n        return deferred.promise()\r\n    },\r\n    dispose: function() {\r\n        clearTimeout(this._pullDownRefreshTimeout);\r\n        clearTimeout(this._releaseTimeout);\r\n        this.callBase()\r\n    }\r\n});\r\nvar _default = PullDownNativeScrollViewStrategy;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}