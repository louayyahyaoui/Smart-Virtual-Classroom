{"ast":null,"code":"/**\r\n * DevExtreme (core/utils/deferred.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.fromPromise = fromPromise;\nexports.setStrategy = setStrategy;\nexports.Deferred = Deferred;\nexports.when = when;\n\nvar _type = require(\"../utils/type\");\n\nvar _extend = require(\"../utils/extend\");\n\nvar _callbacks = _interopRequireDefault(require(\"../utils/callbacks\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar deferredConfig = [{\n  method: \"resolve\",\n  handler: \"done\",\n  state: \"resolved\"\n}, {\n  method: \"reject\",\n  handler: \"fail\",\n  state: \"rejected\"\n}, {\n  method: \"notify\",\n  handler: \"progress\"\n}];\n\nvar _DeferredObj = function () {\n  var that = this;\n  this._state = \"pending\";\n  this._promise = {};\n  deferredConfig.forEach(function (config) {\n    var methodName = config.method;\n    this[methodName + \"Callbacks\"] = new _callbacks.default();\n\n    this[methodName] = function () {\n      return this[methodName + \"With\"](this._promise, arguments);\n    }.bind(this);\n\n    this._promise[config.handler] = function (handler) {\n      if (!handler) {\n        return this;\n      }\n\n      var callbacks = that[methodName + \"Callbacks\"];\n\n      if (callbacks.fired()) {\n        handler.apply(that[methodName + \"Context\"], that[methodName + \"Args\"]);\n      } else {\n        callbacks.add(function (context, args) {\n          handler.apply(context, args);\n        }.bind(this));\n      }\n\n      return this;\n    };\n  }.bind(this));\n\n  this._promise.always = function (handler) {\n    return this.done(handler).fail(handler);\n  };\n\n  this._promise.catch = function (handler) {\n    return this.then(null, handler);\n  };\n\n  this._promise.then = function (resolve, reject) {\n    var result = new _DeferredObj();\n    [\"done\", \"fail\"].forEach(function (method) {\n      var callback = \"done\" === method ? resolve : reject;\n      this[method](function () {\n        if (!callback) {\n          result[\"done\" === method ? \"resolve\" : \"reject\"].apply(this, arguments);\n          return;\n        }\n\n        var callbackResult = callback && callback.apply(this, arguments);\n\n        if ((0, _type.isDeferred)(callbackResult)) {\n          callbackResult.done(result.resolve).fail(result.reject);\n        } else {\n          if ((0, _type.isPromise)(callbackResult)) {\n            callbackResult.then(result.resolve, result.reject);\n          } else {\n            result.resolve.apply(this, (0, _type.isDefined)(callbackResult) ? [callbackResult] : arguments);\n          }\n        }\n      });\n    }.bind(this));\n    return result.promise();\n  };\n\n  this._promise.state = function () {\n    return that._state;\n  };\n\n  this._promise.promise = function (args) {\n    return args ? (0, _extend.extend)(args, that._promise) : that._promise;\n  };\n\n  this._promise.promise(this);\n};\n\ndeferredConfig.forEach(function (config) {\n  var methodName = config.method;\n  var state = config.state;\n\n  _DeferredObj.prototype[methodName + \"With\"] = function (context, args) {\n    var callbacks = this[methodName + \"Callbacks\"];\n\n    if (\"pending\" === this.state()) {\n      this[methodName + \"Args\"] = args;\n      this[methodName + \"Context\"] = context;\n\n      if (state) {\n        this._state = state;\n      }\n\n      callbacks.fire(context, args);\n    }\n\n    return this;\n  };\n});\n\nfunction fromPromise(promise, context) {\n  if ((0, _type.isDeferred)(promise)) {\n    return promise;\n  } else {\n    if ((0, _type.isPromise)(promise)) {\n      var d = new _DeferredObj();\n      promise.then(function () {\n        d.resolveWith.apply(d, [context].concat([[].slice.call(arguments)]));\n      }, function () {\n        d.rejectWith.apply(d, [context].concat([[].slice.call(arguments)]));\n      });\n      return d;\n    }\n  }\n\n  return new _DeferredObj().resolveWith(context, [promise]);\n}\n\nvar whenFunc = function () {\n  if (1 === arguments.length) {\n    return fromPromise(arguments[0]);\n  }\n\n  var values = [].slice.call(arguments);\n  var contexts = [];\n  var resolvedCount = 0;\n  var deferred = new _DeferredObj();\n\n  var updateState = function (i) {\n    return function (value) {\n      contexts[i] = this;\n      values[i] = arguments.length > 1 ? [].slice.call(arguments) : value;\n      resolvedCount++;\n\n      if (resolvedCount === values.length) {\n        deferred.resolveWith(contexts, values);\n      }\n    };\n  };\n\n  for (var i = 0; i < values.length; i++) {\n    if ((0, _type.isDeferred)(values[i])) {\n      values[i].promise().done(updateState(i)).fail(deferred.reject);\n    } else {\n      resolvedCount++;\n    }\n  }\n\n  if (resolvedCount === values.length) {\n    deferred.resolveWith(contexts, values);\n  }\n\n  return deferred.promise();\n};\n\nfunction setStrategy(value) {\n  _DeferredObj = value.Deferred;\n  whenFunc = value.when;\n}\n\nfunction Deferred() {\n  return new _DeferredObj();\n}\n\nfunction when() {\n  return whenFunc.apply(this, arguments);\n}","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/core/utils/deferred.js"],"names":["exports","fromPromise","setStrategy","Deferred","when","_type","require","_extend","_callbacks","_interopRequireDefault","obj","__esModule","deferredConfig","method","handler","state","_DeferredObj","that","_state","_promise","forEach","config","methodName","default","arguments","bind","callbacks","fired","apply","add","context","args","always","done","fail","catch","then","resolve","reject","result","callback","callbackResult","isDeferred","isPromise","isDefined","promise","extend","prototype","fire","d","resolveWith","concat","slice","call","rejectWith","whenFunc","length","values","contexts","resolvedCount","deferred","updateState","i","value"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (core/utils/deferred.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.fromPromise = fromPromise;\r\nexports.setStrategy = setStrategy;\r\nexports.Deferred = Deferred;\r\nexports.when = when;\r\nvar _type = require(\"../utils/type\");\r\nvar _extend = require(\"../utils/extend\");\r\nvar _callbacks = _interopRequireDefault(require(\"../utils/callbacks\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar deferredConfig = [{\r\n    method: \"resolve\",\r\n    handler: \"done\",\r\n    state: \"resolved\"\r\n}, {\r\n    method: \"reject\",\r\n    handler: \"fail\",\r\n    state: \"rejected\"\r\n}, {\r\n    method: \"notify\",\r\n    handler: \"progress\"\r\n}];\r\nvar _DeferredObj = function() {\r\n    var that = this;\r\n    this._state = \"pending\";\r\n    this._promise = {};\r\n    deferredConfig.forEach(function(config) {\r\n        var methodName = config.method;\r\n        this[methodName + \"Callbacks\"] = new _callbacks.default;\r\n        this[methodName] = function() {\r\n            return this[methodName + \"With\"](this._promise, arguments)\r\n        }.bind(this);\r\n        this._promise[config.handler] = function(handler) {\r\n            if (!handler) {\r\n                return this\r\n            }\r\n            var callbacks = that[methodName + \"Callbacks\"];\r\n            if (callbacks.fired()) {\r\n                handler.apply(that[methodName + \"Context\"], that[methodName + \"Args\"])\r\n            } else {\r\n                callbacks.add(function(context, args) {\r\n                    handler.apply(context, args)\r\n                }.bind(this))\r\n            }\r\n            return this\r\n        }\r\n    }.bind(this));\r\n    this._promise.always = function(handler) {\r\n        return this.done(handler).fail(handler)\r\n    };\r\n    this._promise.catch = function(handler) {\r\n        return this.then(null, handler)\r\n    };\r\n    this._promise.then = function(resolve, reject) {\r\n        var result = new _DeferredObj;\r\n        [\"done\", \"fail\"].forEach(function(method) {\r\n            var callback = \"done\" === method ? resolve : reject;\r\n            this[method](function() {\r\n                if (!callback) {\r\n                    result[\"done\" === method ? \"resolve\" : \"reject\"].apply(this, arguments);\r\n                    return\r\n                }\r\n                var callbackResult = callback && callback.apply(this, arguments);\r\n                if ((0, _type.isDeferred)(callbackResult)) {\r\n                    callbackResult.done(result.resolve).fail(result.reject)\r\n                } else {\r\n                    if ((0, _type.isPromise)(callbackResult)) {\r\n                        callbackResult.then(result.resolve, result.reject)\r\n                    } else {\r\n                        result.resolve.apply(this, (0, _type.isDefined)(callbackResult) ? [callbackResult] : arguments)\r\n                    }\r\n                }\r\n            })\r\n        }.bind(this));\r\n        return result.promise()\r\n    };\r\n    this._promise.state = function() {\r\n        return that._state\r\n    };\r\n    this._promise.promise = function(args) {\r\n        return args ? (0, _extend.extend)(args, that._promise) : that._promise\r\n    };\r\n    this._promise.promise(this)\r\n};\r\ndeferredConfig.forEach(function(config) {\r\n    var methodName = config.method;\r\n    var state = config.state;\r\n    _DeferredObj.prototype[methodName + \"With\"] = function(context, args) {\r\n        var callbacks = this[methodName + \"Callbacks\"];\r\n        if (\"pending\" === this.state()) {\r\n            this[methodName + \"Args\"] = args;\r\n            this[methodName + \"Context\"] = context;\r\n            if (state) {\r\n                this._state = state\r\n            }\r\n            callbacks.fire(context, args)\r\n        }\r\n        return this\r\n    }\r\n});\r\n\r\nfunction fromPromise(promise, context) {\r\n    if ((0, _type.isDeferred)(promise)) {\r\n        return promise\r\n    } else {\r\n        if ((0, _type.isPromise)(promise)) {\r\n            var d = new _DeferredObj;\r\n            promise.then(function() {\r\n                d.resolveWith.apply(d, [context].concat([\r\n                    [].slice.call(arguments)\r\n                ]))\r\n            }, function() {\r\n                d.rejectWith.apply(d, [context].concat([\r\n                    [].slice.call(arguments)\r\n                ]))\r\n            });\r\n            return d\r\n        }\r\n    }\r\n    return (new _DeferredObj).resolveWith(context, [promise])\r\n}\r\nvar whenFunc = function() {\r\n    if (1 === arguments.length) {\r\n        return fromPromise(arguments[0])\r\n    }\r\n    var values = [].slice.call(arguments);\r\n    var contexts = [];\r\n    var resolvedCount = 0;\r\n    var deferred = new _DeferredObj;\r\n    var updateState = function(i) {\r\n        return function(value) {\r\n            contexts[i] = this;\r\n            values[i] = arguments.length > 1 ? [].slice.call(arguments) : value;\r\n            resolvedCount++;\r\n            if (resolvedCount === values.length) {\r\n                deferred.resolveWith(contexts, values)\r\n            }\r\n        }\r\n    };\r\n    for (var i = 0; i < values.length; i++) {\r\n        if ((0, _type.isDeferred)(values[i])) {\r\n            values[i].promise().done(updateState(i)).fail(deferred.reject)\r\n        } else {\r\n            resolvedCount++\r\n        }\r\n    }\r\n    if (resolvedCount === values.length) {\r\n        deferred.resolveWith(contexts, values)\r\n    }\r\n    return deferred.promise()\r\n};\r\n\r\nfunction setStrategy(value) {\r\n    _DeferredObj = value.Deferred;\r\n    whenFunc = value.when\r\n}\r\n\r\nfunction Deferred() {\r\n    return new _DeferredObj\r\n}\r\n\r\nfunction when() {\r\n    return whenFunc.apply(this, arguments)\r\n}\r\n"]},"metadata":{},"sourceType":"script"}