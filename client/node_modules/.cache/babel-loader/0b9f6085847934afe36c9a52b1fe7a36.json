{"ast":null,"code":"/**\r\n * DevExtreme (ui/list/ui.list.edit.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _index = require(\"../../events/utils/index\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _uiListEditStrategy = _interopRequireDefault(require(\"./ui.list.edit.strategy.grouped\"));\n\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\n\nvar _uiListEdit = _interopRequireDefault(require(\"./ui.list.edit.provider\"));\n\nvar _uiList = require(\"./ui.list.base\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar LIST_ITEM_SELECTED_CLASS = \"dx-list-item-selected\";\nvar LIST_ITEM_RESPONSE_WAIT_CLASS = \"dx-list-item-response-wait\";\n\nvar ListEdit = _uiList.ListBase.inherit({\n  _supportedKeys: function () {\n    var _this = this;\n\n    var that = this;\n    var parent = this.callBase();\n\n    var deleteFocusedItem = function (e) {\n      if (that.option(\"allowItemDeleting\")) {\n        e.preventDefault();\n        that.deleteItem(that.option(\"focusedElement\"));\n      }\n    };\n\n    var moveFocusedItem = function (e, moveUp) {\n      var editStrategy = _this._editStrategy;\n\n      var focusedElement = _this.option(\"focusedElement\");\n\n      var focusedItemIndex = editStrategy.getNormalizedIndex(focusedElement);\n\n      var isLastIndexFocused = focusedItemIndex === _this._getLastItemIndex();\n\n      if (isLastIndexFocused && _this._isDataSourceLoading()) {\n        return;\n      }\n\n      if (e.shiftKey && that.option(\"itemDragging.allowReordering\")) {\n        var nextItemIndex = focusedItemIndex + (moveUp ? -1 : 1);\n        var $nextItem = editStrategy.getItemElement(nextItemIndex);\n\n        _this.reorderItem(focusedElement, $nextItem);\n\n        _this.scrollToItem(focusedElement);\n\n        e.preventDefault();\n      } else {\n        var editProvider = _this._editProvider;\n        var isInternalMoving = editProvider.handleKeyboardEvents(focusedItemIndex, moveUp);\n\n        if (!isInternalMoving) {\n          moveUp ? parent.upArrow(e) : parent.downArrow(e);\n        }\n      }\n    };\n\n    var enter = function (e) {\n      if (!this._editProvider.handleEnterPressing(e)) {\n        parent.enter.apply(this, arguments);\n      }\n    };\n\n    var space = function (e) {\n      if (!this._editProvider.handleEnterPressing(e)) {\n        parent.space.apply(this, arguments);\n      }\n    };\n\n    return (0, _extend.extend)({}, parent, {\n      del: deleteFocusedItem,\n      upArrow: function (e) {\n        return moveFocusedItem(e, true);\n      },\n      downArrow: function (e) {\n        return moveFocusedItem(e);\n      },\n      enter: enter,\n      space: space\n    });\n  },\n  _updateSelection: function () {\n    this._editProvider.afterItemsRendered();\n\n    this.callBase();\n  },\n  _getLastItemIndex: function () {\n    return this._itemElements().length - 1;\n  },\n  _refreshItemElements: function () {\n    this.callBase();\n\n    var excludedSelectors = this._editProvider.getExcludedItemSelectors();\n\n    if (excludedSelectors.length) {\n      this._itemElementsCache = this._itemElementsCache.not(excludedSelectors);\n    }\n  },\n  _isItemStrictEquals: function (item1, item2) {\n    var privateKey = item1 && item1.__dx_key__;\n\n    if (privateKey && !this.key() && this._selection.isItemSelected(privateKey)) {\n      return false;\n    }\n\n    return this.callBase(item1, item2);\n  },\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      showSelectionControls: false,\n      selectionMode: \"none\",\n      selectAllMode: \"page\",\n      onSelectAllValueChanged: null,\n      selectAllText: _message.default.format(\"dxList-selectAll\"),\n      menuItems: [],\n      menuMode: \"context\",\n      allowItemDeleting: false,\n      itemDeleteMode: \"static\",\n      itemDragging: {}\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function (_device) {\n        return \"ios\" === _device.platform;\n      },\n      options: {\n        menuMode: \"slide\",\n        itemDeleteMode: \"slideItem\"\n      }\n    }, {\n      device: {\n        platform: \"android\"\n      },\n      options: {\n        itemDeleteMode: \"swipe\"\n      }\n    }]);\n  },\n  _init: function () {\n    this.callBase();\n\n    this._initEditProvider();\n  },\n  _initDataSource: function () {\n    this.callBase();\n\n    if (!this._isPageSelectAll()) {\n      this._dataSource && this._dataSource.requireTotalCount(true);\n    }\n  },\n  _isPageSelectAll: function () {\n    return \"page\" === this.option(\"selectAllMode\");\n  },\n  _initEditProvider: function () {\n    this._editProvider = new _uiListEdit.default(this);\n  },\n  _disposeEditProvider: function () {\n    if (this._editProvider) {\n      this._editProvider.dispose();\n    }\n  },\n  _refreshEditProvider: function () {\n    this._disposeEditProvider();\n\n    this._initEditProvider();\n  },\n  _initEditStrategy: function () {\n    if (this.option(\"grouped\")) {\n      this._editStrategy = new _uiListEditStrategy.default(this);\n    } else {\n      this.callBase();\n    }\n  },\n  _initMarkup: function () {\n    this._refreshEditProvider();\n\n    this.callBase();\n  },\n  _renderItems: function () {\n    this.callBase.apply(this, arguments);\n\n    this._editProvider.afterItemsRendered();\n  },\n  _selectedItemClass: function () {\n    return LIST_ITEM_SELECTED_CLASS;\n  },\n  _itemResponseWaitClass: function () {\n    return LIST_ITEM_RESPONSE_WAIT_CLASS;\n  },\n  _itemClickHandler: function (e) {\n    var $itemElement = (0, _renderer.default)(e.currentTarget);\n\n    if ($itemElement.is(\".dx-state-disabled, .dx-state-disabled *\")) {\n      return;\n    }\n\n    var handledByEditProvider = this._editProvider.handleClick($itemElement, e);\n\n    if (handledByEditProvider) {\n      return;\n    }\n\n    this._saveSelectionChangeEvent(e);\n\n    this.callBase.apply(this, arguments);\n  },\n  _shouldFireContextMenuEvent: function () {\n    return this.callBase.apply(this, arguments) || this._editProvider.contextMenuHandlerExists();\n  },\n  _itemHoldHandler: function (e) {\n    var $itemElement = (0, _renderer.default)(e.currentTarget);\n\n    if ($itemElement.is(\".dx-state-disabled, .dx-state-disabled *\")) {\n      return;\n    }\n\n    var handledByEditProvider = (0, _index.isTouchEvent)(e) && this._editProvider.handleContextMenu($itemElement, e);\n\n    if (handledByEditProvider) {\n      e.handledByEditProvider = true;\n      return;\n    }\n\n    this.callBase.apply(this, arguments);\n  },\n  _itemContextMenuHandler: function (e) {\n    var $itemElement = (0, _renderer.default)(e.currentTarget);\n\n    if ($itemElement.is(\".dx-state-disabled, .dx-state-disabled *\")) {\n      return;\n    }\n\n    var handledByEditProvider = !e.handledByEditProvider && this._editProvider.handleContextMenu($itemElement, e);\n\n    if (handledByEditProvider) {\n      e.preventDefault();\n      return;\n    }\n\n    this.callBase.apply(this, arguments);\n  },\n  _postprocessRenderItem: function (args) {\n    this.callBase.apply(this, arguments);\n\n    this._editProvider.modifyItemElement(args);\n  },\n  _clean: function () {\n    this._disposeEditProvider();\n\n    this.callBase();\n  },\n  focusListItem: function (index) {\n    var $item = this._editStrategy.getItemElement(index);\n\n    this.option(\"focusedElement\", $item);\n    this.focus();\n    this.scrollToItem(this.option(\"focusedElement\"));\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"selectAllMode\":\n        this._initDataSource();\n\n        this._dataSource.pageIndex(0);\n\n        this._dataSource.load();\n\n        break;\n\n      case \"grouped\":\n        this._clearSelectedItems();\n\n        delete this._renderingGroupIndex;\n\n        this._initEditStrategy();\n\n        this.callBase(args);\n        break;\n\n      case \"showSelectionControls\":\n      case \"menuItems\":\n      case \"menuMode\":\n      case \"allowItemDeleting\":\n      case \"itemDeleteMode\":\n      case \"itemDragging\":\n      case \"selectAllText\":\n        this._invalidate();\n\n        break;\n\n      case \"onSelectAllValueChanged\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  selectAll: function () {\n    return this._selection.selectAll(this._isPageSelectAll());\n  },\n  unselectAll: function () {\n    return this._selection.deselectAll(this._isPageSelectAll());\n  },\n  isSelectAll: function () {\n    return this._selection.getSelectAllState(this._isPageSelectAll());\n  },\n  getFlatIndexByItemElement: function (itemElement) {\n    return this._itemElements().index(itemElement);\n  },\n  getItemElementByFlatIndex: function (flatIndex) {\n    var $itemElements = this._itemElements();\n\n    if (flatIndex < 0 || flatIndex >= $itemElements.length) {\n      return (0, _renderer.default)();\n    }\n\n    return $itemElements.eq(flatIndex);\n  },\n  getItemByIndex: function (index) {\n    return this._editStrategy.getItemDataByIndex(index);\n  }\n});\n\nvar _default = ListEdit;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/ui/list/ui.list.edit.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_index","_extend","_uiListEditStrategy","_message","_uiListEdit","_uiList","obj","__esModule","LIST_ITEM_SELECTED_CLASS","LIST_ITEM_RESPONSE_WAIT_CLASS","ListEdit","ListBase","inherit","_supportedKeys","_this","that","parent","callBase","deleteFocusedItem","e","option","preventDefault","deleteItem","moveFocusedItem","moveUp","editStrategy","_editStrategy","focusedElement","focusedItemIndex","getNormalizedIndex","isLastIndexFocused","_getLastItemIndex","_isDataSourceLoading","shiftKey","nextItemIndex","$nextItem","getItemElement","reorderItem","scrollToItem","editProvider","_editProvider","isInternalMoving","handleKeyboardEvents","upArrow","downArrow","enter","handleEnterPressing","apply","arguments","space","extend","del","_updateSelection","afterItemsRendered","_itemElements","length","_refreshItemElements","excludedSelectors","getExcludedItemSelectors","_itemElementsCache","not","_isItemStrictEquals","item1","item2","privateKey","__dx_key__","key","_selection","isItemSelected","_getDefaultOptions","showSelectionControls","selectionMode","selectAllMode","onSelectAllValueChanged","selectAllText","format","menuItems","menuMode","allowItemDeleting","itemDeleteMode","itemDragging","_defaultOptionsRules","concat","device","_device","platform","options","_init","_initEditProvider","_initDataSource","_isPageSelectAll","_dataSource","requireTotalCount","_disposeEditProvider","dispose","_refreshEditProvider","_initEditStrategy","_initMarkup","_renderItems","_selectedItemClass","_itemResponseWaitClass","_itemClickHandler","$itemElement","currentTarget","is","handledByEditProvider","handleClick","_saveSelectionChangeEvent","_shouldFireContextMenuEvent","contextMenuHandlerExists","_itemHoldHandler","isTouchEvent","handleContextMenu","_itemContextMenuHandler","_postprocessRenderItem","args","modifyItemElement","_clean","focusListItem","index","$item","focus","_optionChanged","name","pageIndex","load","_clearSelectedItems","_renderingGroupIndex","_invalidate","selectAll","unselectAll","deselectAll","isSelectAll","getSelectAllState","getFlatIndexByItemElement","itemElement","getItemElementByFlatIndex","flatIndex","$itemElements","eq","getItemByIndex","getItemDataByIndex","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/list/ui.list.edit.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _index = require(\"../../events/utils/index\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _uiListEditStrategy = _interopRequireDefault(require(\"./ui.list.edit.strategy.grouped\"));\r\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\r\nvar _uiListEdit = _interopRequireDefault(require(\"./ui.list.edit.provider\"));\r\nvar _uiList = require(\"./ui.list.base\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar LIST_ITEM_SELECTED_CLASS = \"dx-list-item-selected\";\r\nvar LIST_ITEM_RESPONSE_WAIT_CLASS = \"dx-list-item-response-wait\";\r\nvar ListEdit = _uiList.ListBase.inherit({\r\n    _supportedKeys: function() {\r\n        var _this = this;\r\n        var that = this;\r\n        var parent = this.callBase();\r\n        var deleteFocusedItem = function(e) {\r\n            if (that.option(\"allowItemDeleting\")) {\r\n                e.preventDefault();\r\n                that.deleteItem(that.option(\"focusedElement\"))\r\n            }\r\n        };\r\n        var moveFocusedItem = function(e, moveUp) {\r\n            var editStrategy = _this._editStrategy;\r\n            var focusedElement = _this.option(\"focusedElement\");\r\n            var focusedItemIndex = editStrategy.getNormalizedIndex(focusedElement);\r\n            var isLastIndexFocused = focusedItemIndex === _this._getLastItemIndex();\r\n            if (isLastIndexFocused && _this._isDataSourceLoading()) {\r\n                return\r\n            }\r\n            if (e.shiftKey && that.option(\"itemDragging.allowReordering\")) {\r\n                var nextItemIndex = focusedItemIndex + (moveUp ? -1 : 1);\r\n                var $nextItem = editStrategy.getItemElement(nextItemIndex);\r\n                _this.reorderItem(focusedElement, $nextItem);\r\n                _this.scrollToItem(focusedElement);\r\n                e.preventDefault()\r\n            } else {\r\n                var editProvider = _this._editProvider;\r\n                var isInternalMoving = editProvider.handleKeyboardEvents(focusedItemIndex, moveUp);\r\n                if (!isInternalMoving) {\r\n                    moveUp ? parent.upArrow(e) : parent.downArrow(e)\r\n                }\r\n            }\r\n        };\r\n        var enter = function(e) {\r\n            if (!this._editProvider.handleEnterPressing(e)) {\r\n                parent.enter.apply(this, arguments)\r\n            }\r\n        };\r\n        var space = function(e) {\r\n            if (!this._editProvider.handleEnterPressing(e)) {\r\n                parent.space.apply(this, arguments)\r\n            }\r\n        };\r\n        return (0, _extend.extend)({}, parent, {\r\n            del: deleteFocusedItem,\r\n            upArrow: function(e) {\r\n                return moveFocusedItem(e, true)\r\n            },\r\n            downArrow: function(e) {\r\n                return moveFocusedItem(e)\r\n            },\r\n            enter: enter,\r\n            space: space\r\n        })\r\n    },\r\n    _updateSelection: function() {\r\n        this._editProvider.afterItemsRendered();\r\n        this.callBase()\r\n    },\r\n    _getLastItemIndex: function() {\r\n        return this._itemElements().length - 1\r\n    },\r\n    _refreshItemElements: function() {\r\n        this.callBase();\r\n        var excludedSelectors = this._editProvider.getExcludedItemSelectors();\r\n        if (excludedSelectors.length) {\r\n            this._itemElementsCache = this._itemElementsCache.not(excludedSelectors)\r\n        }\r\n    },\r\n    _isItemStrictEquals: function(item1, item2) {\r\n        var privateKey = item1 && item1.__dx_key__;\r\n        if (privateKey && !this.key() && this._selection.isItemSelected(privateKey)) {\r\n            return false\r\n        }\r\n        return this.callBase(item1, item2)\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            showSelectionControls: false,\r\n            selectionMode: \"none\",\r\n            selectAllMode: \"page\",\r\n            onSelectAllValueChanged: null,\r\n            selectAllText: _message.default.format(\"dxList-selectAll\"),\r\n            menuItems: [],\r\n            menuMode: \"context\",\r\n            allowItemDeleting: false,\r\n            itemDeleteMode: \"static\",\r\n            itemDragging: {}\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function(_device) {\r\n                return \"ios\" === _device.platform\r\n            },\r\n            options: {\r\n                menuMode: \"slide\",\r\n                itemDeleteMode: \"slideItem\"\r\n            }\r\n        }, {\r\n            device: {\r\n                platform: \"android\"\r\n            },\r\n            options: {\r\n                itemDeleteMode: \"swipe\"\r\n            }\r\n        }])\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initEditProvider()\r\n    },\r\n    _initDataSource: function() {\r\n        this.callBase();\r\n        if (!this._isPageSelectAll()) {\r\n            this._dataSource && this._dataSource.requireTotalCount(true)\r\n        }\r\n    },\r\n    _isPageSelectAll: function() {\r\n        return \"page\" === this.option(\"selectAllMode\")\r\n    },\r\n    _initEditProvider: function() {\r\n        this._editProvider = new _uiListEdit.default(this)\r\n    },\r\n    _disposeEditProvider: function() {\r\n        if (this._editProvider) {\r\n            this._editProvider.dispose()\r\n        }\r\n    },\r\n    _refreshEditProvider: function() {\r\n        this._disposeEditProvider();\r\n        this._initEditProvider()\r\n    },\r\n    _initEditStrategy: function() {\r\n        if (this.option(\"grouped\")) {\r\n            this._editStrategy = new _uiListEditStrategy.default(this)\r\n        } else {\r\n            this.callBase()\r\n        }\r\n    },\r\n    _initMarkup: function() {\r\n        this._refreshEditProvider();\r\n        this.callBase()\r\n    },\r\n    _renderItems: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._editProvider.afterItemsRendered()\r\n    },\r\n    _selectedItemClass: function() {\r\n        return LIST_ITEM_SELECTED_CLASS\r\n    },\r\n    _itemResponseWaitClass: function() {\r\n        return LIST_ITEM_RESPONSE_WAIT_CLASS\r\n    },\r\n    _itemClickHandler: function(e) {\r\n        var $itemElement = (0, _renderer.default)(e.currentTarget);\r\n        if ($itemElement.is(\".dx-state-disabled, .dx-state-disabled *\")) {\r\n            return\r\n        }\r\n        var handledByEditProvider = this._editProvider.handleClick($itemElement, e);\r\n        if (handledByEditProvider) {\r\n            return\r\n        }\r\n        this._saveSelectionChangeEvent(e);\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _shouldFireContextMenuEvent: function() {\r\n        return this.callBase.apply(this, arguments) || this._editProvider.contextMenuHandlerExists()\r\n    },\r\n    _itemHoldHandler: function(e) {\r\n        var $itemElement = (0, _renderer.default)(e.currentTarget);\r\n        if ($itemElement.is(\".dx-state-disabled, .dx-state-disabled *\")) {\r\n            return\r\n        }\r\n        var handledByEditProvider = (0, _index.isTouchEvent)(e) && this._editProvider.handleContextMenu($itemElement, e);\r\n        if (handledByEditProvider) {\r\n            e.handledByEditProvider = true;\r\n            return\r\n        }\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _itemContextMenuHandler: function(e) {\r\n        var $itemElement = (0, _renderer.default)(e.currentTarget);\r\n        if ($itemElement.is(\".dx-state-disabled, .dx-state-disabled *\")) {\r\n            return\r\n        }\r\n        var handledByEditProvider = !e.handledByEditProvider && this._editProvider.handleContextMenu($itemElement, e);\r\n        if (handledByEditProvider) {\r\n            e.preventDefault();\r\n            return\r\n        }\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _postprocessRenderItem: function(args) {\r\n        this.callBase.apply(this, arguments);\r\n        this._editProvider.modifyItemElement(args)\r\n    },\r\n    _clean: function() {\r\n        this._disposeEditProvider();\r\n        this.callBase()\r\n    },\r\n    focusListItem: function(index) {\r\n        var $item = this._editStrategy.getItemElement(index);\r\n        this.option(\"focusedElement\", $item);\r\n        this.focus();\r\n        this.scrollToItem(this.option(\"focusedElement\"))\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"selectAllMode\":\r\n                this._initDataSource();\r\n                this._dataSource.pageIndex(0);\r\n                this._dataSource.load();\r\n                break;\r\n            case \"grouped\":\r\n                this._clearSelectedItems();\r\n                delete this._renderingGroupIndex;\r\n                this._initEditStrategy();\r\n                this.callBase(args);\r\n                break;\r\n            case \"showSelectionControls\":\r\n            case \"menuItems\":\r\n            case \"menuMode\":\r\n            case \"allowItemDeleting\":\r\n            case \"itemDeleteMode\":\r\n            case \"itemDragging\":\r\n            case \"selectAllText\":\r\n                this._invalidate();\r\n                break;\r\n            case \"onSelectAllValueChanged\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    selectAll: function() {\r\n        return this._selection.selectAll(this._isPageSelectAll())\r\n    },\r\n    unselectAll: function() {\r\n        return this._selection.deselectAll(this._isPageSelectAll())\r\n    },\r\n    isSelectAll: function() {\r\n        return this._selection.getSelectAllState(this._isPageSelectAll())\r\n    },\r\n    getFlatIndexByItemElement: function(itemElement) {\r\n        return this._itemElements().index(itemElement)\r\n    },\r\n    getItemElementByFlatIndex: function(flatIndex) {\r\n        var $itemElements = this._itemElements();\r\n        if (flatIndex < 0 || flatIndex >= $itemElements.length) {\r\n            return (0, _renderer.default)()\r\n        }\r\n        return $itemElements.eq(flatIndex)\r\n    },\r\n    getItemByIndex: function(index) {\r\n        return this._editStrategy.getItemDataByIndex(index)\r\n    }\r\n});\r\nvar _default = ListEdit;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}