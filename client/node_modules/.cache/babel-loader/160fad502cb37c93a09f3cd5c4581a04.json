{"ast":null,"code":"/**\r\n * DevExtreme (ui/validator.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _element_data = require(\"../core/element_data\");\n\nvar _callbacks = _interopRequireDefault(require(\"../core/utils/callbacks\"));\n\nvar _ui = _interopRequireDefault(require(\"./widget/ui.errors\"));\n\nvar _dom_component = _interopRequireDefault(require(\"../core/dom_component\"));\n\nvar _extend = require(\"../core/utils/extend\");\n\nvar _iterator = require(\"../core/utils/iterator\");\n\nvar _validation_engine = _interopRequireDefault(require(\"./validation_engine\"));\n\nvar _default_adapter = _interopRequireDefault(require(\"./validation/default_adapter\"));\n\nvar _component_registrator = _interopRequireDefault(require(\"../core/component_registrator\"));\n\nvar _deferred = require(\"../core/utils/deferred\");\n\nvar _guid = _interopRequireDefault(require(\"../core/guid\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar VALIDATOR_CLASS = \"dx-validator\";\nvar VALIDATION_STATUS_VALID = \"valid\";\nvar VALIDATION_STATUS_INVALID = \"invalid\";\nvar VALIDATION_STATUS_PENDING = \"pending\";\n\nvar Validator = _dom_component.default.inherit({\n  _initOptions: function (options) {\n    this.callBase.apply(this, arguments);\n    this.option(_validation_engine.default.initValidationOptions(options));\n  },\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      validationRules: []\n    });\n  },\n  _init: function () {\n    this.callBase();\n\n    this._initGroupRegistration();\n\n    this.focused = (0, _callbacks.default)();\n\n    this._initAdapter();\n\n    this._validationInfo = {\n      result: null,\n      deferred: null,\n      skipValidation: false\n    };\n  },\n  _initGroupRegistration: function () {\n    var group = this._findGroup();\n\n    if (!this._groupWasInit) {\n      this.on(\"disposing\", function (args) {\n        _validation_engine.default.removeRegisteredValidator(args.component._validationGroup, args.component);\n      });\n    }\n\n    if (!this._groupWasInit || this._validationGroup !== group) {\n      _validation_engine.default.removeRegisteredValidator(this._validationGroup, this);\n\n      this._groupWasInit = true;\n      this._validationGroup = group;\n\n      _validation_engine.default.registerValidatorInGroup(group, this);\n    }\n  },\n  _setOptionsByReference: function () {\n    this.callBase();\n    (0, _extend.extend)(this._optionsByReference, {\n      validationGroup: true\n    });\n  },\n  _initAdapter: function () {\n    var _this = this;\n\n    var element = this.$element()[0];\n    var dxStandardEditor = (0, _element_data.data)(element, \"dx-validation-target\");\n    var adapter = this.option(\"adapter\");\n\n    if (!adapter) {\n      if (dxStandardEditor) {\n        adapter = new _default_adapter.default(dxStandardEditor, this);\n        adapter.validationRequestsCallbacks.push(function (args) {\n          if (_this._validationInfo.skipValidation) {\n            return;\n          }\n\n          _this.validate(args);\n        });\n        this.option(\"adapter\", adapter);\n        return;\n      }\n\n      throw _ui.default.Error(\"E0120\");\n    }\n\n    var callbacks = adapter.validationRequestsCallbacks;\n\n    if (callbacks) {\n      callbacks.push(function (args) {\n        _this.validate(args);\n      });\n    }\n  },\n  _toggleRTLDirection: function (isRtl) {\n    var _this$option$editor$o, _this$option, _this$option$editor;\n\n    var rtlEnabled = null !== (_this$option$editor$o = null === (_this$option = this.option(\"adapter\")) || void 0 === _this$option ? void 0 : null === (_this$option$editor = _this$option.editor) || void 0 === _this$option$editor ? void 0 : _this$option$editor.option(\"rtlEnabled\")) && void 0 !== _this$option$editor$o ? _this$option$editor$o : isRtl;\n    this.callBase(rtlEnabled);\n  },\n  _initMarkup: function () {\n    this.$element().addClass(VALIDATOR_CLASS);\n    this.callBase();\n  },\n  _visibilityChanged: function (visible) {\n    if (visible) {\n      this._initGroupRegistration();\n    }\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"validationGroup\":\n        this._initGroupRegistration();\n\n        return;\n\n      case \"validationRules\":\n        this._resetValidationRules();\n\n        void 0 !== this.option(\"isValid\") && this.validate();\n        return;\n\n      case \"adapter\":\n        this._initAdapter();\n\n        break;\n\n      case \"isValid\":\n      case \"validationStatus\":\n        this.option(_validation_engine.default.synchronizeValidationOptions(args, this.option()));\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _getValidationRules: function () {\n    var _this2 = this;\n\n    if (!this._validationRules) {\n      this._validationRules = (0, _iterator.map)(this.option(\"validationRules\"), function (rule, index) {\n        return (0, _extend.extend)({}, rule, {\n          validator: _this2,\n          index: index\n        });\n      });\n    }\n\n    return this._validationRules;\n  },\n  _findGroup: function () {\n    var $element = this.$element();\n    return this.option(\"validationGroup\") || _validation_engine.default.findGroup($element, this._modelByElement($element));\n  },\n  _resetValidationRules: function () {\n    delete this._validationRules;\n  },\n  validate: function (args) {\n    var _this3 = this;\n\n    var adapter = this.option(\"adapter\");\n    var name = this.option(\"name\");\n    var bypass = adapter.bypass && adapter.bypass();\n    var value = args && void 0 !== args.value ? args.value : adapter.getValue();\n    var currentError = adapter.getCurrentValidationError && adapter.getCurrentValidationError();\n\n    var rules = this._getValidationRules();\n\n    var currentResult = this._validationInfo && this._validationInfo.result;\n\n    if (currentResult && currentResult.status === VALIDATION_STATUS_PENDING && currentResult.value === value) {\n      return (0, _extend.extend)({}, currentResult);\n    }\n\n    var result;\n\n    if (bypass) {\n      result = {\n        isValid: true,\n        status: VALIDATION_STATUS_VALID\n      };\n    } else {\n      if (currentError && currentError.editorSpecific) {\n        currentError.validator = this;\n        result = {\n          isValid: false,\n          status: VALIDATION_STATUS_INVALID,\n          brokenRule: currentError,\n          brokenRules: [currentError]\n        };\n      } else {\n        result = _validation_engine.default.validate(value, rules, name);\n      }\n    }\n\n    result.id = new _guid.default().toString();\n\n    this._applyValidationResult(result, adapter);\n\n    result.complete && result.complete.then(function (res) {\n      if (res.id === _this3._validationInfo.result.id) {\n        _this3._applyValidationResult(res, adapter);\n      }\n    });\n    return (0, _extend.extend)({}, this._validationInfo.result);\n  },\n  reset: function () {\n    var adapter = this.option(\"adapter\");\n    var result = {\n      id: null,\n      isValid: true,\n      brokenRule: null,\n      brokenRules: null,\n      pendingRules: null,\n      status: VALIDATION_STATUS_VALID,\n      complete: null\n    };\n    this._validationInfo.skipValidation = true;\n    adapter.reset();\n    this._validationInfo.skipValidation = false;\n\n    this._resetValidationRules();\n\n    this._applyValidationResult(result, adapter);\n  },\n  _updateValidationResult: function (result) {\n    if (!this._validationInfo.result || this._validationInfo.result.id !== result.id) {\n      var complete = this._validationInfo.deferred && this._validationInfo.result.complete;\n      this._validationInfo.result = (0, _extend.extend)({}, result, {\n        complete: complete\n      });\n    } else {\n      for (var prop in result) {\n        if (\"id\" !== prop && \"complete\" !== prop) {\n          this._validationInfo.result[prop] = result[prop];\n        }\n      }\n    }\n  },\n  _applyValidationResult: function (result, adapter) {\n    var validatedAction = this._createActionByOption(\"onValidated\", {\n      excludeValidators: [\"readOnly\"]\n    });\n\n    result.validator = this;\n\n    this._updateValidationResult(result);\n\n    adapter.applyValidationResults && adapter.applyValidationResults(this._validationInfo.result);\n    this.option({\n      validationStatus: this._validationInfo.result.status\n    });\n\n    if (this._validationInfo.result.status === VALIDATION_STATUS_PENDING) {\n      if (!this._validationInfo.deferred) {\n        this._validationInfo.deferred = new _deferred.Deferred();\n        this._validationInfo.result.complete = this._validationInfo.deferred.promise();\n      }\n\n      this._eventsStrategy.fireEvent(\"validating\", [this._validationInfo.result]);\n\n      return;\n    }\n\n    if (this._validationInfo.result.status !== VALIDATION_STATUS_PENDING) {\n      validatedAction(result);\n\n      if (this._validationInfo.deferred) {\n        this._validationInfo.deferred.resolve(result);\n\n        this._validationInfo.deferred = null;\n      }\n    }\n  },\n  focus: function () {\n    var adapter = this.option(\"adapter\");\n    adapter && adapter.focus && adapter.focus();\n  },\n  _useTemplates: function () {\n    return false;\n  }\n});\n\n(0, _component_registrator.default)(\"dxValidator\", Validator);\nvar _default = Validator;\nexports.default = _default;\nmodule.exports = exports.default;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/ui/validator.js"],"names":["exports","default","_element_data","require","_callbacks","_interopRequireDefault","_ui","_dom_component","_extend","_iterator","_validation_engine","_default_adapter","_component_registrator","_deferred","_guid","obj","__esModule","VALIDATOR_CLASS","VALIDATION_STATUS_VALID","VALIDATION_STATUS_INVALID","VALIDATION_STATUS_PENDING","Validator","inherit","_initOptions","options","callBase","apply","arguments","option","initValidationOptions","_getDefaultOptions","extend","validationRules","_init","_initGroupRegistration","focused","_initAdapter","_validationInfo","result","deferred","skipValidation","group","_findGroup","_groupWasInit","on","args","removeRegisteredValidator","component","_validationGroup","registerValidatorInGroup","_setOptionsByReference","_optionsByReference","validationGroup","_this","element","$element","dxStandardEditor","data","adapter","validationRequestsCallbacks","push","validate","Error","callbacks","_toggleRTLDirection","isRtl","_this$option$editor$o","_this$option","_this$option$editor","rtlEnabled","editor","_initMarkup","addClass","_visibilityChanged","visible","_optionChanged","name","_resetValidationRules","synchronizeValidationOptions","_getValidationRules","_this2","_validationRules","map","rule","index","validator","findGroup","_modelByElement","_this3","bypass","value","getValue","currentError","getCurrentValidationError","rules","currentResult","status","isValid","editorSpecific","brokenRule","brokenRules","id","toString","_applyValidationResult","complete","then","res","reset","pendingRules","_updateValidationResult","prop","validatedAction","_createActionByOption","excludeValidators","applyValidationResults","validationStatus","Deferred","promise","_eventsStrategy","fireEvent","resolve","focus","_useTemplates","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/validator.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _element_data = require(\"../core/element_data\");\r\nvar _callbacks = _interopRequireDefault(require(\"../core/utils/callbacks\"));\r\nvar _ui = _interopRequireDefault(require(\"./widget/ui.errors\"));\r\nvar _dom_component = _interopRequireDefault(require(\"../core/dom_component\"));\r\nvar _extend = require(\"../core/utils/extend\");\r\nvar _iterator = require(\"../core/utils/iterator\");\r\nvar _validation_engine = _interopRequireDefault(require(\"./validation_engine\"));\r\nvar _default_adapter = _interopRequireDefault(require(\"./validation/default_adapter\"));\r\nvar _component_registrator = _interopRequireDefault(require(\"../core/component_registrator\"));\r\nvar _deferred = require(\"../core/utils/deferred\");\r\nvar _guid = _interopRequireDefault(require(\"../core/guid\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar VALIDATOR_CLASS = \"dx-validator\";\r\nvar VALIDATION_STATUS_VALID = \"valid\";\r\nvar VALIDATION_STATUS_INVALID = \"invalid\";\r\nvar VALIDATION_STATUS_PENDING = \"pending\";\r\nvar Validator = _dom_component.default.inherit({\r\n    _initOptions: function(options) {\r\n        this.callBase.apply(this, arguments);\r\n        this.option(_validation_engine.default.initValidationOptions(options))\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            validationRules: []\r\n        })\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initGroupRegistration();\r\n        this.focused = (0, _callbacks.default)();\r\n        this._initAdapter();\r\n        this._validationInfo = {\r\n            result: null,\r\n            deferred: null,\r\n            skipValidation: false\r\n        }\r\n    },\r\n    _initGroupRegistration: function() {\r\n        var group = this._findGroup();\r\n        if (!this._groupWasInit) {\r\n            this.on(\"disposing\", function(args) {\r\n                _validation_engine.default.removeRegisteredValidator(args.component._validationGroup, args.component)\r\n            })\r\n        }\r\n        if (!this._groupWasInit || this._validationGroup !== group) {\r\n            _validation_engine.default.removeRegisteredValidator(this._validationGroup, this);\r\n            this._groupWasInit = true;\r\n            this._validationGroup = group;\r\n            _validation_engine.default.registerValidatorInGroup(group, this)\r\n        }\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this.callBase();\r\n        (0, _extend.extend)(this._optionsByReference, {\r\n            validationGroup: true\r\n        })\r\n    },\r\n    _initAdapter: function() {\r\n        var _this = this;\r\n        var element = this.$element()[0];\r\n        var dxStandardEditor = (0, _element_data.data)(element, \"dx-validation-target\");\r\n        var adapter = this.option(\"adapter\");\r\n        if (!adapter) {\r\n            if (dxStandardEditor) {\r\n                adapter = new _default_adapter.default(dxStandardEditor, this);\r\n                adapter.validationRequestsCallbacks.push(function(args) {\r\n                    if (_this._validationInfo.skipValidation) {\r\n                        return\r\n                    }\r\n                    _this.validate(args)\r\n                });\r\n                this.option(\"adapter\", adapter);\r\n                return\r\n            }\r\n            throw _ui.default.Error(\"E0120\")\r\n        }\r\n        var callbacks = adapter.validationRequestsCallbacks;\r\n        if (callbacks) {\r\n            callbacks.push(function(args) {\r\n                _this.validate(args)\r\n            })\r\n        }\r\n    },\r\n    _toggleRTLDirection: function(isRtl) {\r\n        var _this$option$editor$o, _this$option, _this$option$editor;\r\n        var rtlEnabled = null !== (_this$option$editor$o = null === (_this$option = this.option(\"adapter\")) || void 0 === _this$option ? void 0 : null === (_this$option$editor = _this$option.editor) || void 0 === _this$option$editor ? void 0 : _this$option$editor.option(\"rtlEnabled\")) && void 0 !== _this$option$editor$o ? _this$option$editor$o : isRtl;\r\n        this.callBase(rtlEnabled)\r\n    },\r\n    _initMarkup: function() {\r\n        this.$element().addClass(VALIDATOR_CLASS);\r\n        this.callBase()\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible) {\r\n            this._initGroupRegistration()\r\n        }\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"validationGroup\":\r\n                this._initGroupRegistration();\r\n                return;\r\n            case \"validationRules\":\r\n                this._resetValidationRules();\r\n                void 0 !== this.option(\"isValid\") && this.validate();\r\n                return;\r\n            case \"adapter\":\r\n                this._initAdapter();\r\n                break;\r\n            case \"isValid\":\r\n            case \"validationStatus\":\r\n                this.option(_validation_engine.default.synchronizeValidationOptions(args, this.option()));\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _getValidationRules: function() {\r\n        var _this2 = this;\r\n        if (!this._validationRules) {\r\n            this._validationRules = (0, _iterator.map)(this.option(\"validationRules\"), function(rule, index) {\r\n                return (0, _extend.extend)({}, rule, {\r\n                    validator: _this2,\r\n                    index: index\r\n                })\r\n            })\r\n        }\r\n        return this._validationRules\r\n    },\r\n    _findGroup: function() {\r\n        var $element = this.$element();\r\n        return this.option(\"validationGroup\") || _validation_engine.default.findGroup($element, this._modelByElement($element))\r\n    },\r\n    _resetValidationRules: function() {\r\n        delete this._validationRules\r\n    },\r\n    validate: function(args) {\r\n        var _this3 = this;\r\n        var adapter = this.option(\"adapter\");\r\n        var name = this.option(\"name\");\r\n        var bypass = adapter.bypass && adapter.bypass();\r\n        var value = args && void 0 !== args.value ? args.value : adapter.getValue();\r\n        var currentError = adapter.getCurrentValidationError && adapter.getCurrentValidationError();\r\n        var rules = this._getValidationRules();\r\n        var currentResult = this._validationInfo && this._validationInfo.result;\r\n        if (currentResult && currentResult.status === VALIDATION_STATUS_PENDING && currentResult.value === value) {\r\n            return (0, _extend.extend)({}, currentResult)\r\n        }\r\n        var result;\r\n        if (bypass) {\r\n            result = {\r\n                isValid: true,\r\n                status: VALIDATION_STATUS_VALID\r\n            }\r\n        } else {\r\n            if (currentError && currentError.editorSpecific) {\r\n                currentError.validator = this;\r\n                result = {\r\n                    isValid: false,\r\n                    status: VALIDATION_STATUS_INVALID,\r\n                    brokenRule: currentError,\r\n                    brokenRules: [currentError]\r\n                }\r\n            } else {\r\n                result = _validation_engine.default.validate(value, rules, name)\r\n            }\r\n        }\r\n        result.id = (new _guid.default).toString();\r\n        this._applyValidationResult(result, adapter);\r\n        result.complete && result.complete.then(function(res) {\r\n            if (res.id === _this3._validationInfo.result.id) {\r\n                _this3._applyValidationResult(res, adapter)\r\n            }\r\n        });\r\n        return (0, _extend.extend)({}, this._validationInfo.result)\r\n    },\r\n    reset: function() {\r\n        var adapter = this.option(\"adapter\");\r\n        var result = {\r\n            id: null,\r\n            isValid: true,\r\n            brokenRule: null,\r\n            brokenRules: null,\r\n            pendingRules: null,\r\n            status: VALIDATION_STATUS_VALID,\r\n            complete: null\r\n        };\r\n        this._validationInfo.skipValidation = true;\r\n        adapter.reset();\r\n        this._validationInfo.skipValidation = false;\r\n        this._resetValidationRules();\r\n        this._applyValidationResult(result, adapter)\r\n    },\r\n    _updateValidationResult: function(result) {\r\n        if (!this._validationInfo.result || this._validationInfo.result.id !== result.id) {\r\n            var complete = this._validationInfo.deferred && this._validationInfo.result.complete;\r\n            this._validationInfo.result = (0, _extend.extend)({}, result, {\r\n                complete: complete\r\n            })\r\n        } else {\r\n            for (var prop in result) {\r\n                if (\"id\" !== prop && \"complete\" !== prop) {\r\n                    this._validationInfo.result[prop] = result[prop]\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _applyValidationResult: function(result, adapter) {\r\n        var validatedAction = this._createActionByOption(\"onValidated\", {\r\n            excludeValidators: [\"readOnly\"]\r\n        });\r\n        result.validator = this;\r\n        this._updateValidationResult(result);\r\n        adapter.applyValidationResults && adapter.applyValidationResults(this._validationInfo.result);\r\n        this.option({\r\n            validationStatus: this._validationInfo.result.status\r\n        });\r\n        if (this._validationInfo.result.status === VALIDATION_STATUS_PENDING) {\r\n            if (!this._validationInfo.deferred) {\r\n                this._validationInfo.deferred = new _deferred.Deferred;\r\n                this._validationInfo.result.complete = this._validationInfo.deferred.promise()\r\n            }\r\n            this._eventsStrategy.fireEvent(\"validating\", [this._validationInfo.result]);\r\n            return\r\n        }\r\n        if (this._validationInfo.result.status !== VALIDATION_STATUS_PENDING) {\r\n            validatedAction(result);\r\n            if (this._validationInfo.deferred) {\r\n                this._validationInfo.deferred.resolve(result);\r\n                this._validationInfo.deferred = null\r\n            }\r\n        }\r\n    },\r\n    focus: function() {\r\n        var adapter = this.option(\"adapter\");\r\n        adapter && adapter.focus && adapter.focus()\r\n    },\r\n    _useTemplates: function() {\r\n        return false\r\n    }\r\n});\r\n(0, _component_registrator.default)(\"dxValidator\", Validator);\r\nvar _default = Validator;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}