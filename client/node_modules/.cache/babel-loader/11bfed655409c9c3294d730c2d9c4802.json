{"ast":null,"code":"/**\r\n * DevExtreme (ui/selection/selection.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _class = _interopRequireDefault(require(\"../../core/class\"));\n\nvar _selectionStrategy = _interopRequireDefault(require(\"./selection.strategy.deferred\"));\n\nvar _selectionStrategy2 = _interopRequireDefault(require(\"./selection.strategy.standard\"));\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar _default = _class.default.inherit({\n  ctor: function (options) {\n    this.options = (0, _extend.extend)(this._getDefaultOptions(), options, {\n      selectedItemKeys: options.selectedKeys || []\n    });\n    this._selectionStrategy = this.options.deferred ? new _selectionStrategy.default(this.options) : new _selectionStrategy2.default(this.options);\n    this._focusedItemIndex = -1;\n\n    if (!this.options.equalByReference) {\n      this._selectionStrategy.updateSelectedItemKeyHash(this.options.selectedItemKeys);\n    }\n  },\n  _getDefaultOptions: function () {\n    return {\n      allowNullValue: false,\n      deferred: false,\n      equalByReference: false,\n      mode: \"multiple\",\n      selectedItems: [],\n      selectionFilter: [],\n      maxFilterLengthInRequest: 0,\n      onSelectionChanged: _common.noop,\n      key: _common.noop,\n      keyOf: function (item) {\n        return item;\n      },\n      load: function () {\n        return new _deferred.Deferred().resolve([]);\n      },\n      totalCount: function () {\n        return -1;\n      },\n      isSelectableItem: function () {\n        return true;\n      },\n      isItemSelected: function () {\n        return false;\n      },\n      getItemData: function (item) {\n        return item;\n      },\n      dataFields: _common.noop,\n      filter: _common.noop\n    };\n  },\n  validate: function () {\n    this._selectionStrategy.validate();\n  },\n  getSelectedItemKeys: function () {\n    return this._selectionStrategy.getSelectedItemKeys();\n  },\n  getSelectedItems: function () {\n    return this._selectionStrategy.getSelectedItems();\n  },\n  selectionFilter: function (value) {\n    if (void 0 === value) {\n      return this.options.selectionFilter;\n    }\n\n    var filterIsChanged = this.options.selectionFilter !== value && JSON.stringify(this.options.selectionFilter) !== JSON.stringify(value);\n    this.options.selectionFilter = value;\n    filterIsChanged && this.onSelectionChanged();\n  },\n  setSelection: function (keys) {\n    return this.selectedItemKeys(keys);\n  },\n  select: function (keys) {\n    return this.selectedItemKeys(keys, true);\n  },\n  deselect: function (keys) {\n    return this.selectedItemKeys(keys, true, true);\n  },\n  selectedItemKeys: function (keys, preserve, isDeselect, isSelectAll) {\n    var _keys;\n\n    var that = this;\n    keys = null !== (_keys = keys) && void 0 !== _keys ? _keys : [];\n    keys = Array.isArray(keys) ? keys : [keys];\n    that.validate();\n    return this._selectionStrategy.selectedItemKeys(keys, preserve, isDeselect, isSelectAll);\n  },\n  clearSelection: function () {\n    return this.selectedItemKeys([]);\n  },\n  _addSelectedItem: function (itemData, key) {\n    this._selectionStrategy.addSelectedItem(key, itemData);\n  },\n  _removeSelectedItem: function (key) {\n    this._selectionStrategy.removeSelectedItem(key);\n  },\n  _setSelectedItems: function (keys, items) {\n    this._selectionStrategy.setSelectedItems(keys, items);\n  },\n  onSelectionChanged: function () {\n    this._selectionStrategy.onSelectionChanged();\n  },\n  changeItemSelection: function (itemIndex, keys) {\n    var isSelectedItemsChanged;\n    var items = this.options.plainItems();\n    var item = items[itemIndex];\n\n    if (!this.isSelectable() || !this.isDataItem(item)) {\n      return false;\n    }\n\n    var itemData = this.options.getItemData(item);\n    var itemKey = this.options.keyOf(itemData);\n    keys = keys || {};\n\n    if (keys.shift && \"multiple\" === this.options.mode && this._focusedItemIndex >= 0) {\n      isSelectedItemsChanged = this.changeItemSelectionWhenShiftKeyPressed(itemIndex, items);\n    } else {\n      if (keys.control) {\n        this._resetItemSelectionWhenShiftKeyPressed();\n\n        var isSelected = this._selectionStrategy.isItemDataSelected(itemData);\n\n        if (\"single\" === this.options.mode) {\n          this.clearSelectedItems();\n        }\n\n        if (isSelected) {\n          this._removeSelectedItem(itemKey);\n        } else {\n          this._addSelectedItem(itemData, itemKey);\n        }\n\n        isSelectedItemsChanged = true;\n      } else {\n        this._resetItemSelectionWhenShiftKeyPressed();\n\n        var isKeysEqual = this._selectionStrategy.equalKeys(this.options.selectedItemKeys[0], itemKey);\n\n        if (1 !== this.options.selectedItemKeys.length || !isKeysEqual) {\n          this._setSelectedItems([itemKey], [itemData]);\n\n          isSelectedItemsChanged = true;\n        }\n      }\n    }\n\n    if (isSelectedItemsChanged) {\n      this._focusedItemIndex = itemIndex;\n      this.onSelectionChanged();\n      return true;\n    }\n  },\n  isDataItem: function (item) {\n    return this.options.isSelectableItem(item);\n  },\n  isSelectable: function () {\n    return \"single\" === this.options.mode || \"multiple\" === this.options.mode;\n  },\n  isItemDataSelected: function (data) {\n    return this._selectionStrategy.isItemDataSelected(data, {\n      checkPending: true\n    });\n  },\n  isItemSelected: function (arg, options) {\n    return this._selectionStrategy.isItemKeySelected(arg, options);\n  },\n  _resetItemSelectionWhenShiftKeyPressed: function () {\n    delete this._shiftFocusedItemIndex;\n  },\n  _resetFocusedItemIndex: function () {\n    this._focusedItemIndex = -1;\n  },\n  changeItemSelectionWhenShiftKeyPressed: function (itemIndex, items) {\n    var isSelectedItemsChanged = false;\n    var itemIndexStep;\n    var index;\n    var keyOf = this.options.keyOf;\n    var focusedItem = items[this._focusedItemIndex];\n    var focusedData = this.options.getItemData(focusedItem);\n    var focusedKey = keyOf(focusedData);\n    var isFocusedItemSelected = focusedItem && this.isItemDataSelected(focusedData);\n\n    if (!(0, _type.isDefined)(this._shiftFocusedItemIndex)) {\n      this._shiftFocusedItemIndex = this._focusedItemIndex;\n    }\n\n    var data;\n    var itemKey;\n\n    if (this._shiftFocusedItemIndex !== this._focusedItemIndex) {\n      itemIndexStep = this._focusedItemIndex < this._shiftFocusedItemIndex ? 1 : -1;\n\n      for (index = this._focusedItemIndex; index !== this._shiftFocusedItemIndex; index += itemIndexStep) {\n        if (this.isDataItem(items[index])) {\n          itemKey = keyOf(this.options.getItemData(items[index]));\n\n          this._removeSelectedItem(itemKey);\n\n          isSelectedItemsChanged = true;\n        }\n      }\n    }\n\n    if (itemIndex !== this._shiftFocusedItemIndex) {\n      itemIndexStep = itemIndex < this._shiftFocusedItemIndex ? 1 : -1;\n\n      for (index = itemIndex; index !== this._shiftFocusedItemIndex; index += itemIndexStep) {\n        if (this.isDataItem(items[index])) {\n          data = this.options.getItemData(items[index]);\n          itemKey = keyOf(data);\n\n          this._addSelectedItem(data, itemKey);\n\n          isSelectedItemsChanged = true;\n        }\n      }\n    }\n\n    if (this.isDataItem(focusedItem) && !isFocusedItemSelected) {\n      this._addSelectedItem(focusedData, focusedKey);\n\n      isSelectedItemsChanged = true;\n    }\n\n    return isSelectedItemsChanged;\n  },\n  clearSelectedItems: function () {\n    this._setSelectedItems([], []);\n  },\n  selectAll: function (isOnePage) {\n    this._resetFocusedItemIndex();\n\n    if (isOnePage) {\n      return this._onePageSelectAll(false);\n    } else {\n      return this.selectedItemKeys([], true, false, true);\n    }\n  },\n  deselectAll: function (isOnePage) {\n    this._resetFocusedItemIndex();\n\n    if (isOnePage) {\n      return this._onePageSelectAll(true);\n    } else {\n      return this.selectedItemKeys([], true, true, true);\n    }\n  },\n  _onePageSelectAll: function (isDeselect) {\n    var items = this._selectionStrategy.getSelectableItems(this.options.plainItems());\n\n    for (var i = 0; i < items.length; i++) {\n      var item = items[i];\n\n      if (this.isDataItem(item)) {\n        var itemData = this.options.getItemData(item);\n        var itemKey = this.options.keyOf(itemData);\n        var isSelected = this.isItemSelected(itemKey);\n\n        if (!isSelected && !isDeselect) {\n          this._addSelectedItem(itemData, itemKey);\n        }\n\n        if (isSelected && isDeselect) {\n          this._removeSelectedItem(itemKey);\n        }\n      }\n    }\n\n    this.onSelectionChanged();\n    return new _deferred.Deferred().resolve();\n  },\n  getSelectAllState: function (visibleOnly) {\n    return this._selectionStrategy.getSelectAllState(visibleOnly);\n  }\n});\n\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/ui/selection/selection.js"],"names":["exports","default","_class","_interopRequireDefault","require","_selectionStrategy","_selectionStrategy2","_extend","_common","_type","_deferred","obj","__esModule","_default","inherit","ctor","options","extend","_getDefaultOptions","selectedItemKeys","selectedKeys","deferred","_focusedItemIndex","equalByReference","updateSelectedItemKeyHash","allowNullValue","mode","selectedItems","selectionFilter","maxFilterLengthInRequest","onSelectionChanged","noop","key","keyOf","item","load","Deferred","resolve","totalCount","isSelectableItem","isItemSelected","getItemData","dataFields","filter","validate","getSelectedItemKeys","getSelectedItems","value","filterIsChanged","JSON","stringify","setSelection","keys","select","deselect","preserve","isDeselect","isSelectAll","_keys","that","Array","isArray","clearSelection","_addSelectedItem","itemData","addSelectedItem","_removeSelectedItem","removeSelectedItem","_setSelectedItems","items","setSelectedItems","changeItemSelection","itemIndex","isSelectedItemsChanged","plainItems","isSelectable","isDataItem","itemKey","shift","changeItemSelectionWhenShiftKeyPressed","control","_resetItemSelectionWhenShiftKeyPressed","isSelected","isItemDataSelected","clearSelectedItems","isKeysEqual","equalKeys","length","data","checkPending","arg","isItemKeySelected","_shiftFocusedItemIndex","_resetFocusedItemIndex","itemIndexStep","index","focusedItem","focusedData","focusedKey","isFocusedItemSelected","isDefined","selectAll","isOnePage","_onePageSelectAll","deselectAll","getSelectableItems","i","getSelectAllState","visibleOnly","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/selection/selection.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _class = _interopRequireDefault(require(\"../../core/class\"));\r\nvar _selectionStrategy = _interopRequireDefault(require(\"./selection.strategy.deferred\"));\r\nvar _selectionStrategy2 = _interopRequireDefault(require(\"./selection.strategy.standard\"));\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar _default = _class.default.inherit({\r\n    ctor: function(options) {\r\n        this.options = (0, _extend.extend)(this._getDefaultOptions(), options, {\r\n            selectedItemKeys: options.selectedKeys || []\r\n        });\r\n        this._selectionStrategy = this.options.deferred ? new _selectionStrategy.default(this.options) : new _selectionStrategy2.default(this.options);\r\n        this._focusedItemIndex = -1;\r\n        if (!this.options.equalByReference) {\r\n            this._selectionStrategy.updateSelectedItemKeyHash(this.options.selectedItemKeys)\r\n        }\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return {\r\n            allowNullValue: false,\r\n            deferred: false,\r\n            equalByReference: false,\r\n            mode: \"multiple\",\r\n            selectedItems: [],\r\n            selectionFilter: [],\r\n            maxFilterLengthInRequest: 0,\r\n            onSelectionChanged: _common.noop,\r\n            key: _common.noop,\r\n            keyOf: function(item) {\r\n                return item\r\n            },\r\n            load: function() {\r\n                return (new _deferred.Deferred).resolve([])\r\n            },\r\n            totalCount: function() {\r\n                return -1\r\n            },\r\n            isSelectableItem: function() {\r\n                return true\r\n            },\r\n            isItemSelected: function() {\r\n                return false\r\n            },\r\n            getItemData: function(item) {\r\n                return item\r\n            },\r\n            dataFields: _common.noop,\r\n            filter: _common.noop\r\n        }\r\n    },\r\n    validate: function() {\r\n        this._selectionStrategy.validate()\r\n    },\r\n    getSelectedItemKeys: function() {\r\n        return this._selectionStrategy.getSelectedItemKeys()\r\n    },\r\n    getSelectedItems: function() {\r\n        return this._selectionStrategy.getSelectedItems()\r\n    },\r\n    selectionFilter: function(value) {\r\n        if (void 0 === value) {\r\n            return this.options.selectionFilter\r\n        }\r\n        var filterIsChanged = this.options.selectionFilter !== value && JSON.stringify(this.options.selectionFilter) !== JSON.stringify(value);\r\n        this.options.selectionFilter = value;\r\n        filterIsChanged && this.onSelectionChanged()\r\n    },\r\n    setSelection: function(keys) {\r\n        return this.selectedItemKeys(keys)\r\n    },\r\n    select: function(keys) {\r\n        return this.selectedItemKeys(keys, true)\r\n    },\r\n    deselect: function(keys) {\r\n        return this.selectedItemKeys(keys, true, true)\r\n    },\r\n    selectedItemKeys: function(keys, preserve, isDeselect, isSelectAll) {\r\n        var _keys;\r\n        var that = this;\r\n        keys = null !== (_keys = keys) && void 0 !== _keys ? _keys : [];\r\n        keys = Array.isArray(keys) ? keys : [keys];\r\n        that.validate();\r\n        return this._selectionStrategy.selectedItemKeys(keys, preserve, isDeselect, isSelectAll)\r\n    },\r\n    clearSelection: function() {\r\n        return this.selectedItemKeys([])\r\n    },\r\n    _addSelectedItem: function(itemData, key) {\r\n        this._selectionStrategy.addSelectedItem(key, itemData)\r\n    },\r\n    _removeSelectedItem: function(key) {\r\n        this._selectionStrategy.removeSelectedItem(key)\r\n    },\r\n    _setSelectedItems: function(keys, items) {\r\n        this._selectionStrategy.setSelectedItems(keys, items)\r\n    },\r\n    onSelectionChanged: function() {\r\n        this._selectionStrategy.onSelectionChanged()\r\n    },\r\n    changeItemSelection: function(itemIndex, keys) {\r\n        var isSelectedItemsChanged;\r\n        var items = this.options.plainItems();\r\n        var item = items[itemIndex];\r\n        if (!this.isSelectable() || !this.isDataItem(item)) {\r\n            return false\r\n        }\r\n        var itemData = this.options.getItemData(item);\r\n        var itemKey = this.options.keyOf(itemData);\r\n        keys = keys || {};\r\n        if (keys.shift && \"multiple\" === this.options.mode && this._focusedItemIndex >= 0) {\r\n            isSelectedItemsChanged = this.changeItemSelectionWhenShiftKeyPressed(itemIndex, items)\r\n        } else {\r\n            if (keys.control) {\r\n                this._resetItemSelectionWhenShiftKeyPressed();\r\n                var isSelected = this._selectionStrategy.isItemDataSelected(itemData);\r\n                if (\"single\" === this.options.mode) {\r\n                    this.clearSelectedItems()\r\n                }\r\n                if (isSelected) {\r\n                    this._removeSelectedItem(itemKey)\r\n                } else {\r\n                    this._addSelectedItem(itemData, itemKey)\r\n                }\r\n                isSelectedItemsChanged = true\r\n            } else {\r\n                this._resetItemSelectionWhenShiftKeyPressed();\r\n                var isKeysEqual = this._selectionStrategy.equalKeys(this.options.selectedItemKeys[0], itemKey);\r\n                if (1 !== this.options.selectedItemKeys.length || !isKeysEqual) {\r\n                    this._setSelectedItems([itemKey], [itemData]);\r\n                    isSelectedItemsChanged = true\r\n                }\r\n            }\r\n        }\r\n        if (isSelectedItemsChanged) {\r\n            this._focusedItemIndex = itemIndex;\r\n            this.onSelectionChanged();\r\n            return true\r\n        }\r\n    },\r\n    isDataItem: function(item) {\r\n        return this.options.isSelectableItem(item)\r\n    },\r\n    isSelectable: function() {\r\n        return \"single\" === this.options.mode || \"multiple\" === this.options.mode\r\n    },\r\n    isItemDataSelected: function(data) {\r\n        return this._selectionStrategy.isItemDataSelected(data, {\r\n            checkPending: true\r\n        })\r\n    },\r\n    isItemSelected: function(arg, options) {\r\n        return this._selectionStrategy.isItemKeySelected(arg, options)\r\n    },\r\n    _resetItemSelectionWhenShiftKeyPressed: function() {\r\n        delete this._shiftFocusedItemIndex\r\n    },\r\n    _resetFocusedItemIndex: function() {\r\n        this._focusedItemIndex = -1\r\n    },\r\n    changeItemSelectionWhenShiftKeyPressed: function(itemIndex, items) {\r\n        var isSelectedItemsChanged = false;\r\n        var itemIndexStep;\r\n        var index;\r\n        var keyOf = this.options.keyOf;\r\n        var focusedItem = items[this._focusedItemIndex];\r\n        var focusedData = this.options.getItemData(focusedItem);\r\n        var focusedKey = keyOf(focusedData);\r\n        var isFocusedItemSelected = focusedItem && this.isItemDataSelected(focusedData);\r\n        if (!(0, _type.isDefined)(this._shiftFocusedItemIndex)) {\r\n            this._shiftFocusedItemIndex = this._focusedItemIndex\r\n        }\r\n        var data;\r\n        var itemKey;\r\n        if (this._shiftFocusedItemIndex !== this._focusedItemIndex) {\r\n            itemIndexStep = this._focusedItemIndex < this._shiftFocusedItemIndex ? 1 : -1;\r\n            for (index = this._focusedItemIndex; index !== this._shiftFocusedItemIndex; index += itemIndexStep) {\r\n                if (this.isDataItem(items[index])) {\r\n                    itemKey = keyOf(this.options.getItemData(items[index]));\r\n                    this._removeSelectedItem(itemKey);\r\n                    isSelectedItemsChanged = true\r\n                }\r\n            }\r\n        }\r\n        if (itemIndex !== this._shiftFocusedItemIndex) {\r\n            itemIndexStep = itemIndex < this._shiftFocusedItemIndex ? 1 : -1;\r\n            for (index = itemIndex; index !== this._shiftFocusedItemIndex; index += itemIndexStep) {\r\n                if (this.isDataItem(items[index])) {\r\n                    data = this.options.getItemData(items[index]);\r\n                    itemKey = keyOf(data);\r\n                    this._addSelectedItem(data, itemKey);\r\n                    isSelectedItemsChanged = true\r\n                }\r\n            }\r\n        }\r\n        if (this.isDataItem(focusedItem) && !isFocusedItemSelected) {\r\n            this._addSelectedItem(focusedData, focusedKey);\r\n            isSelectedItemsChanged = true\r\n        }\r\n        return isSelectedItemsChanged\r\n    },\r\n    clearSelectedItems: function() {\r\n        this._setSelectedItems([], [])\r\n    },\r\n    selectAll: function(isOnePage) {\r\n        this._resetFocusedItemIndex();\r\n        if (isOnePage) {\r\n            return this._onePageSelectAll(false)\r\n        } else {\r\n            return this.selectedItemKeys([], true, false, true)\r\n        }\r\n    },\r\n    deselectAll: function(isOnePage) {\r\n        this._resetFocusedItemIndex();\r\n        if (isOnePage) {\r\n            return this._onePageSelectAll(true)\r\n        } else {\r\n            return this.selectedItemKeys([], true, true, true)\r\n        }\r\n    },\r\n    _onePageSelectAll: function(isDeselect) {\r\n        var items = this._selectionStrategy.getSelectableItems(this.options.plainItems());\r\n        for (var i = 0; i < items.length; i++) {\r\n            var item = items[i];\r\n            if (this.isDataItem(item)) {\r\n                var itemData = this.options.getItemData(item);\r\n                var itemKey = this.options.keyOf(itemData);\r\n                var isSelected = this.isItemSelected(itemKey);\r\n                if (!isSelected && !isDeselect) {\r\n                    this._addSelectedItem(itemData, itemKey)\r\n                }\r\n                if (isSelected && isDeselect) {\r\n                    this._removeSelectedItem(itemKey)\r\n                }\r\n            }\r\n        }\r\n        this.onSelectionChanged();\r\n        return (new _deferred.Deferred).resolve()\r\n    },\r\n    getSelectAllState: function(visibleOnly) {\r\n        return this._selectionStrategy.getSelectAllState(visibleOnly)\r\n    }\r\n});\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}