{"ast":null,"code":"/**\r\n * DevExtreme (ui/date_box/ui.date_box.strategy.calendar_with_time.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _uiDate_boxStrategy = _interopRequireDefault(require(\"./ui.date_box.strategy.calendar\"));\n\nvar _ui = _interopRequireDefault(require(\"./ui.time_view\"));\n\nvar _date = _interopRequireDefault(require(\"../../localization/date\"));\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _box = _interopRequireDefault(require(\"../box\"));\n\nvar _ui2 = _interopRequireDefault(require(\"./ui.date_utils\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar window = (0, _window.getWindow)();\nvar SHRINK_VIEW_SCREEN_WIDTH = 573;\nvar DATEBOX_ADAPTIVITY_MODE_CLASS = \"dx-datebox-adaptivity-mode\";\n\nvar CalendarWithTimeStrategy = _uiDate_boxStrategy.default.inherit({\n  NAME: \"CalendarWithTime\",\n  getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      applyValueMode: \"useButtons\",\n      buttonsLocation: \"bottom after\",\n      \"dropDownOptions.showTitle\": false\n    });\n  },\n  getDisplayFormat: function (displayFormat) {\n    return displayFormat || \"shortdateshorttime\";\n  },\n  _is24HourFormat: function () {\n    return _date.default.is24HourFormat(this.getDisplayFormat(this.dateBox.option(\"displayFormat\")));\n  },\n  _getContouredValue: function () {\n    var viewDate = this.callBase();\n    return this._updateDateTime(viewDate);\n  },\n  _renderWidget: function () {\n    this.callBase();\n    this._timeView = this.dateBox._createComponent((0, _renderer.default)(\"<div>\"), _ui.default, {\n      value: this.dateBoxValue(),\n      _showClock: !this._isShrinkView(),\n      use24HourFormat: this._is24HourFormat(),\n      onValueChanged: this._valueChangedHandler.bind(this),\n      stylingMode: this.dateBox.option(\"stylingMode\")\n    });\n\n    this._timeView.registerKeyHandler(\"escape\", this._escapeHandler.bind(this));\n  },\n  renderOpenedState: function () {\n    this.callBase();\n\n    var popup = this._getPopup();\n\n    if (popup) {\n      popup._wrapper().toggleClass(DATEBOX_ADAPTIVITY_MODE_CLASS, this._isSmallScreen());\n    }\n\n    clearTimeout(this._repaintTimer);\n    this._repaintTimer = setTimeout(function () {\n      this._getPopup() && this._getPopup().repaint();\n    }.bind(this), 0);\n  },\n  isAdaptivityChanged: function () {\n    var isAdaptiveMode = this._isShrinkView();\n\n    var currentAdaptiveMode = this._currentAdaptiveMode;\n\n    if (isAdaptiveMode !== currentAdaptiveMode) {\n      this._currentAdaptiveMode = isAdaptiveMode;\n      return void 0 !== currentAdaptiveMode;\n    }\n\n    return this.callBase();\n  },\n  _updateValue: function (preventDefaultValue) {\n    var date = this.dateBoxValue();\n\n    if (!date && !preventDefaultValue) {\n      date = new Date();\n\n      _ui2.default.normalizeTime(date);\n    }\n\n    this.callBase();\n\n    if (this._timeView) {\n      date && this._timeView.option(\"value\", date);\n\n      this._timeView.option(\"use24HourFormat\", this._is24HourFormat());\n    }\n  },\n  _isSmallScreen: function () {\n    return (0, _renderer.default)(window).width() <= SHRINK_VIEW_SCREEN_WIDTH;\n  },\n  _isShrinkView: function () {\n    return !this.dateBox.option(\"showAnalogClock\") || this.dateBox.option(\"adaptivityEnabled\") && this._isSmallScreen();\n  },\n  _getBoxItems: function () {\n    var items = [{\n      ratio: 0,\n      shrink: 0,\n      baseSize: \"auto\",\n      name: \"calendar\"\n    }];\n\n    if (!this._isShrinkView()) {\n      items.push({\n        ratio: 0,\n        shrink: 0,\n        baseSize: \"auto\",\n        name: \"time\"\n      });\n    }\n\n    return items;\n  },\n  renderPopupContent: function () {\n    this.callBase();\n    this._currentAdaptiveMode = this._isShrinkView();\n\n    var $popupContent = this._getPopup().$content();\n\n    this._box = this.dateBox._createComponent((0, _renderer.default)(\"<div>\").appendTo($popupContent), _box.default, {\n      direction: \"row\",\n      crossAlign: \"start\",\n      items: this._getBoxItems(),\n      itemTemplate: function (data) {\n        var $container = (0, _renderer.default)(\"<div>\");\n\n        switch (data.name) {\n          case \"calendar\":\n            $container.append(this._widget.$element());\n\n            if (this._isShrinkView()) {\n              $container.append(this._timeView.$element());\n            }\n\n            break;\n\n          case \"time\":\n            $container.append(this._timeView.$element());\n        }\n\n        return $container;\n      }.bind(this)\n    });\n\n    this._attachTabHandler();\n  },\n  popupConfig: function (_popupConfig) {\n    var calendarPopupConfig = this.callBase(_popupConfig);\n    var result = (0, _extend.extend)(calendarPopupConfig, {\n      width: \"auto\",\n      onShowing: function () {\n        if (\"fallback\" === this._box.option(\"_layoutStrategy\")) {\n          var clockMinWidth = this._getPopup().$content().find(\".dx-timeview-clock\").css(\"minWidth\");\n\n          this._timeView.$element().css(\"maxWidth\", clockMinWidth);\n        }\n      }.bind(this)\n    });\n    return result;\n  },\n  getFirstPopupElement: function () {\n    return this._timeView._hourBox.$element().find(\"input\");\n  },\n  _attachTabHandler: function () {\n    var dateBox = this.dateBox;\n\n    var handler = function (e) {\n      if (e.shiftKey) {\n        e.preventDefault();\n        dateBox.focus();\n      }\n    };\n\n    this._timeView._hourBox.registerKeyHandler(\"tab\", handler);\n  },\n  _preventFocusOnPopup: function (e) {\n    if (!(0, _renderer.default)(e.target).hasClass(\"dx-texteditor-input\")) {\n      this.callBase.apply(this, arguments);\n\n      if (!this.dateBox._hasFocusClass()) {\n        this.dateBox.focus();\n      }\n    }\n  },\n  _updateDateTime: function (date) {\n    var time = this._timeView.option(\"value\");\n\n    date.setHours(time.getHours(), time.getMinutes(), time.getSeconds(), time.getMilliseconds());\n    return date;\n  },\n  getValue: function () {\n    var date = this._widget.option(\"value\");\n\n    date = date ? new Date(date) : new Date();\n    return this._updateDateTime(date);\n  },\n  dispose: function () {\n    clearTimeout(this._removeMinWidthTimer);\n    clearTimeout(this._repaintTimer);\n    this.callBase();\n  }\n});\n\nvar _default = CalendarWithTimeStrategy;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/node_modules/devextreme/ui/date_box/ui.date_box.strategy.calendar_with_time.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_window","_uiDate_boxStrategy","_ui","_date","_extend","_box","_ui2","obj","__esModule","window","getWindow","SHRINK_VIEW_SCREEN_WIDTH","DATEBOX_ADAPTIVITY_MODE_CLASS","CalendarWithTimeStrategy","inherit","NAME","getDefaultOptions","extend","callBase","applyValueMode","buttonsLocation","getDisplayFormat","displayFormat","_is24HourFormat","is24HourFormat","dateBox","option","_getContouredValue","viewDate","_updateDateTime","_renderWidget","_timeView","_createComponent","value","dateBoxValue","_showClock","_isShrinkView","use24HourFormat","onValueChanged","_valueChangedHandler","bind","stylingMode","registerKeyHandler","_escapeHandler","renderOpenedState","popup","_getPopup","_wrapper","toggleClass","_isSmallScreen","clearTimeout","_repaintTimer","setTimeout","repaint","isAdaptivityChanged","isAdaptiveMode","currentAdaptiveMode","_currentAdaptiveMode","_updateValue","preventDefaultValue","date","Date","normalizeTime","width","_getBoxItems","items","ratio","shrink","baseSize","name","push","renderPopupContent","$popupContent","$content","appendTo","direction","crossAlign","itemTemplate","data","$container","append","_widget","$element","_attachTabHandler","popupConfig","_popupConfig","calendarPopupConfig","result","onShowing","clockMinWidth","find","css","getFirstPopupElement","_hourBox","handler","e","shiftKey","preventDefault","focus","_preventFocusOnPopup","target","hasClass","apply","arguments","_hasFocusClass","time","setHours","getHours","getMinutes","getSeconds","getMilliseconds","getValue","dispose","_removeMinWidthTimer","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/date_box/ui.date_box.strategy.calendar_with_time.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _uiDate_boxStrategy = _interopRequireDefault(require(\"./ui.date_box.strategy.calendar\"));\r\nvar _ui = _interopRequireDefault(require(\"./ui.time_view\"));\r\nvar _date = _interopRequireDefault(require(\"../../localization/date\"));\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _box = _interopRequireDefault(require(\"../box\"));\r\nvar _ui2 = _interopRequireDefault(require(\"./ui.date_utils\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar window = (0, _window.getWindow)();\r\nvar SHRINK_VIEW_SCREEN_WIDTH = 573;\r\nvar DATEBOX_ADAPTIVITY_MODE_CLASS = \"dx-datebox-adaptivity-mode\";\r\nvar CalendarWithTimeStrategy = _uiDate_boxStrategy.default.inherit({\r\n    NAME: \"CalendarWithTime\",\r\n    getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            applyValueMode: \"useButtons\",\r\n            buttonsLocation: \"bottom after\",\r\n            \"dropDownOptions.showTitle\": false\r\n        })\r\n    },\r\n    getDisplayFormat: function(displayFormat) {\r\n        return displayFormat || \"shortdateshorttime\"\r\n    },\r\n    _is24HourFormat: function() {\r\n        return _date.default.is24HourFormat(this.getDisplayFormat(this.dateBox.option(\"displayFormat\")))\r\n    },\r\n    _getContouredValue: function() {\r\n        var viewDate = this.callBase();\r\n        return this._updateDateTime(viewDate)\r\n    },\r\n    _renderWidget: function() {\r\n        this.callBase();\r\n        this._timeView = this.dateBox._createComponent((0, _renderer.default)(\"<div>\"), _ui.default, {\r\n            value: this.dateBoxValue(),\r\n            _showClock: !this._isShrinkView(),\r\n            use24HourFormat: this._is24HourFormat(),\r\n            onValueChanged: this._valueChangedHandler.bind(this),\r\n            stylingMode: this.dateBox.option(\"stylingMode\")\r\n        });\r\n        this._timeView.registerKeyHandler(\"escape\", this._escapeHandler.bind(this))\r\n    },\r\n    renderOpenedState: function() {\r\n        this.callBase();\r\n        var popup = this._getPopup();\r\n        if (popup) {\r\n            popup._wrapper().toggleClass(DATEBOX_ADAPTIVITY_MODE_CLASS, this._isSmallScreen())\r\n        }\r\n        clearTimeout(this._repaintTimer);\r\n        this._repaintTimer = setTimeout(function() {\r\n            this._getPopup() && this._getPopup().repaint()\r\n        }.bind(this), 0)\r\n    },\r\n    isAdaptivityChanged: function() {\r\n        var isAdaptiveMode = this._isShrinkView();\r\n        var currentAdaptiveMode = this._currentAdaptiveMode;\r\n        if (isAdaptiveMode !== currentAdaptiveMode) {\r\n            this._currentAdaptiveMode = isAdaptiveMode;\r\n            return void 0 !== currentAdaptiveMode\r\n        }\r\n        return this.callBase()\r\n    },\r\n    _updateValue: function(preventDefaultValue) {\r\n        var date = this.dateBoxValue();\r\n        if (!date && !preventDefaultValue) {\r\n            date = new Date;\r\n            _ui2.default.normalizeTime(date)\r\n        }\r\n        this.callBase();\r\n        if (this._timeView) {\r\n            date && this._timeView.option(\"value\", date);\r\n            this._timeView.option(\"use24HourFormat\", this._is24HourFormat())\r\n        }\r\n    },\r\n    _isSmallScreen: function() {\r\n        return (0, _renderer.default)(window).width() <= SHRINK_VIEW_SCREEN_WIDTH\r\n    },\r\n    _isShrinkView: function() {\r\n        return !this.dateBox.option(\"showAnalogClock\") || this.dateBox.option(\"adaptivityEnabled\") && this._isSmallScreen()\r\n    },\r\n    _getBoxItems: function() {\r\n        var items = [{\r\n            ratio: 0,\r\n            shrink: 0,\r\n            baseSize: \"auto\",\r\n            name: \"calendar\"\r\n        }];\r\n        if (!this._isShrinkView()) {\r\n            items.push({\r\n                ratio: 0,\r\n                shrink: 0,\r\n                baseSize: \"auto\",\r\n                name: \"time\"\r\n            })\r\n        }\r\n        return items\r\n    },\r\n    renderPopupContent: function() {\r\n        this.callBase();\r\n        this._currentAdaptiveMode = this._isShrinkView();\r\n        var $popupContent = this._getPopup().$content();\r\n        this._box = this.dateBox._createComponent((0, _renderer.default)(\"<div>\").appendTo($popupContent), _box.default, {\r\n            direction: \"row\",\r\n            crossAlign: \"start\",\r\n            items: this._getBoxItems(),\r\n            itemTemplate: function(data) {\r\n                var $container = (0, _renderer.default)(\"<div>\");\r\n                switch (data.name) {\r\n                    case \"calendar\":\r\n                        $container.append(this._widget.$element());\r\n                        if (this._isShrinkView()) {\r\n                            $container.append(this._timeView.$element())\r\n                        }\r\n                        break;\r\n                    case \"time\":\r\n                        $container.append(this._timeView.$element())\r\n                }\r\n                return $container\r\n            }.bind(this)\r\n        });\r\n        this._attachTabHandler()\r\n    },\r\n    popupConfig: function(_popupConfig) {\r\n        var calendarPopupConfig = this.callBase(_popupConfig);\r\n        var result = (0, _extend.extend)(calendarPopupConfig, {\r\n            width: \"auto\",\r\n            onShowing: function() {\r\n                if (\"fallback\" === this._box.option(\"_layoutStrategy\")) {\r\n                    var clockMinWidth = this._getPopup().$content().find(\".dx-timeview-clock\").css(\"minWidth\");\r\n                    this._timeView.$element().css(\"maxWidth\", clockMinWidth)\r\n                }\r\n            }.bind(this)\r\n        });\r\n        return result\r\n    },\r\n    getFirstPopupElement: function() {\r\n        return this._timeView._hourBox.$element().find(\"input\")\r\n    },\r\n    _attachTabHandler: function() {\r\n        var dateBox = this.dateBox;\r\n        var handler = function(e) {\r\n            if (e.shiftKey) {\r\n                e.preventDefault();\r\n                dateBox.focus()\r\n            }\r\n        };\r\n        this._timeView._hourBox.registerKeyHandler(\"tab\", handler)\r\n    },\r\n    _preventFocusOnPopup: function(e) {\r\n        if (!(0, _renderer.default)(e.target).hasClass(\"dx-texteditor-input\")) {\r\n            this.callBase.apply(this, arguments);\r\n            if (!this.dateBox._hasFocusClass()) {\r\n                this.dateBox.focus()\r\n            }\r\n        }\r\n    },\r\n    _updateDateTime: function(date) {\r\n        var time = this._timeView.option(\"value\");\r\n        date.setHours(time.getHours(), time.getMinutes(), time.getSeconds(), time.getMilliseconds());\r\n        return date\r\n    },\r\n    getValue: function() {\r\n        var date = this._widget.option(\"value\");\r\n        date = date ? new Date(date) : new Date;\r\n        return this._updateDateTime(date)\r\n    },\r\n    dispose: function() {\r\n        clearTimeout(this._removeMinWidthTimer);\r\n        clearTimeout(this._repaintTimer);\r\n        this.callBase()\r\n    }\r\n});\r\nvar _default = CalendarWithTimeStrategy;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}